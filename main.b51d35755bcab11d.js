"use strict";(self.webpackChunkwebRTCDemo=self.webpackChunkwebRTCDemo||[]).push([[179],{6304:(at,Ce,P)=>{P.d(Ce,{Dh:()=>Me,GT:()=>fe,cc:()=>Te,hO:()=>Le,on:()=>L,pX:()=>ne,xv:()=>ue});var f=P(5879),Y=P(120),k=P(2793);at=P.hmd(at);const Q=["ngOnDestroy"],ne=(Re,ct,lt,re={})=>new Proxy(Re,{get:(_e,ee)=>lt.runOutsideAngular(()=>{var Ee;if(Re[ee])return!(null===(Ee=re?.spy)||void 0===Ee)&&Ee.get&&re.spy.get(ee,Re[ee]),Re[ee];if(Q.indexOf(ee)>-1)return()=>{};const Pe=ct.toPromise().then(oe=>{const q=oe&&oe[ee];return"function"==typeof q?q.bind(oe):q&&q.then?q.then(je=>lt.run(()=>je)):lt.run(()=>q)});return new Proxy(()=>{},{get:(oe,q)=>Pe[q],apply:(oe,q,je)=>Pe.then(dt=>{var Yt;const cn=dt&&dt(...je);return!(null===(Yt=re?.spy)||void 0===Yt)&&Yt.apply&&re.spy.apply(ee,je,cn),cn})})})}),fe=(Re,ct)=>{ct.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(re=>{Object.defineProperty(Re.prototype,re,Object.getOwnPropertyDescriptor(lt.prototype||lt,re))})})};class pe{constructor(ct){return ct}}const Me=new f.OlP("angularfire2.app.options"),ue=new f.OlP("angularfire2.app.name");function L(Re,ct,lt){const _e="object"==typeof lt&&lt||{};_e.name=_e.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ee=Y.Z.apps.filter(Pe=>Pe&&Pe.name===_e.name)[0]||ct.runOutsideAngular(()=>Y.Z.initializeApp(Re,_e));try{JSON.stringify(Re)!==JSON.stringify(Ee.options)&&j("error",`${Ee.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ee)}const j=(Re,...ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Re](...ct)},J={provide:pe,useFactory:L,deps:[Me,f.R0b,[new f.FiY,ue]]};let Le=(()=>{class Re{constructor(lt){Y.Z.registerVersion("angularfire",k.q4.full,"core"),Y.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Y.Z.registerVersion("angular",f.q4F.full,lt.toString())}static initializeApp(lt,re){return{ngModule:Re,providers:[{provide:Me,useValue:lt},{provide:ue,useValue:re}]}}}return Re.\u0275fac=function(lt){return new(lt||Re)(f.LFG(f.Lbi))},Re.\u0275mod=f.oAB({type:Re}),Re.\u0275inj=f.cJS({providers:[J]}),Re})();function Te(Re,ct,lt,re,_e){const[,ee,Ee]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Re)||[];if(ee)return function qe(Re,ct){try{return Re.toString()===ct.toString()}catch{return Re===ct}}(_e,Ee)||(We("error",`${ct} was already initialized on the ${lt} Firebase App with different settings.${Ne?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:_e,was:Ee})),ee;{const Pe=re();return globalThis.\u0275AngularfireInstanceCache.push([Re,Pe,_e]),Pe}}const Ne=!!at.hot,We=(Re,...ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Re](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(at,Ce,P)=>{P.d(Ce,{q4:()=>ji,iC:()=>zl,HU:()=>Hl,vb:()=>wa,JM:()=>So});var f=P(5879),Y=P(4097),k=P(5861),Q=P(4303),ne=P(9058),fe=P(4537),pe=P(7879);const Me=(I,C)=>C.some(A=>I instanceof A);let ue,L;const Le=new WeakMap,Te=new WeakMap,qe=new WeakMap,Ne=new WeakMap,We=new WeakMap;let lt={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return Te.get(I);if("objectStoreNames"===C)return I.objectStoreNames||qe.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ee(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ee(I){return"function"==typeof I?function _e(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(Pe(this),C),Ee(Le.get(this))}:function(...C){return Ee(I.apply(Pe(this),C))}:function(C,...A){const O=I.call(Pe(this),C,...A);return qe.set(O,C.sort?C.sort():[C]),Ee(O)}}(I):(I instanceof IDBTransaction&&function ct(I){if(Te.has(I))return;const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("complete",K),I.removeEventListener("error",le),I.removeEventListener("abort",le)},K=()=>{A(),G()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),G()};I.addEventListener("complete",K),I.addEventListener("error",le),I.addEventListener("abort",le)});Te.set(I,C)}(I),Me(I,function j(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,lt):I)}function Ee(I){if(I instanceof IDBRequest)return function Re(I){const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("success",K),I.removeEventListener("error",le)},K=()=>{A(Ee(I.result)),G()},le=()=>{O(I.error),G()};I.addEventListener("success",K),I.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&Le.set(A,I)}).catch(()=>{}),We.set(C,I),C}(I);if(Ne.has(I))return Ne.get(I);const C=ee(I);return C!==I&&(Ne.set(I,C),We.set(C,I)),C}const Pe=I=>We.get(I),je=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],Yt=new Map;function cn(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Yt.get(C))return Yt.get(C);const A=C.replace(/FromIndex$/,""),O=C!==A,G=dt.includes(A);if(!(A in(O?IDBIndex:IDBObjectStore).prototype)||!G&&!je.includes(A))return;const K=function(){var le=(0,k.Z)(function*(Qe,...ze){const ot=this.transaction(Qe,G?"readwrite":"readonly");let xt=ot.store;return O&&(xt=xt.index(ze.shift())),(yield Promise.all([xt[A](...ze),G&&ot.done]))[0]});return function(ze){return le.apply(this,arguments)}}();return Yt.set(C,K),K}!function re(I){lt=I(lt)}(I=>({...I,get:(C,A,O)=>cn(C,A)||I.get(C,A,O),has:(C,A)=>!!cn(C,A)||I.has(C,A)}));const ln="@firebase/installations",Mn="0.6.4",Cn=1e4,sr=`w:${Mn}`,ie="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",he=36e5,Ke=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function xn({projectId:I}){return`${de}/projects/${I}/installations`}function yt(I){return{token:I.token,requestStatus:2,expiresIn:Ar(I.expiresIn),creationTime:Date.now()}}function qt(I,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,k.Z)(function*(I,C){const O=(yield C.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function dn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Gn(I){return sn.apply(this,arguments)}function sn(){return(sn=(0,k.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function Ar(I){return Number(I.replace("s","000"))}function Vn(){return(Vn=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:A}){const O=xn(I),G=dn(I),K=C.getImmediate({optional:!0});if(K){const ot=yield K.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const Qe={method:"POST",headers:G,body:JSON.stringify({fid:A,authVersion:ie,appId:I.appId,sdkVersion:sr})},ze=yield Gn(()=>fetch(O,Qe));if(ze.ok){const ot=yield ze.json();return{fid:ot.fid||A,registrationStatus:2,refreshToken:ot.refreshToken,authToken:yt(ot.authToken)}}throw yield qt("Create Installation",ze)})).apply(this,arguments)}function Yr(I){return new Promise(C=>{setTimeout(C,I)})}const to=/^[cdef][\w-]{21}$/,_t="";function bt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const A=function Nt(I){return function hs(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return to.test(A)?A:_t}catch{return _t}}function un(I){return`${I.appName}!${I.appId}`}const _n=new Map;function zn(I,C){const A=un(I);fs(A,C),function Wt(I,C){const A=function Zt(){return!Mr&&"BroadcastChannel"in self&&(Mr=new BroadcastChannel("[Firebase] FID Change"),Mr.onmessage=I=>{fs(I.data.key,I.data.fid)}),Mr}();A&&A.postMessage({key:I,fid:C}),function hi(){0===_n.size&&Mr&&(Mr.close(),Mr=null)}()}(A,C)}function fs(I,C){const A=_n.get(I);if(A)for(const O of A)O(C)}let Mr=null;const ps="firebase-installations-database",Vs=1,xr="firebase-installations-store";let Ji=null;function ye(){return Ji||(Ji=function oe(I,C,{blocked:A,upgrade:O,blocking:G,terminated:K}={}){const le=indexedDB.open(I,C),Qe=Ee(le);return O&&le.addEventListener("upgradeneeded",ze=>{O(Ee(le.result),ze.oldVersion,ze.newVersion,Ee(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),Qe.then(ze=>{K&&ze.addEventListener("close",()=>K()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Qe}(ps,Vs,{upgrade:(I,C)=>{0===C&&I.createObjectStore(xr)}})),Ji}function H(I,C){return ge.apply(this,arguments)}function ge(){return(ge=(0,k.Z)(function*(I,C){const A=un(I),G=(yield ye()).transaction(xr,"readwrite"),K=G.objectStore(xr),le=yield K.get(A);return yield K.put(C,A),yield G.done,(!le||le.fid!==C.fid)&&zn(I,C.fid),C})).apply(this,arguments)}function $e(I){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,k.Z)(function*(I){const C=un(I),O=(yield ye()).transaction(xr,"readwrite");yield O.objectStore(xr).delete(C),yield O.done})).apply(this,arguments)}function ht(I,C){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,k.Z)(function*(I,C){const A=un(I),G=(yield ye()).transaction(xr,"readwrite"),K=G.objectStore(xr),le=yield K.get(A),Qe=C(le);return void 0===Qe?yield K.delete(A):yield K.put(Qe,A),yield G.done,Qe&&(!le||le.fid!==Qe.fid)&&zn(I,Qe.fid),Qe})).apply(this,arguments)}function U(I){return V.apply(this,arguments)}function V(){return V=(0,k.Z)(function*(I){let C;const A=yield ht(I.appConfig,O=>{const G=function W(I){return Pt(I||{fid:bt(),registrationStatus:0})}(O),K=function De(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ke.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},O=function ae(I,C){return nt.apply(this,arguments)}(I,A);return{installationEntry:A,registrationPromise:O}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Rt(I)}:{installationEntry:C}}(I,G);return C=K.registrationPromise,K.installationEntry});return A.fid===_t?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),V.apply(this,arguments)}function nt(){return nt=(0,k.Z)(function*(I,C){try{const A=yield function di(I,C){return Vn.apply(this,arguments)}(I,C);return H(I.appConfig,A)}catch(A){throw Ge(A)&&409===A.customData.serverCode?yield $e(I.appConfig):yield H(I.appConfig,{fid:C.fid,registrationStatus:0}),A}}),nt.apply(this,arguments)}function Rt(I){return St.apply(this,arguments)}function St(){return(St=(0,k.Z)(function*(I){let C=yield Nr(I.appConfig);for(;1===C.registrationStatus;)yield Yr(100),C=yield Nr(I.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:O}=yield U(I);return O||A}return C})).apply(this,arguments)}function Nr(I){return ht(I,C=>{if(!C)throw Ke.create("installation-not-found");return Pt(C)})}function Pt(I){return function qn(I){return 1===I.registrationStatus&&I.registrationTime+Cn<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function mr(){return(mr=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:C},A){const O=function Us(I,{fid:C}){return`${xn(I)}/${C}/authTokens:generate`}(I,A),G=function mn(I,{refreshToken:C}){const A=dn(I);return A.append("Authorization",function Kr(I){return`${ie} ${I}`}(C)),A}(I,A),K=C.getImmediate({optional:!0});if(K){const ot=yield K.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const Qe={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:sr,appId:I.appId}})},ze=yield Gn(()=>fetch(O,Qe));if(ze.ok)return yt(yield ze.json());throw yield qt("Generate Auth Token",ze)})).apply(this,arguments)}function Ko(I){return cl.apply(this,arguments)}function cl(){return cl=(0,k.Z)(function*(I,C=!1){let A;const O=yield ht(I.appConfig,K=>{if(!js(K))throw Ke.create("not-registered");const le=K.authToken;if(!C&&function Yo(I){return 2===I.requestStatus&&!function Ka(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+he}(I)}(le))return K;if(1===le.requestStatus)return A=function Xi(I,C){return Bs.apply(this,arguments)}(I,C),K;{if(!navigator.onLine)throw Ke.create("app-offline");const Qe=function Ud(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}(K);return A=function Fi(I,C){return Gt.apply(this,arguments)}(I,Qe),Qe}});return A?yield A:O.authToken}),cl.apply(this,arguments)}function Bs(){return(Bs=(0,k.Z)(function*(I,C){let A=yield ki(I.appConfig);for(;1===A.authToken.requestStatus;)yield Yr(100),A=yield ki(I.appConfig);const O=A.authToken;return 0===O.requestStatus?Ko(I,C):O})).apply(this,arguments)}function ki(I){return ht(I,C=>{if(!js(C))throw Ke.create("not-registered");return function es(I){return 1===I.requestStatus&&I.requestTime+Cn<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Gt(){return Gt=(0,k.Z)(function*(I,C){try{const A=yield function Kt(I,C){return mr.apply(this,arguments)}(I,C),O=Object.assign(Object.assign({},C),{authToken:A});return yield H(I.appConfig,O),A}catch(A){if(!Ge(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const O=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield H(I.appConfig,O)}else yield $e(I.appConfig);throw A}}),Gt.apply(this,arguments)}function js(I){return void 0!==I&&2===I.registrationStatus}function Jo(){return(Jo=(0,k.Z)(function*(I){const C=I,{installationEntry:A,registrationPromise:O}=yield U(C);return O?O.catch(console.error):Ko(C).catch(console.error),A.fid})).apply(this,arguments)}function Ya(){return Ya=(0,k.Z)(function*(I,C=!1){const A=I;return yield function dl(I){return bi.apply(this,arguments)}(A),(yield Ko(A,C)).token}),Ya.apply(this,arguments)}function bi(){return(bi=(0,k.Z)(function*(I){const{registrationPromise:C}=yield U(I);C&&(yield C)})).apply(this,arguments)}function ea(I){return Ke.create("missing-app-config-values",{valueName:I})}const fl="installations",rm=I=>{const C=I.getProvider("app").getImmediate(),A=function Qr(I){if(!I||!I.options)throw ea("App Configuration");if(!I.name)throw ea("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!I.options[A])throw ea(A);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,Q.qX)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ro=I=>{const C=I.getProvider("app").getImmediate(),A=(0,Q.qX)(C,fl).getImmediate();return{getId:()=>function Qo(I){return Jo.apply(this,arguments)}(A),getToken:G=>function ll(I){return Ya.apply(this,arguments)}(A,G)}};(function Kf(){(0,Q.Xd)(new fe.wA(fl,rm,"PUBLIC")),(0,Q.Xd)(new fe.wA("installations-internal",ro,"PRIVATE"))})(),(0,Q.KN)(ln,Mn),(0,Q.KN)(ln,Mn,"esm2017");const Ja="@firebase/remote-config",Rr=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wt{constructor(C,A,O,G){this.client=C,this.storage=A,this.storageCache=O,this.logger=G}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-A,G=O<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${G}.`),G}fetch(C){var A=this;return(0,k.Z)(function*(){const[O,G]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(G&&A.isCachedDataFresh(C.cacheMaxAgeMillis,O))return G;C.eTag=G&&G.eTag;const K=yield A.client.fetch(C),le=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&le.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(le),K})()}}function En(I=navigator){return I.languages&&I.languages[0]||I.language}class Hr{constructor(C,A,O,G,K,le){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=O,this.projectId=G,this.apiKey=K,this.appId=le}fetch(C){var A=this;return(0,k.Z)(function*(){const[O,G]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ze={sdk_version:A.sdkVersion,app_instance_id:O,app_instance_id_token:G,app_id:A.appId,language_code:En()},ot={method:"POST",headers:Qe,body:JSON.stringify(ze)},xt=fetch(le,ot),At=new Promise((fr,os)=>{C.signal.addEventListener(()=>{const oi=new Error("The operation was aborted.");oi.name="AbortError",os(oi)})});let Bn;try{yield Promise.race([xt,At]),Bn=yield xt}catch(fr){let os="fetch-client-network";throw"AbortError"===fr?.name&&(os="fetch-timeout"),Rr.create(os,{originalErrorMessage:fr?.message})}let Zn=Bn.status;const Ds=Bn.headers.get("ETag")||void 0;let jn,Cs;if(200===Bn.status){let fr;try{fr=yield Bn.json()}catch(os){throw Rr.create("fetch-client-parse",{originalErrorMessage:os?.message})}jn=fr.entries,Cs=fr.state}if("INSTANCE_STATE_UNSPECIFIED"===Cs?Zn=500:"NO_CHANGE"===Cs?Zn=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(jn={}),304!==Zn&&200!==Zn)throw Rr.create("fetch-status",{httpStatus:Zn});return{status:Zn,eTag:Ds,config:jn}})()}}class eu{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,k.Z)(function*(){const O=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,O)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:O}){var G=this;return(0,k.Z)(function*(){yield function io(I,C){return new Promise((A,O)=>{const G=Math.max(C-Date.now(),0),K=setTimeout(A,G);I.addEventListener(()=>{clearTimeout(K),O(Rr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const K=yield G.client.fetch(C);return yield G.storage.deleteThrottleMetadata(),K}catch(K){if(!function yr(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const le={throttleEndTimeMillis:Date.now()+(0,ne.$s)(O),backoffCount:O+1};return yield G.storage.setThrottleMetadata(le),G.attemptFetch(C,le)}})()}}class ra{constructor(C,A,O,G,K){this.app=C,this._client=A,this._storageCache=O,this._storage=G,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function It(I,C){const A=I.target.error||void 0;return Rr.create(C,{originalErrorMessage:A&&A?.message})}const vr="app_namespace_store";class yl{constructor(C,A,O,G=function In(){return new Promise((I,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=O=>{C(It(O,"storage-open"))},A.onsuccess=O=>{I(O.target.result)},A.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(vr,{keyPath:"compositeKey"})}}catch(A){C(Rr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=O,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((G,K)=>{const Qe=O.transaction([vr],"readonly").objectStore(vr),ze=A.createCompositeKey(C);try{const ot=Qe.get(ze);ot.onerror=xt=>{K(It(xt,"storage-get"))},ot.onsuccess=xt=>{const At=xt.target.result;G(At?At.value:void 0)}}catch(ot){K(Rr.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(C,A){var O=this;return(0,k.Z)(function*(){const G=yield O.openDbPromise;return new Promise((K,le)=>{const ze=G.transaction([vr],"readwrite").objectStore(vr),ot=O.createCompositeKey(C);try{const xt=ze.put({compositeKey:ot,value:A});xt.onerror=At=>{le(It(At,"storage-set"))},xt.onsuccess=()=>{K()}}catch(xt){le(Rr.create("storage-set",{originalErrorMessage:xt?.message}))}})})()}delete(C){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((G,K)=>{const Qe=O.transaction([vr],"readwrite").objectStore(vr),ze=A.createCompositeKey(C);try{const ot=Qe.delete(ze);ot.onerror=xt=>{K(It(xt,"storage-delete"))},ot.onsuccess=()=>{G()}}catch(ot){K(Rr.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class so{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const A=C.storage.getLastFetchStatus(),O=C.storage.getLastSuccessfulFetchTimestampMillis(),G=C.storage.getActiveConfig(),K=yield A;K&&(C.lastFetchStatus=K);const le=yield O;le&&(C.lastSuccessfulFetchTimestampMillis=le);const Qe=yield G;Qe&&(C.activeConfig=Qe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Hs(){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function or(){(0,Q.Xd)(new fe.wA("remote-config",function I(C,{instanceIdentifier:A}){const O=C.getProvider("app").getImmediate(),G=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rr.create("registration-window");if(!(0,ne.hl)())throw Rr.create("indexed-db-unavailable");const{projectId:K,apiKey:le,appId:Qe}=O.options;if(!K)throw Rr.create("registration-project-id");if(!le)throw Rr.create("registration-api-key");if(!Qe)throw Rr.create("registration-app-id");const ze=new yl(Qe,O.name,A=A||"firebase"),ot=new so(ze),xt=new pe.Yd(Ja);xt.logLevel=pe.in.ERROR;const At=new Hr(G,Q.Jn,A,K,le,Qe),Bn=new eu(At,ze),Zn=new wt(Bn,ze,ot,xt),Ds=new ra(O,Zn,ot,ze,xt);return function jr(I){const C=(0,ne.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ds),Ds},"PUBLIC").setMultipleInstances(!0)),(0,Q.KN)(Ja,"0.4.4"),(0,Q.KN)(Ja,"0.4.4","esm2017")}();const tu=(I,C)=>C.some(A=>I instanceof A);let Gs,Ft;const Wu=new WeakMap,ar=new WeakMap,oo=new WeakMap,ur=new WeakMap,zs=new WeakMap;let cr={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return ar.get(I);if("objectStoreNames"===C)return I.objectStoreNames||oo.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return fi(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ao(I){return"function"==typeof I?function Zu(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ia(){return Ft||(Ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(Jr(this),C),fi(Wu.get(this))}:function(...C){return fi(I.apply(Jr(this),C))}:function(C,...A){const O=I.call(Jr(this),C,...A);return oo.set(O,C.sort?C.sort():[C]),fi(O)}}(I):(I instanceof IDBTransaction&&function Jf(I){if(ar.has(I))return;const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("complete",K),I.removeEventListener("error",le),I.removeEventListener("abort",le)},K=()=>{A(),G()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),G()};I.addEventListener("complete",K),I.addEventListener("error",le),I.addEventListener("abort",le)});ar.set(I,C)}(I),tu(I,function im(){return Gs||(Gs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,cr):I)}function fi(I){if(I instanceof IDBRequest)return function _r(I){const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("success",K),I.removeEventListener("error",le)},K=()=>{A(fi(I.result)),G()},le=()=>{O(I.error),G()};I.addEventListener("success",K),I.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&Wu.set(A,I)}).catch(()=>{}),zs.set(C,I),C}(I);if(ur.has(I))return ur.get(I);const C=ao(I);return C!==I&&(ur.set(I,C),zs.set(C,I)),C}const Jr=I=>zs.get(I);function sa(I,C,{blocked:A,upgrade:O,blocking:G,terminated:K}={}){const le=indexedDB.open(I,C),Qe=fi(le);return O&&le.addEventListener("upgradeneeded",ze=>{O(fi(le.result),ze.oldVersion,ze.newVersion,fi(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),Qe.then(ze=>{K&&ze.addEventListener("close",()=>K()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Qe}function oa(I,{blocked:C}={}){const A=indexedDB.deleteDatabase(I);return C&&A.addEventListener("blocked",()=>C()),fi(A).then(()=>{})}const vl=["get","getKey","getAll","getAllKeys","count"],sm=["put","add","delete","clear"],Ku=new Map;function _l(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Ku.get(C))return Ku.get(C);const A=C.replace(/FromIndex$/,""),O=C!==A,G=sm.includes(A);if(!(A in(O?IDBIndex:IDBObjectStore).prototype)||!G&&!vl.includes(A))return;const K=function(){var le=(0,k.Z)(function*(Qe,...ze){const ot=this.transaction(Qe,G?"readwrite":"readonly");let xt=ot.store;return O&&(xt=xt.index(ze.shift())),(yield Promise.all([xt[A](...ze),G&&ot.done]))[0]});return function(ze){return le.apply(this,arguments)}}();return Ku.set(C,K),K}!function Or(I){cr=I(cr)}(I=>({...I,get:(C,A,O)=>_l(C,A)||I.get(C,A,O),has:(C,A)=>!!_l(C,A)||I.has(C,A)}));const Gd="/firebase-messaging-sw.js",wl="/firebase-cloud-messaging-push-scope",zd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",om="https://fcmregistrations.googleapis.com/v1",Dn="google.c.a.c_id",am="google.c.a.c_l",Xf="google.c.a.ts";var qd=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(qd||{});function _s(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function El(I){const A=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(A),G=new Uint8Array(O.length);for(let K=0;K<O.length;++K)G[K]=O.charCodeAt(K);return G}const aa="fcm_token_details_db",Il=5,nu="fcm_token_object_Store";function ru(){return ru=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(aa))return null;let C=null;return(yield sa(aa,Il,{upgrade:(O=(0,k.Z)(function*(G,K,le,Qe){var ze;if(K<2||!G.objectStoreNames.contains(nu))return;const ot=Qe.objectStore(nu),xt=yield ot.index("fcmSenderId").get(I);if(yield ot.clear(),xt)if(2===K){const At=xt;if(!At.auth||!At.p256dh||!At.endpoint)return;C={token:At.fcmToken,createTime:null!==(ze=At.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:_s(At.vapidKey)}}}else if(3===K){const At=xt;C={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:_s(At.auth),p256dh:_s(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:_s(At.vapidKey)}}}else if(4===K){const At=xt;C={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:_s(At.auth),p256dh:_s(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:_s(At.vapidKey)}}}}),function(K,le,Qe,ze){return O.apply(this,arguments)})})).close(),yield oa(aa),yield oa("fcm_vapid_details_db"),yield oa("undefined"),function uo(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var O}),ru.apply(this,arguments)}const ts="firebase-messaging-database",Wd=1,Mi="firebase-messaging-store";let er=null;function co(){return er||(er=sa(ts,Wd,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Mi)}})),er}function Xr(I){return lo.apply(this,arguments)}function lo(){return lo=(0,k.Z)(function*(I){const C=su(I),O=yield(yield co()).transaction(Mi).objectStore(Mi).get(C);if(O)return O;{const G=yield function Yv(I){return ru.apply(this,arguments)}(I.appConfig.senderId);if(G)return yield Dl(I,G),G}}),lo.apply(this,arguments)}function Dl(I,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,k.Z)(function*(I,C){const A=su(I),G=(yield co()).transaction(Mi,"readwrite");return yield G.objectStore(Mi).put(C,A),yield G.done,C})).apply(this,arguments)}function ua(){return(ua=(0,k.Z)(function*(I){const C=su(I),O=(yield co()).transaction(Mi,"readwrite");yield O.objectStore(Mi).delete(C),yield O.done})).apply(this,arguments)}function su({appConfig:I}){return I.appId}const lr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cl(I,C){return bl.apply(this,arguments)}function bl(){return(bl=(0,k.Z)(function*(I,C){const A=yield Yd(I),O=um(C),G={method:"POST",headers:A,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(au(I.appConfig),G)).json()}catch(le){throw lr.create("token-subscribe-failed",{errorInfo:le?.toString()})}if(K.error)throw lr.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw lr.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function ou(){return(ou=(0,k.Z)(function*(I,C){const A=yield Yd(I),O=um(C.subscriptionOptions),G={method:"PATCH",headers:A,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(`${au(I.appConfig)}/${C.token}`,G)).json()}catch(le){throw lr.create("token-update-failed",{errorInfo:le?.toString()})}if(K.error)throw lr.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw lr.create("token-update-no-token");return K.token})).apply(this,arguments)}function ho(I,C){return qs.apply(this,arguments)}function qs(){return(qs=(0,k.Z)(function*(I,C){const O={method:"DELETE",headers:yield Yd(I)};try{const K=yield(yield fetch(`${au(I.appConfig)}/${C}`,O)).json();if(K.error)throw lr.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(G){throw lr.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function au({projectId:I}){return`${om}/projects/${I}/registrations`}function Yd(I){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,k.Z)(function*({appConfig:I,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function um({p256dh:I,auth:C,endpoint:A,vapidKey:O}){const G={web:{endpoint:A,auth:C,p256dh:I}};return O!==zd&&(G.web.applicationPubKey=O),G}const Qd=6048e5;function Sl(){return Sl=(0,k.Z)(function*(I){const C=yield function uu(I,C){return Al.apply(this,arguments)}(I.swRegistration,I.vapidKey),A={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:_s(C.getKey("auth")),p256dh:_s(C.getKey("p256dh"))},O=yield Xr(I.firebaseDependencies);if(O){if(function Xd(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}(O.subscriptionOptions,A))return Date.now()>=O.createTime+Qd?function tp(I,C){return ca.apply(this,arguments)}(I,{token:O.token,createTime:Date.now(),subscriptionOptions:A}):O.token;try{yield ho(I.firebaseDependencies,O.token)}catch(G){console.warn(G)}return lm(I.firebaseDependencies,A)}return lm(I.firebaseDependencies,A)}),Sl.apply(this,arguments)}function Qu(){return Qu=(0,k.Z)(function*(I){const C=yield Xr(I.firebaseDependencies);C&&(yield ho(I.firebaseDependencies,C.token),yield function Zd(I){return ua.apply(this,arguments)}(I.firebaseDependencies));const A=yield I.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Qu.apply(this,arguments)}function ca(){return ca=(0,k.Z)(function*(I,C){try{const A=yield function Tl(I,C){return ou.apply(this,arguments)}(I.firebaseDependencies,C),O=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield Dl(I.firebaseDependencies,O),A}catch(A){throw yield function Jd(I){return Qu.apply(this,arguments)}(I),A}}),ca.apply(this,arguments)}function lm(I,C){return la.apply(this,arguments)}function la(){return(la=(0,k.Z)(function*(I,C){const O={token:yield Cl(I,C),createTime:Date.now(),subscriptionOptions:C};return yield Dl(I,O),O.token})).apply(this,arguments)}function Al(){return(Al=(0,k.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:El(C)})})).apply(this,arguments)}function Ju(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function cu(I,C){if(!C.notification)return;I.notification={};const A=C.notification.title;A&&(I.notification.title=A);const O=C.notification.body;O&&(I.notification.body=O);const G=C.notification.image;G&&(I.notification.image=G);const K=C.notification.icon;K&&(I.notification.icon=K)}(C,I),function np(I,C){C.data&&(I.data=C.data)}(C,I),function Ml(I,C){var A,O,G,K,le;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;I.fcmOptions={};const Qe=null!==(G=null===(O=C.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==G?G:null===(K=C.notification)||void 0===K?void 0:K.click_action;Qe&&(I.fcmOptions.link=Qe);const ze=null===(le=C.fcmOptions)||void 0===le?void 0:le.analytics_label;ze&&(I.fcmOptions.analyticsLabel=ze)}(C,I),C}function xl(I,C){const A=[];for(let O=0;O<I.length;O++)A.push(I.charAt(O)),O<C.length&&A.push(C.charAt(O));return A.join("")}function Nl(I){return lr.create("missing-app-config-values",{valueName:I})}xl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ip{constructor(C,A,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function rp(I){if(!I||!I.options)throw Nl("App Configuration Object");if(!I.name)throw Nl("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=I;for(const O of C)if(!A[O])throw Nl(O);return{appName:I.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:G,installations:A,analyticsProvider:O}}_delete(){return Promise.resolve()}}function lu(){return(lu=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Gd,{scope:wl}),I.swRegistration.update().catch(()=>{})}catch(C){throw lr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function fo(){return(fo=(0,k.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield function Xu(I){return lu.apply(this,arguments)}(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw lr.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function po(){return(po=(0,k.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=zd)})).apply(this,arguments)}function du(){return du=(0,k.Z)(function*(I,C){if(!navigator)throw lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lr.create("permission-blocked");return yield function ns(I,C){return po.apply(this,arguments)}(I,C?.vapidKey),yield function sp(I,C){return fo.apply(this,arguments)}(I,C?.serviceWorkerRegistration),function cm(I){return Sl.apply(this,arguments)}(I)}),du.apply(this,arguments)}function Li(){return(Li=(0,k.Z)(function*(I,C,A){const O=function th(I){switch(I){case qd.NOTIFICATION_CLICKED:return"notification_open";case qd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:A[Dn],message_name:A[am],message_time:A[Xf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nn(){return nn=(0,k.Z)(function*(I,C){const A=C.data;if(!A.isFirebaseMessaging)return;I.onMessageHandler&&A.messageType===qd.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ju(A)):I.onMessageHandler.next(Ju(A)));const O=A.data;(function dm(I){return"object"==typeof I&&!!I&&Dn in I})(O)&&"1"===O["google.c.a.e"]&&(yield function op(I,C,A){return Li.apply(this,arguments)}(I,A.messageType,O))}),nn.apply(this,arguments)}const go="@firebase/messaging",wr=I=>{const C=new ip(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function nh(I,C){return nn.apply(this,arguments)}(C,A)),C},ap=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:O=>function eh(I,C){return du.apply(this,arguments)}(C,O)}};function yo(){return Er.apply(this,arguments)}function Er(){return(Er=(0,k.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rl(){(0,Q.Xd)(new fe.wA("messaging",wr,"PUBLIC")),(0,Q.Xd)(new fe.wA("messaging-internal",ap,"PRIVATE")),(0,Q.KN)(go,"0.12.4"),(0,Q.KN)(go,"0.12.4","esm2017")}();const yn="analytics",fm="firebase_id",Dt="origin",rh=6e4,ih="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tc="https://www.googletagmanager.com/gtag/js",dr=new pe.Yd("@firebase/analytics"),Ir=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rs(I){if(!I.startsWith(tc)){const C=Ir.create("invalid-gtag-resource",{gtagURL:I});return dr.warn(C.message),""}return I}function Pl(I){return Promise.all(I.map(C=>C.catch(A=>A)))}function Ae(){return(Ae=(0,k.Z)(function*(I,C,A,O,G,K){const le=O[G];try{if(le)yield C[le];else{const ze=(yield Pl(A)).find(ot=>ot.measurementId===G);ze&&(yield C[ze.appId])}}catch(Qe){dr.error(Qe)}I("config",G,K)})).apply(this,arguments)}function Vi(){return(Vi=(0,k.Z)(function*(I,C,A,O,G){try{let K=[];if(G&&G.send_to){let le=G.send_to;Array.isArray(le)||(le=[le]);const Qe=yield Pl(A);for(const ze of le){const ot=Qe.find(At=>At.measurementId===ze),xt=ot&&C[ot.appId];if(!xt){K=[];break}K.push(xt)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),I("event",O,G||{})}catch(K){dr.error(K)}})).apply(this,arguments)}const ha=30,Fl=new class vo{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function dp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ll(){return(Ll=(0,k.Z)(function*(I){var C;const{appId:A,apiKey:O}=I,G={method:"GET",headers:dp(O)},K=ih.replace("{app-id}",A),le=yield fetch(K,G);if(200!==le.status&&304!==le.status){let Qe="";try{const ze=yield le.json();null!==(C=ze.error)&&void 0!==C&&C.message&&(Qe=ze.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:le.status,responseMessage:Qe})}return le.json()})).apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*(I,C=Fl,A){const{appId:O,apiKey:G,measurementId:K}=I.options;if(!O)throw Ir.create("no-app-id");if(!G){if(K)return{measurementId:K,appId:O};throw Ir.create("no-api-key")}const le=C.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new uh;return setTimeout((0,k.Z)(function*(){Qe.abort()}),void 0!==A?A:rh),oh({appId:O,apiKey:G,measurementId:K},le,Qe,C)})).apply(this,arguments)}function oh(I,C,A){return _o.apply(this,arguments)}function _o(){return _o=(0,k.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:A},O,G=Fl){var K;const{appId:le,measurementId:Qe}=I;try{yield function Zs(I,C){return new Promise((A,O)=>{const G=Math.max(C-Date.now(),0),K=setTimeout(A,G);I.addEventListener(()=>{clearTimeout(K),O(Ir.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(O,C)}catch(ze){if(Qe)return dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:le,measurementId:Qe};throw ze}try{const ze=yield function Qv(I){return Ll.apply(this,arguments)}(I);return G.deleteThrottleMetadata(le),ze}catch(ze){const ot=ze;if(!function ah(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ot)){if(G.deleteThrottleMetadata(le),Qe)return dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:le,measurementId:Qe};throw ze}const xt=503===Number(null===(K=ot?.customData)||void 0===K?void 0:K.httpStatus)?(0,ne.$s)(A,G.intervalMillis,ha):(0,ne.$s)(A,G.intervalMillis),At={throttleEndTimeMillis:Date.now()+xt,backoffCount:A+1};return G.setThrottleMetadata(le,At),dr.debug(`Calling attemptFetch again in ${xt} millis`),oh(I,At,O,G)}}),_o.apply(this,arguments)}class uh{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let oc,zr;function ac(){return(ac=(0,k.Z)(function*(I,C,A,O,G){if(G&&G.global)I("event",A,O);else{const K=yield C;I("event",A,Object.assign(Object.assign({},O),{send_to:K}))}})).apply(this,arguments)}function ws(){return(ws=(0,k.Z)(function*(){if(!(0,ne.hl)())return dr.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return dr.warn(Ir.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function wo(){return wo=(0,k.Z)(function*(I,C,A,O,G,K,le){var Qe;const ze=function ti(I){return pi.apply(this,arguments)}(I);ze.then(Zn=>{A[Zn.measurementId]=Zn.appId,I.options.measurementId&&Zn.measurementId!==I.options.measurementId&&dr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zn=>dr.error(Zn)),C.push(ze);const ot=function Dr(){return ws.apply(this,arguments)}().then(Zn=>{if(Zn)return O.getId()}),[xt,At]=yield Promise.all([ze,ot]);(function sc(I){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(tc)&&A.src.includes(I))return A;return null})(K)||function rc(I,C){const A=function nc(I,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(I,C)),A}("firebase-js-sdk-policy",{createScriptURL:rs}),O=document.createElement("script"),G=`${tc}?l=${I}&id=${C}`;O.src=A?A?.createScriptURL(G):G,O.async=!0,document.head.appendChild(O)}(K,xt.measurementId),zr&&(G("consent","default",zr),function cc(I){zr=I}(void 0)),G("js",new Date);const Bn=null!==(Qe=le?.config)&&void 0!==Qe?Qe:{};return Bn[Dt]="firebase",Bn.update=!0,null!=At&&(Bn[fm]=At),G("config",xt.measurementId,Bn),oc&&(G("set",oc),function hu(I){oc=I}(void 0)),xt.measurementId}),wo.apply(this,arguments)}class is{constructor(C){this.app=C}_delete(){return delete Et[this.app.options.appId],Promise.resolve()}}let Et={},hh=[];const Vl={};let Bi,Rn,ga="dataLayer",ma=!1;function ya(I,C,A){!function lc(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((O,G)=>`(${G+1}) ${O}`).join(" "),A=Ir.create("invalid-analytics-context",{errorInfo:C});dr.warn(A.message)}}();const O=I.options.appId;if(!O)throw Ir.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ir.create("no-api-key");dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Et[O])throw Ir.create("already-exists",{id:O});if(!ma){!function pm(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(ga);const{wrappedGtag:K,gtagCore:le}=function hr(I,C,A,O,G){let K=function(...le){window[O].push(arguments)};return window[G]&&"function"==typeof window[G]&&(K=window[G]),window[G]=function ic(I,C,A,O){function K(){return K=(0,k.Z)(function*(le,...Qe){try{if("event"===le){const[ze,ot]=Qe;yield function Bt(I,C,A,O,G){return Vi.apply(this,arguments)}(I,C,A,ze,ot)}else if("config"===le){const[ze,ot]=Qe;yield function kl(I,C,A,O,G,K){return Ae.apply(this,arguments)}(I,C,A,O,ze,ot)}else if("consent"===le){const[ze]=Qe;I("consent","update",ze)}else if("get"===le){const[ze,ot,xt]=Qe;I("get",ze,ot,xt)}else if("set"===le){const[ze]=Qe;I("set",ze)}else I(le,...Qe)}catch(ze){dr.error(ze)}}),K.apply(this,arguments)}return function G(le){return K.apply(this,arguments)}}(K,I,C,A),{gtagCore:K,wrappedGtag:window[G]}}(Et,hh,Vl,ga,"gtag");Rn=K,Bi=le,ma=!0}return Et[O]=function hn(I,C,A,O,G,K,le){return wo.apply(this,arguments)}(I,hh,Vl,C,Bi,ga,A),new is(I)}function Io(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,k.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const va="@firebase/analytics";!function Cr(){(0,Q.Xd)(new fe.wA(yn,(C,{options:A})=>ya(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,Q.Xd)(new fe.wA("analytics-internal",function I(C){try{const A=C.getProvider(yn).getImmediate();return{logEvent:(O,G,K)=>function ni(I,C,A,O){I=(0,ne.m9)(I),function gm(I,C,A,O,G){return ac.apply(this,arguments)}(Rn,Et[I.app.options.appId],C,A,O).catch(G=>dr.error(G))}(A,O,G,K)}}catch(A){throw Ir.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,Q.KN)(va,"0.10.0"),(0,Q.KN)(va,"0.10.0","esm2017")}();var gi=P(1954),ii=P(2631);const pu=new class Pr extends ii.v{}(class _a extends gi.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(C,A,O):(C.flush(this),0)}});var jl=P(6321),br=P(9397),Do=P(5137),On=P(3093);const ji=new f.GfV("7.6.1"),gu="__angularfire_symbol__analyticsIsSupportedValue",$i="__angularfire_symbol__analyticsIsSupported",Co="__angularfire_symbol__remoteConfigIsSupportedValue",hc="__angularfire_symbol__remoteConfigIsSupported",mu="__angularfire_symbol__messagingIsSupportedValue",bo="__angularfire_symbol__messagingIsSupported";function So(I,C,A){if(C){if(1===C.length)return C[0];const K=C.filter(le=>le.app===A);if(1===K.length)return K[0]}return A.container.getProvider(I).getImmediate({optional:!0})}globalThis[$i]||(globalThis[$i]=Io().then(I=>globalThis[gu]=I).catch(()=>globalThis[gu]=!1)),globalThis[bo]||(globalThis[bo]=yo().then(I=>globalThis[mu]=I).catch(()=>globalThis[mu]=!1)),globalThis[hc]||(globalThis[hc]=Hs().then(I=>globalThis[Co]=I).catch(()=>globalThis[Co]=!1));const wa=(I,C)=>{const A=C?[C]:(0,Y.C6)(),O=[];return A.forEach(G=>{G.container.getProvider(I).instances.forEach(le=>{O.includes(le)||O.push(le)})}),O};function Is(){}class $l{constructor(C,A=pu){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,O){const G=this.zone;return this.delegate.schedule(function(le){G.runGuarded(()=>{C.apply(this,[le])})},A,O)}}class si{constructor(C){this.zone=C,this.task=null}call(C,A){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Is,{},Is,Is)),A.pipe((0,br.b)({next:O,complete:O,error:O})).subscribe(C).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hl=(()=>{class I{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new $l(Zone.current)),this.insideAngular=A.run(()=>new $l(Zone.current,jl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(A){return new(A||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Pn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function zl(I){return Pn(),function pc(I){return function(A){return(A=A.lift(new si(I.ngZone))).pipe((0,Do.R)(I.outsideAngular),(0,On.Q)(I.insideAngular))}}(Pn())(I)}},9058:(at,Ce,P)=>{P.d(Ce,{$s:()=>$e,BH:()=>ee,G6:()=>sr,L:()=>ue,LL:()=>Se,Pz:()=>_e,Sg:()=>Ee,UG:()=>q,US:()=>fe,ZB:()=>J,ZR:()=>Ie,aH:()=>re,b$:()=>Yt,eu:()=>de,hl:()=>ie,jU:()=>je,m9:()=>Qt,ne:()=>un,pd:()=>bt,r3:()=>sn,ru:()=>dt,tV:()=>L,uI:()=>oe,vZ:()=>Vn,w1:()=>ln,xO:()=>to,xb:()=>Kr,z$:()=>Pe,zI:()=>he,zd:()=>_t});const Q=function(U){const V=[];let W=0;for(let De=0;De<U.length;De++){let ae=U.charCodeAt(De);ae<128?V[W++]=ae:ae<2048?(V[W++]=ae>>6|192,V[W++]=63&ae|128):55296==(64512&ae)&&De+1<U.length&&56320==(64512&U.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&U.charCodeAt(++De)),V[W++]=ae>>18|240,V[W++]=ae>>12&63|128,V[W++]=ae>>6&63|128,V[W++]=63&ae|128):(V[W++]=ae>>12|224,V[W++]=ae>>6&63|128,V[W++]=63&ae|128)}return V},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,V){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<U.length;ae+=3){const nt=U[ae],Rt=ae+1<U.length,St=Rt?U[ae+1]:0,Nr=ae+2<U.length,Pt=Nr?U[ae+2]:0;let mr=(15&St)<<2|Pt>>6,Us=63&Pt;Nr||(Us=64,Rt||(mr=64)),De.push(W[nt>>2],W[(3&nt)<<4|St>>4],W[mr],W[Us])}return De.join("")},encodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(U):this.encodeByteArray(Q(U),V)},decodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(U):function(U){const V=[];let W=0,De=0;for(;W<U.length;){const ae=U[W++];if(ae<128)V[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const nt=U[W++];V[De++]=String.fromCharCode((31&ae)<<6|63&nt)}else if(ae>239&&ae<365){const Nr=((7&ae)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;V[De++]=String.fromCharCode(55296+(Nr>>10)),V[De++]=String.fromCharCode(56320+(1023&Nr))}else{const nt=U[W++],Rt=U[W++];V[De++]=String.fromCharCode((15&ae)<<12|(63&nt)<<6|63&Rt)}}return V.join("")}(this.decodeStringToByteArray(U,V))},decodeStringToByteArray(U,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<U.length;){const nt=W[U.charAt(ae++)],St=ae<U.length?W[U.charAt(ae)]:0;++ae;const Pt=ae<U.length?W[U.charAt(ae)]:64;++ae;const Kt=ae<U.length?W[U.charAt(ae)]:64;if(++ae,null==nt||null==St||null==Pt||null==Kt)throw new pe;De.push(nt<<2|St>>4),64!==Pt&&(De.push(St<<4&240|Pt>>2),64!==Kt&&De.push(Pt<<6&192|Kt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ue=function(U){return function(U){const V=Q(U);return fe.encodeByteArray(V,!0)}(U).replace(/\./g,"")},L=function(U){try{return fe.decodeString(U,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(U,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!Le(W)||(U[W]=J(U[W],V[W]));return U}function Le(U){return"__proto__"!==U}const Re=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=U&&L(U[1]);return V&&JSON.parse(V)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},re=()=>{var U;return null===(U=Re())||void 0===U?void 0:U.config},_e=U=>{var V;return null===(V=Re())||void 0===V?void 0:V[`_${U}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,De)=>{W?this.reject(W):this.resolve(De),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,De))}}}function Ee(U,V){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=V||"demo-project",ae=U.iat||0,nt=U.sub||U.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Rt)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function q(){var U;const V=null===(U=Re())||void 0===U?void 0:U.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return"object"==typeof self&&self.self===self}function dt(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ln(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function sr(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((U,V)=>{try{let W=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),W||self.indexedDB.deleteDatabase(De),U(!0)},ae.onupgradeneeded=()=>{W=!1},ae.onerror=()=>{var nt;V((null===(nt=ae.error)||void 0===nt?void 0:nt.message)||"")}}catch(W){V(W)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(V,W,De){super(W),this.code=V,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(V,W,De){this.service=V,this.serviceName=W,this.errors=De}create(V,...W){const De=W[0]||{},ae=`${this.service}/${V}`,nt=this.errors[V],Rt=nt?function Ke(U,V){return U.replace(Ge,(W,De)=>{const ae=V[De];return null!=ae?String(ae):`<${De}?>`})}(nt,De):"Error";return new Ie(ae,`${this.serviceName}: ${Rt} (${ae}).`,De)}}const Ge=/\{\$([^}]+)}/g;function sn(U,V){return Object.prototype.hasOwnProperty.call(U,V)}function Kr(U){for(const V in U)if(Object.prototype.hasOwnProperty.call(U,V))return!1;return!0}function Vn(U,V){if(U===V)return!0;const W=Object.keys(U),De=Object.keys(V);for(const ae of W){if(!De.includes(ae))return!1;const nt=U[ae],Rt=V[ae];if(Yr(nt)&&Yr(Rt)){if(!Vn(nt,Rt))return!1}else if(nt!==Rt)return!1}for(const ae of De)if(!W.includes(ae))return!1;return!0}function Yr(U){return null!==U&&"object"==typeof U}function to(U){const V=[];for(const[W,De]of Object.entries(U))Array.isArray(De)?De.forEach(ae=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(ae))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(De));return V.length?"&"+V.join("&"):""}function _t(U){const V={};return U.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,nt]=De.split("=");V[decodeURIComponent(ae)]=decodeURIComponent(nt)}}),V}function bt(U){const V=U.indexOf("?");if(!V)return"";const W=U.indexOf("#",V);return U.substring(V,W>0?W:void 0)}function un(U,V){const W=new _n(U,V);return W.subscribe.bind(W)}class _n{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(De=>{this.error(De)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,De){let ae;if(void 0===V&&void 0===W&&void 0===De)throw new Error("Missing Observer.");ae=function tn(U,V){if("object"!=typeof U||null===U)return!1;for(const W of V)if(W in U&&"function"==typeof U[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:De},void 0===ae.next&&(ae.next=Nn),void 0===ae.error&&(ae.error=Nn),void 0===ae.complete&&(ae.complete=Nn);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),nt}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const Ji=1e3,ye=2,H=144e5,ge=.5;function $e(U,V=Ji,W=ye){const De=V*Math.pow(W,U),ae=Math.round(ge*De*(Math.random()-.5)*2);return Math.min(H,De+ae)}function Qt(U){return U&&U._delegate?U._delegate:U}},3662:(at,Ce,P)=>{var f=P(5879);let Y=null;function k(){return Y}class ne{}const fe=new f.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(ue)},providedIn:"platform"})}return n})();const Me=new f.OlP("Location Initialized");let ue=(()=>{class n extends pe{constructor(){super(),this._doc=(0,f.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function L(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(qe)},providedIn:"root"})}return n})();const Te=new f.OlP("appBaseHref");let qe=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+J(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+J(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(pe),f.LFG(Te,8))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ne=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=L(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+J(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+J(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(pe),f.LFG(Te,8))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})(),We=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(lt(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function ct(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=J;static#t=this.joinWithSlash=L;static#n=this.stripTrailingSlash=j;static#r=this.\u0275fac=function(r){return new(r||n)(f.LFG(Le))};static#i=this.\u0275prov=f.Yz7({token:n,factory:function(){return function Re(){return new We((0,f.LFG)(Le))}()},providedIn:"root"})}return n})();function lt(n){return n.replace(/\/index.html$/,"")}class no{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new no(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),hl(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{hl(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function hl(n,e){n.context.$implicit=e.item}let Xo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(f.s_b),f.Y36(f.Rgc))};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class nm{constructor(){this.$implicit=null,this.ngIf=null}}function Zf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class Hu{createSubscription(e,t){return(0,f.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,f.rg0)(()=>e.unsubscribe())}}class Rr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const pl=new Rr,Gu=new Hu;let ta=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return pl;if((0,f.F4k)(t))return Gu;throw function Ti(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(f.sBO,16))};static#t=this.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),bn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({})}return n})();function ms(n){return"server"===n}let or=(()=>{class n{static#e=this.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new ys((0,f.LFG)(fe),window)})}return n})();class ys{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Xd extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ju extends Xd{static makeCurrent(){!function Q(n){Y||(Y=n)}(new Ju)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function np(){return cu=cu||document.querySelector("base"),cu?cu.getAttribute("href"):null}();return null==t?null:function dm(n){Ml=Ml||document.createElement("a"),Ml.setAttribute("href",n);const e=Ml.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ml,cu=null,rp=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();const Nl=new f.OlP("EventManagerPlugins");let ip=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new f.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(Nl),f.LFG(f.R0b))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();class Xu{constructor(e){this._doc=e}}const lu="ng-app-id";let sp=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ms(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${lu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(lu),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(lu,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(fe),f.LFG(f.AFp),f.LFG(f.Ojb,8),f.LFG(f.Lbi))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();const fo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ns=/%COMP%/g,Li=new f.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nn(n,e){return e.map(t=>t.replace(ns,n))}let go=(()=>{class n{constructor(t,r,o,u,l,m,w,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=w,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=ms(m),this.defaultRenderer=new mo(t,l,w,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===f.ifc.ShadowDom&&(r={...r,encapsulation:f.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof up?o.applyToHost(t):o instanceof Er&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,w=this.eventManager,b=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,R=this.platformIsServer;switch(r.encapsulation){case f.ifc.Emulated:u=new up(w,b,r,this.appId,M,l,m,R);break;case f.ifc.ShadowDom:return new yo(w,b,t,r,l,m,this.nonce,R);default:u=new Er(w,b,r,M,l,m,R)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(ip),f.LFG(sp),f.LFG(f.AFp),f.LFG(Li),f.LFG(fe),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(f.Ojb))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();class mo{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(fo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Rl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Rl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new f.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=fo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=fo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Rl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yo extends mo{constructor(e,t,r,o,u,l,m,w){super(e,u,l,w),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=nn(o.id,o.styles);for(const M of b){const R=document.createElement("style");m&&R.setAttribute("nonce",m),R.textContent=M,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Er extends mo{constructor(e,t,r,o,u,l,m,w){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=w?nn(w,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class up extends Er{constructor(e,t,r,o,u,l,m,w){const b=o+"-"+r.id;super(e,t,r,u,l,m,w,b),this.contentAttr=function th(n){return"_ngcontent-%COMP%".replace(ns,n)}(b),this.hostAttr=function nh(n){return"_nghost-%COMP%".replace(ns,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let da=(()=>{class n extends Xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(fe))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();const cp=["alt","control","meta","shift"],ei={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ol=(()=>{class n extends Xu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),cp.forEach(b=>{const M=r.indexOf(b);M>-1&&(r.splice(M,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=ei[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),cp.forEach(l=>{l!==o&&(0,lp[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(fe))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();const dr=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Dt(){Ju.makeCurrent()},multi:!0},{provide:fe,useFactory:function ih(){return(0,f.RDi)(document),document},deps:[]}]),sh=new f.OlP(""),Ir=[{provide:f.rWj,useClass:class xl{addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new f.vHH(5103,!1);return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(w=>{w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],rs=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function rh(){return new f.qLn},deps:[]},{provide:Nl,useClass:da,multi:!0,deps:[fe,f.R0b,f.Lbi]},{provide:Nl,useClass:Ol,multi:!0,deps:[fe]},go,sp,ip,{provide:f.FYo,useExisting:go},{provide:class Ai{},useClass:rp,deps:[]},[]];let Pl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(sh,12))};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({providers:[...rs,...Ir],imports:[bn,f.hGG]})}return n})(),Ae=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(fe))};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(r){let o=null;return o=r?new r:function kl(){return new Ae((0,f.LFG)(fe))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;var Gr=P(5592),fa=P(4674),Tn=P(2459),vt=P(2096),zr=P(5619);const{isArray:cc}=Array,{getPrototypeOf:hu,prototype:Dr,keys:ws}=Object;function hn(n){if(1===n.length){const e=n[0];if(cc(e))return{args:e,keys:null};if(function wo(n){return n&&"object"==typeof n&&hu(n)===Dr}(e)){const t=ws(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var is=P(2737),Et=P(7398);const{isArray:hh}=Array;function ga(n){return(0,Et.U)(e=>function Vl(n,e){return hh(e)?n(...e):n(e)}(n,e))}var Ui=P(4564);function Bi(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Rn=P(8251),ma=P(7103);function Eo(...n){const e=(0,Ui.yG)(n),t=(0,Ui.jO)(n),{args:r,keys:o}=hn(n);if(0===r.length)return(0,Tn.D)([],e);const u=new Gr.y(function lc(n,e,t=is.y){return r=>{ya(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)ya(e,()=>{const b=(0,Tn.D)(n[w],e);let M=!1;b.subscribe((0,Rn.x)(r,R=>{u[w]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>Bi(o,l):is.y));return t?u.pipe(ga(t)):u}function ya(n,e,t){n?(0,ma.f)(t,n,e):e()}const Ks=(0,P(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Io=P(7537);function ss(...n){return function Ys(){return(0,Io.J)(1)}()((0,Tn.D)(n,(0,Ui.yG)(n)))}var Ul=P(4829);function Bl(n){return new Gr.y(e=>{(0,Ul.Xf)(n()).subscribe(e)})}var dc=P(8407);function fu(n,e){const t=(0,fa.m)(n)?n:()=>n,r=o=>o.error(t());return new Gr.y(e?o=>e.schedule(r,0,o):r)}var Es=P(6232),fh=P(7394),ni=P(9360);function ph(){return(0,ni.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Rn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class va extends Gr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ni.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Rn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fh.w0.EMPTY)}return e}refCount(){return ph()(this)}}var ri=P(8645),Cr=P(4664);function gi(n){return n<=0?()=>Es.E:(0,ni.e)((e,t)=>{let r=0;e.subscribe((0,Rn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function _a(...n){const e=(0,Ui.yG)(n);return(0,ni.e)((t,r)=>{(e?ss(n,t,e):ss(n,t)).subscribe(r)})}function ii(n,e){return(0,ni.e)((t,r)=>{let o=0;t.subscribe((0,Rn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Pr=P(1631);function pu(n){return(0,ni.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function gh(n=jl){return(0,ni.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function jl(){return new Ks}function br(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((o,u)=>n(o,u,r)):is.y,gi(1),t?pu(e):gh(()=>new Ks))}function Do(n,e){return(0,fa.m)(e)?(0,Pr.z)(n,e,1):(0,Pr.z)(n,1)}var On=P(9397);function ji(n){return(0,ni.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Rn.x)(t,void 0,void 0,l=>{u=(0,Ul.Xf)(n(l,ji(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function $i(n,e){return(0,ni.e)(function gu(n,e,t,r,o){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,Rn.x)(l,M=>{const R=b++;w=m?n(w,M,R):(m=!0,M),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Co(n){return n<=0?()=>Es.E:(0,ni.e)((e,t)=>{let r=[];e.subscribe((0,Rn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bo(n){return(0,ni.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var fc=P(2420);const kt="primary",To=Symbol("RouteTitle");class So{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wa(n){return new So(n)}function Is(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Hl(n[o],e[o]))return!1;return!0}function Hl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Pn(n){return n.length>0?n[n.length-1]:null}function Hi(n){return function pa(n){return!!n&&(n instanceof Gr.y||(0,fa.m)(n.lift)&&(0,fa.m)(n.subscribe))}(n)?n:(0,f.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):(0,vt.of)(n)}const Qs={exact:function pc(n,e,t){if(!le(n.segments,e.segments)||!C(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pc(n.children[r],e.children[r],t))return!1;return!0},subset:Ia},Gl={exact:function zl(n,e){return si(n,e)},subset:function Ea(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Hl(n[t],e[t]))},ignored:()=>!0};function pp(n,e,t){return Qs[t.paths](n.root,e.root,t.matrixParams)&&Gl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ia(n,e,t){return I(n,e,e.segments,t)}function I(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!le(o,t)||e.hasChildren()||!C(o,t,r))}if(n.segments.length===t.length){if(!le(n.segments,t)||!C(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Ia(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(le(n.segments,o)&&C(n.segments,o,r)&&n.children[kt])&&I(n.children[kt],e,u,r)}}function C(n,e,t){return e.every((r,o)=>Gl[t](n[o].parameters,r.parameters))}class A{constructor(e=new O([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wa(this.queryParams)),this._queryParamMap}toString(){return xt.serialize(this)}}class O{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return At(this)}}class G{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wa(this.parameters)),this._parameterMap}toString(){return oi(this)}}function le(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ze=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return new ot},providedIn:"root"})}return n})();class ot{parse(e){const t=new gc(e);return new A(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Bn(e.root,!0)}`,r=function mm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ds(t)}=${Ds(o)}`).join("&"):`${Ds(t)}=${Ds(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xt=new ot;function At(n){return n.segments.map(e=>oi(e)).join("/")}function Bn(n,e){if(!n.hasChildren())return At(n);if(e){const t=n.children[kt]?Bn(n.children[kt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==kt&&r.push(`${o}:${Bn(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qe(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===kt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==kt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===kt?[Bn(n.children[kt],!1)]:[`${o}:${Bn(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${At(n)}/${t[0]}`:`${At(n)}/(${t.join("//")})`}}function Zn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ds(n){return Zn(n).replace(/%3B/gi,";")}function Cs(n){return Zn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fr(n){return decodeURIComponent(n)}function os(n){return fr(n.replace(/\+/g,"%20"))}function oi(n){return`${Cs(n.path)}${function Da(n){return Object.keys(n).map(e=>`;${Cs(e)}=${Cs(n[e])}`).join("")}(n.parameters)}`}const gp=/^[^\/()?;#]+/;function Ao(n){const e=n.match(gp);return e?e[0]:""}const ym=/^[^\/()?;=#]+/,vm=/^[^=?&#]+/,Gi=/^[^&#]+/;class gc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new O(e,t)),r}parseSegment(){const e=Ao(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new G(fr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function mp(n){const e=n.match(ym);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ao(this.remaining);o&&(r=o,this.capture(r))}e[fr(t)]=fr(r)}parseQueryParam(e){const t=function Jv(n){const e=n.match(vm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function yp(n){const e=n.match(Gi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=os(t),u=os(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ao(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[kt]:new O([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function Xv(n){return n.segments.length>0?new O([],{[kt]:n}):n}function vp(n){const e={};for(const r of Object.keys(n.children)){const u=vp(n.children[r]);if(r===kt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function _m(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new O(n.segments.concat(e.segments),e.children)}return n}(new O(n.segments,e))}function yu(n){return n instanceof A}function Ca(n){let e;const o=Xv(function t(u){const l={};for(const w of u.children){const b=t(w);l[w.outlet]=b}const m=new O(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function wm(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return mc(o,o,o,t,r);const u=function e_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ql(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([w,b])=>{m[w]="string"==typeof b?b.split("/"):b}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ql(t,e,r)}(e);if(u.toRoot())return mc(o,o,new O([],{}),t,r);const l=function t_(n,e,t){if(n.isAbsolute)return new xo(e,!0,0);if(!t)return new xo(e,!1,NaN);if(null===t.parent)return new xo(t,!0,0);const r=yh(n.commands[0])?0:1;return function Em(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new f.vHH(4005,!1);o=r.segments.length}return new xo(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?yc(l.segmentGroup,l.index,u.commands):Zl(l.segmentGroup,l.index,u.commands);return mc(o,l.segmentGroup,m,t,r)}function yh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Mo(n){return"object"==typeof n&&null!=n&&n.outlets}function mc(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([w,b])=>{u[w]=Array.isArray(b)?b.map(M=>`${M}`):`${b}`}),l=n===e?t:vh(n,e,t);const m=Xv(vp(l));return new A(m,u,o)}function vh(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:vh(u,e,t)}),new O(n.segments,r)}class ql{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yh(r[0]))throw new f.vHH(4003,!1);const o=r.find(Mo);if(o&&o!==Pn(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Zl(n,e,t){if(n||(n=new O([],{})),0===n.segments.length&&n.hasChildren())return yc(n,e,t);const r=function n_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(Mo(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!_h(w,b,l))return u;r+=2}else{if(!_h(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new O(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new O(n.segments.slice(r.pathIndex),n.children),yc(u,0,o)}return r.match&&0===o.length?new O(n.segments,{}):r.match&&!n.hasChildren()?_p(n,e,t):r.match?yc(n,0,o):_p(n,e,t)}function yc(n,e,t){if(0===t.length)return new O(n.segments,{});{const r=function Wl(n){return Mo(n[0])?n[0].outlets:{[kt]:n}}(t),o={};if(Object.keys(r).some(u=>u!==kt)&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length){const u=yc(n.children[kt],e,t);return new O(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=Zl(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new O(n.segments,o)}}function _p(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Mo(u)){const w=vc(u.outlets);return new O(r,w)}if(0===o&&yh(t[0])){r.push(new G(n.segments[e].path,vu(t[0]))),o++;continue}const l=Mo(u)?u.outlets[kt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&yh(m)?(r.push(new G(l,vu(m))),o+=2):(r.push(new G(l,{})),o++)}return new O(r,{})}function vc(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=_p(new O([],{}),0,r))}),e}function vu(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _h(n,e,t){return n==t.path&&si(e,t.parameters)}const wh="imperative";class bs{constructor(e,t){this.id=e,this.url=t}}class _c extends bs{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class No extends bs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kl extends bs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wc extends bs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class _u extends bs{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yl extends bs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Im extends bs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r_ extends bs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wp extends bs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JE extends bs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dm{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class XE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class i_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ql{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ep{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Jl{}class Cm{constructor(e){this.url=e}}class a_{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ec,this.attachRef=null}}let Ec=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new a_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Ip{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Eh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Eh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ic(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ic(e,this._root).map(t=>t.value)}}function Eh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Eh(n,t);if(r)return r}return null}function Ic(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ic(n,t);if(r.length)return r.unshift(e),r}return[]}class xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class mi extends Ip{constructor(e,t){super(e),this.snapshot=t,Dp(this,e)}toString(){return this.snapshot.toString()}}function Eu(n,e){const t=function Iu(n,e){const l=new Cu([],{},{},"",{},kt,e,null,{});return new Cc("",new xi(l,[]))}(0,e),r=new zr.X([new G("",{})]),o=new zr.X({}),u=new zr.X({}),l=new zr.X({}),m=new zr.X(""),w=new Du(r,o,l,m,u,kt,e,t.root);return w.snapshot=t.root,new mi(new xi(w,[]),t)}class Du{constructor(e,t,r,o,u,l,m,w){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=w,this.title=this.dataSubject?.pipe((0,Et.U)(b=>b[To]))??(0,vt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>wa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>wa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Dc(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Cu{get title(){return this.data?.[To]}constructor(e,t,r,o,u,l,m,w,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cc extends Ip{constructor(e,t){super(t),this.url=e,Dp(this,t)}toString(){return Ro(this._root)}}function Dp(n,e){e.value._routerState=n,e.children.forEach(t=>Dp(n,t))}function Ro(n){const e=n.children.length>0?` { ${n.children.map(Ro).join(", ")} } `:"";return`${n.value}${e}`}function Ih(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,si(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),si(e.params,t.params)||n.paramsSubject.next(t.params),function $l(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),si(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Dh(n,e){const t=si(n.params,e.params)&&function K(n,e){return le(n,e)&&n.every((t,r)=>si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dh(n.parent,e.parent))}let Ch=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Ec),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb),this.inputBinder=(0,f.f3M)(ed,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new u_(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]})}return n})();class u_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Du?this.route:e===Ec?this.childContexts:this.parent.get(e,t)}}const ed=new f.OlP("");let yi=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=Eo([r.queryParams,r.params,r.data]).pipe((0,Cr.w)(([u,l,m],w)=>(m={...u,...l,...m},0===w?(0,vt.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,f.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();function bu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function c_(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return bu(n,r,o);return bu(n,r)})}(n,e,t);return new xi(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>bu(n,m)),l}}const r=function Kn(n){return new Du(new zr.X(n.url),new zr.X(n.params),new zr.X(n.queryParams),new zr.X(n.fragment),new zr.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>bu(n,u));return new xi(r,o)}}const Oo="ngNavigationCancelingError";function Th(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=yu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=td(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function td(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Oo]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ba(n){return n&&n[Oo]}let Cp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(r,o){1&r&&f._UZ(0,"router-outlet")},dependencies:[Ch],encapsulation:2})}return n})();function B(n){const e=n.children&&n.children.map(B),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=Cp),t}function Z(n){return n.outlet||kt}function Ue(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class kn{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ih(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=wu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=wu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=wu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=wu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new s_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ql(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Ih(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Ih(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Ue(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class zi{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ta{constructor(e,t){this.component=e,this.route=t}}function Tu(n,e,t){const r=n._root;return Aa(r,e?e._root:null,t,[r.value])}function Sa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Aa(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=wu(e);return n.children.forEach(l=>{(function Tc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function Tm(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!le(n.url,e.url);case"pathParamsOrQueryParamsChange":return!le(n.url,e.url)||!si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(n,e)||!si(n.queryParams,e.queryParams);default:return!Dh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new zi(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Aa(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ta(m.outlet.component,l))}else l&&Sc(e,m,o),o.canActivateChecks.push(new zi(r)),Aa(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>Sc(m,t.getContext(l),o)),o}function Sc(n,e,t){const r=wu(n),o=n.value;Object.entries(r).forEach(([u,l])=>{Sc(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Ta(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Su(n){return"function"==typeof n}function nI(n){return n instanceof Ks||"EmptyError"===n?.name}const Sh=Symbol("INITIAL_VALUE");function nd(){return(0,Cr.w)(n=>Eo(n.map(e=>e.pipe(gi(1),_a(Sh)))).pipe((0,Et.U)(e=>{for(const t of e)if(!0!==t){if(t===Sh)return Sh;if(!1===t||t instanceof A)return t}return!0}),ii(e=>e!==Sh),gi(1)))}function f_(n){return(0,dc.z)((0,On.b)(e=>{if(yu(e))throw Th(0,e)}),(0,Et.U)(e=>!0===e))}class Tp{constructor(e){this.segmentGroup=e||null}}class Sp{constructor(e){this.urlTree=e}}function Ma(n){return fu(new Tp(n))}function g_(n){return fu(new Sp(n))}class aI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new f.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,vt.of)(r);if(o.numberOfChildren>1||!o.children[kt])return fu(new f.vHH(4e3,!1));o=o.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new A(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,w])=>{l[m]=this.createSegmentGroup(e,w,r,o)}),new O(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new f.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const Ap={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mp(n,e,t,r,o){const u=y_(n,e,t);return u.matched?(r=function bm(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function p_(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,vt.of)(!0);const u=o.map(l=>{const m=Sa(l,n);return Hi(function h_(n){return n&&Su(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,vt.of)(u).pipe(nd(),f_())}(r,e,t).pipe((0,Et.U)(l=>!0===l?u:{...Ap}))):(0,vt.of)(u)}function y_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ap}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Is)(t,n,e);if(!o)return{...Ap};const u={};Object.entries(o.posParams??{}).forEach(([m,w])=>{u[m]=w.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function v_(n,e,t,r){return t.length>0&&function UT(n,e,t){return t.some(r=>xp(n,e,r)&&Z(r)!==kt)}(n,t,r)?{segmentGroup:new O(e,VT(r,new O(t,n.children))),slicedSegments:[]}:0===t.length&&function uI(n,e,t){return t.some(r=>xp(n,e,r))}(n,t,r)?{segmentGroup:new O(n.segments,LT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new O(n.segments,n.children),slicedSegments:t}}function LT(n,e,t,r,o){const u={};for(const l of r)if(xp(n,t,l)&&!o[Z(l)]){const m=new O([],{});u[Z(l)]=m}return{...o,...u}}function VT(n,e){const t={};t[kt]=e;for(const r of n)if(""===r.path&&Z(r)!==kt){const o=new O([],{});t[Z(r)]=o}return t}function xp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class BT{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new aI(this.urlSerializer,this.urlTree)}noMatchError(e){return new f.vHH(4002,!1)}recognize(){const e=v_(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe(ji(t=>{if(t instanceof Sp)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Tp?this.noMatchError(t):t}),(0,Et.U)(t=>{const r=new Cu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),o=new xi(r,t),u=new Cc("",o),l=function QE(n,e,t=null,r=null){return wm(Ca(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,kt).pipe(ji(r=>{throw r instanceof Tp?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Xl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Tn.D)(o).pipe(Do(u=>{const l=r.children[u],m=function ke(n,e){const t=n.filter(r=>Z(r)===e);return t.push(...n.filter(r=>Z(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),$i((u,l)=>(u.push(...l),u)),pu(null),function hc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((o,u)=>n(o,u,r)):is.y,Co(1),t?pu(e):gh(()=>new Ks))}(),(0,Pr.z)(u=>{if(null===u)return Ma(r);const l=cI(u);return function jT(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,vt.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,Tn.D)(t).pipe(Do(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(ji(w=>{if(w instanceof Tp)return(0,vt.of)(null);throw w}))),br(m=>!!m),ji(m=>{if(nI(m))return function __(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,vt.of)([]):Ma(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function Rm(n,e,t,r){return!!(Z(n)===r||r!==kt&&xp(e,t,n))&&("**"===n.path||y_(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):Ma(o):Ma(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?g_(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Pr.z)(l=>{const m=new O(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:M}=y_(t,o,u);if(!m)return Ma(t);const R=this.applyRedirects.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?g_(R):this.applyRedirects.lineralizeSegments(o,R).pipe((0,Pr.z)($=>this.processSegment(e,r,t,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const w=o.length>0?Pn(o).parameters:{},b=new Cu(o,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dI(r),Z(r),r.component??r._loadedComponent??null,r,id(r));m=(0,vt.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=Mp(t,r,o,e).pipe((0,Et.U)(({matched:w,consumedSegments:b,remainingSegments:M,parameters:R})=>w?{snapshot:new Cu(b,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dI(r),Z(r),r.component??r._loadedComponent??null,r,id(r)),consumedSegments:b,remainingSegments:M}:null));return m.pipe((0,Cr.w)(w=>null===w?Ma(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Cr.w)(({routes:b})=>{const M=r._loadedInjector??e,{snapshot:R,consumedSegments:$,remainingSegments:te}=w,{segmentGroup:be,slicedSegments:Be}=v_(t,$,te,b);if(0===Be.length&&be.hasChildren())return this.processChildren(M,b,be).pipe((0,Et.U)(mt=>null===mt?null:[new xi(R,mt)]));if(0===b.length&&0===Be.length)return(0,vt.of)([new xi(R,[])]);const He=Z(r)===u;return this.processSegment(M,b,be,Be,He?kt:u,!0).pipe((0,Et.U)(mt=>[new xi(R,mt)]))}))))}getChildConfig(e,t,r){return t.children?(0,vt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,vt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function oI(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,vt.of)(!0);const u=o.map(l=>{const m=Sa(l,n);return Hi(function d_(n){return n&&Su(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,vt.of)(u).pipe(nd(),f_())}(e,t,r).pipe((0,Pr.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,On.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Nm(n){return fu(td(!1,3))}())):(0,vt.of)({routes:[],injector:e})}}function lx(n){const e=n.value.routeConfig;return e&&""===e.path}function cI(n){const e=[],t=new Set;for(const r of n){if(!lx(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=cI(r.children);e.push(new xi(r.value,o))}return e.filter(r=>!t.has(r))}function dI(n){return n.data||{}}function id(n){return n.resolve||{}}function mI(n){return"string"==typeof n.title||null===n.title}function E_(n){return(0,Cr.w)(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,Et.U)(()=>e)):(0,vt.of)(e)})}const Mh=new f.OlP("ROUTES");let I_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,vt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hi(t.loadComponent()).pipe((0,Et.U)(xh),(0,On.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),bo(()=>{this.componentLoaders.delete(t)})),o=new va(r,()=>new ri.x).pipe(ph());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,vt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function $T(n,e,t,r){return Hi(n.loadChildren()).pipe((0,Et.U)(xh),(0,Pr.z)(o=>o instanceof f.YKP||Array.isArray(o)?(0,vt.of)(o):(0,Tn.D)(e.compileModuleAsync(o))),(0,Et.U)(o=>{r&&r(n);let u,l,m=!1;return Array.isArray(o)?(l=o,!0):(u=o.create(t).injector,l=u.get(Mh,[],{optional:!0,self:!0}).flat()),{routes:l.map(B),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(bo(()=>{this.childrenLoaders.delete(r)})),l=new va(u,()=>new ri.x).pipe(ph());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xh(n){return function Ac(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Pm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ri.x,this.transitionAbortSubject=new ri.x,this.configLoader=(0,f.f3M)(I_),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(ze),this.rootContexts=(0,f.f3M)(Ec),this.inputBindingEnabled=null!==(0,f.f3M)(ed,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,vt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new XE(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Dm(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new zr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wh,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ii(u=>0!==u.id),(0,Et.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,Cr.w)(u=>{this.currentTransition=u;let l=!1,m=!1;return(0,vt.of)(u).pipe((0,On.b)(w=>{this.currentNavigation={id:w.id,initialUrl:w.rawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Cr.w)(w=>{const b=w.currentBrowserUrl.toString(),M=!t.navigated||w.extractedUrl.toString()!==b||b!==w.currentUrlTree.toString();if(!M&&"reload"!==(w.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const $="";return this.events.next(new wc(w.id,this.urlSerializer.serialize(w.rawUrl),$,0)),w.resolve(null),Es.E}if(t.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return(0,vt.of)(w).pipe((0,Cr.w)($=>{const te=this.transitions?.getValue();return this.events.next(new _c($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),te!==this.transitions?.getValue()?Es.E:Promise.resolve($)}),function Om(n,e,t,r,o,u){return(0,Pr.z)(l=>function Ah(n,e,t,r,o,u,l="emptyOnly"){return new BT(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Et.U)(({state:m,tree:w})=>({...l,targetSnapshot:m,urlAfterRedirects:w}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,On.b)($=>{u.targetSnapshot=$.targetSnapshot,u.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:$.urlAfterRedirects};const te=new Yl($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(te)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(w.currentRawUrl)){const{id:$,extractedUrl:te,source:be,restoredState:Be,extras:He}=w,mt=new _c($,this.urlSerializer.serialize(te),be,Be);this.events.next(mt);const Mt=Eu(0,this.rootComponentType).snapshot;return this.currentTransition=u={...w,targetSnapshot:Mt,urlAfterRedirects:te,extras:{...He,skipLocationChange:!1,replaceUrl:!1}},(0,vt.of)(u)}{const $="";return this.events.next(new wc(w.id,this.urlSerializer.serialize(w.extractedUrl),$,1)),w.resolve(null),Es.E}}),(0,On.b)(w=>{const b=new Im(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(b)}),(0,Et.U)(w=>(this.currentTransition=u={...w,guards:Tu(w.targetSnapshot,w.currentSnapshot,this.rootContexts)},u)),function rd(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,vt.of)({...t,guardsResult:!0}):function rI(n,e,t,r){return(0,Tn.D)(n).pipe((0,Pr.z)(o=>function sI(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,vt.of)(!0);const l=u.map(m=>{const w=Ue(e)??o,b=Sa(m,w);return Hi(function Mm(n){return n&&Su(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(br())});return(0,vt.of)(l).pipe(nd())}(o.component,o.route,t,e,r)),br(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Pr.z)(m=>m&&function Sm(n){return"boolean"==typeof n}(m)?function iI(n,e,t,r){return(0,Tn.D)(e).pipe(Do(o=>ss(function cx(n,e){return null!==n&&e&&e(new i_(n)),(0,vt.of)(!0)}(o.route.parent,r),function kT(n,e){return null!==n&&e&&e(new Ep(n)),(0,vt.of)(!0)}(o.route,r),function FT(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function bc(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Bl(()=>{const m=l.guards.map(w=>{const b=Ue(l.node)??t,M=Sa(w,b);return Hi(function Am(n){return n&&Su(n.canActivateChild)}(M)?M.canActivateChild(r,n):b.runInContext(()=>M(r,n))).pipe(br())});return(0,vt.of)(m).pipe(nd())}));return(0,vt.of)(u).pipe(nd())}(n,o.path,t),function xm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,vt.of)(!0);const o=r.map(u=>Bl(()=>{const l=Ue(e)??t,m=Sa(u,l);return Hi(function bp(n){return n&&Su(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(br())}));return(0,vt.of)(o).pipe(nd())}(n,o.route,t))),br(o=>!0!==o,!0))}(r,u,n,e):(0,vt.of)(m)),(0,Et.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,w=>this.events.next(w)),(0,On.b)(w=>{if(u.guardsResult=w.guardsResult,yu(w.guardsResult))throw Th(0,w.guardsResult);const b=new r_(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.events.next(b)}),ii(w=>!!w.guardsResult||(this.cancelNavigationTransition(w,"",3),!1)),E_(w=>{if(w.guards.canActivateChecks.length)return(0,vt.of)(w).pipe((0,On.b)(b=>{const M=new wp(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}),(0,Cr.w)(b=>{let M=!1;return(0,vt.of)(b).pipe(function w_(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,vt.of)(t);let u=0;return(0,Tn.D)(o).pipe(Do(l=>function hI(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!mI(o)&&(u[To]=o.title),function fI(n,e,t,r){const o=function pI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,vt.of)({});const u={};return(0,Tn.D)(o).pipe((0,Pr.z)(l=>function gI(n,e,t,r){const o=Ue(e)??r,u=Sa(n,o);return Hi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(br(),(0,On.b)(m=>{u[l]=m}))),Co(1),function mu(n){return(0,Et.U)(()=>n)}(u),ji(l=>nI(l)?Es.E:fu(l)))}(u,n,e,r).pipe((0,Et.U)(l=>(n._resolvedData=l,n.data=Xl(n,t).resolve,o&&mI(o)&&(n.data[To]=o.title),null)))}(l.route,r,n,e)),(0,On.b)(()=>u++),Co(1),(0,Pr.z)(l=>u===o.length?(0,vt.of)(t):Es.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,On.b)({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(b,"",2)}}))}),(0,On.b)(b=>{const M=new JE(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}))}),E_(w=>{const b=M=>{const R=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&R.push(this.configLoader.loadComponent(M.routeConfig).pipe((0,On.b)($=>{M.component=$}),(0,Et.U)(()=>{})));for(const $ of M.children)R.push(...b($));return R};return Eo(b(w.targetSnapshot.root)).pipe(pu(),gi(1))}),E_(()=>this.afterPreactivation()),(0,Et.U)(w=>{const b=function bh(n,e,t){const r=bu(n,e._root,t?t._root:void 0);return new mi(r,e)}(t.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return this.currentTransition=u={...w,targetRouterState:b},u}),(0,On.b)(()=>{this.events.next(new Jl)}),((n,e,t,r)=>(0,Et.U)(o=>(new kn(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,w=>this.events.next(w),this.inputBindingEnabled),gi(1),(0,On.b)({next:w=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new No(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects))),t.titleStrategy?.updateTitle(w.targetRouterState.snapshot),w.resolve(!0)},complete:()=>{l=!0}}),function mh(n){return(0,ni.e)((e,t)=>{(0,Ul.Xf)(n).subscribe((0,Rn.x)(t,()=>t.complete(),fc.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,On.b)(w=>{throw w}))),bo(()=>{l||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),ji(w=>{if(m=!0,ba(w))this.events.next(new Kl(u.id,this.urlSerializer.serialize(u.extractedUrl),w.message,w.cancellationCode)),function ai(n){return ba(n)&&yu(n.url)}(w)?this.events.next(new Cm(w.url)):u.resolve(!1);else{this.events.next(new _u(u.id,this.urlSerializer.serialize(u.extractedUrl),w,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(w))}catch(b){u.reject(b)}}return Es.E}))}))}cancelNavigationTransition(t,r,o){const u=new Kl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HT(n){return n!==wh}let GT=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===kt);return r}getResolvedTitleForRoute(t){return t.data[To]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(dx)},providedIn:"root"})}return n})(),dx=(()=>{class n extends GT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(Ae))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(yI)},providedIn:"root"})}return n})();class fx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let yI=(()=>{class n extends fx{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=f.n5z(n)))(o||n)}}();static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const km=new f.OlP("",{providedIn:"root",factory:()=>({})});let zT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(qT)},providedIn:"root"})}return n})(),qT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Np=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Np||{});function Fm(n,e){n.events.pipe(ii(t=>t instanceof No||t instanceof Kl||t instanceof _u||t instanceof wc),(0,Et.U)(t=>t instanceof No||t instanceof wc?Np.COMPLETE:t instanceof Kl&&(0===t.code||1===t.code)?Np.REDIRECTING:Np.FAILED),ii(t=>t!==Np.REDIRECTING),gi(1)).subscribe(()=>{e()})}function Au(n){throw n}function Rp(n,e,t){return e.parse("/")}const vI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_I={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ts=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this._events=new ri.x,this.options=(0,f.f3M)(km,{optional:!0})||{},this.pendingTasks=(0,f.f3M)(f.HDt),this.errorHandler=this.options.errorHandler||Au,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Rp,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(zT),this.routeReuseStrategy=(0,f.f3M)(hx),this.titleStrategy=(0,f.f3M)(GT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,f.f3M)(Mh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,f.f3M)(Pm),this.urlSerializer=(0,f.f3M)(ze),this.location=(0,f.f3M)(We),this.componentInputBindingEnabled=!!(0,f.f3M)(ed,{optional:!0}),this.eventsSubscription=new fh.w0,this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new A,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Eu(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(WT(r)&&this._events.next(r));if(r instanceof _c)HT(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof wc)this.rawUrlTree=o.rawUrl;else if(r instanceof Yl){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Jl)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Kl)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Cm){const u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||HT(o.source)};this.scheduleNavigation(u,wh,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof _u&&this.restoreHistory(o,!0),r instanceof No&&(this.navigated=!0),WT(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(B),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let R,M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}null!==M&&(M=this.removeEmptyProps(M));try{R=Ca(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return wm(R,t,M,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=yu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,wh,null,r)}navigate(t,r={skipLocationChange:!1}){return function px(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new f.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...vI}:!1===r?{..._I}:r,yu(t))return pp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return pp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b;l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((R,$)=>{m=R,w=$});const M=this.pendingTasks.add();return Fm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WT(n){return!(n instanceof Jl||n instanceof Cm)}class ZT{}let YT=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof No),Do(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Tn.D)(o).pipe((0,Io.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,vt.of)(null);const u=o.pipe((0,Pr.z)(l=>null===l?(0,vt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Tn.D)([u,l]).pipe((0,Io.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(Ts),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(ZT),f.LFG(I_))};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const b_=new f.OlP("");let EI=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _c?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof No?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof wc&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof o_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new o_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){f.$Z()};static#t=this.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac})}return n})();function Js(n,e){return{\u0275kind:n,\u0275providers:e}}function DI(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ts),o=n.get(CI);1===n.get(Lm)&&r.initialNavigation(),n.get(TI,null,f.XFs.Optional)?.setUpPreloading(),n.get(b_,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const CI=new f.OlP("",{factory:()=>new ri.x}),Lm=new f.OlP("",{providedIn:"root",factory:()=>1}),TI=new f.OlP("");function XT(n){return Js(0,[{provide:TI,useExisting:YT},{provide:ZT,useExisting:n}])}const Nh=new f.OlP("ROUTER_FORROOT_GUARD"),SI=[We,{provide:ze,useClass:ot},Ts,Ec,{provide:Du,useFactory:function T_(n){return n.routerState.root},deps:[Ts]},I_,[]];function AI(){return new f.PXZ("Router",Ts)}let Vm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[SI,[],{provide:Mh,multi:!0,useValue:t},{provide:Nh,useFactory:NI,deps:[[Ts,new f.FiY,new f.tp0]]},{provide:km,useValue:r||{}},r?.useHash?{provide:Le,useClass:Ne}:{provide:Le,useClass:qe},{provide:b_,useFactory:()=>{const n=(0,f.f3M)(or),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(km),r=(0,f.f3M)(Pm),o=(0,f.f3M)(ze);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EI(o,r,n,e,t)}},r?.preloadingStrategy?XT(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:AI},r?.initialNavigation?Um(r):[],r?.bindToComponentInputs?Js(8,[yi,{provide:ed,useExisting:yi}]).\u0275providers:[],[{provide:nS,useFactory:DI},{provide:f.tb,multi:!0,useExisting:nS}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Mh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(f.LFG(Nh,8))};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({})}return n})();function NI(n){return"guarded"}function Um(n){return["disabled"===n.initialNavigation?Js(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ts);return()=>{e.setUpLocationChangeListener()}}},{provide:Lm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Js(2,[{provide:Lm,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(Me,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Ts),u=e.get(CI);Fm(o,()=>{r(!0)}),e.get(Pm).afterPreactivation=()=>(r(!0),u.closed?(0,vt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const nS=new f.OlP(""),A_=[];let Bm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({imports:[Vm.forRoot(A_),Vm]})}return n})();var ve=P(5861);const kp={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.1.google.com:19302"},{urls:"stun:stun2.1.google.com:19302"}]};var xa=P(6321),kr=P(2793);function Fp(){return(0,ni.e)((n,e)=>{let t,r=!1;n.subscribe((0,Rn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var tt,sS=P(3997),Po=P(6304),Oh=(P(8977),P(3399)),jm=P(7592),$m=P(4537),Mc=P(7879),on=P(9058),OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={},Lp=Lp||{},Ut=OI||self;function x_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Vp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var PI="closure_uid_"+(1e9*Math.random()>>>0),wx=0;function Hm(n,e,t){return n.call.apply(n.bind,arguments)}function uS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ui(n,e,t){return(ui=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hm:uS).apply(null,arguments)}function Ph(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function tr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Na(){this.s=this.s,this.o=this.o}Na.prototype.s=!1,Na.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function aS(n){Object.prototype.hasOwnProperty.call(n,PI)&&n[PI]||(n[PI]=++wx)}(this)},Na.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kh=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Fh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function sd(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(x_(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ci.prototype.h=function(){this.defaultPrevented=!0};var R_=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",()=>{},e),Ut.removeEventListener("test",()=>{},e)}catch{}return n}();function xc(n){return/^[\s\xa0]*$/.test(n)}function O_(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Xs(n){return-1!=O_().indexOf(n)}function od(n){return od[" "](n),n}od[" "]=function(){};var VI,n,kI=Xs("Opera"),Lh=Xs("Trident")||Xs("MSIE"),FI=Xs("Edge"),Up=FI||Lh,P_=Xs("Gecko")&&!(-1!=O_().toLowerCase().indexOf("webkit")&&!Xs("Edge"))&&!(Xs("Trident")||Xs("MSIE"))&&!Xs("Edge"),lS=-1!=O_().toLowerCase().indexOf("webkit")&&!Xs("Edge");function LI(){var n=Ut.document;return n?n.documentMode:void 0}e:{var k_="",Vh=(n=O_(),P_?/rv:([^\);]+)(\)|;)/.exec(n):FI?/Edge\/([\d\.]+)/.exec(n):Lh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lS?/WebKit\/(\S+)/.exec(n):kI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Vh&&(k_=Vh?Vh[1]:""),Lh){var Bp=LI();if(null!=Bp&&Bp>parseFloat(k_)){VI=String(Bp);break e}}VI=k_}var V_=Ut.document&&Lh&&(LI()||parseInt(VI,10))||void 0;function Nc(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(P_){e:{try{od(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nc.$.h.call(this)}}tr(Nc,ci);var dS={2:"touch",3:"pen",4:"mouse"};Nc.prototype.h=function(){Nc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Uh="closure_listenable_"+(1e6*Math.random()|0),hS=0;function UI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++hS,this.fa=this.ia=!1}function U_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function B_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function BI(n){const e={};for(const t in n)e[t]=n[t];return e}const ad="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bh(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ad.length;u++)t=ad[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zm(n){this.src=n,this.g={},this.h=0}function qm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=kh(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(U_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function j_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}zm.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=j_(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new UI(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var $_="closure_lm_"+(1e6*Math.random()|0),H_={};function G_(n,e,t,r,o){if(r&&r.once)return fS(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)G_(n,e[u],t,r,o);return null}return t=Ym(t),n&&n[Uh]?n.O(e,t,Vp(r)?!!r.capture:!!r,o):z_(n,e,t,!1,r,o)}function z_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Vp(o)?!!o.capture:!!o,m=Km(n);if(m||(n[$_]=m=new zm(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function q_(){const e=pS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)R_||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(jI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fS(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)fS(n,e[u],t,r,o);return null}return t=Ym(t),n&&n[Uh]?n.P(e,t,Vp(r)?!!r.capture:!!r,o):z_(n,e,t,!0,r,o)}function Wm(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Wm(n,e[u],t,r,o);else r=Vp(r)?!!r.capture:!!r,t=Ym(t),n&&n[Uh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=j_(u=n.g[e],t,r,o))&&(U_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Km(n))&&(e=n.g[e.toString()],n=-1,e&&(n=j_(e,t,r,o)),(t=-1<n?e[n]:null)&&Zm(t))}function Zm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Uh])qm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Km(e))?(qm(t,n),0==t.h&&(t.src=null,e[$_]=null)):U_(n)}}}function jI(n){return n in H_?H_[n]:H_[n]="on"+n}function pS(n,e){if(n.fa)n=!0;else{e=new Nc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Zm(n),n=t.call(r,e)}return n}function Km(n){return(n=n[$_])instanceof zm?n:null}var W_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ym(n){return"function"==typeof n?n:(n[W_]||(n[W_]=function(e){return n.handleEvent(e)}),n[W_])}function li(){Na.call(this),this.i=new zm(this),this.S=this,this.J=null}function vi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var o=e;Bh(e=new ci(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Z_(l,r,!0,e)&&o}if(o=Z_(l=e.g=n,r,!0,e)&&o,o=Z_(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Z_(l=e.g=t[u],r,!1,e)&&o}function Z_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&qm(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}tr(li,Na),li.prototype[Uh]=!0,li.prototype.removeEventListener=function(n,e,t,r){Wm(this,n,e,t,r)},li.prototype.N=function(){if(li.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)U_(t[r]);delete n.g[e],n.h--}}this.J=null},li.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},li.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Qm=Ut.JSON.stringify;function Fo(){var n=Q_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var gS=new class $I{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new K_,n=>n.reset());class K_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rc(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Y_(n){Ut.setTimeout(()=>{throw n},0)}let jp,Jm=!1,Q_=new class HI{constructor(){this.h=this.g=null}add(e,t){const r=gS.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Xm=()=>{const n=Ut.Promise.resolve(void 0);jp=()=>{n.then(Ra)}};var Ra=()=>{for(var n;n=Fo();){try{n.h.call(n.g)}catch(t){Y_(t)}var e=gS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jm=!1};function $p(n,e){li.call(this),this.h=n||1,this.g=e||Ut,this.j=ui(this.qb,this),this.l=Date.now()}function J_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function GI(n,e,t){if("function"==typeof n)t&&(n=ui(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ui(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function qr(n){n.g=GI(()=>{n.g=null,n.i&&(n.i=!1,qr(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}tr($p,li),(tt=$p.prototype).ga=!1,tt.T=null,tt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vi(this,"tick"),this.ga&&(J_(this),this.start()))}},tt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.N=function(){$p.$.N.call(this),J_(this),delete this.g};class mS extends Na{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ud(n){Na.call(this),this.h=n,this.g={}}tr(ud,Na);var zI=[];function qI(n,e,t,r){Array.isArray(t)||(t&&(zI[0]=t.toString()),t=zI);for(var o=0;o<t.length;o++){var u=G_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ey(n){B_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zm(e)},n),n.g={}}function Hp(){this.g=!0}function cd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Qm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ud.prototype.N=function(){ud.$.N.call(this),ey(this)},ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hp.prototype.Ea=function(){this.g=!1},Hp.prototype.info=function(){};var ld={},KI=null;function Gp(){return KI=KI||new li}function dd(n){ci.call(this,ld.Ta,n)}function Ss(n){const e=Gp();vi(e,new dd(e))}function hd(n,e){ci.call(this,ld.STAT_EVENT,n),this.stat=e}function qi(n){const e=Gp();vi(e,new hd(e,n))}function YI(n,e){ci.call(this,ld.Ua,n),this.size=e}function jh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}ld.Ta="serverreachability",tr(dd,ci),ld.STAT_EVENT="statevent",tr(hd,ci),ld.Ua="timingevent",tr(YI,ci);var zp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ty={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fd(){}function X_(){}fd.prototype.h=null;var n0,$h={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function e0(){ci.call(this,"d")}function t0(){ci.call(this,"c")}function ny(){}function Hh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new ud(this),this.P=wS,this.V=new $p(n=Up?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _S}function _S(){this.i=null,this.g="",this.h=!1}tr(e0,ci),tr(t0,ci),tr(ny,fd),ny.prototype.g=function(){return new XMLHttpRequest},ny.prototype.i=function(){return{}},n0=new ny;var wS=45e3,QI={},r0={};function ry(n,e,t){n.L=1,n.v=Wh(as(e)),n.s=t,n.S=!0,s0(n,null)}function s0(n,e){n.G=Date.now(),Gh(n),n.A=as(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),d0(t.i,"t",r),n.C=0,t=n.l.J,n.h=new _S,n.g=mD(n.l,t?e:null,!n.s),0<n.O&&(n.M=new mS(ui(n.Pa,n,n.g),n.O)),qI(n.U,n.g,"readystatechange",n.nb),e=n.I?BI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ss(),function WI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var M=b[0];b=b[1];var R=M.split("_");l=2<=R.length&&"type"==R[1]?l+(M+"=")+b+"&":l+(M+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function ES(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Wp(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=Ex(n,t),o==r0){4==e&&(n.o=4,qi(14),r=!1),cd(n.j,n.m,null,"[Incomplete Response]");break}if(o==QI){n.o=4,qi(15),cd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cd(n.j,n.m,o,null),Lt(n,o)}ES(n)&&o!=r0&&o!=QI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),_0(e),e.M=!0,qi(11))):(cd(n.j,n.m,t,"[Invalid Chunked Response]"),Oc(n),zh(n))}function Ex(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?r0:(t=Number(e.substring(t,r)),isNaN(t)?QI:(r+=1)+t>e.length?r0:(e=e.slice(r,r+t),n.C=r+t,e))}function Gh(n){n.Y=Date.now()+n.P,o0(n,n.P)}function o0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jh(ui(n.lb,n),e)}function iy(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function zh(n){0==n.l.H||n.J||w0(n.l,n)}function Oc(n){iy(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,J_(n.V),ey(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Lt(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||oy(t.i,n)))if(!n.K&&oy(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Xp(t),fy(t)}gy(t),qi(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=jh(ui(t.ib,t),6e3));if(1>=sy(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else vd(t,11)}else if((n.K||t.g==n)&&Xp(t),!xc(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const M=b[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const be=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(be){var u=r.i;u.g||-1==be.indexOf("spdy")&&-1==be.indexOf("quic")&&-1==be.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(h0(u,u.h),u.h=null))}if(r.F){const Be=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.Da=Be,Sn(r.I,r.F,Be))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=I0(r,r.J?r.pa:null,r.Y),l.K){iD(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(iy(m),Gh(m)),r.g=l}else v0(r);0<t.j.length&&Fc(t)}else"stop"!=b[0]&&"close"!=b[0]||vd(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?vd(t,7):hy(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Ss()}catch{}}function pd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(x_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function XI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(x_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function JI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(x_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(tt=Hh.prototype).setTimeout=function(n){this.P=n},tt.nb=function(n){n=n.target;const e=this.M;e&&3==Lo(n)?e.l():this.Pa(n)},tt.Pa=function(n){try{if(n==this.g)e:{const M=Lo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||Up||this.g&&(this.h.h||this.g.ja()||dy(this.g)))){this.J||4!=M||7==e||Ss(),iy(this);var t=this.g.da();this.ca=t;t:if(ES(this)){var r=dy(this.g);n="";var o=r.length,u=4==Lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oc(this),zh(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function yS(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xc(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,qi(12),Oc(this),zh(this);break e}cd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lt(this,t)}this.S?(Wp(this,M,l),Up&&this.i&&3==M&&(qI(this.U,this.V,"tick",this.mb),this.V.start())):(cd(this.j,this.m,l,null),Lt(this,l)),4==M&&Oc(this),this.i&&!this.J&&(4==M?w0(this.l,this):(this.i=!1,Gh(this)))}else(function Mu(n){const e={};n=(n.g&&2<=Lo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(xc(n[r]))continue;var t=Rc(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function Gm(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,qi(12)):(this.o=0,qi(13)),Oc(this),zh(this)}}}catch{}},tt.mb=function(){if(this.g){var n=Lo(this.g),e=this.g.ja();this.C<e.length&&(iy(this),Wp(this,n,e),this.i&&4!=n&&Gh(this))}},tt.cancel=function(){this.J=!0,Oc(this)},tt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ZI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ss(),qi(17)),Oc(this),this.o=2,zh(this)):o0(this,this.Y-n)};var a0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Oa){this.h=n.h,qh(this,n.j),this.s=n.s,this.g=n.g,Pc(this,n.m),this.l=n.l;var e=n.i,t=new Zp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),u0(this,t),this.o=n.o}else n&&(e=String(n).match(a0))?(this.h=!1,qh(this,e[1]||"",!0),this.s=gd(e[2]||""),this.g=gd(e[3]||"",!0),Pc(this,e[4]),this.l=gd(e[5]||"",!0),u0(this,e[6]||"",!0),this.o=gd(e[7]||"")):(this.h=!1,this.i=new Zp(null,this.h))}function as(n){return new Oa(n)}function qh(n,e,t){n.j=t?gd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Pc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function u0(n,e,t){e instanceof Zp?(n.i=e,function TS(n,e){e&&!n.j&&(kc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(nD(this,r),d0(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Zh(e,tD)),n.i=new Zp(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function Wh(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function gd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,c0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function c0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Oa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zh(e,eD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zh(e,eD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zh(t,"/"==t.charAt(0)?CS:DS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zh(t,bS)),n.join("")};var eD=/[#\/\?@]/g,DS=/[#\?:]/g,CS=/[#\?]/g,tD=/[#\?@]/g,bS=/#/g;function Zp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function kc(n){n.g||(n.g=new Map,n.h=0,n.i&&function IS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function nD(n,e){kc(n),e=Kh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function l0(n,e){return kc(n),e=Kh(n,e),n.g.has(e)}function d0(n,e,t){nD(n,e),0<t.length&&(n.i=null,n.g.set(Kh(n,e),Fh(t)),n.h+=t.length)}function Kh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rD(n){this.l=n||SS,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=Zp.prototype).add=function(n,e){kc(this),this.i=null,n=Kh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){kc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},tt.ta=function(){kc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},tt.Z=function(n){kc(this);let e=[];if("string"==typeof n)l0(this,n)&&(e=e.concat(this.g.get(Kh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},tt.set=function(n,e){return kc(this),this.i=null,l0(this,n=Kh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var SS=10;function AS(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sy(n){return n.h?1:n.g?n.g.size:0}function oy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function h0(n,e){n.g?n.g.add(e):n.h=e}function iD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Fh(n.i)}rD.prototype.cancel=function(){if(this.i=sD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var oD=class{stringify(n){return Ut.JSON.stringify(n,void 0)}parse(n){return Ut.JSON.parse(n,void 0)}};function MS(){this.g=new oD}function xS(n,e,t){const r=t||"";try{pd(n,function(o,u){let l=o;Vp(o)&&(l=Qm(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function ay(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Kp(n){this.l=n.fc||null,this.j=n.ob||!1}function uy(n,e){li.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=p0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tr(Kp,fd),Kp.prototype.g=function(){return new uy(this.l,this.j)},Kp.prototype.i=function(n){return function(){return n}}({}),tr(uy,li);var p0=0;function aD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function us(n){n.readyState=4,n.l=null,n.j=null,n.A=null,md(n)}function md(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=uy.prototype).open=function(n,e){if(this.readyState!=p0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,md(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,us(this)),this.readyState=p0},tt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,md(this)),this.g&&(this.readyState=3,md(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},tt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?us(this):md(this),3==this.readyState&&aD(this)}},tt.Za=function(n){this.g&&(this.response=this.responseText=n,us(this))},tt.Ya=function(n){this.g&&(this.response=n,us(this))},tt.ka=function(){this.g&&us(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(uy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var NS=Ut.JSON.parse;function nr(n){li.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uD,this.L=this.M=!1}tr(nr,li);var uD="",cD=/^https?$/i,lD=["POST","PUT"];function ly(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,RS(n),Yp(n)}function RS(n){n.F||(n.F=!0,vi(n,"complete"),vi(n,"error"))}function g0(n){if(n.h&&typeof Lp<"u"&&(!n.C[1]||4!=Lo(n)||2!=n.da()))if(n.v&&4==Lo(n))GI(n.La,0,n);else if(vi(n,"readystatechange"),4==Lo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(a0)[1]||null;!o&&Ut.self&&Ut.self.location&&(o=Ut.self.location.protocol.slice(0,-1)),r=!cD.test(o?o.toLowerCase():"")}t=r}if(t)vi(n,"complete"),vi(n,"success");else{n.m=6;try{var u=2<Lo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",RS(n)}}finally{Yp(n)}}}function Yp(n,e){if(n.g){m0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||vi(n,"ready");try{t.onreadystatechange=r}catch{}}}function m0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Lo(n){return n.g?n.g.readyState:0}function dy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case uD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dD(n){let e="";return B_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function y0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dD(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function yd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hD(n){this.Ga=0,this.j=[],this.l=new Hp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yd("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yd("baseRetryDelayMs",5e3,n),this.hb=yd("retryDelaySeedMs",1e4,n),this.eb=yd("forwardChannelMaxRetries",2,n),this.xa=yd("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new rD(n&&n.concurrentRequestLimit),this.Ja=new MS,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hy(n){if(Qp(n),3==n.H){var e=n.W++,t=as(n.I);if(Sn(t,"SID",n.K),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),py(n,t),(e=new Hh(n,n.l,e)).L=2,e.v=Wh(as(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{t=Ut.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=mD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gh(e)}E0(n)}function fy(n){n.g&&(_0(n),n.g.cancel(),n.g=null)}function Qp(n){fy(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Xp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Fc(n){if(!AS(n.i)&&!n.m){n.m=!0;var e=n.Na;jp||Xm(),Jm||(jp(),Jm=!0),Q_.add(e,n),n.C=0}}function Jp(n,e){var t;t=e?e.m:n.W++;const r=as(n.I);Sn(r,"SID",n.K),Sn(r,"RID",t),Sn(r,"AID",n.V),py(n,r),n.o&&n.s&&y0(r,n.o,n.s),t=new Hh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=pD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),h0(n.i,t),ry(t,r,e)}function py(n,e){n.na&&B_(n.na,function(t,r){Sn(e,r,t)}),n.h&&pd({},function(t,r){Sn(e,r,t)})}function pD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ui(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].g;const M=o[w].map;if(b-=u,0>b)u=Math.max(0,o[w].g-100),m=!1;else try{xS(M,l,"req"+b+"_")}catch{r&&r(M)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function v0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;jp||Xm(),Jm||(jp(),Jm=!0),Q_.add(e,n),n.A=0}}function gy(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=jh(ui(n.Ma,n),Yh(n,n.A)),n.A++,0))}function _0(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function gD(n){n.g=new Hh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=as(n.wa);Sn(e,"RID","rpc"),Sn(e,"SID",n.K),Sn(e,"AID",n.V),Sn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Sn(e,"TO",n.qa),Sn(e,"TYPE","xmlhttp"),py(n,e),n.o&&n.s&&y0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Wh(as(e)),t.s=null,t.S=!0,s0(t,n)}function Xp(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function w0(n,e){var t=null;if(n.g==e){Xp(n),_0(n),n.g=null;var r=2}else{if(!oy(n.i,e))return;t=e.F,iD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;vi(r=Gp(),new YI(r,t)),Fc(n)}else v0(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function fD(n,e){return!(sy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=jh(ui(n.Na,n,e),Yh(n,n.C)),n.C++,0)))}(n,e)||2==r&&gy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:vd(n,5);break;case 4:vd(n,10);break;case 3:vd(n,6);break;default:vd(n,2)}}function Yh(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function vd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ui(n.pb,n);t||(t=new Oa("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||qh(t,"https"),Wh(t)),function f0(n,e){const t=new Hp;if(Ut.Image){const r=new Image;r.onload=Ph(ay,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ph(ay,t,r,"TestLoadImage: error",!1,e),r.onabort=Ph(ay,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ph(ay,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qi(2);n.H=0,n.h&&n.h.za(e),E0(n),Qp(n)}function E0(n){if(n.H=0,n.ma=[],n.h){const e=sD(n.i);(0!=e.length||0!=n.j.length)&&(sd(n.ma,e),sd(n.ma,n.j),n.i.i.length=0,Fh(n.j),n.j.length=0),n.h.ya()}}function I0(n,e,t){var r=t instanceof Oa?as(t):new Oa(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Pc(r,r.m);else{var o=Ut.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Oa(null);r&&qh(u,r),e&&(u.g=e),o&&Pc(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Sn(r,t,e),Sn(r,"VER",n.ra),py(n,r),r}function mD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Ha&&!n.va?new Kp({ob:!0}):n.va)).Oa(n.J),e}function yD(){}function Lc(){if(Lh&&!(10<=Number(V_)))throw Error("Environmental error: no available transport.")}function Ms(n,e){li.call(this),this.g=new hD(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!xc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qh(this)}function vD(n){e0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _D(){t0.call(this),this.status=1}function Qh(n){this.g=n}function Vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function D0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(tt=nr.prototype).Oa=function(n){this.M=n},tt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():n0.g(),this.C=function qp(n){return n.h||(n.h=n.i())}(this.u?this.u:n0),this.g.onreadystatechange=ui(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void ly(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ut.FormData&&n instanceof Ut.FormData,!(0<=kh(lD,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{m0(this),0<this.B&&((this.L=function cy(n){return Lh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ui(this.ua,this)):this.A=GI(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ly(this,u)}},tt.ua=function(){typeof Lp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vi(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vi(this,"complete"),vi(this,"abort"),Yp(this))},tt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yp(this,!0)),nr.$.N.call(this)},tt.La=function(){this.s||(this.G||this.v||this.l?g0(this):this.kb())},tt.kb=function(){g0(this)},tt.isActive=function(){return!!this.g},tt.da=function(){try{return 2<Lo(this)?this.g.status:-1}catch{return-1}},tt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},tt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),NS(e)}},tt.Ia=function(){return this.m},tt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=hD.prototype).ra=8,tt.H=1,tt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Hh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=BI(u),Bh(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pD(this,o,e),Sn(t=as(this.I),"RID",n),Sn(t,"CVER",22),this.F&&Sn(t,"X-HTTP-Session-Id",this.F),py(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(dD(u)))+"&"+e:this.o&&y0(t,this.o,u)),h0(this.i,o),this.bb&&Sn(t,"TYPE","init"),this.P?(Sn(t,"$req",e),Sn(t,"SID","null"),o.aa=!0,ry(o,t,null)):ry(o,t,e),this.H=2}}else 3==this.H&&(n?Jp(this,n):0==this.j.length||AS(this.i)||Jp(this))},tt.Ma=function(){if(this.u=null,gD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=jh(ui(this.jb,this),n)}},tt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qi(10),fy(this),gD(this))},tt.ib=function(){null!=this.v&&(this.v=null,fy(this),gy(this),qi(19))},tt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),qi(2)):(this.l.info("Failed to ping google.com"),qi(1))},tt.isActive=function(){return!!this.h&&this.h.isActive(this)},(tt=yD.prototype).Ba=function(){},tt.Aa=function(){},tt.za=function(){},tt.ya=function(){},tt.isActive=function(){return!0},tt.Va=function(){},Lc.prototype.g=function(n,e){return new Ms(n,e)},tr(Ms,li),Ms.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;qi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=I0(n,null,n.Y),Fc(n)},Ms.prototype.close=function(){hy(this.g)},Ms.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Qm(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fc(e)},Ms.prototype.N=function(){this.g.h=null,delete this.j,hy(this.g),delete this.g,Ms.$.N.call(this)},tr(vD,e0),tr(_D,t0),tr(Qh,yD),Qh.prototype.Ba=function(){vi(this.g,"a")},Qh.prototype.Aa=function(n){vi(this.g,new vD(n))},Qh.prototype.za=function(n){vi(this.g,new _D)},Qh.prototype.ya=function(){vi(this.g,"b")},tr(Vo,function OS(){this.blockSize=-1}),Vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)D0(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){D0(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){D0(this,r),o=0;break}}this.h=o,this.i+=e},Vo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var wD={};function eg(n){return-128<=n&&128>n?function cS(n,e){var t=wD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function Pa(n){if(isNaN(n)||!isFinite(n))return Jh;if(0>n)return _i(Pa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=C0;return new vn(e,0)}var C0=4294967296,Jh=eg(0),b0=eg(1),ED=eg(16777216);function xu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function eo(n){return-1==n.h}function _i(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(b0)}function ng(n,e){return n.add(_i(e))}function rg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ig(n,e){this.g=n,this.h=e}function T0(n,e){if(xu(e))throw Error("division by zero");if(xu(n))return new ig(Jh,Jh);if(eo(n))return e=T0(_i(n),e),new ig(_i(e.g),_i(e.h));if(eo(e))return e=T0(n,_i(e)),new ig(_i(e.g),e.h);if(30<n.g.length){if(eo(n)||eo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=b0,r=e;0>=r.X(n);)t=S0(t),r=S0(r);var o=_d(t,1),u=_d(r,1);for(r=_d(r,2),t=_d(t,2);!xu(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=_d(r,1),t=_d(t,1)}return e=ng(n,o.R(e)),new ig(o,e)}for(o=Jh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Pa(t)).R(e);eo(l)||0<l.X(n);)l=(u=Pa(t-=r)).R(e);xu(u)&&(u=b0),o=o.add(u),n=ng(n,l)}return new ig(o,n)}function S0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function _d(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(o,n.h)}(tt=vn.prototype).ea=function(){if(eo(this))return-_i(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:C0+r)*e,e*=C0}return n},tt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(xu(this))return"0";if(eo(this))return"-"+_i(this).toString(n);for(var e=Pa(Math.pow(n,6)),t=this,r="";;){var o=T0(t,e).g,u=((0<(t=ng(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(xu(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},tt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},tt.X=function(n){return eo(n=ng(this,n))?-1:xu(n)?0:1},tt.abs=function(){return eo(this)?_i(this):this},tt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},tt.R=function(n){if(xu(this)||xu(n))return Jh;if(eo(this))return eo(n)?_i(this).R(_i(n)):_i(_i(this).R(n));if(eo(n))return _i(this.R(_i(n)));if(0>this.X(ED)&&0>n.X(ED))return Pa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,w=65535&n.D(o);t[2*r+2*o]+=l*w,rg(t,2*r+2*o),t[2*r+2*o+1]+=u*w,rg(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,rg(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,rg(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},tt.gb=function(n){return T0(this,n).h},tt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},tt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},tt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},Lc.prototype.createWebChannel=Lc.prototype.g,Ms.prototype.send=Ms.prototype.u,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,zp.NO_ERROR=0,zp.TIMEOUT=8,zp.HTTP_ERROR=6,ty.COMPLETE="complete",X_.EventType=$h,$h.OPEN="a",$h.CLOSE="b",$h.ERROR="c",$h.MESSAGE="d",li.prototype.listen=li.prototype.O,nr.prototype.listenOnce=nr.prototype.P,nr.prototype.getLastError=nr.prototype.Sa,nr.prototype.getLastErrorCode=nr.prototype.Ia,nr.prototype.getStatus=nr.prototype.da,nr.prototype.getResponseJson=nr.prototype.Wa,nr.prototype.getResponseText=nr.prototype.ja,nr.prototype.send=nr.prototype.ha,nr.prototype.setWithCredentials=nr.prototype.Oa,Vo.prototype.digest=Vo.prototype.l,Vo.prototype.reset=Vo.prototype.reset,Vo.prototype.update=Vo.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=Pa,vn.fromString=function tg(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return _i(tg(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Pa(Math.pow(e,8)),r=Jh,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=Pa(Math.pow(e,u)),r=r.R(u).add(Pa(l))):r=(r=r.R(t)).add(Pa(l))}return r};var Ix=ko.createWebChannelTransport=function(){return new Lc},my=ko.getStatEventTarget=function(){return Gp()},A0=ko.ErrorCode=zp,PS=ko.EventType=ty,M0=ko.Event=ld,ID=ko.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ka=ko.FetchXmlHttpFactory=Kp,Vc=ko.WebChannel=X_,Ni=ko.XhrIo=nr,wd=ko.Md5=Vo,Nu=ko.Integer=vn;const xs="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Uo="9.23.0";const Ns=new Mc.Yd("@firebase/firestore");function Uc(){return Ns.logLevel}function Fe(n,...e){if(Ns.logLevel<=Mc.in.DEBUG){const t=e.map(Bc);Ns.debug(`Firestore (${Uo}): ${n}`,...t)}}function Fn(n,...e){if(Ns.logLevel<=Mc.in.ERROR){const t=e.map(Bc);Ns.error(`Firestore (${Uo}): ${n}`,...t)}}function wi(n,...e){if(Ns.logLevel<=Mc.in.WARN){const t=e.map(Bc);Ns.warn(`Firestore (${Uo}): ${n}`,...t)}}function Bc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+n;throw Fn(e),new Error(e)}function ft(n,e){n||rt()}function Xe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class x0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class N0{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft("string"==typeof r.accessToken),new x0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ft(null===e||"string"==typeof e),new Fr(e)}}class kS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Dx{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft("string"==typeof t.token),this.T=t.token,new FS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function bx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TD{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=bx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ef(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function SD(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pt(e)}static min(){return new pt(new Yn(0,0))}static max(){return new pt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ru{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ru.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ru?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Ru{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const yy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends Ru{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return yy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Jt.fromString(e))}static fromName(e){return new Ze(Jt.fromString(e).popFirst(5))}static empty(){return new Ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Jt(e.slice()))}}class sg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function R0(n){return n.fields.find(e=>2===e.kind)}function Bo(n){return n.fields.filter(e=>2!==e.kind)}sg.UNKNOWN_ID=-1;class vy{constructor(e,t){this.fieldPath=e,this.kind=t}}class og{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new og(0,Ri.min())}}function _y(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new Ri(o,Ze.empty(),e)}function ag(n){return new Ri(n.readTime,n.key,-1)}class Ri{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ri(pt.min(),Ze.empty(),-1)}static max(){return new Ri(pt.max(),Ze.empty(),-1)}}function AD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const MD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fa(n){return O0.apply(this,arguments)}function O0(){return O0=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==MD)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),O0.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(M=>{l[b]=M,++m,m===u&&r(l)},M=>o(M))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class wy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new tf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=P0(r.target.error);this.v.reject(new tf(e,o))}}static open(e,t,r,o){try{return new wy(t,e.transaction(o,r))}catch(u){throw new tf(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BS(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===jo.S((0,on.z$)())&&Fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Ed(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,on.hl)())return!1;if(jo.C())return!0;const e=(0,on.z$)(),t=jo.S(e),r=0<t&&t<10,o=jo.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new tf(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=wy.open(u.db,e,l?"readonly":"readwrite",r),b=o(w).next(M=>(w.P(),M)).catch(M=>(w.abort(M),se.reject(M))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,M="FirebaseError"!==b.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",M),u.close(),!M)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ND{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ed(this.L.delete())}}class tf extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ou(n){return"IndexedDbTransactionError"===n.name}class BS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ed(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Ed(this.store.add(e))}get(e){return Ed(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Ed(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Ed(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const l=P0(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new se((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new ND(m),b=t(m.primaryKey,m.value,w);if(b instanceof se){const M=b.catch(R=>(w.done(),se.reject(R)));r.push(M)}w.isDone?o():null===w.K?m.continue():m.continue(w.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ed(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=P0(r.target.error);t(o)}})}let RD=!1;function P0(n){const e=jo.S((0,on.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RD||(RD=!0,setTimeout(()=>{throw r},0)),r}}return n}class k0{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ou(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Fa(r)}yield t.et(6e4)}))}}class F0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=ag(u);AD(l,r)>0&&(r=l)}),new Ri(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Rs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function jc(n){return null==n}function $c(n){return 0===n&&1/n==-1/0}function Ey(n){return"number"==typeof n&&Number.isInteger(n)&&!$c(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OD(e)),e=jS(n.get(t),e);return OD(e)}function jS(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function OD(n){return n+"\x01\x01"}function La(n){const e=n.length;if(ft(e>=2),2===e)return ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:rt()}u=l+2}return new Jt(r)}const Iy=["userId","batchId"];function nf(n,e){return[n,Ei(e)]}function L0(n,e,t){return[n,Ei(e),t]}const PD={},$S=["prefixPath","collectionGroup","readTime","documentId"],HS=["prefixPath","collectionGroup","documentId"],kD=["collectionGroup","readTime","prefixPath","documentId"],V0=["canonicalId","targetId"],FD=["targetId","path"],U0=["path","targetId"],LD=["collectionId","parent"],GS=["indexId","uid"],VD=["uid","sequenceNumber"],UD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BD=["indexId","uid","orderedDocumentKey"],jD=["userId","collectionPath","documentId"],zS=["userId","collectionPath","largestBatchId"],qS=["userId","collectionGroup","largestBatchId"],$D=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HD=[...$D,"documentOverlays"],Dy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],B0=Dy,GD=[...B0,"indexConfiguration","indexState","indexEntries"];class Cy extends xD{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=Xe(n);return jo.M(t.ht,e)}function j0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class An{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Id(this.root,e,this.comparator,!1)}getReverseIterator(){return new Id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Id(this.root,e,this.comparator,!0)}}class Id{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Qn.RED,this.left=o??Qn.EMPTY,this.right=u??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Qn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Qn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1,Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Qn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zD(this.data.getIterator())}getIteratorFrom(e){return new zD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class zD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hc(n){return n.hasNext()?n.getNext():void 0}class Vr{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Vr([])}unionWith(e){let t=new $n(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ef(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class by extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new by("Invalid base64 string: "+o):o}}(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const Tx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dd(n){if(ft(!!n),"string"==typeof n){let e=0;const t=Tx.exec(n);if(ft(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ku(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function ug(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ty(n){const e=n.mapValue.fields.__previous_value__;return ug(e)?Ty(e):e}function ir(n){const e=Dd(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class qD{constructor(e,t,r,o,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class Gc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}const zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cg={nullValue:"NULL_VALUE"};function qc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ug(n)?4:Go(n)?9007199254740991:10:rt()}function $o(n,e){if(n===e)return!0;const t=qc(n);if(t!==qc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ir(n).isEqual(ir(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Dd(r.timestampValue),l=Dd(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ku(n.bytesValue).isEqual(ku(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return pr(r.geoPointValue.latitude)===pr(o.geoPointValue.latitude)&&pr(r.geoPointValue.longitude)===pr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return pr(r.integerValue)===pr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=pr(r.doubleValue),l=pr(o.doubleValue);return u===l?$c(u)===$c(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return ef(n.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(j0(u)!==j0(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!$o(u[m],l[m])))return!1;return!0}(n,e);default:return rt()}var o}function rf(n,e){return void 0!==(n.values||[]).find(t=>$o(t,e))}function Os(n,e){if(n===e)return 0;const t=qc(n),r=qc(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=pr(o.integerValue||o.doubleValue),m=pr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return WD(n.timestampValue,e.timestampValue);case 4:return WD(ir(n),ir(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=ku(o),m=ku(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Vt(l[w],m[w]);if(0!==b)return b}return Vt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Vt(pr(o.latitude),pr(u.latitude));return 0!==l?l:Vt(pr(o.longitude),pr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=Os(l[w],m[w]);if(b)return b}return Vt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===zc.mapValue&&u===zc.mapValue)return 0;if(o===zc.mapValue)return 1;if(u===zc.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let M=0;M<m.length&&M<b.length;++M){const R=Vt(m[M],b[M]);if(0!==R)return R;const $=Os(l[m[M]],w[b[M]]);if(0!==$)return $}return Vt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function WD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=Dd(n),r=Dd(e),o=Vt(t.seconds,r.seconds);return 0!==o?o:Vt(t.nanos,r.nanos)}function sf(n){return Sy(n)}function Sy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Dd(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ku(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Sy(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${Sy(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function Wc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZD(n){return!!n&&"integerValue"in n}function af(n){return!!n&&"arrayValue"in n}function My(n){return!!n&&"nullValue"in n}function Ho(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xy(n){return!!n&&"mapValue"in n}function lg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Go(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zo(n){return"nullValue"in n?cg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wc(Gc.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function qo(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wc(Gc.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?zc:rt()}function H0(n,e){const t=Os(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function G0(n,e){const t=Os(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lg(t)}setAll(e){let t=rr.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=lg(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];xy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Pu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ii(lg(this.value))}}function KD(n){const e=[];return Pu(n.fields,(t,r)=>{const o=new rr([t]);if(xy(r)){const u=KD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Vr(e)}class Hn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Hn(e,0,pt.min(),pt.min(),pt.min(),Ii.empty(),0)}static newFoundDocument(e,t,r,o){return new Hn(e,1,t,pt.min(),r,o,0)}static newNoDocument(e,t){return new Hn(e,2,t,pt.min(),pt.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,pt.min(),pt.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zc{constructor(e,t){this.position=e,this.inclusive=t}}function Ny(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):Os(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function uf(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$o(n.position[t],e.position[t]))return!1;return!0}class cf{constructor(e,t="asc"){this.field=e,this.dir=t}}function YD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class QD{}class Xt extends QD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Z0(e,t,r):"array-contains"===t?new eC(e,r):"in"===t?new Q0(e,r):"not-in"===t?new tC(e,r):"array-contains-any"===t?new nC(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Oy(e,r):new K0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Os(t,this.value)):null!==t&&qc(this.value)===qc(t)&&this.matchesComparison(Os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pn extends QD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new pn(e,t)}matches(e){return Cd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Cd(n){return"and"===n.op}function lf(n){return"or"===n.op}function z0(n){return q0(n)&&Cd(n)}function q0(n){for(const e of n.filters)if(e instanceof pn)return!1;return!0}function Ry(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+sf(n.value);if(z0(n))return n.filters.map(e=>Ry(e)).join(",");{const e=n.filters.map(t=>Ry(t)).join(",");return`${n.op}(${e})`}}function W0(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&$o(t.value,r.value)):n instanceof pn?function(t,r){return r instanceof pn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&W0(u,r.filters[l]),!0)}(n,e):void rt();var t,r}function JD(n,e){const t=n.filters.concat(e);return pn.create(t,n.op)}function XD(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${sf(e.value)}`:n instanceof pn?function(e){return e.op.toString()+" {"+e.getFilters().map(XD).join(" ,")+"}"}(n):"Filter";var e}class Z0 extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oy extends Xt{constructor(e,t){super(e,"in",t),this.keys=Y0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class K0 extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=Y0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Y0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class eC extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return af(t)&&rf(t.arrayValue,this.value)}}class Q0 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rf(this.value.arrayValue,t)}}class tC extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rf(this.value.arrayValue,t)}}class nC extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rf(this.value.arrayValue,r))}}class rC{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function Py(n,e=null,t=[],r=[],o=null,u=null,l=null){return new rC(n,e,t,r,o,u,l)}function bd(n){const e=Xe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ry(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sf(r)).join(",")),e.dt=t}return e.dt}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uf(n.startAt,e.startAt)&&uf(n.endAt,e.endAt)}function ky(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fy(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function iC(n,e,t){let r=cg,o=!0;for(const u of Fy(n,e)){let l=cg,m=!0;switch(u.op){case"<":case"<=":l=zo(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=cg}H0({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];H0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function sC(n,e,t){let r=zc,o=!0;for(const u of Fy(n,e)){let l=zc,m=!0;switch(u.op){case">=":case">":l=qo(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=zc}G0({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];G0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Fu{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function oC(n,e,t,r,o,u,l,m){return new Fu(n,e,t,r,o,u,l,m)}function df(n){return new Fu(n)}function aC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function J0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ly(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function X0(n){return null!==n.collectionGroup}function Td(n){const e=Xe(n);if(null===e.wt){e.wt=[];const t=Ly(e),r=J0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new cf(t)),e.wt.push(new cf(rr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new cf(rr.keyField(),u))}}}return e.wt}function Wi(n){const e=Xe(n);if(!e._t)if("F"===e.limitType)e._t=Py(e.path,e.collectionGroup,Td(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Td(e))t.push(new cf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Zc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Zc(e.startAt.position,e.startAt.inclusive):null;e._t=Py(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function ew(n,e){e.getFirstInequalityField(),Ly(n);const t=n.filters.concat([e]);return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vy(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hg(n,e){return dg(Wi(n),Wi(e))&&n.limitType===e.limitType}function tw(n){return`${bd(Wi(n))}|lt:${n.limitType}`}function Uy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>XD(r)).join(", ")}]`),jc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sf(r)).join(",")),`Target(${t})`}(Wi(n))}; limitType=${n.limitType})`}function hf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Td(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=Ny(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,Td(t),r)||t.endAt&&!function(o,u,l){const m=Ny(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,Td(t),r)));var t,r}function nw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rw(n){return(e,t)=>{let r=!1;for(const o of Td(n)){const u=uC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function uC(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?Os(m,w):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return $0(this.inner)}size(){return this.innerSize}}const cC=new An(Ze.comparator);function Zi(){return cC}const iw=new An(Ze.comparator);function ff(...n){let e=iw;for(const t of n)e=e.insert(t.key,t);return e}function Kc(n){let e=iw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ua(){return Ba()}function lC(){return Ba()}function Ba(){return new Va(n=>n.toString(),(n,e)=>n.isEqual(e))}const Sx=new An(Ze.comparator),sw=new $n(Ze.comparator);function jt(...n){let e=sw;for(const t of n)e=e.add(t);return e}const dC=new $n(Vt);function By(){return dC}function ZS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function Sd(n){return{integerValue:""+n}}function hC(n,e){return Ey(e)?Sd(e):ZS(n,e)}class jy{constructor(){this._=void 0}}function KS(n,e,t){return n instanceof Lu?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ug(o)&&(o=Ty(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ja?Ki(n,e):n instanceof gf?ow(n,e):function(r,o){const u=fC(r,o),l=pC(u)+pC(r.gt);return ZD(u)&&ZD(r.gt)?Sd(l):ZS(r.serializer,l)}(n,e)}function pf(n,e,t){return n instanceof ja?Ki(n,e):n instanceof gf?ow(n,e):t}function fC(n,e){return n instanceof Ad?ZD(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lu extends jy{}class ja extends jy{constructor(e){super(),this.elements=e}}function Ki(n,e){const t=aw(e);for(const r of n.elements)t.some(o=>$o(o,r))||t.push(r);return{arrayValue:{values:t}}}class gf extends jy{constructor(e){super(),this.elements=e}}function ow(n,e){let t=aw(e);for(const r of n.elements)t=t.filter(o=>!$o(o,r));return{arrayValue:{values:t}}}class Ad extends jy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function pC(n){return pr(n.integerValue||n.doubleValue)}function aw(n){return af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mf{constructor(e,t){this.field=e,this.transform=t}}class mC{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $y(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Hy{}function yf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ha(n.key,Jn.none()):new Md(n.key,n.data,Jn.none());{const t=n.data,r=Ii.empty();let o=new $n(rr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new $a(n.key,r,new Vr(o.toArray()),Jn.none())}}function YS(n,e,t){n instanceof Md?function(r,o,u){const l=r.value.clone(),m=yC(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof $a?function(r,o,u){if(!$y(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=yC(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(uw(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fg(n,e,t,r){return n instanceof Md?function(o,u,l,m){if(!$y(o.precondition,u))return l;const w=o.value.clone(),b=vf(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof $a?function(o,u,l,m){if(!$y(o.precondition,u))return l;const w=vf(o.fieldTransforms,m,u),b=u.data;return b.setAll(uw(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(M=>M.field))}(n,e,t,r):(l=t,$y(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function QS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=fC(r.transform,o||null);null!=u&&(null===t&&(t=Ii.empty()),t.set(r.field,u))}return t||null}function pg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ef(t,r,(o,u)=>function gC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ja&&r instanceof ja||t instanceof gf&&r instanceof gf?ef(t.elements,r.elements,$o):t instanceof Ad&&r instanceof Ad?$o(t.gt,r.gt):t instanceof Lu&&r instanceof Lu);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Md extends Hy{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $a extends Hy{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yC(n,e,t){const r=new Map;ft(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,pf(l,m,t[o]))}return r}function vf(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,KS(u,l,e))}return r}class Ha extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends Hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lw{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&YS(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lC();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=yf(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&ef(this.mutations,e.mutations,(t,r)=>pg(t,r))&&ef(this.baseMutations,e.baseMutations,(t,r)=>pg(t,r))}}class dw{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ft(e.mutations.length===r.length);let o=Sx;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new dw(e,t,r,o)}}class Gy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _C{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ur,rn;function wC(n){switch(n){default:return rt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function EC(n){if(void 0===n)return Fn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Ur.OK:return ce.OK;case Ur.CANCELLED:return ce.CANCELLED;case Ur.UNKNOWN:return ce.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return ce.INTERNAL;case Ur.UNAVAILABLE:return ce.UNAVAILABLE;case Ur.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ur.NOT_FOUND:return ce.NOT_FOUND;case Ur.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ur.ABORTED:return ce.ABORTED;case Ur.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ur.DATA_LOSS:return ce.DATA_LOSS;default:return rt()}}(rn=Ur||(Ur={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class IC{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hw}static getOrCreateInstance(){return null===hw&&(hw=new IC),hw}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let hw=null;function JS(){return new TextEncoder}const Ax=new Nu([4294967295,4294967295],0);function fw(n){const e=JS().encode(n),t=new wd;return t.update(e),new Uint8Array(t.digest())}function gg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Nu([t,r],0),new Nu([o,u],0)]}class pw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mg(`Invalid padding: ${t}`);if(r<0)throw new mg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new mg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Nu.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(Nu.fromNumber(r)));return 1===o.compare(Ax)&&(o=new Nu([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=fw(e),[r,o]=gg(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new pw(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=fw(e),[r,o]=gg(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _f{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _f(pt.min(),o,new An(Vt),Zi(),jt())}}class Vu{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vu(r,t,jt(),jt(),jt())}}class zy{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class DC{constructor(e,t){this.targetId=e,this.Vt=t}}class CC{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class bC{constructor(){this.St=0,this.Dt=gw(),this.Ct=Tr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jt(),t=jt(),r=jt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new Vu(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=gw()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Mx{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Zi(),this.zt=TC(),this.Wt=new An(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(ky(l))if(0===o){const m=new Ze(l.path);this.Yt(r,m,Hn.newNoDocument(m,pt.min()))}else ft(1===o);else{const m=this.ie(r);if(m!==o){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=IC.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,M,R){var $,te,be,Be,He,mt;const Mt={localCacheCount:M,existenceFilterCount:R.count},Ct=R.unchangedNames;return Ct&&(Mt.bloomFilter={applied:0===b,hashCount:null!==($=Ct?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Be=null===(be=null===(te=Ct?.bits)||void 0===te?void 0:te.bitmap)||void 0===be?void 0:be.length)&&void 0!==Be?Be:0,padding:null!==(mt=null===(He=Ct?.bits)||void 0===He?void 0:He.padding)&&void 0!==mt?mt:0}),Mt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=ku(u).toUint8Array()}catch(M){if(M instanceof by)return wi("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{b=new pw(w,l,m)}catch(M){return wi(M instanceof mg?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&ky(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Hn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=jt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new _f(e,t,this.Wt,this.jt,r);return this.jt=Zi(),this.zt=TC(),this.Wt=new An(Vt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new bC,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new $n(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new bC),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function TC(){return new An(Ze.comparator)}function gw(){return new An(Ze.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},eA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yg={and:"AND",or:"OR"};class tA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qy(n,e){return n.useProto3Json||jc(e)?e:{value:e}}function wf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nA(n,e){return wf(n,e.toTimestamp())}function gr(n){return ft(!!n),pt.fromTimestamp(function(e){const t=Dd(e);return new Yn(t.seconds,t.nanos)}(n))}function yw(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wy(n){const e=Jt.fromString(n);return ft(kC(e)),e}function vg(n,e){return yw(n.databaseId,e.path)}function Wo(n,e){const t=Wy(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(AC(t))}function Zy(n,e){return yw(n.databaseId,e)}function SC(n){const e=Wy(n);return 4===e.length?Jt.emptyPath():AC(e)}function _g(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AC(n){return ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ky(n,e,t){return{name:vg(n,e),fields:t.value.mapValue.fields}}function MC(n,e,t){const r=Wo(n,e.name),o=gr(e.updateTime),u=e.createTime?gr(e.createTime):pt.min(),l=new Ii({mapValue:{fields:e.fields}}),m=Hn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function wg(n,e){let t;if(e instanceof Md)t={update:Ky(n,e.key,e.value)};else if(e instanceof Ha)t={delete:vg(n,e.key)};else if(e instanceof $a)t={update:Ky(n,e.key,e.data),updateMask:uA(e.fieldMask)};else{if(!(e instanceof cw))return rt();t={verify:vg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Lu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ja)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ad)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nA(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function vw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Jn.updateTime(gr(o.updateTime)):void 0!==o.exists?Jn.exists(o.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(ft("REQUEST_TIME"===l.setToServerValue),m=new Lu):"appendMissingElements"in l?m=new ja(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new gf(l.removeAllFromArray.values||[]):"increment"in l?m=new Ad(u,l.increment):rt();const w=rr.fromServerFormat(l.fieldPath);return new mf(w,m)}(n,o)):[];var o;if(e.update){const o=Wo(n,e.update.name),u=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Vr((e.updateMask.fieldPaths||[]).map(b=>rr.fromServerFormat(b)));return new $a(o,u,l,t,r)}return new Md(o,u,t,r)}if(e.delete){const o=Wo(n,e.delete);return new Ha(o,t)}if(e.verify){const o=Wo(n,e.verify);return new cw(o,t)}return rt()}function NC(n,e){return{documents:[Zy(n,e.path)]}}function _w(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return PC(pn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Uu((M=b).field),direction:OC(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=qy(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function RC(n){let e=SC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ft(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=function(M){const R=ww(M);return R instanceof pn&&z0(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(M=>{return new cf(Ef((R=M).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,jc(R)?null:R}(t.limit));let w=null;var M;t.startAt&&(w=new Zc((M=t.startAt).values||[],!!M.before));let b=null;return t.endAt&&(b=function(M){return new Zc(M.values||[],!M.before)}(t.endAt)),oC(e,o,l,u,m,"F",w,b)}function ww(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ef(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ef(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ef(e.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ef(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Xt.create(Ef((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return pn.create(e.compositeFilter.filters.map(t=>ww(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function OC(n){return XS[n]}function oA(n){return eA[n]}function aA(n){return yg[n]}function Uu(n){return{fieldPath:n.canonicalString()}}function Ef(n){return rr.fromServerFormat(n.fieldPath)}function PC(n){return n instanceof Xt?function(e){if("=="===e.op){if(Ho(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NAN"}};if(My(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ho(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NAN"}};if(My(e.value))return{unaryFilter:{field:Uu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(e.field),op:oA(e.op),value:e.value}}}(n):n instanceof pn?function(e){const t=e.getFilters().map(r=>PC(r));return 1===t.length?t[0]:{compositeFilter:{op:aA(e.op),filters:t}}}(n):rt()}function uA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Zo{constructor(e,t,r,o,u=pt.min(),l=pt.min(),m=Tr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yy{constructor(e){this.fe=e}}function Qy(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vg(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wf(o,u.version.toTimestamp()),createTime:wf(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xd(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:xd(e.version)}}var o,u;return r}function Jy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bu(n){const e=new Yn(n.seconds,n.nanoseconds);return pt.fromTimestamp(e)}function Nd(n,e){const t=(e.baseMutations||[]).map(u=>vw(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>vw(n.fe,u)),o=Yn.fromMillis(e.localWriteTimeMs);return new lw(e.batchId,o,t,r)}function If(n){const e=Bu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Bu(n.lastLimboFreeSnapshotVersion):pt.min();let r;var o;return void 0!==n.query.documents?(ft(1===(o=n.query).documents.length),r=Wi(df(SC(o.documents[0])))):r=Wi(RC(n.query)),new Zo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function Yc(n,e){const t=xd(e.snapshotVersion),r=xd(e.lastLimboFreeSnapshotVersion);let o;o=ky(e.target)?NC(n.fe,e.target):_w(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Xy(n){const e=RC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vy(e,e.limit,"L"):e}function Ew(n,e){return new Gy(e.largestBatchId,vw(n.fe,e.overlayMutation))}function cA(n,e){const t=e.path.lastSegment();return[n,Ei(e.path.popLast()),t]}function ev(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xd(r.readTime),documentKey:Ei(r.documentKey.path),largestBatchId:r.largestBatchId}}class Iw{getBundleMetadata(e,t){return LC(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Bu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return LC(e).put({bundleId:(r=t).id,createTime:xd(gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Dw(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Xy(o.bundledQuery),readTime:Bu(o.readTime)};var o})}saveNamedQuery(e,t){return Dw(e).put({name:(r=t).name,readTime:xd(gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function LC(n){return Wr(n,"bundles")}function Dw(n){return Wr(n,"namedQueries")}class Eg{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Eg(e,t.uid||"")}getOverlay(e,t){return Ig(e).get(cA(this.userId,t)).next(r=>r?Ew(this.serializer,r):null)}getOverlays(e,t){const r=Ua();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new Gy(t,l);o.push(this.we(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(Ei(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Ig(e).J("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ua(),u=Ei(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ig(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=Ew(this.serializer,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ua();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ig(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,M)=>{const R=Ew(this.serializer,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):M.done()}).next(()=>u)}we(e,t){return Ig(e).put(function(r,o,u){const[l,m,w]=cA(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:wg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Ig(n){return Wr(n,"documentOverlays")}class Qc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),$c(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ku(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Go(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Cw(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function bw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Cw(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Qc.Ve=new Qc;class VC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=bw(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=bw(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class UC{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class BC{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Dg{constructor(){this.je=new VC,this.ze=new UC(this.je),this.We=new BC(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Rd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Rd(this.indexId,this.documentKey,this.arrayValue,r)}}function Jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jC(n.arrayValue,e.arrayValue),0!==t?t:(t=jC(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function jC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $C{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ft(e.collectionGroup===this.collectionId);const t=R0(e);if(void 0!==t&&!this.en(t))return!1;const r=Bo(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function lA(n){var e,t;if(ft(n instanceof Xt||n instanceof pn),n instanceof Xt){if(n instanceof Q0){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return pn.create(o,"or")}return n}const r=n.filters.map(o=>lA(o));return pn.create(r,n.op)}function HC(n){if(0===n.getFilters().length)return[];const e=Aw(lA(n));return ft(dA(e)),Tw(e)||Sw(e)?[e]:e.getFilters()}function Tw(n){return n instanceof Xt}function Sw(n){return n instanceof pn&&z0(n)}function dA(n){return Tw(n)||Sw(n)||function(e){if(e instanceof pn&&lf(e)){for(const t of e.getFilters())if(!Tw(t)&&!Sw(t))return!1;return!0}return!1}(n)}function Aw(n){if(ft(n instanceof Xt||n instanceof pn),n instanceof Xt)return n;if(1===n.filters.length)return Aw(n.filters[0]);const e=n.filters.map(r=>Aw(r));let t=pn.create(e,n.op);return t=tv(t),dA(t)?t:(ft(t instanceof pn),ft(Cd(t)),ft(t.filters.length>1),t.filters.reduce((r,o)=>Mw(r,o)))}function Mw(n,e){let t;return ft(n instanceof Xt||n instanceof pn),ft(e instanceof Xt||e instanceof pn),t=n instanceof Xt?e instanceof Xt?pn.create([n,e],"and"):GC(n,e):e instanceof Xt?GC(e,n):function(r,o){if(ft(r.filters.length>0&&o.filters.length>0),Cd(r)&&Cd(o))return JD(r,o.getFilters());const u=lf(r)?r:o,l=lf(r)?o:r,m=u.filters.map(w=>Mw(w,l));return pn.create(m,"or")}(n,e),tv(t)}function GC(n,e){if(Cd(e))return JD(e,n.getFilters());{const t=e.filters.map(r=>Mw(n,r));return pn.create(t,"or")}}function tv(n){if(ft(n instanceof Xt||n instanceof pn),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return tv(e[0]);if(q0(n))return n;const t=e.map(o=>tv(o)),r=[];return t.forEach(o=>{o instanceof Xt?r.push(o):o instanceof pn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:pn.create(r,n.op)}class hA{constructor(){this.rn=new xw}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ri.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class xw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new $n(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new $n(Jt.comparator)).toArray()}}const nv=new Uint8Array(0);class fA{constructor(e,t){this.user=e,this.databaseId=t,this.on=new xw,this.un=new Va(r=>bd(r),(r,o)=>dg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ei(o)};return zC(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[SD(t),""],!1,!0);return zC(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(La(l.parent))}return r})}addFieldIndex(e,t){const r=rv(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=bg(e);return u.next(m=>{l.put(ev(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=rv(e),o=bg(e),u=Cg(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Cg(e);let o=!0;const u=new Map;return se.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=jt();const m=[];return se.forEach(u,(w,b)=>{var M;Fe("IndexedDbIndexManager",`Using index ${M=w,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${bd(t)}`);const R=function(Ct,Ot){const Ht=R0(Ot);if(void 0===Ht)return null;for(const an of Fy(Ct,Ht.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(b,w),$=function(Ct,Ot){const Ht=new Map;for(const an of Bo(Ot))for(const ds of Fy(Ct,an.fieldPath))switch(ds.op){case"==":case"in":Ht.set(an.fieldPath.canonicalString(),ds.value);break;case"not-in":case"!=":return Ht.set(an.fieldPath.canonicalString(),ds.value),Array.from(Ht.values())}return null}(b,w),te=function(Ct,Ot){const Ht=[];let an=!0;for(const ds of Bo(Ot)){const tm=0===ds.kind?iC(Ct,ds.fieldPath,Ct.startAt):sC(Ct,ds.fieldPath,Ct.startAt);Ht.push(tm.value),an&&(an=tm.inclusive)}return new Zc(Ht,an)}(b,w),be=function(Ct,Ot){const Ht=[];let an=!0;for(const ds of Bo(Ot)){const tm=0===ds.kind?sC(Ct,ds.fieldPath,Ct.endAt):iC(Ct,ds.fieldPath,Ct.endAt);Ht.push(tm.value),an&&(an=tm.inclusive)}return new Zc(Ht,an)}(b,w),Be=this.hn(w,b,te),He=this.hn(w,b,be),mt=this.ln(w,b,$),Mt=this.fn(w.indexId,R,Be,te.inclusive,He,be.inclusive,mt);return se.forEach(Mt,Ct=>r.H(Ct,t.limit).next(Ot=>{Ot.forEach(Ht=>{const an=Ze.fromSegments(Ht.documentKey);l.has(an)||(l=l.add(an),m.push(an))})}))}).next(()=>m)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:HC(pn.create(e.filters,"and")).map(r=>Py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),M=[];for(let R=0;R<w;++R){const $=t?this.dn(t[R/b]):nv,te=this.wn(e,$,r[R%b],o),be=this._n(e,$,u[R%b],l),Be=m.map(He=>this.wn(e,$,He,!0));M.push(...this.createRange(te,be,Be))}return M}wn(e,t,r,o){const u=new Rd(e,Ze.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Rd(e,Ze.empty(),t,r);return o?u.Je():u}an(e,t){const r=new $C(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return se.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new $n(rr.comparator),b=!1;for(const M of m.filters)for(const R of M.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:w=w.add(R.field));for(const M of m.orderBy)M.field.isKeyField()||(w=w.add(M.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new Dg;for(const o of Bo(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);Qc.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Dg;return Qc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Dg;return Qc.Ve._e(Wc(this.databaseId,t),r.He(function(o){const u=Bo(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new Dg);let u=0;for(const l of Bo(e)){const m=r[u++];for(const w of o)if(this.yn(t,l.fieldPath)&&af(m))o=this.pn(o,l,m);else{const b=w.He(l.kind);Qc.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new Dg;w.seed(m.Qe()),Qc.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rv(e),o=bg(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(b,M){const R=M?new og(M.sequenceNumber,new Ri(Bu(M.readTime),new Ze(La(M.documentKey)),M.largestBatchId)):og.empty(),$=b.fields.map(([te,be])=>new vy(rr.fromServerFormat(te),be));return new sg(b.indexId,b.collectionGroup,$,R)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=rv(e),u=bg(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(ev(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this.En(e,o,w).next(b=>{const M=this.An(u,w);return b.isEqual(M)?se.resolve():this.vn(e,u,w,b,M)}))))})}Rn(e,t,r,o){return Cg(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return Cg(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=Cg(e);let u=new $n(Jc);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Rd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new $n(Jc);const o=this.mn(t,e);if(null==o)return r;const u=R0(t);if(null!=u){const l=e.data.field(u.fieldPath);if(af(l))for(const m of l.arrayValue.values||[])r=r.add(new Rd(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Rd(t.indexId,e.key,nv,o));return r}vn(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,M,R){const $=m.getIterator(),te=w.getIterator();let be=Hc($),Be=Hc(te);for(;be||Be;){let He=!1,mt=!1;if(be&&Be){const Mt=b(be,Be);Mt<0?mt=!0:Mt>0&&(He=!0)}else null!=be?mt=!0:He=!0;He?(M(Be),Be=Hc(te)):mt?(R(be),be=Hc($)):(be=Hc($),Be=Hc(te))}}(o,u,Jc,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),se.waitFor(l)}Tn(e){let t=1;return bg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Jc(l,m)).filter((l,m,w)=>!m||0!==Jc(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=Jc(l,e),w=Jc(l,t);if(0===m)o[0]=e.Je();else if(m>0&&w<0)o.push(l),o.push(l.Je());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,nv,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,nv,[]]))}return u}bn(e,t){return Jc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Df)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||rt())).next(Df)}}function zC(n){return Wr(n,"collectionParents")}function Cg(n){return Wr(n,"indexEntries")}function rv(n){return Wr(n,"indexConfiguration")}function bg(n){return Wr(n,"indexState")}function Df(n){ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;AD(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ri(e.readTime,e.documentKey,t)}const Nw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Di{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(M,R,$)=>(m++,$.delete()));u.push(w.next(()=>{ft(1===m)}));const b=[];for(const M of t.mutations){const R=L0(e,M.key.path,t.batchId);u.push(o.delete(R)),b.push(M.key)}return se.waitFor(u).next(()=>b)}function Tg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(41943040,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class Sg{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){ft(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Sg(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ag(e),l=Xc(e);return l.add({}).next(m=>{ft("number"==typeof m);const w=new lw(m,t,r,o),b=function($,te,be){const Be=be.baseMutations.map(mt=>wg($.fe,mt)),He=be.mutations.map(mt=>wg($.fe,mt));return{userId:te,batchId:be.batchId,localWriteTimeMs:be.localWriteTime.toMillis(),baseMutations:Be,mutations:He}}(this.serializer,this.userId,w),M=[];let R=new $n(($,te)=>Vt($.canonicalString(),te.canonicalString()));for(const $ of o){const te=L0(this.userId,$.key.path,m);R=R.add($.key.path.popLast()),M.push(l.put(b)),M.push(u.put(te,PD))}return R.forEach($=>{M.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),se.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Xc(e).get(t).next(r=>r?(ft(r.userId===this.userId),Nd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xc(e).X({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(ft(m.batchId>=r),u=Nd(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).j("userMutationsIndex",t).next(r=>r.map(o=>Nd(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ag(e).X({range:o},(l,m,w)=>{const[b,M,R]=l,$=La(M);if(b===this.userId&&t.path.isEqual($))return Xc(e).get(R).next(te=>{if(!te)throw rt();ft(te.userId===this.userId),u.push(Nd(this.serializer,te))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Vt);const o=[];return t.forEach(u=>{const l=nf(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Ag(e).X({range:m},(b,M,R)=>{const[$,te,be]=b,Be=La(te);$===this.userId&&u.path.isEqual(Be)?r=r.add(be):R.done()});o.push(w)}),se.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=nf(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new $n(Vt);return Ag(e).X({range:l},(w,b,M)=>{const[R,$,te]=w,be=La($);R===this.userId&&r.isPrefixOf(be)?be.length===o&&(m=m.add(te)):M.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Xc(e).get(u).next(l=>{if(null===l)throw rt();ft(l.userId===this.userId),r.push(Nd(this.serializer,l))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Rw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Ag(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=La(u[1]);o.push(w)}else m.done()}).next(()=>{ft(0===o.length)})})}containsKey(e,t){return Ow(e,this.userId,t)}xn(e){return pA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ow(n,e,t){const r=nf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Ag(n).X({range:u,Y:!0},(m,w,b)=>{const[M,R,$]=m;M===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function Xc(n){return Wr(n,"mutations")}function Ag(n){return Wr(n,"documentMutations")}function pA(n){return Wr(n,"mutationQueues")}class el{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new el(0)}static Mn(){return new el(-1)}}class gA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new el(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>pt.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Cf(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ft(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Cf(e).X((l,m)=>{const w=If(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Cf(e).X((r,o)=>{const u=If(o);t(u)})}$n(e){return qC(e).get("targetGlobalKey").next(t=>(ft(null!==t),t))}On(e,t){return qC(e).put("targetGlobalKey",t)}Fn(e,t){return Cf(e).put(Yc(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Cf(e).X({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const b=If(m);dg(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=tl(e);return t.forEach(l=>{const m=Ei(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=tl(e);return se.forEach(t,u=>{const l=Ei(u.path);return se.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=tl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=tl(e);let u=jt();return o.X({range:r,Y:!0},(l,m,w)=>{const b=La(l[1]),M=new Ze(b);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Ei(t.path),o=IDBKeyRange.bound([r],[SD(r)],!1,!0);let u=0;return tl(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return Cf(e).get(t).next(r=>r?If(r):null)}}function Cf(n){return Wr(n,"targets")}function qC(n){return Wr(n,"targetGlobal")}function tl(n){return Wr(n,"targetDocuments")}function bf([n,e],[t,r]){const o=Vt(n,t);return 0===o?Vt(e,r):o}class mA{constructor(e){this.Ln=e,this.buffer=new $n(bf),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bf(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ou(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fa(r)}yield t.Qn(3e5)}))}}class yA{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Rs.ct);const r=new mA(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Nw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nw):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,w,b;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),Uc()<=Mc.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-M}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(b-w)+`ms\nTotal Duration: ${b-M}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class _A{constructor(e,t){this.db=e,this.garbageCollector=function vA(n,e){return new yA(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return Pw(e,r)}removeReference(e,t,r){return Pw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pw(e,t)}Xn(e,t){return function(r,o){let u=!1;return pA(r).Z(l=>Ow(r,l,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,pt.min()),tl(e).delete([0,Ei(l.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pw(e,t)}Yn(e,t){const r=tl(e);let o,u=Rs.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Rs.ct&&t(new Ze(La(o)),u),u=b,o=w):u=Rs.ct}).next(()=>{u!==Rs.ct&&t(new Ze(La(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pw(n,e){return tl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ei(e.path),sequenceNumber:r}));var r}class Tf{constructor(){this.changes=new Va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nl(e).put(r)}removeEntry(e,t,r){return nl(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Jy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return nl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xg(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return nl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xg(t))},(o,u)=>{r={document:this.ts(t,u),size:Tg(u)}}).next(()=>r)}getEntries(e,t){let r=Zi();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=Zi(),o=new An(Ze.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,Tg(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let o=new $n(Ng);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(xg(o.first()),xg(o.last())),l=o.getIterator();let m=l.getNext();return nl(e).X({index:"documentKeyIndex",range:u},(w,b,M)=>{const R=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Ng(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?M.G(xg(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nl(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=Zi();for(const M of w){const R=this.ts(Ze.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);R.isFoundDocument()&&(hf(t,R)||o.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Zi();const l=kw(t,r),m=kw(t,Ri.max());return nl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,M)=>{const R=this.ts(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new EA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Mg(e).get("remoteDocumentGlobalKey").next(t=>(ft(!!t),t))}Zn(e,t){return Mg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function FC(n,e){let t;if(e.document)t=MC(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),o=Bu(e.noDocument.readTime);t=Hn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ze.fromSegments(e.unknownDocument.path),o=Bu(e.unknownDocument.version);t=Hn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Yn(r[0],r[1]);return pt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(pt.min()))return r}return Hn.newInvalidDocument(e)}}function WC(n){return new wA(n)}class EA extends Tf{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Va(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new $n((u,l)=>Vt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=Qy(this.os.serializer,l);o=o.add(u.path.popLast());const b=Tg(w);r+=b-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Qy(this.os.serializer,l.convertToNoDocument(pt.min()));t.push(this.os.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Mg(n){return Wr(n,"remoteDocumentGlobal")}function nl(n){return Wr(n,"remoteDocumentsV14")}function xg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kw(n,e){const t=e.documentKey.path.toArray();return[n,Jy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ng(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Vt(t[u],r[u]),o)return o;return o=Vt(t.length,r.length),o||(o=Vt(t[t.length-2],r[r.length-2]),o||Vt(t[t.length-1],r[r.length-1]))}class IA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&fg(r.mutation,o,Vr.empty(),Yn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const o=Ua();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=ff();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ua();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=Zi();const l=Ba(),m=Ba();return t.forEach((w,b)=>{const M=r.get(b.key);o.has(b.key)&&(void 0===M||M.mutation instanceof $a)?u=u.insert(b.key,b):void 0!==M?(l.set(b.key,M.mutation.getFieldMask()),fg(M.mutation,b,M.mutation.getFieldMask(),Yn.now())):l.set(b.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,M)=>l.set(b,M)),t.forEach((b,M)=>{var R;return m.set(b,new IA(M,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ba();let o=new An((l,m)=>l-m),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let M=r.get(w)||Vr.empty();M=m.applyToLocalView(b,M),r.set(w,M);const R=(o.get(m.batchId)||jt()).add(w);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,M=w.value,R=lC();M.forEach($=>{if(!u.has($)){const te=yf(t.get($),r.get($));null!==te&&R.set($,te),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):X0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Ua());let m=-1,w=u;return l.next(b=>se.forEach(b,(M,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(M)?se.resolve():this.remoteDocumentCache.getEntry(e,M).next($=>{w=w.insert(M,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,jt())).next(M=>({batchId:m,changes:Kc(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let o=ff();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=ff();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,m=>{const w=(b=t,M=m.child(o),new Fu(M,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,M;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Hn.newInvalidDocument(b)))});let l=ff();return u.forEach((m,w)=>{const b=o.get(m);void 0!==b&&fg(b.mutation,w,Vr.empty(),Yn.now()),hf(t,w)&&(l=l.insert(m,w))}),l})}}class KC{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:gr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Xy(r.bundledQuery),readTime:gr(r.readTime)}),se.resolve();var r}}class DA{constructor(){this.overlays=new An(Ze.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ua();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Ua(),u=t.length+1,l=new Ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new An((b,M)=>b-M);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let M=u.get(b.largestBatchId);null===M&&(M=Ua(),u=u.insert(b.largestBatchId,M)),M.set(b.getKey(),b)}}const m=Ua(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,M)=>m.set(b,M)),!(m.size()>=o)););return se.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Gy(t,r));let u=this.ls.get(t);void 0===u&&(u=jt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class Fw{constructor(){this.fs=new $n(Zr.ds),this.ws=new $n(Zr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Zr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Zr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new Jt([])),r=new Zr(t,e),o=new Zr(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new Jt([])),r=new Zr(t,e),o=new Zr(t,e+1);let u=jt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Zr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Zr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class sv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new $n(Zr.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new lw(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new Zr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zr(t,0),o=new Zr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Vt);return t.forEach(o=>{const u=new Zr(o,0),l=new Zr(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const l=new Zr(new Ze(u),0);let m=new $n(Vt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.As)),!0)},l),se.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ft(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,o=>{const u=new Zr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Zr(t,0),o=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class CA{constructor(e){this.Ds=e,this.docs=new An(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Zi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Hn.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Zi();const l=t.path,m=new Ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:M}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||AD(ag(M),r)<=0||(o.has(M.key)||hf(t,M))&&(u=u.insert(M.key,M.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,o){rt()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bA(this)}getSize(e){return se.resolve(this.size)}}class bA extends Tf{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class YC{constructor(e){this.persistence=e,this.xs=new Va(t=>bd(t),dg),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Fw,this.targetCount=0,this.Ms=el.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new el(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class ov{constructor(e,t){this.$s={},this.overlays={},this.Os=new Rs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new YC(this),this.indexManager=new hA,this.remoteDocumentCache=new CA(r=>this.referenceDelegate.Ls(r)),this.serializer=new Yy(t),this.qs=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new sv(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new Lw(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Lw extends xD{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Qs=new Fw,this.js=null}static zs(e){return new Rg(e)}get Ws(){if(this.js)return this.js;throw rt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const o=Ze.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,pt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class QC{constructor(e){this.serializer=e}O(e,t,r,o){const u=new wy("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0}),m.createObjectStore("documentMutations"),Vw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Vw(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0});const M=w.store("mutations"),R=b.map($=>M.put($));return se.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:jD});w.createIndex("collectionPathOverlayIndex",zS,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",qS,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:$S});w.createIndex("documentKeyIndex",HS),w.createIndex("collectionGroupIndex",kD)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:GS}).createIndex("sequenceNumberIndex",VD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:UD}).createIndex("documentKeyIndex",BD,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Tg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>se.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>se.forEach(m,w=>{ft(w.userId===u.userId);const b=Nd(this.serializer,w);return Rw(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const w=new Jt(l),b=[0,Ei(w)];u.push(t.get(b).next(M=>M?se.resolve():t.put({targetId:0,path:Ei(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:LD});const r=t.store("collectionParents"),o=new xw,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Ei(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new Jt(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const M=La(m);return u(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=If(o),l=Yc(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ze(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(M))}).next(()=>se.waitFor(o))}si(e,t){const r=t.store("mutations"),o=WC(this.serializer),u=new ov(Rg.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let M=null!==(b=m.get(w.userId))&&void 0!==b?b:jt();Nd(this.serializer,w).keys().forEach(R=>M=M.add(R)),m.set(w.userId,M)}),se.forEach(m,(w,b)=>{const M=new Fr(b),R=Eg.de(this.serializer,M),$=u.getIndexManager(M),te=Sg.de(M,this.serializer,$,u.referenceDelegate);return new ZC(o,te,R,$).recalculateAndSaveOverlaysForDocumentKeys(new Cy(t,Rs.ct),w).next()})})}}function Vw(n){n.createObjectStore("targetDocuments",{keyPath:FD}).createIndex("documentTargetsIndex",U0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V0,{unique:!0}),n.createObjectStore("targetGlobal")}const Uw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bw{constructor(e,t,r,o,u,l,m,w,b,M,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=M,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!Bw.D())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _A(this,o),this.di=t+"main",this.serializer=new Yy(w),this.wi=new jo(this.di,this.ui,new QC(this.serializer)),this.Bs=new gA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WC(this.serializer),this.qs=new Iw,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&Fn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,Uw);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Rs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ou(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Od(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return Sf(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wr(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):Od(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,Uw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sf(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Cy(t,Rs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Sf(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Sg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fA(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Eg.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?GD:14===l?B0:13===l?Dy:12===l?HD:11===l?$D:void rt();var l;let m;return this.wi.runTransaction(e,o,u,w=>(m=new Cy(w,this.Os?this.Os.next():Rs.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw Fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new xe(ce.FAILED_PRECONDITION,MD);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return Od(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,Uw)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Od(e).put("owner",t)}static D(){return jo.D()}Ai(e){const t=Od(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,on.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Fn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Od(n){return Wr(n,"owner")}function Sf(n){return Wr(n,"clientMetadata")}function uv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Og{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=jt(),o=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Og(e,t.fromCache,r,o)}}class cv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(aC(t))return se.resolve(null);let r=Wi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Vy(t,null,"F"),r=Wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=jt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,Vy(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,o){return aC(t)||o.isEqual(pt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(Uc()<=Mc.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uy(t)),this.Wi(e,l,t,_y(o,-1)))})}ji(e,t){let r=new $n(rw(e));return t.forEach((o,u)=>{hf(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return Uc()<=Mc.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Uy(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ri.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class TA{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new An(Vt),this.Yi=new Va(u=>bd(u),dg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function JC(n,e,t,r){return new TA(n,e,t,r)}function XC(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,ve.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=jt();for(const b of o){l.push(b.batchId);for(const M of b.mutations)w=w.add(M.key)}for(const b of u){m.push(b.batchId);for(const M of b.mutations)w=w.add(M.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),jw.apply(this,arguments)}function lv(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function nb(n,e,t){let r=jt(),o=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Zi();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(pt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:o}})}function rb(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pd(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Zo(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Af(n,e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Ou(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),dv.apply(this,arguments)}function Pg(n,e,t){const r=Xe(n);let o=pt.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const M=Xe(m),R=M.Yi.get(b);return void 0!==R?se.resolve(M.Ji.get(R)):M.Bs.getTargetData(w,b)}(r,l,Wi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:pt.min(),t?u:jt())).next(m=>(sb(r,nw(e),m),{documents:m,ir:u})))}function ib(n,e){const t=Xe(n),r=Xe(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function $w(n,e){const t=Xe(n),r=t.Xi.get(e)||pt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,_y(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(sb(t,e,o),o))}function sb(n,e,t){let r=n.Xi.get(e)||pt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function rl(){return rl=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n);let u=jt(),l=Zi();for(const b of t){const M=e.rr(b.metadata.name);b.document&&(u=u.add(M));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(M,R)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Pd(o,(b=r,Wi(df(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>nb(b,m,l).next(M=>(m.apply(b),M)).next(M=>o.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,M.nr,M.sr)).next(()=>M.nr)))}),rl.apply(this,arguments)}function SA(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,ve.Z)(function*(n,e,t=jt()){const r=yield Pd(n,Wi(Xy(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=gr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Hw.apply(this,arguments)}function AA(n,e){return`firestore_clients_${n}_${e}`}function MA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hv(n,e){return`firestore_targets_${n}_${e}`}class Mf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new xe(o.error.code,o.error.message))),l?new Mf(e,t,o.state,u):(Fn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new fv(e,r.state,o):(Fn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=By();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=Ey(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Gw(e,u):(Fn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ob{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ob(t.clientId,t.onlineState):(Fn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kd{constructor(){this.activeTargetIds=By()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zw{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new An(Vt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=AA(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new kd),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(AA(e.persistenceKey,o));if(u){const l=Gw.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hv(this.persistenceKey,e));if(r){const o=fv.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hv(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=Rs.ct;if(null!=u)try{const m=JSON.parse(u);ft("number"==typeof m),l=m}catch(m){Fn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Rs.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new Mf(this.currentUser,e,t,r),u=MA(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=MA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=hv(this.persistenceKey,e),u=new fv(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Gw.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return Mf.ar(new Fr(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return fv.ar(o,t)}br(e){return ob.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=By();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class pv{constructor(){this.Hr=new kd,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new kd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xA{Yr(e){}shutdown(){}}class qw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gv=null;function Ww(){return null===gv?gv=268435456+Math.round(2147483648*Math.random()):gv++,"0x"+gv.toString(16)}const NA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zw{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ci="WebChannelConnection";class RA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=Ww(),m=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,o,u),this.Ao(e,m,w,r).then(b=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw wi("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${NA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Ww();return new Promise((l,m)=>{const w=new Ni;w.setWithCredentials(!0),w.listenOnce(PS.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case A0.NO_ERROR:const M=w.getResponseJson();Fe(Ci,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(M)),l(M);break;case A0.TIMEOUT:Fe(Ci,`RPC '${e}' ${u} timed out`),m(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case A0.HTTP_ERROR:const R=w.getStatus();if(Fe(Ci,`RPC '${e}' ${u} failed with status:`,R,"response text:",w.getResponseText()),R>0){let $=w.getResponseJson();Array.isArray($)&&($=$[0]);const te=$?.error;if(te&&te.status&&te.message){const be=function(Be){const He=Be.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(He)>=0?He:ce.UNKNOWN}(te.status);m(new xe(be,te.message))}else m(new xe(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe(Ci,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Fe(Ci,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=Ww(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Ix(),m=my(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new ka({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const M=u.join("");Fe(Ci,`Creating RPC '${e}' stream ${o}: ${M}`,w);const R=l.createWebChannel(M,w);let $=!1,te=!1;const be=new Zw({ro:He=>{te?Fe(Ci,`Not sending because RPC '${e}' stream ${o} is closed:`,He):($||(Fe(Ci,`Opening RPC '${e}' stream ${o} transport.`),R.open(),$=!0),Fe(Ci,`RPC '${e}' stream ${o} sending:`,He),R.send(He))},oo:()=>R.close()}),Be=(He,mt,Mt)=>{He.listen(mt,Ct=>{try{Mt(Ct)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Be(R,Vc.EventType.OPEN,()=>{te||Fe(Ci,`RPC '${e}' stream ${o} transport opened.`)}),Be(R,Vc.EventType.CLOSE,()=>{te||(te=!0,Fe(Ci,`RPC '${e}' stream ${o} transport closed`),be.wo())}),Be(R,Vc.EventType.ERROR,He=>{te||(te=!0,wi(Ci,`RPC '${e}' stream ${o} transport errored:`,He),be.wo(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Be(R,Vc.EventType.MESSAGE,He=>{var mt;if(!te){const Mt=He.data[0];ft(!!Mt);const Ot=Mt.error||(null===(mt=Mt[0])||void 0===mt?void 0:mt.error);if(Ot){Fe(Ci,`RPC '${e}' stream ${o} received error:`,Ot);const Ht=Ot.status;let an=function(tm){const rO=Ur[tm];if(void 0!==rO)return EC(rO)}(Ht),ds=Ot.message;void 0===an&&(an=ce.INTERNAL,ds="Unknown error status: "+Ht+" with message "+Ot.message),te=!0,be.wo(new xe(an,ds)),R.close()}else Fe(Ci,`RPC '${e}' stream ${o} received:`,Mt),be._o(Mt)}}),Be(m,M0.STAT_EVENT,He=>{He.stat===ID.PROXY?Fe(Ci,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===ID.NOPROXY&&Fe(Ci,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{be.fo()},0),be}}function kg(){return typeof window<"u"?window:null}function xf(){return typeof document<"u"?document:null}function mv(n){return new tA(n,!0)}class yv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class ab{constructor(e,t,r,o,u,l,m,w){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Fn(t.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ub extends ab{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function rA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:rt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(ft(void 0===b||"string"==typeof b),Tr.fromBase64String(b||"")):(ft(void 0===b||b instanceof Uint8Array),Tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ce.UNKNOWN:EC(w.code);return new xe(b,w.message||"")}(l);t=new CC(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Wo(n,r.document.name),u=gr(r.document.updateTime),l=r.document.createTime?gr(r.document.createTime):pt.min(),m=new Ii({mapValue:{fields:r.document.fields}}),w=Hn.newFoundDocument(o,u,l,m);t=new zy(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=Wo(n,r.document),u=r.readTime?gr(r.readTime):pt.min(),l=Hn.newNoDocument(o,u);t=new zy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Wo(n,r.document);t=new zy([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new _C(o,u);t=new DC(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return pt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?pt.min():u.readTime?gr(u.readTime):pt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=_g(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=ky(m)?{documents:NC(o,m)}:{query:_w(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=mw(o,u.resumeToken);const w=qy(o,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(pt.min())>0){l.readTime=wf(o,u.snapshotVersion.toTimestamp());const w=qy(o,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function sA(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.Wo(t)}}class Nf extends ab{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function iA(n,e){return n&&n.length>0?(ft(void 0!==e),n.map(t=>function(r,o){let u=gr(r.updateTime?r.updateTime:o);return u.isEqual(pt.min())&&(u=gr(o)),new mC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.cu(r,t)}return ft(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=_g(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wg(this.serializer,r))};this.Wo(t)}}class OA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class xx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Fn(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class PA{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var w;il(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ve.Z)(function*(b){const M=Xe(b);M.vu.add(4),yield Rf(M),M.bu.set("Unknown"),M.vu.delete(4),yield vv(M)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new xx(r,o)}}function vv(n){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,ve.Z)(function*(n){if(il(n))for(const e of n.Ru)yield e(!0)}),Kw.apply(this,arguments)}function Rf(n){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),Yw.apply(this,arguments)}function Lg(n,e){const t=Xe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Xw(t)?_v(t):Fd(t).Ko()&&Qw(t,e))}function Of(n,e){const t=Xe(n),r=Fd(t);t.Au.delete(e),r.Ko()&&Jw(t,e),0===t.Au.size&&(r.Ko()?r.jo():il(t)&&t.bu.set("Unknown"))}function Qw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fd(n).su(e)}function Jw(n,e){n.Vu.qt(e),Fd(n).iu(e)}function _v(n){n.Vu=new Mx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Fd(n).start(),n.bu.gu()}function Xw(n){return il(n)&&!Fd(n).Uo()&&n.Au.size>0}function il(n){return 0===Xe(n).vu.size}function eE(n){n.Vu=void 0}function kA(n){return wv.apply(this,arguments)}function wv(){return wv=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{Qw(n,e)})}),wv.apply(this,arguments)}function lb(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,ve.Z)(function*(n,e){eE(n),Xw(n)?(n.bu.Iu(e),_v(n)):n.bu.set("Unknown")}),Ev.apply(this,arguments)}function db(n,e,t){return tE.apply(this,arguments)}function tE(){return tE=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof CC&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Iv(n,r)}else if(e instanceof zy?n.Vu.Ht(e):e instanceof DC?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(pt.min()))try{const r=yield lv(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(w);b&&o.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Tr.EMPTY_BYTE_STRING,b.snapshotVersion)),Jw(o,m);const M=new Zo(b.target,m,w,b.sequenceNumber);Qw(o,M)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Iv(n,r)}var r}),tE.apply(this,arguments)}function Iv(n,e,t){return hb.apply(this,arguments)}function hb(){return hb=(0,ve.Z)(function*(n,e,t){if(!Ou(e))throw e;n.vu.add(1),yield Rf(n),n.bu.set("Offline"),t||(t=()=>lv(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield vv(n)}))}),hb.apply(this,arguments)}function nE(n,e){return e().catch(t=>Iv(n,t,e))}function Vg(n){return fb.apply(this,arguments)}function fb(){return fb=(0,ve.Z)(function*(n){const e=Xe(n),t=sl(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Nx(e);)try{const o=yield rb(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,Rx(e,o)}catch(o){yield Iv(e,o)}FA(e)&&LA(e)}),fb.apply(this,arguments)}function Nx(n){return il(n)&&n.Eu.length<10}function Rx(n,e){n.Eu.push(e);const t=sl(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function FA(n){return il(n)&&!sl(n).Uo()&&n.Eu.length>0}function LA(n){sl(n).start()}function Ox(n){return pb.apply(this,arguments)}function pb(){return pb=(0,ve.Z)(function*(n){sl(n).hu()}),pb.apply(this,arguments)}function Px(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,ve.Z)(function*(n){const e=sl(n);for(const t of n.Eu)e.uu(t.mutations)}),Dv.apply(this,arguments)}function rE(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),o=dw.from(r,e,t);yield nE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Vg(n)}),Cv.apply(this,arguments)}function VA(n,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,ve.Z)(function*(n,e){var t;e&&sl(n).ou&&(yield(t=(0,ve.Z)(function*(r,o){if(wC(u=o.code)&&u!==ce.ABORTED){const l=r.Eu.shift();sl(r).Qo(),yield nE(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Vg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),FA(n)&&LA(n)}),Pf.apply(this,arguments)}function gb(n,e){return mb.apply(this,arguments)}function mb(){return mb=(0,ve.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=il(t);t.vu.add(3),yield Rf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield vv(t)}),mb.apply(this,arguments)}function yb(n,e){return iE.apply(this,arguments)}function iE(){return iE=(0,ve.Z)(function*(n,e){const t=Xe(n);e?(t.vu.delete(2),yield vv(t)):e||(t.vu.add(2),yield Rf(t),t.bu.set("Unknown"))}),iE.apply(this,arguments)}function Fd(n){return n.Su||(n.Su=function(e,t,r){const o=Xe(e);return o.fu(),new ub(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:kA.bind(null,n),ao:lb.bind(null,n),nu:db.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),Xw(n)?_v(n):n.bu.set("Unknown")):(yield n.Su.stop(),eE(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function sl(n){return n.Du||(n.Du=function(e,t,r){const o=Xe(e);return o.fu(),new Nf(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:Ox.bind(null,n),ao:VA.bind(null,n),au:Px.bind(null,n),cu:rE.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield Vg(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class sE{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new sE(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kf(n,e){if(Fn("AsyncQueue",`${e}: ${n}`),Ou(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Ug{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=ff(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new Ug(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ug)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ug;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class vb{constructor(){this.Cu=new An(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ga{constructor(e,t,r,o,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Ga(e,t,Ug.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class bv{constructor(){this.Nu=void 0,this.listeners=[]}}class UA{constructor(){this.queries=new Va(e=>tw(e),hg),this.onlineState="Unknown",this.ku=new Set}}function oE(n,e){return aE.apply(this,arguments)}function aE(){return aE=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new bv),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=kf(l,`Initialization of query '${Uy(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&dE(t)}),aE.apply(this,arguments)}function uE(n,e){return cE.apply(this,arguments)}function cE(){return cE=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),cE.apply(this,arguments)}function BA(n,e){const t=Xe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&dE(t)}function lE(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function dE(n){n.ku.forEach(e=>{e.next()})}class hE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ga(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class jA{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class _b{constructor(e){this.serializer=e}rr(e){return Wo(this.serializer,e)}ur(e){return e.metadata.exists?MC(this.serializer,e.document,!1):Hn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return gr(e)}}class $A{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wb(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Jt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new _b(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||jt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Yi(n,e,t,r){return rl.apply(this,arguments)}(e.localStore,new _b(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield SA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function wb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Eb{constructor(e){this.key=e}}class Ib{constructor(e){this.key=e}}class Db{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jt(),this.mutatedKeys=jt(),this.tc=rw(e),this.ec=new Ug(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new vb,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const $=o.get(M),te=hf(this.query,R)?R:null,be=!!$&&this.mutatedKeys.has($.key),Be=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let He=!1;$&&te?$.data.isEqual(te.data)?be!==Be&&(r.track({type:3,doc:te}),He=!0):this.rc($,te)||(r.track({type:2,doc:te}),He=!0,(w&&this.tc(te,w)>0||b&&this.tc(te,b)<0)&&(m=!0)):!$&&te?(r.track({type:0,doc:te}),He=!0):$&&!te&&(r.track({type:1,doc:$}),He=!0,(w||b)&&(m=!0)),He&&(te?(l=l.add(te),u=Be?u.add(M):u.delete(M)):(l=l.delete(M),u=u.delete(M)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const M="F"===this.query.limitType?l.last():l.first();l=l.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,M)=>function(R,$){const te=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return te(R)-te($)}(b.type,M.type)||this.tc(b.doc,M.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new Ga(this.query,e.ec,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new vb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Ib(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Eb(r))}),t}hc(e){this.Yu=e.ir,this.Zu=jt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ga.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Cb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fE{constructor(e){this.key=e,this.fc=!1}}class HA{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Va(m=>tw(m),hg),this._c=new Map,this.mc=new Set,this.gc=new An(Ze.comparator),this.yc=new Map,this.Ic=new Fw,this.Tc={},this.Ec=new Map,this.Ac=el.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function GA(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ve.Z)(function*(n,e){const t=kv(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Pd(t.localStore,Wi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Sv(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&Lg(t.remoteStore,l)}return o}),Tv.apply(this,arguments)}function Sv(n,e,t,r,o){return bb.apply(this,arguments)}function bb(){return bb=(0,ve.Z)(function*(n,e,t,r,o){n.Rc=(R,$,te)=>{return(be=(0,ve.Z)(function*(Be,He,mt,Mt){let Ct=He.view.sc(mt);Ct.zi&&(Ct=yield Pg(Be.localStore,He.query,!1).then(({documents:an})=>He.view.sc(an,Ct)));const Ot=Mt&&Mt.targetChanges.get(He.targetId),Ht=He.view.applyChanges(Ct,Be.isPrimaryClient,Ot);return Mb(Be,He.targetId,Ht.cc),Ht.snapshot}),function(Be,He,mt,Mt){return be.apply(this,arguments)})(n,R,$,te);var be};const u=yield Pg(n.localStore,e,!0),l=new Db(e,u.ir),m=l.sc(u.documents),w=Vu.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,w);Mb(n,t,b.cc);const M=new Cb(e,t,l);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),bb.apply(this,arguments)}function cs(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,ve.Z)(function*(n,e){const t=Xe(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!hg(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Af(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Of(t.remoteStore,r.targetId),Ff(t,r.targetId)}).catch(Fa))):(Ff(t,r.targetId),yield Af(t.localStore,r.targetId,!0))}),Av.apply(this,arguments)}function pE(){return pE=(0,ve.Z)(function*(n,e,t){const r=TE(n);try{const o=yield function(u,l){const m=Xe(u),w=Yn.now(),b=l.reduce(($,te)=>$.add(te.key),jt());let M,R;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let te=Zi(),be=jt();return m.Zi.getEntries($,b).next(Be=>{te=Be,te.forEach((He,mt)=>{mt.isValidDocument()||(be=be.add(He))})}).next(()=>m.localDocuments.getOverlayedDocuments($,te)).next(Be=>{M=Be;const He=[];for(const mt of l){const Mt=QS(mt,M.get(mt.key).overlayedDocument);null!=Mt&&He.push(new $a(mt.key,Mt,KD(Mt.value.mapValue),Jn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,He,l)}).next(Be=>{R=Be;const He=Be.applyToLocalDocumentSet(M,be);return m.documentOverlayCache.saveOverlays($,Be.batchId,He)})}).then(()=>({batchId:R.batchId,changes:Kc(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new An(Vt)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield za(r,o.changes),yield Vg(r.remoteStore)}catch(o){const u=kf(o,"Failed to persist write");t.reject(u)}}),pE.apply(this,arguments)}function gE(n,e){return mE.apply(this,arguments)}function mE(){return mE=(0,ve.Z)(function*(n,e){const t=Xe(n);try{const r=yield function tb(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((M,R)=>{const $=o.get(R);if(!$)return;m.push(t.Bs.removeMatchingKeys(u,M.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,M.addedDocuments,R)));let te=$.withSequenceNumber(u.currentSequenceNumber);var be,Be,He;null!==e.targetMismatches.get(R)?te=te.withResumeToken(Tr.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):M.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(M.resumeToken,r)),o=o.insert(R,te),Be=te,He=M,(0===(be=$).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-be.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,te))});let w=Zi(),b=jt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,M))}),m.push(nb(u,l,e.documentUpdates).next(M=>{w=M.nr,b=M.sr})),!r.isEqual(pt.min())){const M=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(M)}return se.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?ft(l.fc):o.removedDocuments.size>0&&(ft(l.fc),l.fc=!1))}),yield za(t,r,e)}catch(r){yield Fa(r)}}),mE.apply(this,arguments)}function Mv(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Xe(u);m.onlineState=l;let w=!1;m.queries.forEach((b,M)=>{for(const R of M.listeners)R.Mu(l)&&(w=!0)}),w&&dE(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ol(n,e,t){return xv.apply(this,arguments)}function xv(){return xv=(0,ve.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new An(Ze.comparator);l=l.insert(u,Hn.newNoDocument(u,pt.min()));const m=jt().add(u),w=new _f(pt.min(),new Map,new An(Vt),l,m);yield gE(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),IE(r)}else yield Af(r.localStore,e,!1).then(()=>Ff(r,e,t)).catch(Fa)}),xv.apply(this,arguments)}function yE(n,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield function eb(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const M=w.batch,R=M.keys();let $=se.resolve();return R.forEach(te=>{$=$.next(()=>b.getEntry(m,te)).next(be=>{const Be=w.docVersions.get(te);ft(null!==Be),be.version.compareTo(Be)<0&&(M.applyToRemoteDocument(be,w),be.isValidDocument()&&(be.setReadTime(w.commitVersion),b.addEntry(be)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=jt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);wE(t,r,null),_E(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield za(t,o)}catch(o){yield Fa(o)}}),Bg.apply(this,arguments)}function zA(n,e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,ve.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,l){const m=Xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(M=>(ft(null!==M),b=M.keys(),m.mutationQueue.removeMutationBatch(w,M))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);wE(r,e,t),_E(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield za(r,o)}catch(o){yield Fa(o)}}),Sb.apply(this,arguments)}function vE(){return vE=(0,ve.Z)(function*(n,e){const t=Xe(n);il(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=kf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),vE.apply(this,arguments)}function _E(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function wE(n,e,t){const r=Xe(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Ff(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||EE(n,r)})}function EE(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Of(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),IE(n))}function Mb(n,e,t){for(const r of t)r instanceof Eb?(n.Ic.addReference(r.key,e),xb(n,r)):r instanceof Ib?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||EE(n,r.key)):rt()}function xb(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),IE(n))}function IE(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(Jt.fromString(e)),r=n.Ac.next();n.yc.set(r,new fE(t)),n.gc=n.gc.insert(t,r),Lg(n.remoteStore,new Zo(Wi(df(t.path)),r,"TargetPurposeLimboResolution",Rs.ct))}}function za(n,e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const M=Og.Li(w.targetId,b);u.push(M)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,ve.Z)(function*(w,b){const M=Xe(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>se.forEach(b,$=>se.forEach($.Fi,te=>M.persistence.referenceDelegate.addReference(R,$.targetId,te)).next(()=>se.forEach($.Bi,te=>M.persistence.referenceDelegate.removeReference(R,$.targetId,te)))))}catch(R){if(!Ou(R))throw R;Fe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const $=R.targetId;if(!R.fromCache){const te=M.Ji.get($),Be=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);M.Ji=M.Ji.insert($,Be)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),Nb.apply(this,arguments)}function DE(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ve.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield XC(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield za(t,r.er)}var o}),Nv.apply(this,arguments)}function Rb(n,e){const t=Xe(n),r=t.yc.get(e);if(r&&r.fc)return jt().add(r.key);{let o=jt();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function qA(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ve.Z)(function*(n,e){const t=Xe(n),r=yield Pg(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&Mb(t,e.targetId,o.cc),o}),Rv.apply(this,arguments)}function Ob(n,e){return al.apply(this,arguments)}function al(){return al=(0,ve.Z)(function*(n,e){const t=Xe(n);return $w(t.localStore,e).then(r=>za(t,r))}),al.apply(this,arguments)}function Ov(n,e,t,r){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(l,m){const w=Xe(l),b=Xe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>b.Sn(M,m).next(R=>R?w.localDocuments.getDocuments(M,R):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Vg(o.remoteStore):"acknowledged"===t||"rejected"===t?(wE(o,e,r||null),_E(o,e),m=e,Xe(Xe(o.localStore).mutationQueue).Cn(m)):rt(),yield za(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pv.apply(this,arguments)}function CE(){return CE=(0,ve.Z)(function*(n,e){const t=Xe(n);if(kv(t),TE(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kb(t,r.toArray());t.vc=!0,yield yb(t.remoteStore,!0);for(const u of o)Lg(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Ff(t,l),Af(t.localStore,l,!0))),Of(t.remoteStore,l)}),yield o,yield kb(t,r),function(u){const l=Xe(u);l.yc.forEach((m,w)=>{Of(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new An(Ze.comparator)}(t),t.vc=!1,yield yb(t.remoteStore,!1)}}),CE.apply(this,arguments)}function kb(n,e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Pd(r.localStore,Wi(w[0]));for(const b of w){const M=r.wc.get(b),R=yield qA(r,M);R.snapshot&&u.push(R.snapshot)}}else{const b=yield ib(r.localStore,l);m=yield Pd(r.localStore,b),yield Sv(r,bE(b),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),Fb.apply(this,arguments)}function bE(n){return oC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WA(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).$i()}function ZA(n,e,t,r){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n);if(o.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield $w(o.localStore,nw(u[0])),m=_f.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield za(o,l,m);break}case"rejected":yield Af(o.localStore,e,!0),Ff(o,e,r);break;default:rt()}}),Lb.apply(this,arguments)}function kx(n,e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,ve.Z)(function*(n,e,t){const r=kv(n);if(r.vc){for(const o of e){if(r._c.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield ib(r.localStore,o),l=yield Pd(r.localStore,u);yield Sv(r,bE(u),l.targetId,!1,l.resumeToken),Lg(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield Af(r.localStore,o,!1).then(()=>{Of(r.remoteStore,o),Ff(r,o)}).catch(Fa))}}),Vb.apply(this,arguments)}function kv(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ol.bind(null,e),e.dc.nu=BA.bind(null,e.eventManager),e.dc.Pc=lE.bind(null,e.eventManager),e}function TE(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zA.bind(null,e),e}class jg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=mv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return JC(this.persistence,new cv,e.initialUser,this.serializer)}createPersistence(e){return new ov(Rg.zs,this.serializer)}createSharedClientState(e){return new pv}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ub extends jg{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield TE(r.Vc.syncEngine),yield Vg(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return JC(this.persistence,new cv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new iv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new F0(t,this.persistence);return new k0(e.asyncQueue,r)}createPersistence(e){const t=uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new Bw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kg(),xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new pv}}class YA extends Ub{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof zw&&(r.sharedClientState.syncEngine={jr:Ov.bind(null,o),zr:ZA.bind(null,o),Wr:kx.bind(null,o),$i:WA.bind(null,o),Qr:Ob.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ve.Z)(function*(l){yield function Pb(n,e){return CE.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=kg();if(!zw.D(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $g{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Mv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=DE.bind(null,r.syncEngine),yield yb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new UA}createDatastore(e){const t=mv(e.databaseInfo.databaseId),r=new RA(e.databaseInfo);return new OA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Mv(this.syncEngine,m,0),l=qw.D()?new qw:new xA,new PA(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,b){const M=new HA(r,o,u,l,m,w);return b&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Xe(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Rf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QA(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lv{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new jA(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,l){const m=Xe(u),w=_g(m.serializer)+"/documents",b={documents:l.map(te=>vg(m.serializer,te))},M=yield m.vo("BatchGetDocuments",w,b,l.length),R=new Map;M.forEach(te=>{const be=function xC(n,e){return"found"in e?function(t,r){ft(!!r.found);const o=Wo(t,r.found.name),u=gr(r.found.updateTime),l=r.found.createTime?gr(r.found.createTime):pt.min(),m=new Ii({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){ft(!!r.missing),ft(!!r.readTime);const o=Wo(t,r.missing),u=gr(r.readTime);return Hn.newNoDocument(o,u)}(n,e):rt()}(m.serializer,te);R.set(be.key.toString(),be)});const $=[];return l.forEach(te=>{const be=R.get(te.toString());ft(!!be),$.push(be)}),$}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ha(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ze.fromPath(o);e.mutations.push(new cw(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const l=Xe(o),m=_g(l.serializer)+"/documents",w={writes:u.map(b=>wg(l.serializer,b))};yield l.Io("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pt.min())?Jn.exists(!1):Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XA{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new yv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new JA(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wC(t)}return!1}}class Bb{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Fr.UNAUTHENTICATED,this.clientId=TD.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=kf(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function qa(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield XC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Vv.apply(this,arguments)}function Hg(n,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zg(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gb(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gb(e.remoteStore,u)),n._onlineComponents=e}),Gg.apply(this,arguments)}function jb(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function zg(n){return qg.apply(this,arguments)}function qg(){return qg=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qa(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!jb(t))throw t;wi("Error using user provided cache. Falling back to memory cache: "+t),yield qa(n,new jg)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield qa(n,new jg);return n._offlineComponents}),qg.apply(this,arguments)}function Ld(n){return $b.apply(this,arguments)}function $b(){return $b=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Hg(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Hg(n,new $g))),n._onlineComponents}),$b.apply(this,arguments)}function eM(n){return zg(n).then(e=>e.persistence)}function SE(n){return zg(n).then(e=>e.localStore)}function AE(n){return Ld(n).then(e=>e.remoteStore)}function ME(n){return Ld(n).then(e=>e.syncEngine)}function Lf(n){return xE.apply(this,arguments)}function xE(){return xE=(0,ve.Z)(function*(n){const e=yield Ld(n),t=e.eventManager;return t.onListen=GA.bind(null,e.syncEngine),t.onUnlisten=cs.bind(null,e.syncEngine),t}),xE.apply(this,arguments)}function Wb(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,m,w){const b=new Fv({next:R=>{u.enqueueAndForget(()=>uE(o,M));const $=R.docs.has(l);!$&&R.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&R.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),M=new hE(df(l.path),b,{includeMetadataChanges:!0,Ku:!0});return oE(o,M)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}function NE(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,m,w){const b=new Fv({next:R=>{u.enqueueAndForget(()=>uE(o,M)),R.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),M=new hE(l,b,{includeMetadataChanges:!0,Ku:!0});return oE(o,M)}(yield Lf(n),n.asyncQueue,e,t,r)})),r.promise}function Kb(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Yb=new Map;function Qb(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nM(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jb(n){if(!Ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Xb(n){if(Ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Uv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uv(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PE(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class kE{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Kb(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wg{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new CD;switch(t.type){case"firstParty":return new Dx(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Yb.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Yb.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Oi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class Wa extends Oi{constructor(e,t,r){super(e,t,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Ze(e))}withConverter(e){return new Wa(this.firestore,e,this._path)}}function Bv(n,e,...t){if(n=(0,on.m9)(n),Qb("collection","path",e),n instanceof Wg){const r=Jt.fromString(e,...t);return Xb(r),new Wa(n,null,r)}{if(!(n instanceof Ln||n instanceof Wa))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Xb(r),new Wa(n.firestore,null,r)}}function Zg(n,e,...t){if(n=(0,on.m9)(n),1===arguments.length&&(e=TD.A()),Qb("doc","path",e),n instanceof Wg){const r=Jt.fromString(e,...t);return Jb(r),new Ln(n,null,new Ze(r))}{if(!(n instanceof Ln||n instanceof Wa))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Jb(r),new Ln(n.firestore,n instanceof Wa?n.converter:null,new Ze(r))}}function tT(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),(n instanceof Ln||n instanceof Wa)&&(e instanceof Ln||e instanceof Wa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Vf(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),n instanceof Oi&&e instanceof Oi&&n.firestore===e.firestore&&hg(n._query,e._query)&&n.converter===e.converter}class rM{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yv(this,"async_queue_retry"),this.Xc=()=>{const t=xf();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=xf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=xf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ou(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Fn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=sE.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&rt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function LE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class nT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends Wg{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new rM,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||iM(this),this._firestoreClient.terminate()}}function Sr(n){return n._firestoreClient||iM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function iM(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qD(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Kb(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new Bb(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function iT(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield qa(n,t),yield Hg(n,e),r.resolve()}catch(o){const u=o;if(!jb(u))throw u;wi("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function aM(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(Tr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ju(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $u{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class i{constructor(e){this._methodName=e}}class s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const a=/^__.*__$/;class c{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new Md(e,this.data,t,this.fieldTransforms)}}class d{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class y{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new y(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return $v(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(p(this.ca)&&a.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class E{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mv(e)}ya(e,t,r,o=!1){return new y({ca:e,methodName:t,ga:r,path:rr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D(n){const e=n._freezeSettings(),t=mv(n._databaseId);return new E(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);Pi("Data must be an object, but it was:",l,r);const m=$t(r,l);let w,b;if(u.merge)w=new Vr(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const $=Ps(e,R,t);if(!l.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);sT(M,$)||M.push($)}w=new Vr(M),b=l.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,b=l.fieldTransforms;return new c(new Ii(m),w,b)}class x extends i{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof x}}function F(n,e,t){return new y({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class z extends i{_toFieldTransform(e){return new mf(e.path,new Lu)}isEqual(e){return e instanceof z}}class X extends i{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=F(this,e,!0),r=this.pa.map(u=>Tt(u,t)),o=new ja(r);return new mf(e.path,o)}isEqual(e){return this===e}}class we extends i{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=F(this,e,!0),r=this.pa.map(u=>Tt(u,t)),o=new gf(r);return new mf(e.path,o)}isEqual(e){return this===e}}class Ve extends i{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ad(e.serializer,hC(e.serializer,this.Ia));return new mf(e.path,t)}isEqual(e){return this===e}}function Je(n,e,t,r){const o=n.ya(1,e,t);Pi("Data must be an object, but it was:",o,r);const u=[],l=Ii.empty();Pu(r,(w,b)=>{const M=Bf(e,w,t);b=(0,on.m9)(b);const R=o.da(M);if(b instanceof x)u.push(M);else{const $=Tt(b,R);null!=$&&(u.push(M),l.set(M,$))}});const m=new Vr(u);return new d(l,m,o.fieldTransforms)}function gt(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[Ps(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(Ps(e,u[$])),w.push(u[$+1]);const b=[],M=Ii.empty();for(let $=m.length-1;$>=0;--$)if(!sT(b,m[$])){const te=m[$];let be=w[$];be=(0,on.m9)(be);const Be=l.da(te);if(be instanceof x)b.push(te);else{const He=Tt(be,Be);null!=He&&(b.push(te),M.set(te,He))}}const R=new Vr(b);return new d(M,R,l.fieldTransforms)}function Oe(n,e,t,r=!1){return Tt(t,n.ya(r?4:3,e))}function Tt(n,e){if(gn(n=(0,on.m9)(n)))return Pi("Unsupported field value:",e,n),$t(n,e);if(n instanceof i)return function(t,r){if(!p(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Tt(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,on.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hC(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Yn.fromDate(t);return{timestampValue:wf(r.serializer,o)}}if(t instanceof Yn){const o=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wf(r.serializer,o)}}if(t instanceof s)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ju)return{bytesValue:mw(r.serializer,t._byteString)};if(t instanceof Ln){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Uv(t)}`)}(n,e)}function $t(n,e){const t={};return $0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pu(n,(r,o)=>{const u=Tt(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function gn(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof s||n instanceof ju||n instanceof Ln||n instanceof i)}function Pi(n,e,t){if(!gn(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Uv(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Ps(n,e,t){if((e=(0,on.m9)(e))instanceof $u)return e._internalPath;if("string"==typeof e)return Bf(n,e);throw $v("Field path arguments must be of type string or ",n,!1,void 0,t)}const Uf=new RegExp("[~\\*/\\[\\]]");function Bf(n,e,t){if(e.search(Uf)>=0)throw $v(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $u(...e.split("."))._internalPath}catch{throw $v(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $v(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function sT(n,e){return n.some(t=>t.isEqual(e))}class VE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lO extends VE{data(){return super.data()}}function oT(n,e){return"string"==typeof e?Bf(n,e):e instanceof $u?e._internalPath:e._delegate._internalPath}function qx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uM{}class UE extends uM{}function jf(n,e,...t){let r=[];e instanceof uM&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Hv).length,l=o.filter(m=>m instanceof BE).length;if(u>1||u>0&&l>0)throw new xe(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class BE extends UE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new BE(e,t,r)}_apply(e){const t=this._parse(e);return Yx(e._query,t),new Oi(e.firestore,e.converter,ew(e._query,t))}_parse(e){const t=D(e.firestore);return function(o,u,l,m,w,b,M){let R;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Kx(M,b);const $=[];for(const te of M)$.push(Zx(m,o,te));R={arrayValue:{values:$}}}else R=Zx(m,o,M)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Kx(M,b),R=Oe(l,"where",M,"in"===b||"not-in"===b);return Xt.create(w,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Hv extends uM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)Yx(u,m),u=ew(u,m)}(e._query,t),new Oi(e.firestore,e.converter,ew(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cM extends UE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cM(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new cf(o,u);return function(m,w){if(null===J0(m)){const b=Ly(m);null!==b&&Qx(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class aT extends UE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new aT(e,t,r)}_apply(e){return new Oi(e.firestore,e.converter,Vy(e._query,this._limit,this._limitType))}}class uT extends UE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uT(e,t,r)}_apply(e){const t=Wx(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(o=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class cT extends UE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cT(e,t,r)}_apply(e){const t=Wx(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(o=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Wx(n,e,t,r){if(t[0]=(0,on.m9)(t[0]),t[0]instanceof VE)return function(o,u,l,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const M of Td(o))if(M.field.isKeyField())b.push(Wc(u,m.key));else{const R=m.data.field(M.field);if(ug(R))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const $=M.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(R)}return new Zc(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=D(n.firestore);return function(u,l,m,w,b,M){const R=u.explicitOrderBy;if(b.length>R.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let te=0;te<b.length;te++){const be=b[te];if(R[te].field.isKeyField()){if("string"!=typeof be)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof be}`);if(!X0(u)&&-1!==be.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${be}' contains a slash.`);const Be=u.path.child(Jt.fromString(be));if(!Ze.isDocumentKey(Be))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const He=new Ze(Be);$.push(Wc(l,He))}else{const Be=Oe(m,w,be);$.push(Be)}}return new Zc($,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Zx(n,e,t){if("string"==typeof(t=(0,on.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X0(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ze.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wc(n,new Ze(r))}if(t instanceof Ln)return Wc(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uv(t)}.`)}function Kx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yx(n,e){if(e.isInequality()){const r=Ly(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=J0(n);null!==u&&Qx(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qx(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class lM{convertValue(e,t="none"){switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pu(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new s(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ty(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ir(e));default:return null}}convertTimestamp(e){const t=Dd(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);ft(kC(r));const o=new Gc(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return o.isEqual(t)||Fn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _O extends lM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class Kg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vd extends VE{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jE extends Vd{data(e={}){return super.data(e)}}class $f{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kg(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jE(this._firestore,this._userDataWriter,r.key,r,new Kg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new jE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new jE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:EO(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function Xx(n,e){return n instanceof Vd&&e instanceof Vd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $f&&e instanceof $f&&n._firestore===e._firestore&&Vf(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Hf extends lM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function eN(n,e,t){n=en(n,Ln);const r=en(n.firestore,Xn),o=lT(n.converter,e,t);return Gv(r,[S(D(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Jn.none())])}function tN(n,e,t,...r){n=en(n,Ln);const o=en(n.firestore,Xn),u=D(o);let l;return l="string"==typeof(e=(0,on.m9)(e))||e instanceof $u?gt(u,"updateDoc",n._key,e,t,r):Je(u,"updateDoc",n._key,e),Gv(o,[l.toMutation(n._key,Jn.exists(!0))])}function nN(n,...e){var t,r,o;n=(0,on.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||LE(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(LE(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,b,M;if(n instanceof Ln)b=en(n.firestore,Xn),M=df(n._key.path),w={next:R=>{e[l]&&e[l](dM(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=en(n,Oi);b=en(R.firestore,Xn),M=R._query;const $=new Hf(b);w={next:te=>{e[l]&&e[l](new $f(b,$,R,te))},error:e[l+1],complete:e[l+2]},qx(n._query)}return function(R,$,te,be){const Be=new Fv(be),He=new hE($,Be,te);return R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return oE(yield Lf(R),He)})),()=>{Be.Dc(),R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return uE(yield Lf(R),He)}))}}(Sr(b),M,m,w)}function Gv(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Tb(n,e,t){return pE.apply(this,arguments)}(yield ME(t),r,o)})),o.promise}(Sr(n),e)}function dM(n,e,t){const r=t.docs.get(e._key),o=new Hf(n);return new Vd(n,o,e._key,r,new Kg(t.hasPendingWrites,t.fromCache),e.converter)}const UO={maxAttempts:5};class rN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=D(e)}set(e,t,r){this._verifyNotCommitted();const o=Gf(e,this._firestore),u=lT(o.converter,t,r),l=S(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Jn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Gf(e,this._firestore);let l;return l="string"==typeof(t=(0,on.m9)(t))||t instanceof $u?gt(this._dataReader,"WriteBatch.update",u._key,t,r,o):Je(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gf(e,this._firestore);return this._mutations=this._mutations.concat(new Ha(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gf(n,e){if((n=(0,on.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class BO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=D(e)}get(e){const t=Gf(e,this._firestore),r=new _O(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new VE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new VE(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=Gf(e,this._firestore),u=lT(o.converter,t,r),l=S(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Gf(e,this._firestore);let l;return l="string"==typeof(t=(0,on.m9)(t))||t instanceof $u?gt(this._dataReader,"Transaction.update",u._key,t,r,o):Je(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Gf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gf(e,this._firestore),r=new Hf(this._firestore);return super.get(e).then(o=>new Vd(this._firestore,r,t._key,o._document,new Kg(!1,!1),t.converter))}}function hM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sN(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function oN(){if(!function WS(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Uo=jm.SDK_VERSION,(0,jm._registerComponent)(new $m.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Xn(new N0(t.getProvider("auth-internal")),new LS(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,jm.registerVersion)(xs,"3.13.0",n),(0,jm.registerVersion)(xs,"3.13.0","esm2017")}();class $E{constructor(e){this._delegate=e}static fromBase64String(e){return oN(),new $E(ju.fromBase64String(e))}static fromUint8Array(e){return sN(),new $E(ju.fromUint8Array(e))}toBase64(){return oN(),this._delegate.toBase64()}toUint8Array(){return sN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fM(n){return function KO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YO{enableIndexedDbPersistence(e,t){return function Ux(n,e){aM(n=en(n,Xn));const t=Sr(n);if(t._uninitializedComponentsProvider)throw new xe(ce.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new $g;return iT(t,o,new Ub(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sM(n){aM(n=en(n,Xn));const e=Sr(n);if(e._uninitializedComponentsProvider)throw new xe(ce.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new $g;return iT(e,r,new YA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Bx(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!jo.D())return Promise.resolve();const o=r+"main";yield jo.delete(o)}),function(r){return t.apply(this,arguments)})(uv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FE(n,e,t,r={}){var o;const u=(n=en(n,Wg))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Fr.MOCK_USER;else{m=(0,on.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Fr(b)}n._authCredentials=new bD(new x0(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function $x(n){return function Gb(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield eM(n),t=yield AE(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.vu.delete(0),vv(o)}(t)}))}(Sr(n=en(n,Xn)))}(this._delegate)}disableNetwork(){return function Hx(n){return function zb(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield eM(n),t=yield AE(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=Xe(o);u.vu.add(0),yield Rf(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Sr(n=en(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jx(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Ab(n,e){return vE.apply(this,arguments)}(yield ME(e),t)})),t.promise}(Sr(n=en(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function xO(n,e){return function RE(n,e){const t=new Fv(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Lf(n),o=t,Xe(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Lf(n),o=t,void Xe(r).ku.delete(o);var r,o}))}}(Sr(n=en(n,Xn)),LE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zv(this,Bv(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Za(this,Zg(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fs(this,function eT(n,e){if(n=en(n,Wg),Qb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oi(n,null,(t=e,new Fu(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jO(n,e,t){n=en(n,Xn);const r=Object.assign(Object.assign({},UO),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Lr;return o.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const w=yield function Hb(n){return Ld(n).then(e=>e.datastore)}(o);new XA(o.asyncQueue,w,l,u,m).run()})),m.promise}(Sr(n),o=>e(new BO(n,o)),r)}(this._delegate,t=>e(new uN(this,t)))}batch(){return Sr(this._delegate),new cN(new rN(this._delegate,e=>Gv(this._delegate,e)))}loadBundle(e){return function oM(n,e){const t=Sr(n=en(n,Xn)),r=new nT;return function Lx(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?JS().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return QA(w,b);if(w instanceof ArrayBuffer)return QA(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Lv(w,l);var w}(t,mv(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function KA(n,e,t){const r=Xe(n);var o;(o=(0,ve.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,te){const be=Xe($),Be=gr(te.createTime);return be.persistence.runTransaction("hasNewerBundle","readonly",He=>be.qs.getBundleMetadata(He,te.id)).then(He=>!!He&&He.createTime.compareTo(Be)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(wb(w));const b=new $A(w,u.localStore,l.serializer);let M=yield l.bc();for(;M;){const $=yield b.zu(M);$&&m._updateProgress($),M=yield l.bc()}const R=yield b.complete();return yield za(u,R.Ju,void 0),yield function($,te){const be=Xe($);return be.persistence.runTransaction("Save bundle","readwrite",Be=>be.qs.saveBundleMetadata(Be,te))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(w){return wi("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield ME(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Gx(n,e){return function Zb(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield SE(n),e)}))}(Sr(n=en(n,Xn)),e).then(t=>t?new Oi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fs(this,t):null)}}class dT extends lM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $E(new ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Za.forKey(t,this.firestore,null)}}class uN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}get(e){const t=Qg(e);return this._delegate.get(t).then(r=>new HE(this._firestore,new Vd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Qg(e);return r?(hM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qg(e);return this._delegate.delete(t),this}}class cN{constructor(e){this._delegate=e}set(e,t,r){const o=Qg(e);return r?(hM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new GE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yg.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Yg(e,new dT(e),t),o.set(t,u)),u}}Yg.INSTANCES=new WeakMap;class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Za(t,new Ln(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Za(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zv(this.firestore,Bv(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.m9)(e))instanceof Ln&&tT(this._delegate,e)}set(e,t){t=hM("DocumentReference.set",t);try{return t?eN(this._delegate,e,t):eN(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tN(this._delegate,e):tN(this._delegate,e,t,...r)}catch(o){throw ks(o,"updateDoc()","DocumentReference.update()")}}delete(){return function AO(n){return Gv(en(n.firestore,Xn),[new Ha(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=lN(e),r=dN(e,o=>new HE(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return nN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function DO(n){n=en(n,Ln);const e=en(n.firestore,Xn),t=Sr(e),r=new Hf(e);return function qb(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const m=yield function(w,b){const M=Xe(w);return M.persistence.runTransaction("read document","readonly",R=>M.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=kf(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield SE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Vd(e,r,n._key,o,new Kg(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CO(n){n=en(n,Ln);const e=en(n.firestore,Xn);return Wb(Sr(e),n._key,{source:"server"}).then(t=>dM(e,n,t))}(this._delegate):function IO(n){n=en(n,Ln);const e=en(n.firestore,Xn);return Wb(Sr(e),n._key).then(t=>dM(e,n,t))}(this._delegate),t.then(r=>new HE(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function lN(n){for(const e of n)if("object"==typeof e&&!fM(e))return e;return{}}function dN(n,e){var t,r;let o;return o=fM(n[0])?n[0]:fM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class HE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Xx(this._delegate,e._delegate)}}class GE extends HE{data(e){const t=this._delegate.data(e);return function DD(n,e){n||rt()}(void 0!==t),t}}class Fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dT(e)}where(e,t,r){try{return new Fs(this.firestore,jf(this._delegate,function dO(n,e,t){const r=e,o=oT("where",n);return BE._create(o,r,t)}(e,t,r)))}catch(o){throw ks(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fs(this.firestore,jf(this._delegate,function hO(n,e="asc"){const t=e,r=oT("orderBy",n);return cM._create(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fs(this.firestore,jf(this._delegate,function fO(n){return PE("limit",n),aT._create("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fs(this.firestore,jf(this._delegate,function pO(n){return PE("limitToLast",n),aT._create("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fs(this.firestore,jf(this._delegate,function gO(...n){return uT._create("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fs(this.firestore,jf(this._delegate,function mO(...n){return uT._create("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fs(this.firestore,jf(this._delegate,function yO(...n){return cT._create("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fs(this.firestore,jf(this._delegate,function vO(...n){return cT._create("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return Vf(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function TO(n){n=en(n,Oi);const e=en(n.firestore,Xn),t=Sr(e),r=new Hf(e);return function tM(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const m=yield Pg(o,u,!0),w=new Db(u,m.ir),b=w.sc(m.documents),M=w.applyChanges(b,!1);l.resolve(M.snapshot)}catch(m){const w=kf(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield SE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new $f(e,r,n,o))}(this._delegate):"server"===e?.source?function SO(n){n=en(n,Oi);const e=en(n.firestore,Xn),t=Sr(e),r=new Hf(e);return NE(t,n._query,{source:"server"}).then(o=>new $f(e,r,n,o))}(this._delegate):function bO(n){n=en(n,Oi);const e=en(n.firestore,Xn),t=Sr(e),r=new Hf(e);return qx(n._query),NE(t,n._query).then(o=>new $f(e,r,n,o))}(this._delegate),t.then(r=>new pM(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lN(e),r=dN(e,o=>new pM(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return nN(this._delegate,t,r)}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}class JO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new GE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new GE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new JO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new GE(this._firestore,r))})}isEqual(e){return Xx(this._delegate,e._delegate)}}class zv extends Fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Za(this.firestore,e):null}doc(e){try{return new Za(this.firestore,void 0===e?Zg(this._delegate):Zg(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function MO(n,e){const t=en(n.firestore,Xn),r=Zg(n),o=lT(n.converter,e);return Gv(t,[S(D(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Za(this.firestore,t))}isEqual(e){return tT(this._delegate,e._delegate)}withConverter(e){return new zv(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function Qg(n){return en(n,Ln)}class gM{constructor(...e){this._delegate=new $u(...e)}static documentId(){return new gM(rr.keyField().canonicalString())}isEqual(e){return(e=(0,on.m9)(e))instanceof $u&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HO(){return new z("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Jg(e)}static delete(){const e=function $O(){return new x("deleteField")}();return e._methodName="FieldValue.delete",new Jg(e)}static arrayUnion(...e){const t=function GO(...n){return new X("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Jg(t)}static arrayRemove(...e){const t=function zO(...n){return new we("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Jg(t)}static increment(e){const t=function qO(n){return new Ve("increment",n)}(e);return t._methodName="FieldValue.increment",new Jg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const XO={Firestore:aN,GeoPoint:s,Timestamp:Yn,Blob:$E,Transaction:uN,WriteBatch:cN,DocumentReference:Za,DocumentSnapshot:HE,Query:Fs,QueryDocumentSnapshot:GE,QuerySnapshot:pM,CollectionReference:zv,FieldPath:gM,FieldValue:Jg,setLogLevel:function QO(n){!function Xh(n){Ns.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tP(n){(function eP(n,e){n.INTERNAL.registerComponent(new $m.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},XO)))})(n,(e,t)=>new aN(e,t,new YO)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Oh.Z);var nP=P(3019),hT=P(3093),rP=P(4552);class iP extends ri.x{constructor(e=1/0,t=1/0,r=rP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var sP=P(3020);function hN(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,sP.B)({connector:()=>new iP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function fN(n,e){return(0,fa.m)(e)?(0,Cr.w)(()=>n,e):(0,Cr.w)(()=>n)}var mM=P(5137);P(4097);var vM=P(4303);const _M=new Map,gN={activated:!1,tokenObservers:[]},lP={initialized:!1,enabled:!1};function Br(n){return _M.get(n)||Object.assign({},gN)}function pT(){return lP}const wM="https://content-firebaseappcheck.googleapis.com/v1",pP="exchangeDebugToken",mN={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class mP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new on.BH,yield function yP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new on.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qi=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EM(n){if(!Br(n).activated)throw Qi.create("use-before-activation",{appName:n.name})}function yT(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw Qi.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw Qi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw Qi.create("fetch-parse-error",{originalErrorMessage:R?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+b,issuedAtTimeMillis:M}}),DM.apply(this,arguments)}function yN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${wM}/projects/${t}/apps/${r}:${pP}?key=${o}`,body:{debug_token:e}}}const EP="firebase-app-check-database",IP=1,zE="firebase-app-check-store";let vT=null;function CM(){return CM=(0,ve.Z)(function*(n,e){const r=(yield function _N(){return vT||(vT=new Promise((n,e)=>{try{const t=indexedDB.open(EP,IP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Qi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(zE,{keyPath:"compositeKey"})}}catch(t){e(Qi.create("storage-open",{originalErrorMessage:t?.message}))}}),vT)}()).transaction(zE,"readwrite"),u=r.objectStore(zE).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(Qi.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),CM.apply(this,arguments)}const qE=new Mc.Yd("@firebase/app-check");function SM(n,e){return(0,on.hl)()?function CP(n,e){return function wN(n,e){return CM.apply(this,arguments)}(function IN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MM(){return pT().enabled}function xM(){return NM.apply(this,arguments)}function NM(){return NM=(0,ve.Z)(function*(){const n=pT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),NM.apply(this,arguments)}const xP={error:"UNKNOWN_ERROR"};function NP(n){return on.US.encodeString(JSON.stringify(n),!1)}function _T(n){return RM.apply(this,arguments)}function RM(){return RM=(0,ve.Z)(function*(n,e=!1){const t=n.app;EM(t);const r=Br(t);let u,o=r.token;if(o&&!qv(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(qv(w)?o=w:yield SM(t,void 0))}if(!e&&o&&qv(o))return{token:o.token};let m,l=!1;if(MM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yT(yN(t,yield xM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield SM(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Br(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?qE.warn(w.message):qE.error(w),u=w}return o?u?m=qv(o)?{token:o.token,internalError:u}:TN(u):(m={token:o.token},r.token=o,yield SM(t,o)):m=TN(u),l&&function bN(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),RM.apply(this,arguments)}function OM(){return OM=(0,ve.Z)(function*(n){const e=n.app;EM(e);const{provider:t}=Br(e);if(MM()){const r=yield xM(),{token:o}=yield yT(yN(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),OM.apply(this,arguments)}function kM(n,e){const t=Br(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function CN(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function RP(n){const{app:e}=n;return new mP((0,ve.Z)(function*(){let r;if(r=Br(e).token?yield _T(n,!0):yield _T(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},mN.RETRIAL_MIN_WAIT,mN.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qv(n){return n.expireTimeMillis-Date.now()>0}function TN(n){return{token:NP(xP),error:n}}class OP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)kM(this.app,t.next);return Promise.resolve()}}const PN="app-check-internal";!function WP(){(0,vM.Xd)(new $m.wA("app-check",n=>function PP(n,e){return new OP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PN).initialize()})),(0,vM.Xd)(new $m.wA(PN,n=>function kP(n){return{getToken:e=>_T(n,e),getLimitedUseToken:()=>function DN(n){return OM.apply(this,arguments)}(n),addTokenListener:e=>function PM(n,e,t,r){const{app:o}=n,u=Br(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&qv(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),CN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>CN(n))}(n,"INTERNAL",e),removeTokenListener:e=>kM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vM.KN)("@firebase/app-check","0.8.0")}();class UM{constructor(){return(0,kr.vb)("app-check")}}typeof window<"u"&&window;var JP=P(120);const FN=new f.OlP("angularfire2.auth.use-emulator"),LN=new f.OlP("angularfire2.auth.settings"),VN=new f.OlP("angularfire2.auth.tenant-id"),UN=new f.OlP("angularfire2.auth.langugage-code"),BN=new f.OlP("angularfire2.auth.use-device-language"),jN=new f.OlP("angularfire.auth.persistence"),$N=(n,e,t,r,o,u,l,m)=>(0,Po.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[b,M]of Object.entries(l))w.settings[b]=M;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let HN=(()=>{class n{constructor(t,r,o,u,l,m,w,b,M,R,$,te){const be=new ri.x,Be=(0,vt.of)(void 0).pipe((0,hT.Q)(l.outsideAngular),(0,Cr.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8977)))),(0,Et.U)(()=>(0,Po.on)(t,u,r)),(0,Et.U)(He=>$N(He,u,m,b,M,R,w,$)),hN({bufferSize:1,refCount:!1}));if(ms(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,vt.of)(null);else{Be.pipe(br()).subscribe();const mt=Be.pipe((0,Cr.w)(Ot=>Ot.getRedirectResult().then(Ht=>Ht,()=>null)),kr.iC,hN({bufferSize:1,refCount:!1})),Mt=Be.pipe((0,Cr.w)(Ot=>new Gr.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(an=>Ht.next(an),an=>Ht.error(an),()=>Ht.complete()))})))),Ct=Be.pipe((0,Cr.w)(Ot=>new Gr.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(an=>Ht.next(an),an=>Ht.error(an),()=>Ht.complete()))}))));this.authState=mt.pipe(fN(Mt),(0,mM.R)(l.outsideAngular),(0,hT.Q)(l.insideAngular)),this.user=mt.pipe(fN(Ct),(0,mM.R)(l.outsideAngular),(0,hT.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Cr.w)(Ot=>Ot?(0,Tn.D)(Ot.getIdToken()):(0,vt.of)(null))),this.idTokenResult=this.user.pipe((0,Cr.w)(Ot=>Ot?(0,Tn.D)(Ot.getIdTokenResult()):(0,vt.of)(null))),this.credential=(0,nP.T)(mt,be,this.authState.pipe(ii(Ot=>!Ot))).pipe((0,Et.U)(Ot=>Ot?.user?Ot:null),(0,mM.R)(l.outsideAngular),(0,hT.Q)(l.insideAngular))}return(0,Po.pX)(this,Be,u,{spy:{apply:(He,mt,Mt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Mt.then(Ct=>be.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Po.Dh),f.LFG(Po.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(FN,8),f.LFG(LN,8),f.LFG(VN,8),f.LFG(UN,8),f.LFG(BN,8),f.LFG(jN,8),f.LFG(UM,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function GN(n,e){return function e1(n,e=xa.z){return new Gr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function jM(n,e){return GN(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function ET(n,e){return jM(n,e).pipe(_a(void 0),Fp(),(0,Et.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(M=>M.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(M=>M.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function zN(n,e,t){return ET(n,t).pipe($i((r,o)=>function n1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function r1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $M(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $M(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $M(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,sS.x)(),(0,Et.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function $M(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function qN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ET(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(_a(void 0),Fp(),ii(([r,o])=>o.length>0||!r),(0,Et.U)(([r,o])=>o),kr.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kr.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(kr.iC)}add(e){return this.ref.add(e)}doc(e){return new ZN(this.ref.doc(e),this.afs)}}class ZN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=QN(r,t);return new WN(o,u,this.afs)}snapshotChanges(){return function t1(n,e){return GN(n,e).pipe(_a(void 0),Fp(),(0,Et.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(kr.iC)}}class i1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ET(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),kr.iC):ET(this.query,this.afs.schedulers.outsideAngular).pipe(kr.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return jM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),kr.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(kr.iC)}}const KN=new f.OlP("angularfire2.enableFirestorePersistence"),YN=new f.OlP("angularfire2.firestore.persistenceSettings"),s1=new f.OlP("angularfire2.firestore.settings"),o1=new f.OlP("angularfire2.firestore.use-emulator");function QN(n,e=(t=>t)){return{query:e(n),ref:n}}let JN=(()=>{class n{constructor(t,r,o,u,l,m,w,b,M,R,$,te,be,Be,He,mt,Mt){this.schedulers=w;const Ct=(0,Po.on)(t,m,r),Ot=M;R&&$N(Ct,m,$,be,Be,He,te,mt),[this.firestore,this.persistenceEnabled$]=(0,Po.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const Ht=m.runOutsideAngular(()=>Ct.firestore());if(u&&Ht.settings(u),Ot&&Ht.useEmulator(...Ot),o&&!ms(l)){const an=()=>{try{return(0,Tn.D)(Ht.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ds){return typeof console<"u"&&console.warn(ds),(0,vt.of)(!1)}};return[Ht,m.runOutsideAngular(an)]}return[Ht,(0,vt.of)(!1)]},[u,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=QN(o,r),m=this.schedulers.ngZone.run(()=>u);return new WN(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new i1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new ZN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Po.Dh),f.LFG(Po.xv,8),f.LFG(KN,8),f.LFG(s1,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(YN,8),f.LFG(o1,8),f.LFG(HN,8),f.LFG(FN,8),f.LFG(LN,8),f.LFG(VN,8),f.LFG(UN,8),f.LFG(BN,8),f.LFG(jN,8),f.LFG(UM,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a1=(()=>{class n{constructor(){JP.Z.registerVersion("angularfire",kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KN,useValue:!0},{provide:YN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[JN]}),n})(),XN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq))};static#t=this.\u0275dir=f.lG2({type:n})}return n})(),Xg=(()=>{class n extends XN{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=f.n5z(n)))(o||n)}}();static#t=this.\u0275dir=f.lG2({type:n,features:[f.qOj]})}return n})();const ul=new f.OlP("NgValueAccessor"),l1={provide:ul,useExisting:(0,f.Gpc)(()=>IT),multi:!0},h1=new f.OlP("CompositionEventMode");let IT=(()=>{class n extends XN{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function d1(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(h1,8))};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&f.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[f._Bn([l1]),f.qOj]})}return n})();const ls=new f.OlP("NgValidators"),qf=new f.OlP("NgAsyncValidators");function lR(n){return null!=n}function dR(n){return(0,f.QGY)(n)?(0,Tn.D)(n):n}function hR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function fR(n,e){return e.map(t=>t(n))}function pR(n){return n.map(e=>function p1(n){return!n.validate}(e)?e:t=>e.validate(t))}function HM(n){return null!=n?function gR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return hR(fR(t,e))}}(pR(n)):null}function GM(n){return null!=n?function mR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return function u1(...n){const e=(0,Ui.jO)(n),{args:t,keys:r}=hn(n),o=new Gr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let M=0;M<l;M++){let R=!1;(0,Ul.Xf)(t[M]).subscribe((0,Rn.x)(u,$=>{R||(R=!0,b--),m[M]=$},()=>w--,void 0,()=>{(!w||!R)&&(b||u.next(r?Bi(r,m):m),u.complete())}))}});return e?o.pipe(ga(e)):o}(fR(t,e).map(dR)).pipe((0,Et.U)(hR))}}(pR(n)):null}function yR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zM(n){return n?Array.isArray(n)?n:[n]:[]}function CT(n,e){return Array.isArray(n)?n.includes(e):n===e}function wR(n,e){const t=zM(e);return zM(n).forEach(o=>{CT(t,o)||t.push(o)}),t}function ER(n,e){return zM(e).filter(t=>!CT(n,t))}class IR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ls extends IR{get formDirective(){return null}get path(){return null}}class Wf extends IR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let CR=(()=>{class n extends DR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(Wf,2))};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&f.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[f.qOj]})}return n})();const WE="VALID",TT="INVALID",Wv="PENDING",ZE="DISABLED";function ST(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class AR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===WE}get invalid(){return this.status===TT}get pending(){return this.status==Wv}get disabled(){return this.status===ZE}get enabled(){return this.status!==ZE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ER(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ER(e,this._rawAsyncValidators))}hasValidator(e){return CT(this._rawValidators,e)}hasAsyncValidator(e){return CT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ZE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=WE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===WE||this.status===Wv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ZE:WE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wv,this._hasOwnPendingAsyncValidator=!0;const t=dR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?ZE:this.errors?TT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wv)?Wv:this._anyControlsHaveStatus(TT)?TT:WE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ST(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function _1(n){return Array.isArray(n)?HM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function w1(n){return Array.isArray(n)?GM(n):n||null}(this._rawAsyncValidators)}}const Zv=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>AT}),AT="always";function KE(n,e,t=AT){(function QM(n,e){const t=function vR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function _R(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();NT(e._rawValidators,o),NT(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function D1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MR(n,e)})}(n,e),function b1(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function C1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function I1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function NT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function OR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const PR=class extends AR{constructor(e=null,t,r){super(function ZM(n){return(ST(n)?n.validators:n)||null}(t),function KM(n,e){return(ST(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ST(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=OR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){OR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},O1={provide:Wf,useExisting:(0,f.Gpc)(()=>nx)},LR=(()=>Promise.resolve())();let nx=(()=>{class n extends Wf{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new PR,this._registered=!1,this.name="",this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function ex(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===IT?t=u:function A1(n){return Object.getPrototypeOf(n.constructor)===Xg}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function XM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){KE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){LR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,f.VuI)(r);LR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function MT(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(Ls,9),f.Y36(ls,10),f.Y36(qf,10),f.Y36(ul,10),f.Y36(f.sBO,8),f.Y36(Zv,8))};static#t=this.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([O1]),f.qOj,f.TTD]})}return n})(),UR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({})}return n})(),ik=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({imports:[UR]})}return n})(),ok=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Zv,useValue:t.callSetDisabledState??AT}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n});static#n=this.\u0275inj=f.cJS({imports:[ik]})}return n})();function ak(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",4)(1,"span"),f._uU(2),f.qZA(),f.TgZ(3,"button",5),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return f.KtG(o.answerUser())}),f._uU(4,"Answer"),f.qZA(),f.TgZ(5,"button",5),f.NdJ("click",function(){f.CHM(t);const o=f.oxw(2);return f.KtG(o.hangUp())}),f._uU(6,"Hang Up"),f.qZA()()}if(2&n){const t=f.oxw(2);f.xp6(2),f.hij("",t.me.callerName," is calling you...")}}function uk(n,e){if(1&n&&(f.TgZ(0,"div",2)(1,"p"),f._uU(2,"You are: "),f.TgZ(3,"b"),f._uU(4),f.qZA()(),f.YNc(5,ak,7,1,"div",3),f._uU(6),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Oqu(t.me.name),f.xp6(1),f.Q6J("ngIf","A<-B"===t.me.status),f.xp6(1),f.AsE(" status=",t.status," | ",null==t.me?null:t.me.status," ")}}function ck(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"label"),f._uU(2,"Type your username:"),f.qZA(),f.TgZ(3,"input",6),f.NdJ("ngModelChange",function(o){f.CHM(t);const u=f.oxw();return f.KtG(u.userName=o)})("keypress",function(o){f.CHM(t);const u=f.oxw();return f.KtG(u.checkKey(o))}),f.qZA(),f.TgZ(4,"button",7),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.joinRoom())}),f._uU(5,"Enter the Room"),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(3),f.Q6J("ngModel",t.userName),f.xp6(1),f.Q6J("disabled",!t.canLogin)}}function lk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"Free (standby)"),f.qZA())}function dk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"Outgoing call..."),f.qZA())}function hk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"Connecting..."),f.qZA())}function fk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"On Call..."),f.qZA())}function pk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"Incoming call..."),f.qZA())}function gk(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1,"Connecting..."),f.qZA())}function mk(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",10)(1,"p"),f._uU(2),f.qZA(),f.YNc(3,lk,2,0,"p",1),f.YNc(4,dk,2,0,"p",1),f.YNc(5,hk,2,0,"p",1),f.YNc(6,fk,2,0,"p",1),f.YNc(7,pk,2,0,"p",1),f.YNc(8,gk,2,0,"p",1),f.TgZ(9,"button",5),f.NdJ("click",function(){const u=f.CHM(t).$implicit,l=f.oxw(2);return f.KtG(l.callUser(u))}),f._uU(10,"Make a Call"),f.qZA()()}if(2&n){const t=e.$implicit,r=f.oxw(2);f.ekj("hidden",t.name===r.userName||((null==t?null:t.lastPing)||0)<r.pingCut)("busy",!!t.status),f.xp6(2),f.Oqu(t.name),f.xp6(1),f.Q6J("ngIf",""===t.status),f.xp6(1),f.Q6J("ngIf","A->B"===t.status),f.xp6(1),f.Q6J("ngIf","A>>B"===t.status),f.xp6(1),f.Q6J("ngIf","A==B"===t.status),f.xp6(1),f.Q6J("ngIf","A<-B"===t.status),f.xp6(1),f.Q6J("ngIf","A<<B"===t.status)}}function yk(n,e){if(1&n&&(f.TgZ(0,"div")(1,"h2"),f._uU(2,"Users in the Room:"),f.qZA(),f.TgZ(3,"div",8),f.YNc(4,mk,11,11,"div",9),f.ALo(5,"async"),f.qZA()()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngForOf",f.lcZ(5,1,t.users$))}}function vk(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("",null==t.callee?null:t.callee.name," is ringing...")}}function _k(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("You are connecting to ",null==t.callee?null:t.callee.name,", please wait...")}}function wk(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("You are connected to ",null==t.callee?null:t.callee.name,"")}}function Ek(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"h2"),f._uU(2),f.qZA(),f.YNc(3,vk,2,1,"p",1),f.YNc(4,_k,2,1,"p",1),f.YNc(5,wk,2,1,"p",1),f.TgZ(6,"button",5),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.hangUp())}),f._uU(7,"Hang Up"),f.qZA(),f._UZ(8,"br"),f.TgZ(9,"div",11)(10,"label",12),f._uU(11,"You"),f.qZA(),f._UZ(12,"video",13),f.qZA(),f.TgZ(13,"div",14)(14,"label",15),f._uU(15),f.qZA(),f._UZ(16,"video",13),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(2),f.hij("Calling ",null==t.callee?null:t.callee.name,""),f.xp6(1),f.Q6J("ngIf","A->B"===(null==t.me?null:t.me.status)),f.xp6(1),f.Q6J("ngIf","A>>B"===(null==t.me?null:t.me.status)),f.xp6(1),f.Q6J("ngIf","A==B"===(null==t.me?null:t.me.status)),f.xp6(7),f.Q6J("srcObject",t.myVideoSrc),f.xp6(3),f.Oqu(null==t.callee?null:t.callee.name),f.xp6(1),f.Q6J("srcObject",t.remoteVideoSrc)}}function Ik(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("You are connecting to ",null==t.caller?null:t.caller.name,", please wait...")}}function Dk(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("You are connected to ",null==t.caller?null:t.caller.name,"")}}function Ck(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"h2"),f._uU(2),f.qZA(),f.YNc(3,Ik,2,1,"p",1),f.YNc(4,Dk,2,1,"p",1),f._UZ(5,"br"),f.TgZ(6,"button",5),f.NdJ("click",function(){f.CHM(t);const o=f.oxw();return f.KtG(o.hangUp())}),f._uU(7,"Hang Up"),f.qZA(),f._UZ(8,"br"),f.TgZ(9,"div",11)(10,"label",12),f._uU(11,"You"),f.qZA(),f._UZ(12,"video",13),f.qZA(),f.TgZ(13,"div",14)(14,"label",15),f._uU(15),f.qZA(),f._UZ(16,"video",13),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(2),f.hij("",null==t.caller?null:t.caller.name," is calling you"),f.xp6(1),f.Q6J("ngIf","A<<B"===(null==t.me?null:t.me.status)),f.xp6(1),f.Q6J("ngIf","A==B"===(null==t.me?null:t.me.status)),f.xp6(8),f.Q6J("srcObject",t.myVideoSrc),f.xp6(3),f.Oqu(null==t.caller?null:t.caller.name),f.xp6(1),f.Q6J("srcObject",t.remoteVideoSrc)}}let bk=(()=>{class n{constructor(t){this.af=t,this.userName="",this.status="",this.canLogin=!0,this.usersRef=this.af.collection("users"),this.users$=this.usersRef.valueChanges({idField:"id"}),this.pingCut=(new Date).getTime()-3e5,this.OFFER_OPTIONS={iceRestart:!0,offerToReceiveAudio:!0,offerToReceiveVideo:!0}}ngOnInit(){this.userName=localStorage.getItem("userName"),this.userName?(this.canLogin=!1,this.initRoom()):(this.userName=`user-${Math.floor(1e5*Math.random())}`,this.status="out")}getUserByName(t){return function M_(n,e){const t="object"==typeof e;return new Promise((r,o)=>{let l,u=!1;n.subscribe({next:m=>{l=m,u=!0},error:o,complete:()=>{u?r(l):t?r(e.defaultValue):o(new Ks)}})})}(this.users$.pipe((0,Et.U)(r=>r.find(o=>o.name===t)),gi(1)))}checkKey(t){"Enter"===t.key&&this.canLogin&&this.joinRoom()}joinRoom(){this.canLogin=!1;const t={name:this.userName,created:(new Date).toUTCString(),lastPing:(new Date).getTime(),status:"",remoteSDP:"",callerName:"",callerId:""};this.usersRef.add(t).then(()=>{localStorage.setItem("userName",this.userName),this.initRoom()})}initRoom(){this.canLogin=!0,this.meSub&&this.meSub.unsubscribe(),this.meSub=this.users$.pipe((0,Et.U)(t=>t.find(r=>r.name===this.userName))).subscribe(t=>{t?(this.myDoc=this.af.doc("users/"+t.id),this.onMeChange(t),this.me=t):this.status="out"}),setInterval(()=>{this.pingCut=(new Date).getTime()-6e4;const t=(new Date).getTime();this.myDoc&&this.myDoc.update({lastPing:t})},1e4)}callUser(t){var r=this;return(0,ve.Z)(function*(){console.log("Calling",t),r.calleeDoc=r.af.doc("users/"+t.id),yield r.myDoc.update({status:"A->B"}),yield r.calleeDoc.update({status:"A<-B",callerName:r.me.name,callerId:r.me.id}),r.status="caller",r.calleeSub&&r.calleeSub.unsubscribe(),r.calleeSub=r.calleeDoc.valueChanges({idField:"id"}).subscribe(o=>{r.onCalleeChange(o),r.callee=o})})()}answerUser(){var t=this;return(0,ve.Z)(function*(){t.callerSub&&t.callerSub.unsubscribe(),t.me?.callerId&&!t.callerDoc&&(t.callerDoc=t.af.doc("users/"+t.me.callerId)),t.callerSub=t.callerDoc.valueChanges({idField:"id"}).subscribe(r=>{t.onCallerChange(r),t.caller=r}),t.myDoc.update({status:"A<<B"}),t.callerDoc.update({status:"A>>B"})})()}hangUp(){this.myDoc.update({status:"",remoteSDP:"",callerId:""}),this.calleeDoc&&this.calleeDoc.update({status:"",remoteSDP:"",callerId:""}),this.callerDoc&&this.callerDoc.update({status:"",remoteSDP:"",callerId:""}),this.terminate()}onMeChange(t){this.status="in",("A->B"===t.status||"A>>B"===t.status)&&(this.status="caller"),"A<<B"===t.status&&(this.status="callee"),"A==B"===t.status&&(this.status=t.callerId?"callee":"caller"),"A<-B"===t.status&&(console.log("You are getting a call from",t.callerName),this.me?.callerId&&!this.callerDoc&&(this.callerDoc=this.af.doc("users/"+this.me.callerId))),"A->B"===this.me?.status&&"A>>B"===t.status&&(console.log("start creating offer"),this.createOffer()),"A<<B"===t?.status&&!this.me?.remoteSDP&&t?.remoteSDP&&this.createAnswer(t.remoteSDP),"A>>B"===t?.status&&!this.me?.remoteSDP&&t?.remoteSDP&&this.acknowledgeOffer(t.remoteSDP),this.me?.status&&""===t?.status&&this.terminate()}onCalleeChange(t){}onCallerChange(t){}createOffer(){var t=this;return(0,ve.Z)(function*(){let r=0,o="";t.localStream=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),t.myVideoSrc=t.localStream,t.peer=new RTCPeerConnection(kp),t.remoteStream=new MediaStream,t.remoteVideoSrc=t.remoteStream,t.peer.ontrack=function(){var w=(0,ve.Z)(function*(b){return b.streams[0].getTracks().forEach(M=>t.remoteStream.addTrack(M))});return function(b){return w.apply(this,arguments)}}(),t.localStream.getTracks().forEach(w=>t.peer.addTrack(w,t.localStream)),t.peer.onicecandidate=w=>{r++,console.log(`New ICE Candidate found (total: ${r})`,w),o=JSON.stringify(t.peer.localDescription)},t.peer.onconnectionstatechange=w=>{console.log("peer.onconnectionstatechange - connectionState =",w.target.connectionState),"connected"===w.target.connectionState&&(t.myDoc.update({status:"A==B"}),t.calleeDoc.update({status:"A==B"}),t.sendAnswer(o))},t.peer.oniceconnectionstatechange=w=>{console.log("peer.iceConnectionState =",t.peer.iceConnectionState),"connected"===t.peer.iceConnectionState&&t.sendAnswer(o)};const m=yield t.peer.createOffer(t.OFFER_OPTIONS);yield t.peer.setLocalDescription(m),setTimeout(()=>{t.sendOffer(o)},1e4)})()}sendOffer(t){console.log("sending an offer"),this.calleeDoc.update({remoteSDP:t})}createAnswer(t){var r=this;return(0,ve.Z)(function*(){console.log("Creating the answer for the offer");let o=0,u="";r.localStream=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),r.myVideoSrc=r.localStream,r.peer=new RTCPeerConnection(kp),r.remoteStream=new MediaStream,r.remoteVideoSrc=r.remoteStream,r.peer.ontrack=function(){var w=(0,ve.Z)(function*(b){return b.streams[0].getTracks().forEach(M=>r.remoteStream.addTrack(M))});return function(b){return w.apply(this,arguments)}}(),r.localStream.getTracks().forEach(w=>r.peer.addTrack(w,r.localStream)),r.peer.onicecandidate=w=>{o++,console.log(`New ICE Candidate found (total: ${o})`,w),u=JSON.stringify(r.peer.localDescription)},r.peer.onconnectionstatechange=w=>{console.log("peer.onconnectionstatechange - connectionState =",w.target.connectionState),"connected"===w.target.connectionState&&r.sendAnswer(u)},r.peer.oniceconnectionstatechange=w=>{console.log("peer.iceConnectionState =",r.peer.iceConnectionState),"connected"===r.peer.iceConnectionState&&r.sendAnswer(u)},yield r.peer.setRemoteDescription(JSON.parse(t));const m=yield r.peer.createAnswer();yield r.peer.setLocalDescription(m),setTimeout(()=>{r.sendAnswer(u)},1e4)})()}sendAnswer(t){console.log("sending answer"),this.callerDoc.update({remoteSDP:t})}acknowledgeOffer(t){var r=this;return(0,ve.Z)(function*(){yield r.peer.setRemoteDescription(JSON.parse(t))})()}terminate(){this.peer&&this.peer.close(),this.localStream&&this.localStream.getTracks().forEach(t=>t.stop()),this.remoteStream&&this.remoteStream.getTracks().forEach(t=>t.stop())}static#e=this.\u0275fac=function(r){return new(r||n)(f.Y36(JN))};static#t=this.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:5,consts:[["class","profile",4,"ngIf"],[4,"ngIf"],[1,"profile"],["class","ringing-label",4,"ngIf"],[1,"ringing-label"],[3,"click"],["name","username","autofocus","true",2,"margin-left","15px",3,"ngModel","ngModelChange","keypress"],[2,"margin-left","15px",3,"disabled","click"],[1,"users-room"],["class","user",3,"hidden","busy",4,"ngFor","ngForOf"],[1,"user"],[1,"local-video"],[1,"you-label"],["playsinline","","autoplay","",3,"srcObject"],[1,"remote-video"],[1,"remote-label"]],template:function(r,o){1&r&&(f.TgZ(0,"h1"),f._uU(1,"WebRTC Demo"),f.qZA(),f.YNc(2,uk,7,4,"div",0),f.YNc(3,ck,6,2,"div",1),f.YNc(4,yk,6,3,"div",1),f.YNc(5,Ek,17,7,"div",1),f.YNc(6,Ck,17,6,"div",1)),2&r&&(f.xp6(2),f.Q6J("ngIf",o.me),f.xp6(1),f.Q6J("ngIf","out"===o.status),f.xp6(1),f.Q6J("ngIf","in"===o.status),f.xp6(1),f.Q6J("ngIf","caller"===o.status),f.xp6(1),f.Q6J("ngIf","callee"===o.status))},dependencies:[Qa,Xo,IT,CR,nx,ta],styles:["button[_ngcontent-%COMP%]{font-size:18px;padding:5px 20px}.profile[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:350px;height:100px;padding:10px 20px;font-size:20px;border-left:1px solid gray;border-bottom:1px solid gray;background:whitesmoke}.user[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;min-width:150px;min-height:105px;border:1px solid black;padding:12px;border-radius:4px;margin:10px;text-align:center;font-size:20px;background:palegreen}.user.hidden[_ngcontent-%COMP%]{display:none}.user.busy[_ngcontent-%COMP%]{background:rgba(255,0,0,.231372549)}.ringing-label[_ngcontent-%COMP%]{font-size:34px;color:red;position:fixed;top:50px;left:400px}.ringing-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;font-size:24px}.local-video[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:10px}.local-video[_ngcontent-%COMP%]   .you-label[_ngcontent-%COMP%]{text-align:center;display:block;width:100%}.local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border:1px solid black;width:300px;transform:scaleX(-1)}.remote-video[_ngcontent-%COMP%]{position:fixed;left:10px;bottom:10px;width:65%}.remote-video[_ngcontent-%COMP%]   .remote-label[_ngcontent-%COMP%]{display:block}.remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{border:1px solid black;width:100%;max-height:700px;max-width:930px}"]})}return n})();const Tk_firebase={projectId:"jb-webrtc-demo",appId:"1:516293736350:web:45e2c49ac8c391fdd4488f",storageBucket:"jb-webrtc-demo.appspot.com",apiKey:"AIzaSyA23-iBfDar-xElk4WwttBxs7mZHtfIVSU",authDomain:"jb-webrtc-demo.firebaseapp.com",messagingSenderId:"516293736350",measurementId:"G-HDRCGN5T4T"};let Sk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=f.oAB({type:n,bootstrap:[bk]});static#n=this.\u0275inj=f.cJS({imports:[Pl,Bm,Po.hO.initializeApp(Tk_firebase),a1,ok]})}return n})();dr().bootstrapModule(Sk).catch(n=>console.error(n))},5619:(at,Ce,P)=>{P.d(Ce,{X:()=>Y});var f=P(8645);class Y extends f.x{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const ne=super._subscribe(Q);return!ne.closed&&Q.next(this._value),ne}getValue(){const{hasError:Q,thrownError:ne,_value:fe}=this;if(Q)throw ne;return this._throwIfClosed(),fe}next(Q){super.next(this._value=Q)}}},5592:(at,Ce,P)=>{P.d(Ce,{y:()=>Me});var f=P(305),Y=P(7394),k=P(4850),Q=P(8407),ne=P(2653),fe=P(4674),pe=P(1441);let Me=(()=>{class J{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const qe=new J;return qe.source=this,qe.operator=Te,qe}subscribe(Te,qe,Ne){const We=function j(J){return J&&J instanceof f.Lv||function L(J){return J&&(0,fe.m)(J.next)&&(0,fe.m)(J.error)&&(0,fe.m)(J.complete)}(J)&&(0,Y.Nn)(J)}(Te)?Te:new f.Hp(Te,qe,Ne);return(0,pe.x)(()=>{const{operator:Re,source:ct}=this;We.add(Re?Re.call(We,ct):ct?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Te){try{return this._subscribe(Te)}catch(qe){Te.error(qe)}}forEach(Te,qe){return new(qe=ue(qe))((Ne,We)=>{const Re=new f.Hp({next:ct=>{try{Te(ct)}catch(lt){We(lt),Re.unsubscribe()}},error:We,complete:Ne});this.subscribe(Re)})}_subscribe(Te){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Te)}[k.L](){return this}pipe(...Te){return(0,Q.U)(Te)(this)}toPromise(Te){return new(Te=ue(Te))((qe,Ne)=>{let We;this.subscribe(Re=>We=Re,Re=>Ne(Re),()=>qe(We))})}}return J.create=Le=>new J(Le),J})();function ue(J){var Le;return null!==(Le=J??ne.config.Promise)&&void 0!==Le?Le:Promise}},8645:(at,Ce,P)=>{P.d(Ce,{x:()=>pe});var f=P(5592),Y=P(7394);const Q=(0,P(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=P(9039),fe=P(1441);let pe=(()=>{class ue extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const J=new Me(this,this);return J.operator=j,J}_throwIfClosed(){if(this.closed)throw new Q}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:J}=this;for(;J.length;)J.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:J,isStopped:Le,observers:Te}=this;return J||Le?Y.Lc:(this.currentObservers=null,Te.push(j),new Y.w0(()=>{this.currentObservers=null,(0,ne.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:J,thrownError:Le,isStopped:Te}=this;J?j.error(Le):Te&&j.complete()}asObservable(){const j=new f.y;return j.source=this,j}}return ue.create=(L,j)=>new Me(L,j),ue})();class Me extends pe{constructor(L,j){super(),this.destination=L,this.source=j}next(L){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===J||J.call(j,L)}error(L){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===J||J.call(j,L)}complete(){var L,j;null===(j=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===j||j.call(L)}_subscribe(L){var j,J;return null!==(J=null===(j=this.source)||void 0===j?void 0:j.subscribe(L))&&void 0!==J?J:Y.Lc}}},305:(at,Ce,P)=>{P.d(Ce,{Hp:()=>Ne,Lv:()=>J});var f=P(4674),Y=P(7394),k=P(2653),Q=P(3894),ne=P(2420);const fe=ue("C",void 0,void 0);function ue(re,_e,ee){return{kind:re,value:_e,error:ee}}var L=P(7599),j=P(1441);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=lt}static create(_e,ee,Ee){return new Ne(_e,ee,Ee)}next(_e){this.isStopped?ct(function Me(re){return ue("N",re,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?ct(function pe(re){return ue("E",void 0,re)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?ct(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Te(re,_e){return Le.call(re,_e)}class qe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ee}=this;if(ee.next)try{ee.next(_e)}catch(Ee){We(Ee)}}error(_e){const{partialObserver:ee}=this;if(ee.error)try{ee.error(_e)}catch(Ee){We(Ee)}else We(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ee){We(ee)}}}class Ne extends J{constructor(_e,ee,Ee){let Pe;if(super(),(0,f.m)(_e)||!_e)Pe={next:_e??void 0,error:ee??void 0,complete:Ee??void 0};else{let oe;this&&k.config.useDeprecatedNextContext?(oe=Object.create(_e),oe.unsubscribe=()=>this.unsubscribe(),Pe={next:_e.next&&Te(_e.next,oe),error:_e.error&&Te(_e.error,oe),complete:_e.complete&&Te(_e.complete,oe)}):Pe=_e}this.destination=new qe(Pe)}}function We(re){k.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(re):(0,Q.h)(re)}function ct(re,_e){const{onStoppedNotification:ee}=k.config;ee&&L.z.setTimeout(()=>ee(re,_e))}const lt={closed:!0,next:ne.Z,error:function Re(re){throw re},complete:ne.Z}},7394:(at,Ce,P)=>{P.d(Ce,{Lc:()=>fe,w0:()=>ne,Nn:()=>pe});var f=P(4674);const k=(0,P(2306).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((J,Le)=>`${Le+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var Q=P(9039);class ne{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:J}=this;if((0,f.m)(J))try{J()}catch(Te){L=Te instanceof k?Te.errors:[Te]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Te of Le)try{Me(Te)}catch(qe){L=L??[],qe instanceof k?L=[...L,...qe.errors]:L.push(qe)}}if(L)throw new k(L)}}add(L){var j;if(L&&L!==this)if(this.closed)Me(L);else{if(L instanceof ne){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(L)}}_hasParent(L){const{_parentage:j}=this;return j===L||Array.isArray(j)&&j.includes(L)}_addParent(L){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(L),j):j?[j,L]:L}_removeParent(L){const{_parentage:j}=this;j===L?this._parentage=null:Array.isArray(j)&&(0,Q.P)(j,L)}remove(L){const{_finalizers:j}=this;j&&(0,Q.P)(j,L),L instanceof ne&&L._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const fe=ne.EMPTY;function pe(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,f.m)(ue.remove)&&(0,f.m)(ue.add)&&(0,f.m)(ue.unsubscribe)}function Me(ue){(0,f.m)(ue)?ue():ue.unsubscribe()}},2653:(at,Ce,P)=>{P.d(Ce,{config:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(at,Ce,P)=>{P.d(Ce,{E:()=>Y});const Y=new(P(5592).y)(ne=>ne.complete())},2459:(at,Ce,P)=>{P.d(Ce,{D:()=>_e});var f=P(4829),Y=P(3093),k=P(5137),fe=P(5592),Me=P(4971),ue=P(4674),L=P(7103);function J(ee,Ee){if(!ee)throw new Error("Iterable cannot be null");return new fe.y(Pe=>{(0,L.f)(Pe,Ee,()=>{const oe=ee[Symbol.asyncIterator]();(0,L.f)(Pe,Ee,()=>{oe.next().then(q=>{q.done?Pe.complete():Pe.next(q.value)})},0,!0)})})}var Le=P(8382),Te=P(4026),qe=P(4266),Ne=P(3664),We=P(5726),Re=P(9853),ct=P(541);function _e(ee,Ee){return Ee?function re(ee,Ee){if(null!=ee){if((0,Le.c)(ee))return function Q(ee,Ee){return(0,f.Xf)(ee).pipe((0,k.R)(Ee),(0,Y.Q)(Ee))}(ee,Ee);if((0,qe.z)(ee))return function pe(ee,Ee){return new fe.y(Pe=>{let oe=0;return Ee.schedule(function(){oe===ee.length?Pe.complete():(Pe.next(ee[oe++]),Pe.closed||this.schedule())})})}(ee,Ee);if((0,Te.t)(ee))return function ne(ee,Ee){return(0,f.Xf)(ee).pipe((0,k.R)(Ee),(0,Y.Q)(Ee))}(ee,Ee);if((0,We.D)(ee))return J(ee,Ee);if((0,Ne.T)(ee))return function j(ee,Ee){return new fe.y(Pe=>{let oe;return(0,L.f)(Pe,Ee,()=>{oe=ee[Me.h](),(0,L.f)(Pe,Ee,()=>{let q,je;try{({value:q,done:je}=oe.next())}catch(dt){return void Pe.error(dt)}je?Pe.complete():Pe.next(q)},0,!0)}),()=>(0,ue.m)(oe?.return)&&oe.return()})}(ee,Ee);if((0,ct.L)(ee))return function lt(ee,Ee){return J((0,ct.Q)(ee),Ee)}(ee,Ee)}throw(0,Re.z)(ee)}(ee,Ee):(0,f.Xf)(ee)}},4829:(at,Ce,P)=>{P.d(Ce,{Xf:()=>Le});var f=P(7582),Y=P(4266),k=P(4026),Q=P(5592),ne=P(8382),fe=P(5726),pe=P(9853),Me=P(3664),ue=P(541),L=P(4674),j=P(3894),J=P(4850);function Le(re){if(re instanceof Q.y)return re;if(null!=re){if((0,ne.c)(re))return function Te(re){return new Q.y(_e=>{const ee=re[J.L]();if((0,L.m)(ee.subscribe))return ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,Y.z)(re))return function qe(re){return new Q.y(_e=>{for(let ee=0;ee<re.length&&!_e.closed;ee++)_e.next(re[ee]);_e.complete()})}(re);if((0,k.t)(re))return function Ne(re){return new Q.y(_e=>{re.then(ee=>{_e.closed||(_e.next(ee),_e.complete())},ee=>_e.error(ee)).then(null,j.h)})}(re);if((0,fe.D)(re))return Re(re);if((0,Me.T)(re))return function We(re){return new Q.y(_e=>{for(const ee of re)if(_e.next(ee),_e.closed)return;_e.complete()})}(re);if((0,ue.L)(re))return function ct(re){return Re((0,ue.Q)(re))}(re)}throw(0,pe.z)(re)}function Re(re){return new Q.y(_e=>{(function lt(re,_e){var ee,Ee,Pe,oe;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ee=(0,f.KL)(re);!(Ee=yield ee.next()).done;)if(_e.next(Ee.value),_e.closed)return}catch(q){Pe={error:q}}finally{try{Ee&&!Ee.done&&(oe=ee.return)&&(yield oe.call(ee))}finally{if(Pe)throw Pe.error}}_e.complete()})})(re,_e).catch(ee=>_e.error(ee))})}},3019:(at,Ce,P)=>{P.d(Ce,{T:()=>fe});var f=P(7537),Y=P(4829),k=P(6232),Q=P(4564),ne=P(2459);function fe(...pe){const Me=(0,Q.yG)(pe),ue=(0,Q._6)(pe,1/0),L=pe;return L.length?1===L.length?(0,Y.Xf)(L[0]):(0,f.J)(ue)((0,ne.D)(L,Me)):k.E}},2096:(at,Ce,P)=>{P.d(Ce,{of:()=>k});var f=P(4564),Y=P(2459);function k(...Q){const ne=(0,f.yG)(Q);return(0,Y.D)(Q,ne)}},8251:(at,Ce,P)=>{P.d(Ce,{x:()=>Y});var f=P(305);function Y(Q,ne,fe,pe,Me){return new k(Q,ne,fe,pe,Me)}class k extends f.Lv{constructor(ne,fe,pe,Me,ue,L){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=L,this._next=fe?function(j){try{fe(j)}catch(J){ne.error(J)}}:super._next,this._error=Me?function(j){try{Me(j)}catch(J){ne.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(at,Ce,P)=>{P.d(Ce,{x:()=>Q});var f=P(2737),Y=P(9360),k=P(8251);function Q(fe,pe=f.y){return fe=fe??ne,(0,Y.e)((Me,ue)=>{let L,j=!0;Me.subscribe((0,k.x)(ue,J=>{const Le=pe(J);(j||!fe(L,Le))&&(j=!1,L=Le,ue.next(J))}))})}function ne(fe,pe){return fe===pe}},7398:(at,Ce,P)=>{P.d(Ce,{U:()=>k});var f=P(9360),Y=P(8251);function k(Q,ne){return(0,f.e)((fe,pe)=>{let Me=0;fe.subscribe((0,Y.x)(pe,ue=>{pe.next(Q.call(ne,ue,Me++))}))})}},7537:(at,Ce,P)=>{P.d(Ce,{J:()=>k});var f=P(1631),Y=P(2737);function k(Q=1/0){return(0,f.z)(Y.y,Q)}},1631:(at,Ce,P)=>{P.d(Ce,{z:()=>Me});var f=P(7398),Y=P(4829),k=P(9360),Q=P(7103),ne=P(8251),pe=P(4674);function Me(ue,L,j=1/0){return(0,pe.m)(L)?Me((J,Le)=>(0,f.U)((Te,qe)=>L(J,Te,Le,qe))((0,Y.Xf)(ue(J,Le))),j):("number"==typeof L&&(j=L),(0,k.e)((J,Le)=>function fe(ue,L,j,J,Le,Te,qe,Ne){const We=[];let Re=0,ct=0,lt=!1;const re=()=>{lt&&!We.length&&!Re&&L.complete()},_e=Ee=>Re<J?ee(Ee):We.push(Ee),ee=Ee=>{Te&&L.next(Ee),Re++;let Pe=!1;(0,Y.Xf)(j(Ee,ct++)).subscribe((0,ne.x)(L,oe=>{Le?.(oe),Te?_e(oe):L.next(oe)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Re--;We.length&&Re<J;){const oe=We.shift();qe?(0,Q.f)(L,qe,()=>ee(oe)):ee(oe)}re()}catch(oe){L.error(oe)}}))};return ue.subscribe((0,ne.x)(L,_e,()=>{lt=!0,re()})),()=>{Ne?.()}}(J,Le,ue,j)))}},3093:(at,Ce,P)=>{P.d(Ce,{Q:()=>Q});var f=P(7103),Y=P(9360),k=P(8251);function Q(ne,fe=0){return(0,Y.e)((pe,Me)=>{pe.subscribe((0,k.x)(Me,ue=>(0,f.f)(Me,ne,()=>Me.next(ue),fe),()=>(0,f.f)(Me,ne,()=>Me.complete(),fe),ue=>(0,f.f)(Me,ne,()=>Me.error(ue),fe)))})}},3020:(at,Ce,P)=>{P.d(Ce,{B:()=>ne});var f=P(4829),Y=P(8645),k=P(305),Q=P(9360);function ne(pe={}){const{connector:Me=(()=>new Y.x),resetOnError:ue=!0,resetOnComplete:L=!0,resetOnRefCountZero:j=!0}=pe;return J=>{let Le,Te,qe,Ne=0,We=!1,Re=!1;const ct=()=>{Te?.unsubscribe(),Te=void 0},lt=()=>{ct(),Le=qe=void 0,We=Re=!1},re=()=>{const _e=Le;lt(),_e?.unsubscribe()};return(0,Q.e)((_e,ee)=>{Ne++,!Re&&!We&&ct();const Ee=qe=qe??Me();ee.add(()=>{Ne--,0===Ne&&!Re&&!We&&(Te=fe(re,j))}),Ee.subscribe(ee),!Le&&Ne>0&&(Le=new k.Hp({next:Pe=>Ee.next(Pe),error:Pe=>{Re=!0,ct(),Te=fe(lt,ue,Pe),Ee.error(Pe)},complete:()=>{We=!0,ct(),Te=fe(lt,L),Ee.complete()}}),(0,f.Xf)(_e).subscribe(Le))})(J)}}function fe(pe,Me,...ue){if(!0===Me)return void pe();if(!1===Me)return;const L=new k.Hp({next:()=>{L.unsubscribe(),pe()}});return(0,f.Xf)(Me(...ue)).subscribe(L)}},5137:(at,Ce,P)=>{P.d(Ce,{R:()=>Y});var f=P(9360);function Y(k,Q=0){return(0,f.e)((ne,fe)=>{fe.add(k.schedule(()=>ne.subscribe(fe),Q))})}},4664:(at,Ce,P)=>{P.d(Ce,{w:()=>Q});var f=P(4829),Y=P(9360),k=P(8251);function Q(ne,fe){return(0,Y.e)((pe,Me)=>{let ue=null,L=0,j=!1;const J=()=>j&&!ue&&Me.complete();pe.subscribe((0,k.x)(Me,Le=>{ue?.unsubscribe();let Te=0;const qe=L++;(0,f.Xf)(ne(Le,qe)).subscribe(ue=(0,k.x)(Me,Ne=>Me.next(fe?fe(Le,Ne,qe,Te++):Ne),()=>{ue=null,J()}))},()=>{j=!0,J()}))})}},9397:(at,Ce,P)=>{P.d(Ce,{b:()=>ne});var f=P(4674),Y=P(9360),k=P(8251),Q=P(2737);function ne(fe,pe,Me){const ue=(0,f.m)(fe)||pe||Me?{next:fe,error:pe,complete:Me}:fe;return ue?(0,Y.e)((L,j)=>{var J;null===(J=ue.subscribe)||void 0===J||J.call(ue);let Le=!0;L.subscribe((0,k.x)(j,Te=>{var qe;null===(qe=ue.next)||void 0===qe||qe.call(ue,Te),j.next(Te)},()=>{var Te;Le=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var qe;Le=!1,null===(qe=ue.error)||void 0===qe||qe.call(ue,Te),j.error(Te)},()=>{var Te,qe;Le&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(qe=ue.finalize)||void 0===qe||qe.call(ue)}))}):Q.y}},1954:(at,Ce,P)=>{P.d(Ce,{o:()=>ne});var f=P(7394);class Y extends f.w0{constructor(pe,Me){super()}schedule(pe,Me=0){return this}}const k={setInterval(fe,pe,...Me){const{delegate:ue}=k;return ue?.setInterval?ue.setInterval(fe,pe,...Me):setInterval(fe,pe,...Me)},clearInterval(fe){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(fe)},delegate:void 0};var Q=P(9039);class ne extends Y{constructor(pe,Me){super(pe,Me),this.scheduler=pe,this.work=Me,this.pending=!1}schedule(pe,Me=0){var ue;if(this.closed)return this;this.state=pe;const L=this.id,j=this.scheduler;return null!=L&&(this.id=this.recycleAsyncId(j,L,Me)),this.pending=!0,this.delay=Me,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(j,this.id,Me),this}requestAsyncId(pe,Me,ue=0){return k.setInterval(pe.flush.bind(pe,this),ue)}recycleAsyncId(pe,Me,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return Me;null!=Me&&k.clearInterval(Me)}execute(pe,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(pe,Me);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Me){let L,ue=!1;try{this.work(pe)}catch(j){ue=!0,L=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),L}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Me}=this,{actions:ue}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.P)(ue,this),null!=pe&&(this.id=this.recycleAsyncId(Me,pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(at,Ce,P)=>{P.d(Ce,{v:()=>k});var f=P(4552);class Y{constructor(ne,fe=Y.now){this.schedulerActionCtor=ne,this.now=fe}schedule(ne,fe=0,pe){return new this.schedulerActionCtor(this,ne).schedule(pe,fe)}}Y.now=f.l.now;class k extends Y{constructor(ne,fe=Y.now){super(ne,fe),this.actions=[],this._active=!1}flush(ne){const{actions:fe}=this;if(this._active)return void fe.push(ne);let pe;this._active=!0;do{if(pe=ne.execute(ne.state,ne.delay))break}while(ne=fe.shift());if(this._active=!1,pe){for(;ne=fe.shift();)ne.unsubscribe();throw pe}}}},6321:(at,Ce,P)=>{P.d(Ce,{z:()=>k});var f=P(1954);const k=new(P(2631).v)(f.o)},4552:(at,Ce,P)=>{P.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},7599:(at,Ce,P)=>{P.d(Ce,{z:()=>f});const f={setTimeout(Y,k,...Q){const{delegate:ne}=f;return ne?.setTimeout?ne.setTimeout(Y,k,...Q):setTimeout(Y,k,...Q)},clearTimeout(Y){const{delegate:k}=f;return(k?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4971:(at,Ce,P)=>{P.d(Ce,{h:()=>Y});const Y=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(at,Ce,P)=>{P.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(at,Ce,P)=>{P.d(Ce,{_6:()=>fe,jO:()=>Q,yG:()=>ne});var f=P(4674);function k(pe){return pe[pe.length-1]}function Q(pe){return(0,f.m)(k(pe))?pe.pop():void 0}function ne(pe){return function Y(pe){return pe&&(0,f.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function fe(pe,Me){return"number"==typeof k(pe)?pe.pop():Me}},9039:(at,Ce,P)=>{function f(Y,k){if(Y){const Q=Y.indexOf(k);0<=Q&&Y.splice(Q,1)}}P.d(Ce,{P:()=>f})},2306:(at,Ce,P)=>{function f(Y){const Q=Y(ne=>{Error.call(ne),ne.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}P.d(Ce,{d:()=>f})},1441:(at,Ce,P)=>{P.d(Ce,{O:()=>Q,x:()=>k});var f=P(2653);let Y=null;function k(ne){if(f.config.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),ne(),fe){const{errorThrown:pe,error:Me}=Y;if(Y=null,pe)throw Me}}else ne()}function Q(ne){f.config.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ne)}},7103:(at,Ce,P)=>{function f(Y,k,Q,ne=0,fe=!1){const pe=k.schedule(function(){Q(),fe?Y.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Y.add(pe),!fe)return pe}P.d(Ce,{f:()=>f})},2737:(at,Ce,P)=>{function f(Y){return Y}P.d(Ce,{y:()=>f})},4266:(at,Ce,P)=>{P.d(Ce,{z:()=>f});const f=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},5726:(at,Ce,P)=>{P.d(Ce,{D:()=>Y});var f=P(4674);function Y(k){return Symbol.asyncIterator&&(0,f.m)(k?.[Symbol.asyncIterator])}},4674:(at,Ce,P)=>{function f(Y){return"function"==typeof Y}P.d(Ce,{m:()=>f})},8382:(at,Ce,P)=>{P.d(Ce,{c:()=>k});var f=P(4850),Y=P(4674);function k(Q){return(0,Y.m)(Q[f.L])}},3664:(at,Ce,P)=>{P.d(Ce,{T:()=>k});var f=P(4971),Y=P(4674);function k(Q){return(0,Y.m)(Q?.[f.h])}},4026:(at,Ce,P)=>{P.d(Ce,{t:()=>Y});var f=P(4674);function Y(k){return(0,f.m)(k?.then)}},541:(at,Ce,P)=>{P.d(Ce,{L:()=>Q,Q:()=>k});var f=P(7582),Y=P(4674);function k(ne){return(0,f.FC)(this,arguments,function*(){const pe=ne.getReader();try{for(;;){const{value:Me,done:ue}=yield(0,f.qq)(pe.read());if(ue)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Me)}}finally{pe.releaseLock()}})}function Q(ne){return(0,Y.m)(ne?.getReader)}},9360:(at,Ce,P)=>{P.d(Ce,{A:()=>Y,e:()=>k});var f=P(4674);function Y(Q){return(0,f.m)(Q?.lift)}function k(Q){return ne=>{if(Y(ne))return ne.lift(function(fe){try{return Q(fe,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(at,Ce,P)=>{function f(){}P.d(Ce,{Z:()=>f})},8407:(at,Ce,P)=>{P.d(Ce,{U:()=>k,z:()=>Y});var f=P(2737);function Y(...Q){return k(Q)}function k(Q){return 0===Q.length?f.y:1===Q.length?Q[0]:function(fe){return Q.reduce((pe,Me)=>Me(pe),fe)}}},3894:(at,Ce,P)=>{P.d(Ce,{h:()=>k});var f=P(2653),Y=P(7599);function k(Q){Y.z.setTimeout(()=>{const{onUnhandledError:ne}=f.config;if(!ne)throw Q;ne(Q)})}},9853:(at,Ce,P)=>{function f(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>f})},5879:(at,Ce,P)=>{P.d(Ce,{$8M:()=>pc,$WT:()=>$s,$Z:()=>a0,AFp:()=>OI,ALo:()=>Ow,AaK:()=>J,AsE:()=>K0,CHM:()=>Vi,CRH:()=>Pd,EJc:()=>gb,EpF:()=>kD,F4k:()=>FD,FYo:()=>qm,FiY:()=>ql,GfV:()=>G_,Gpc:()=>qe,HDt:()=>Fd,JOm:()=>Cc,KtG:()=>ic,LFG:()=>St,Lbi:()=>Lp,Lck:()=>Ew,MMx:()=>Eg,NdJ:()=>U0,Ojb:()=>Vp,OlP:()=>fn,Oqu:()=>Z0,P3R:()=>eS,PXZ:()=>_E,Q6J:()=>k0,QGY:()=>V0,Qsj:()=>j_,R0b:()=>qr,RDi:()=>dI,Rgc:()=>Tf,SBq:()=>Bh,Sil:()=>sE,Suo:()=>rb,TTD:()=>Xu,TgZ:()=>jc,VuI:()=>iT,X6Q:()=>ZA,XFs:()=>_t,Xpm:()=>Hu,Xq5:()=>_d,Xts:()=>Nh,Y36:()=>pd,YKP:()=>Xy,YNc:()=>ND,Yjl:()=>gl,Yz7:()=>ut,Z0I:()=>sn,ZZ4:()=>RE,_Bn:()=>If,_UZ:()=>Ey,_c5:()=>Jb,_uU:()=>Ry,aQg:()=>OE,c2e:()=>Cv,cJS:()=>mn,cg1:()=>sw,dDg:()=>pE,dqk:()=>tn,eFA:()=>xb,eJc:()=>Mf,ekj:()=>My,eoX:()=>gE,f3M:()=>Pt,g9A:()=>tt,h0i:()=>Yc,hGG:()=>Xb,hij:()=>Oy,iGM:()=>tb,ifc:()=>ki,ip1:()=>Dv,jDz:()=>Qc,kL8:()=>dC,lG2:()=>na,lcZ:()=>el,lqb:()=>xa,lri:()=>Av,n5z:()=>Qs,oAB:()=>ta,oxw:()=>jD,q4F:()=>z_,qFp:()=>$u,qLn:()=>Rc,qOj:()=>eg,qZA:()=>$c,rWj:()=>Tb,rg0:()=>Ml,sBO:()=>TE,s_b:()=>sv,soG:()=>Pf,tb:()=>Bg,tp0:()=>xo,uIk:()=>Fr,vHH:()=>re,vpe:()=>Ra,wAp:()=>Sd,xp6:()=>JI,z2F:()=>al,zSh:()=>A_,zs3:()=>Fo});var f=P(8645),Y=P(7394),k=P(5592),Q=P(3019),ne=P(5619),fe=P(2096),pe=P(3020),Me=P(4664),ue=P(3997);function L(i){for(let s in i)if(i[s]===L)return s;throw Error("Could not find renamed property on target object.")}function j(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Te=L({__forward_ref__:L});function qe(i){return i.__forward_ref__=qe,i.toString=function(){return J(this())},i}function Ne(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(Te)&&i.__forward_ref__===qe}function Re(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class re extends Error{constructor(s,a){super(function _e(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function je(i,s){throw new re(-201,!1)}function Ke(i,s){null==i&&function Ge(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gn(i){return Ar(i,Vn)||Ar(i,hs)}function sn(i){return null!==Gn(i)}function Ar(i,s){return i.hasOwnProperty(s)?i[s]:null}function di(i){return i&&(i.hasOwnProperty(Yr)||i.hasOwnProperty(to))?i[Yr]:null}const Vn=L({\u0275prov:L}),Yr=L({\u0275inj:L}),hs=L({ngInjectableDef:L}),to=L({ngInjectorDef:L});var _t=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(_t||{});let bt;function un(i){const s=bt;return bt=i,s}function _n(i,s,a){const c=Gn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&_t.Optional?null:void 0!==s?s:void je(J(i))}const tn=globalThis,$e={},Ye="__NG_DI_FLAG__",ht="ngTempTokenPath",U=/\n/gm,W="__source";let De;function nt(i){const s=De;return De=i,s}function Rt(i,s=_t.Default){if(void 0===De)throw new re(-203,!1);return null===De?_n(i,void 0,s):De.get(i,s&_t.Optional?null:void 0,s)}function St(i,s=_t.Default){return(function Nt(){return bt}()||Rt)(Ne(i),s)}function Pt(i,s=_t.Default){return St(i,qn(s))}function qn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Kt(i){const s=[];for(let a=0;a<i.length;a++){const c=Ne(i[a]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let d,p=_t.Default;for(let y=0;y<c.length;y++){const E=c[y],D=Us(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}s.push(St(d,p))}else s.push(St(c))}return s}function mr(i,s){return i[Ye]=s,i.prototype[Ye]=s,i}function Us(i){return i[Ye]}function Xi(i){return{toString:i}.toString()}var Bs=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Bs||{}),ki=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ki||{});const Fi={},Gt=[],js=L({\u0275cmp:L}),Yo=L({\u0275dir:L}),Ka=L({\u0275pipe:L}),Ud=L({\u0275mod:L}),es=L({\u0275fac:L}),Qo=L({__NG_ELEMENT_ID__:L}),Jo=L({__NG_ENV_ID__:L});function ll(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}function Ya(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],y=a[c++],E=a[c++];i.setAttribute(s,y,E,p)}else{const p=d,y=a[++c];bi(p)?i.setProperty(s,p,y):i.setAttribute(s,p,y),c++}}return c}function dl(i){return 3===i||4===i||6===i}function bi(i){return 64===i.charCodeAt(0)}function no(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Qa(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Qa(i,s,a,c,d){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}const hl="ng-template";function Wn(i,s,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const y=i[c++];if(a&&"class"===p&&-1!==ll(y.toLowerCase(),s,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===s)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Xo(i){return 4===i.type&&i.value!==hl}function nm(i,s,a){return s===(4!==i.type||a?i.value:hl)}function Zf(i,s,a){let c=4;const d=i.attrs||[],p=function rm(i){for(let s=0;s<i.length;s++)if(dl(i[s]))return s;return i.length}(d);let y=!1;for(let E=0;E<s.length;E++){const D=s[E];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!nm(i,D,a)||""===D&&1===s.length){if(Qr(c))return!1;y=!0}}else{const S=8&c?D:s[++E];if(8&c&&null!==i.attrs){if(!Wn(i.attrs,S,a)){if(Qr(c))return!1;y=!0}continue}const F=ea(8&c?"class":D,d,Xo(i),a);if(-1===F){if(Qr(c))return!1;y=!0;continue}if(""!==S){let z;z=F>p?"":d[F+1].toLowerCase();const X=8&c?z:null;if(X&&-1!==ll(X,S,0)||2&c&&S!==z){if(Qr(c))return!1;y=!0}}}}else{if(!y&&!Qr(c)&&!Qr(D))return!1;if(y&&Qr(D))continue;y=!1,c=D|1&c}}return Qr(c)||y}function Qr(i){return 0==(1&i)}function ea(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let p=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function ro(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function fl(i,s,a=!1){for(let c=0;c<s.length;c++)if(Zf(i,s[c],a))return!0;return!1}function Ja(i,s){return i?":not("+s.trim()+")":s}function jd(i){let s=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Qr(y)&&(s+=Ja(p,d),d=""),c=y,p=p||!Qr(c);a++}return""!==d&&(s+=Ja(p,d)),s}function Hu(i){return Xi(()=>{const s=ml(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Bs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ki.Emulated,styles:i.styles||Gt,_:null,schemas:i.schemas||null,tView:null,id:""};Yf(a);const c=i.dependencies;return a.directiveDefs=Xa(c,!1),a.pipeDefs=Xa(c,!0),a.id=function Si(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function pl(i){return zt(i)||Un(i)}function Gu(i){return null!==i}function ta(i){return Xi(()=>({type:i.type,bootstrap:i.bootstrap||Gt,declarations:i.declarations||Gt,imports:i.imports||Gt,exports:i.exports||Gt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function zu(i,s){if(null==i)return Fi;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,s&&(s[d]=p)}return a}function na(i){return Xi(()=>{const s=ml(i);return Yf(s),s})}function gl(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zt(i){return i[js]||null}function Un(i){return i[Yo]||null}function jr(i){return i[Ka]||null}function $s(i){const s=zt(i)||Un(i)||jr(i);return null!==s&&s.standalone}function $r(i,s){const a=i[Ud]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function ml(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||Fi,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Gt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zu(i.inputs,s),outputs:zu(i.outputs)}}function Yf(i){i.features?.forEach(s=>s(i))}function Xa(i,s){if(!i)return null;const a=s?jr:pl;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(Gu)}const wn=0,et=1,wt=2,En=3,Hr=4,io=5,yr=6,eu=7,bn=8,gs=9,ra=10,It=11,vr=12,Qf=13,ms=14,In=15,yl=16,so=17,or=18,ys=19,vs=20,Hs=21,Ai=22,tu=23,Gs=24,Ft=25,ia=1,Wu=2,ar=7,ur=9,_r=11;function cr(i){return Array.isArray(i)&&"object"==typeof i[ia]}function Or(i){return Array.isArray(i)&&!0===i[ia]}function Zu(i){return 0!=(4&i.flags)}function ao(i){return i.componentOffset>-1}function fi(i){return 1==(1&i.flags)}function Jr(i){return!!i.template}function sa(i){return 0!=(512&i[wt])}function uo(i,s){return i.hasOwnProperty(es)?i[es]:null}let er=null,co=!1;function Xr(i){const s=er;return er=i,s}const lo={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function iu(i){if(!ho(i)||i.dirty){if(!i.producerMustRecompute(i)&&!Cl(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function su(i){i.dirty=!0,function Zd(i){if(void 0===i.liveConsumerNode)return;const s=co;co=!0;try{for(const a of i.liveConsumerNode)a.dirty||su(a)}finally{co=s}}(i),i.consumerMarkedDirty?.(i)}function Kd(i){return i&&(i.nextProducerIndex=0),Xr(i)}function lr(i,s){if(Xr(s),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(ho(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)ou(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Cl(i){qs(i);for(let s=0;s<i.producerNode.length;s++){const a=i.producerNode[s],c=i.producerLastReadVersion[s];if(c!==a.version||(iu(a),c!==a.version))return!0}return!1}function bl(i){if(qs(i),ho(i))for(let s=0;s<i.producerNode.length;s++)ou(i.producerNode[s],i.producerIndexOfThis[s]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function ou(i,s){if(function au(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),qs(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)ou(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[s]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[s]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,s<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[s],d=i.liveConsumerNode[s];qs(d),d.producerIndexOfThis[c]=s}}function ho(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function qs(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Jd=null;function Ml(i){const s=Xr(null);try{return i()}finally{Xr(s)}}const xl=()=>{},rp=(()=>({...lo,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:xl}))();class ip{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Xu(){return lu}function lu(i){return i.type.prototype.ngOnChanges&&(i.setInput=fo),sp}function sp(){const i=po(this),s=i?.current;if(s){const a=i.previous;if(a===Fi)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function fo(i,s,a,c){const d=this.declaredInputs[a],p=po(i)||function eh(i,s){return i[ns]=s}(i,{previous:Fi,current:null}),y=p.current||(p.current={}),E=p.previous,D=E[d];y[d]=new ip(D&&D.currentValue,s,E===Fi),i[c]=s}Xu.ngInherit=!0;const ns="__ngSimpleChanges__";function po(i){return i[ns]||null}const Li=function(i,s,a){};function nn(i){for(;Array.isArray(i);)i=i[wn];return i}function mo(i,s){return nn(s[i])}function wr(i,s){return nn(s[i.index])}function Rl(i,s){return i.data[s]}function Er(i,s){const a=s[i];return cr(a)?a:a[wn]}function ei(i,s){return null==s?null:i[s]}function lp(i){i[so]=0}function Ol(i){1024&i[wt]||(i[wt]|=1024,hm(i,1))}function ec(i){1024&i[wt]&&(i[wt]&=-1025,hm(i,-1))}function hm(i,s){let a=i[En];if(null===a)return;a[io]+=s;let c=a;for(a=a[En];null!==a&&(1===s&&1===c[io]||-1===s&&0===c[io]);)a[io]+=s,c=a,a=a[En]}const Dt={lFrame:pa(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ir(){return Dt.bindingsEnabled}function Ae(){return Dt.lFrame.lView}function Bt(){return Dt.lFrame.tView}function Vi(i){return Dt.lFrame.contextLView=i,i[bn]}function ic(i){return Dt.lFrame.contextLView=null,i}function hr(){let i=sc();for(;null!==i&&64===i.type;)i=i.parent;return i}function sc(){return Dt.lFrame.currentTNode}function Ws(i,s){const a=Dt.lFrame;a.currentTNode=i,a.isParent=s}function vo(){return Dt.lFrame.isParent}function _o(){return Dt.lFrame.bindingIndex++}function Zs(i){const s=Dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function oc(i,s){const a=Dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ac(s)}function ac(i){Dt.lFrame.currentDirectiveIndex=i}function uc(){return Dt.lFrame.currentQueryIndex}function lh(i){Dt.lFrame.currentQueryIndex=i}function dh(i){const s=i[et];return 2===s.type?s.declTNode:1===s.type?i[yr]:null}function hp(i,s,a){if(a&_t.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&_t.Host||(d=dh(p),null===d||(p=p[ms],10&d.type))););if(null===d)return!1;s=d,i=p}const c=Dt.lFrame=fa();return c.currentTNode=s,c.lView=i,!0}function Gr(i){const s=fa(),a=i[et];Dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function fa(){const i=Dt.lFrame,s=null===i?null:i.child;return null===s?pa(i):s}function pa(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Tn(){const i=Dt.lFrame;return Dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const vt=Tn;function zr(){const i=Tn();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Dr(){return Dt.lFrame.selectedIndex}function ws(i){Dt.lFrame.selectedIndex=i}function hn(){const i=Dt.lFrame;return Rl(i.tView,i.selectedIndex)}let ga=!0;function Ui(){return ga}function Bi(i){ga=i}function ma(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:x}=p;y&&(i.contentHooks??=[]).push(-a,y),E&&((i.contentHooks??=[]).push(a,E),(i.contentCheckHooks??=[]).push(a,E)),D&&(i.viewHooks??=[]).push(-a,D),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function Eo(i,s,a){fp(i,s,3,a)}function lc(i,s,a,c){(3&i[wt])===a&&fp(i,s,a,c)}function ya(i,s){let a=i[wt];(3&a)===s&&(a&=8191,a+=1,i[wt]=a)}function fp(i,s,a,c){const p=c??-1,y=s.length-1;let E=0;for(let D=void 0!==c?65535&i[so]:0;D<y;D++)if("number"==typeof s[D+1]){if(E=s[D],null!=c&&E>=c)break}else s[D]<0&&(i[so]+=65536),(E<p||-1==p)&&(Io(i,a,s,D),i[so]=(4294901760&i[so])+D+2),D++}function Ks(i,s){Li(4,i,s);const a=Xr(null);try{s.call(i)}finally{Xr(a),Li(5,i,s)}}function Io(i,s,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];d?i[wt]>>13<i[so]>>16&&(3&i[wt])===s&&(i[wt]+=8192,Ks(E,p)):Ks(E,p)}const Ys=-1;class ss{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function va(i){return i!==Ys}function ri(i){return 32767&i}function gi(i,s){let a=function Cr(i){return i>>16}(i),c=s;for(;a>0;)c=c[ms],a--;return c}let _a=!0;function ii(i){const s=_a;return _a=i,s}const pu=255,gh=5;let jl=0;const br={};function On(i,s){const a=gu(i,s);if(-1!==a)return a;const c=s[et];c.firstCreatePass&&(i.injectorIndex=s.length,ji(c.data,i),ji(s,null),ji(c.blueprint,null));const d=$i(i,s),p=i.injectorIndex;if(va(d)){const y=ri(d),E=gi(d,s),D=E[et].data;for(let S=0;S<8;S++)s[p+S]=E[y+S]|D[y+S]}return s[p+8]=d,p}function ji(i,s){i.push(0,0,0,0,0,0,0,0,s)}function gu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function $i(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=zl(d),null===c)return Ys;if(a++,d=d[ms],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ys}function Co(i,s,a){!function Do(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Qo)&&(c=a[Qo]),null==c&&(c=a[Qo]=jl++);const d=c&pu;s.data[i+(d>>gh)]|=1<<d}(i,s,a)}function mu(i,s,a){if(a&_t.Optional||void 0!==i)return i;je()}function bo(i,s,a,c){if(a&_t.Optional&&void 0===c&&(c=null),!(a&(_t.Self|_t.Host))){const d=i[gs],p=un(void 0);try{return d?d.get(s,c,a&_t.Optional):_n(s,c,a&_t.Optional)}finally{un(p)}}return mu(c,0,a)}function fc(i,s,a,c=_t.Default,d){if(null!==i){if(2048&s[wt]&&!(c&_t.Self)){const y=function pp(i,s,a,c,d){let p=i,y=s;for(;null!==p&&null!==y&&2048&y[wt]&&!(512&y[wt]);){const E=mh(p,y,a,c|_t.Self,br);if(E!==br)return E;let D=p.parent;if(!D){const S=y[vs];if(S){const x=S.get(a,br,c);if(x!==br)return x}D=zl(y),y=y[ms]}p=D}return d}(i,s,a,c,br);if(y!==br)return y}const p=mh(i,s,a,c,br);if(p!==br)return p}return bo(s,a,c,d)}function mh(i,s,a,c,d){const p=function wa(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Qo)?i[Qo]:void 0;return"number"==typeof s?s>=0?s&pu:Hi:s}(a);if("function"==typeof p){if(!hp(s,i,c))return c&_t.Host?mu(d,0,c):bo(s,a,c,d);try{let y;if(y=p(c),null!=y||c&_t.Optional)return y;je()}finally{vt()}}else if("number"==typeof p){let y=null,E=gu(i,s),D=Ys,S=c&_t.Host?s[In][yr]:null;for((-1===E||c&_t.SkipSelf)&&(D=-1===E?$i(i,s):s[E+8],D!==Ys&&$l(c,!1)?(y=s[et],E=ri(D),s=gi(D,s)):E=-1);-1!==E;){const x=s[et];if(Is(p,E,x.data)){const F=kt(E,s,a,y,c,S);if(F!==br)return F}D=s[E+8],D!==Ys&&$l(c,s[et].data[E+8]===S)&&Is(p,E,s)?(y=x,E=ri(D),s=gi(D,s)):E=-1}}return d}function kt(i,s,a,c,d,p){const y=s[et],E=y.data[i+8],x=To(E,y,a,null==c?ao(E)&&_a:c!=y&&0!=(3&E.type),d&_t.Host&&p===E);return null!==x?So(s,y,x,E):br}function To(i,s,a,c,d){const p=i.providerIndexes,y=s.data,E=1048575&p,D=i.directiveStart,x=p>>20,z=d?E+x:i.directiveEnd;for(let X=c?E:E+x;X<z;X++){const we=y[X];if(X<D&&a===we||X>=D&&we.type===a)return X}if(d){const X=y[D];if(X&&Jr(X)&&X.type===a)return D}return null}function So(i,s,a,c){let d=i[a];const p=s.data;if(function Ul(i){return i instanceof ss}(d)){const y=d;y.resolving&&function Pe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}(p[a]));const E=ii(y.canSeeViewProviders);y.resolving=!0;const S=y.injectImpl?un(y.injectImpl):null;hp(i,c,_t.Default);try{d=i[a]=y.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Rn(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(c){const y=lu(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],s)}finally{null!==S&&un(S),ii(E),y.resolving=!1,vt()}}return d}function Is(i,s,a){return!!(a[s+(i>>gh)]&1<<i)}function $l(i,s){return!(i&_t.Self||i&_t.Host&&s)}class Pn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return fc(this._tNode,this._lView,s,qn(c),a)}}function Hi(){return new Pn(hr(),Ae())}function Qs(i){return Xi(()=>{const s=i.prototype.constructor,a=s[es]||Gl(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[es]||Gl(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Gl(i){return We(i)?()=>{const s=Gl(Ne(i));return s&&s()}:uo(i)}function zl(i){const s=i[et],a=s.type;return 2===a?s.declTNode:1===a?i[yr]:null}function pc(i){return function hc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(dl(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(hr(),i)}const Ia="__parameters__";function O(i,s,a){return Xi(()=>{const c=function A(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(D,S,x){const F=D.hasOwnProperty(Ia)?D[Ia]:Object.defineProperty(D,Ia,{value:[]})[Ia];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Da(i,s){i.forEach(a=>Array.isArray(a)?Da(a,s):s(a))}function mm(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function gp(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Gi(i,s,a){let c=gc(i,s);return c>=0?i[1|c]=a:(c=~c,function vm(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function yp(i,s){const a=gc(i,s);if(a>=0)return i[1|a]}function gc(i,s){return function vp(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),y=i[p<<a];if(s===y)return p<<a;y>s?d=p:c=p+1}return~(d<<a)}(i,s,1)}const ql=mr(O("Optional"),8),xo=mr(O("SkipSelf"),4);function Dc(i){return 128==(128&i.flags)}var Cc=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Cc||{});const Ch=new Map;let u_=0;const td="__ngContext__";function ai(i,s){cr(s)?(i[td]=s[ys],function yi(i){Ch.set(i[ys],i)}(s)):i[td]=s}let B;function Z(i,s){return B(i,s)}function Ue(i){const s=i[En];return Or(s)?s[En]:s}function kn(i){return Ta(i[vr])}function zi(i){return Ta(i[Hr])}function Ta(i){for(;null!==i&&!Or(i);)i=i[Hr];return i}function Tu(i,s,a,c,d){if(null!=c){let p,y=!1;Or(c)?p=c:cr(c)&&(y=!0,c=c[wn]);const E=nn(c);0===i&&null!==a?null==d?rI(s,a,E):rd(s,a,E,d||null,!0):1===i&&null!==a?rd(s,a,E,d||null,!0):2===i?function Nm(i,s,a){const c=xm(i,s);c&&function kT(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=p&&function LT(i,s,a,c,d){const p=a[ar];p!==nn(a)&&Tu(s,i,c,p,d);for(let E=_r;E<a.length;E++){const D=a[E];Mp(D[et],D,i,s,c,p)}}(s,i,p,a,d)}}function Tc(i,s,a){return i.createElement(s,a)}function Am(i,s){const a=i[ur],c=a.indexOf(s);ec(s),a.splice(c,1)}function Mm(i,s){if(i.length<=_r)return;const a=_r+s,c=i[a];if(c){const d=c[yl];null!==d&&d!==i&&Am(d,c),s>0&&(i[a-1][Hr]=c[Hr]);const p=gp(i,_r+s);!function Tm(i,s){Mp(i,s,s[It],2,null,null),s[wn]=null,s[yr]=null}(c[et],c);const y=p[or];null!==y&&y.detachView(p[et]),c[En]=null,c[Hr]=null,c[wt]&=-129}return c}function h_(i,s){if(!(256&s[wt])){const a=s[It];s[tu]&&bl(s[tu]),s[Gs]&&bl(s[Gs]),a.destroyNode&&Mp(i,s,a,3,null,null),function Sm(i){let s=i[vr];if(!s)return tI(i[et],i);for(;s;){let a=null;if(cr(s))a=s[vr];else{const c=s[_r];c&&(a=c)}if(!a){for(;s&&!s[Hr]&&s!==i;)cr(s)&&tI(s[et],s),s=s[En];null===s&&(s=i),cr(s)&&tI(s[et],s),a=s&&s[Hr]}s=a}}(s)}}function tI(i,s){if(!(256&s[wt])){s[wt]&=-129,s[wt]|=256,function nI(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof ss)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],D=p[y+1];Li(4,E,D);try{D.call(E)}finally{Li(5,E,D)}}else{Li(4,d,p);try{p.call(d)}finally{Li(5,d,p)}}}}}(i,s),function PT(i,s){const a=i.cleanup,c=s[eu];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else a[p].call(c[a[p+1]]);null!==c&&(s[eu]=null);const d=s[Hs];if(null!==d){s[Hs]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,s),1===s[et].type&&s[It].destroy();const a=s[yl];if(null!==a&&Or(s[En])){a!==s[En]&&Am(a,s);const c=s[or];null!==c&&c.detachView(i)}!function bu(i){Ch.delete(i[ys])}(s)}}function Sh(i,s,a){return function nd(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[wn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===ki.None||p===ki.Emulated)return null}return wr(c,a)}}(i,s.parent,a)}function rd(i,s,a,c,d){i.insertBefore(s,a,c,d)}function rI(i,s,a){i.appendChild(s,a)}function iI(i,s,a,c,d){null!==c?rd(i,s,a,c,d):rI(i,s,a)}function xm(i,s){return i.parentNode(s)}let p_,lI,Om,f_=function oI(i,s,a){return 40&i.type?wr(i,a):null};function Sp(i,s,a,c){const d=Sh(i,c,s),p=s[It],E=function sI(i,s,a){return f_(i,s,a)}(c.parent||s[yr],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)iI(p,d,a[D],E,!1);else iI(p,d,a,E,!1);void 0!==p_&&p_(p,c,s,a,d)}function Ma(i,s){if(null!==s){const a=s.type;if(3&a)return wr(s,i);if(4&a)return m_(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ma(i,c);{const d=i[s.index];return Or(d)?m_(-1,d):nn(d)}}if(32&a)return Z(s,i)()||nn(i[s.index]);{const c=g_(i,s);return null!==c?Array.isArray(c)?c[0]:Ma(Ue(i[In]),c):Ma(i,s.next)}}return null}function g_(i,s){return null!==s?i[In][yr].projection[s.projection]:null}function m_(i,s){const a=_r+i+1;if(a<s.length){const c=s[a],d=c[et].firstChild;if(null!==d)return Ma(c,d)}return s[ar]}function Ap(i,s,a,c,d,p,y){for(;null!=a;){const E=c[a.index],D=a.type;if(y&&0===s&&(E&&ai(nn(E),c),a.flags|=2),32!=(32&a.flags))if(8&D)Ap(i,s,a.child,c,d,p,!1),Tu(s,i,d,E,p);else if(32&D){const S=Z(a,c);let x;for(;x=S();)Tu(s,i,d,x,p);Tu(s,i,d,E,p)}else 16&D?v_(i,s,c,a,d,p):Tu(s,i,d,E,p);a=y?a.projectionNext:a.next}}function Mp(i,s,a,c,d,p){Ap(a,c,i.firstChild,s,d,p,!1)}function v_(i,s,a,c,d,p){const y=a[In],D=y[yr].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Tu(s,i,d,D[S],p);else{let S=D;const x=y[En];Dc(c)&&(S.flags|=128),Ap(i,s,S,x,d,p,!0)}}function uI(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function xp(i,s,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Ya(i,s,c),null!==d&&uI(i,s,d),null!==p&&function UT(i,s,a){i.setAttribute(s,"style",a)}(i,s,p)}function dI(i){lI=i}function pI(i){return function w_(){if(void 0===Om&&(Om=null,tn.trustedTypes))try{Om=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Om}()?.createScriptURL(i)||i}class gI{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function Ac(i){return i instanceof gI?i.changingThisBreaksApplicationSecurity:i}function xh(i,s){const a=function Pm(i){return i instanceof gI&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${lt})`)}return a===s}const Np=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Op=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Op||{});function Lm(i){const s=Pp();return s?s.sanitize(Op.URL,i)||"":xh(i,"URL")?Ac(i):function Fm(i){return(i=String(i)).match(Np)?i:"unsafe:"+i}(ee(i))}function bI(i){const s=Pp();if(s)return pI(s.sanitize(Op.RESOURCE_URL,i)||"");if(xh(i,"ResourceURL"))return pI(Ac(i));throw new re(904,!1)}function eS(i,s,a){return function XT(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?bI:Lm}(s,a)(i)}function Pp(){const i=Ae();return i&&i[ra].sanitizer}class fn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Nh=new fn("ENVIRONMENT_INITIALIZER"),SI=new fn("INJECTOR",-1),AI=new fn("INJECTOR_DEF_TYPES");class Vm{get(s,a=$e){if(a===$e){const c=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw c.name="NullInjectorError",c}return a}}function tS(...i){return{\u0275providers:xI(0,i),\u0275fromNgModule:!0}}function xI(i,...s){const a=[],c=new Set;let d;const p=y=>{a.push(y)};return Da(s,y=>{const E=y;Um(E,p,[],c)&&(d||=[],d.push(E))}),void 0!==d&&NI(d,p),a}function NI(i,s){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];S_(d,p=>{s(p,c)})}}function Um(i,s,a,c){if(!(i=Ne(i)))return!1;let d=null,p=di(i);const y=!p&&zt(i);if(p||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(p=di(D),!p)return!1;d=D}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of D)Um(S,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let S;c.add(d);try{Da(p.imports,x=>{Um(x,s,a,c)&&(S||=[],S.push(x))})}finally{}void 0!==S&&NI(S,s)}if(!E){const S=uo(d)||(()=>new d);s({provide:d,useFactory:S,deps:Gt},d),s({provide:AI,useValue:d,multi:!0},d),s({provide:Nh,useValue:()=>St(d),multi:!0},d)}const D=p.providers;if(null!=D&&!E){const S=i;S_(D,x=>{s(x,S)})}}}return d!==i&&void 0!==i.providers}function S_(i,s){for(let a of i)Re(a)&&(a=a.\u0275providers),Array.isArray(a)?S_(a,s):s(a)}const vx=L({provide:String,useValue:L});function RI(i){return null!==i&&"object"==typeof i&&vx in i}function Rh(i){return"function"==typeof i}const A_=new fn("Set Injector scope."),Bm={},ve={};let M_;function kp(){return void 0===M_&&(M_=new Vm),M_}class xa{}class kr extends xa{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,on(s,y=>this.processProvider(y)),this.records.set(SI,Oh(void 0,this)),d.has("environment")&&this.records.set(xa,Oh(void 0,this));const p=this.records.get(A_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(AI.multi,Gt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=nt(this),c=un(void 0);try{return s()}finally{nt(a),un(c)}}get(s,a=$e,c=_t.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Jo))return s[Jo](this);c=qn(c);const p=nt(this),y=un(void 0);try{if(!(c&_t.SkipSelf)){let D=this.records.get(s);if(void 0===D){const S=function Mc(i){return"function"==typeof i||"object"==typeof i&&i instanceof fn}(s)&&Gn(s);D=S&&this.injectableDefInScope(S)?Oh(Fp(s),Bm):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(c&_t.Self?kp():this.parent).get(s,a=c&_t.Optional&&a===$e?null:a)}catch(E){if("NullInjectorError"===E.name){if((E[ht]=E[ht]||[]).unshift(J(s)),p)throw E;return function Ko(i,s,a,c){const d=i[ht];throw s[W]&&d.unshift(s[W]),i.message=function cl(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=J(s);if(Array.isArray(s))d=s.map(J).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):J(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(U,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[ht]=null,i}(E,s,"R3InjectorError",this.source)}throw E}finally{un(y),nt(p)}}resolveInjectorInitializers(){const s=nt(this),a=un(void 0);try{const d=this.get(Nh.multi,Gt,_t.Self);for(const p of d)p()}finally{nt(s),un(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(J(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(s){let a=Rh(s=Ne(s))?s:Ne(s&&s.provide);const c=function Po(i){return RI(i)?Oh(void 0,i.useValue):Oh(oS(i),Bm)}(s);if(Rh(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Oh(void 0,Bm,!0),d.factory=()=>Kt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Bm&&(a.value=ve,a.value=a.factory()),"object"==typeof a.value&&a.value&&function $m(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Ne(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Fp(i){const s=Gn(i),a=null!==s?s.factory:uo(i);if(null!==a)return a;if(i instanceof fn)throw new re(204,!1);if(i instanceof Function)return function sS(i){const s=i.length;if(s>0)throw function Ao(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new re(204,!1);const a=function Kr(i){return i&&(i[Vn]||i[hs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new re(204,!1)}function oS(i,s,a){let c;if(Rh(i)){const d=Ne(i);return uo(d)||Fp(d)}if(RI(i))c=()=>Ne(i.useValue);else if(function iS(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Kt(i.deps||[]));else if(function rS(i){return!(!i||!i.useExisting)}(i))c=()=>St(Ne(i.useExisting));else{const d=Ne(i&&(i.useClass||i.provide));if(!function jm(i){return!!i.deps}(i))return uo(d)||Fp(d);c=()=>new d(...Kt(i.deps))}return c}function Oh(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function on(i,s){for(const a of i)Array.isArray(a)?on(a,s):a&&Re(a)?on(a.\u0275providers,s):s(a)}const OI=new fn("AppId",{providedIn:"root",factory:()=>ko}),ko="ng",tt=new fn("Platform Initializer"),Lp=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Vp=new fn("CSP nonce",{providedIn:"root",factory:()=>function id(){if(void 0!==lI)return lI;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let kI=(i,s,a)=>null;function Up(i,s,a=!1){return kI(i,s,a)}class dS{}class Uh{}class B_{resolveComponentFactory(s){throw function hS(i){const s=Error(`No component factory found for ${J(i)}.`);return s.ngComponent=i,s}(s)}}let Gm=(()=>{class i{static#e=this.NULL=new B_}return i})();function BI(){return ad(hr(),Ae())}function ad(i,s){return new Bh(wr(i,s))}let Bh=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=BI}return i})();function zm(i){return i instanceof Bh?i.nativeElement:i}class qm{}let j_=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function $_(){const i=Ae(),a=Er(hr().index,i);return(cr(a)?a:i)[It]}()}return i})(),H_=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>null})}return i})();class G_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const z_=new G_("16.2.8"),q_={};function Qm(i,s=null,a=null,c){const d=$I(i,s,a,c);return d.resolveInjectorInitializers(),d}function $I(i,s=null,a=null,c,d=new Set){const p=[a||Gt,tS(i)];return c=c||("object"==typeof i?void 0:J(i)),new kr(p,s||kp(),c||null,d)}let Fo=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=$e;static#t=this.NULL=new Vm;static create(a,c){if(Array.isArray(a))return Qm({name:""},c,a,"");{const d=a.name??"";return Qm({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=ut({token:i,providedIn:"any",factory:()=>St(SI)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function K_(i){return i.ngOriginalError}class Rc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&K_(s);for(;a&&K_(a);)a=K_(a);return a||null}}function Xm(i){return s=>{setTimeout(i,void 0,s)}}const Ra=class Q_ extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,p=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),p=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(p=Xm(p),d&&(d=Xm(d)),y&&(y=Xm(y)));const E=super.subscribe({next:d,error:p,complete:y});return s instanceof Y.w0&&s.add(E),E}};function $p(...i){}class qr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ra(!1),this.onMicrotaskEmpty=new Ra(!1),this.onStable=new Ra(!1),this.onError=new Ra(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function J_(){const i="function"==typeof tn.requestAnimationFrame;let s=tn[i?"requestAnimationFrame":"setTimeout"],a=tn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function qI(i){const s=()=>{!function zI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ey(i),i.isCheckStableRunning=!0,ud(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ey(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,y,E)=>{if(function vS(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(E))return a.invokeTask(d,p,y,E);try{return Hp(i),a.invokeTask(d,p,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),WI(i)}},onInvoke:(a,c,d,p,y,E,D)=>{try{return Hp(i),a.invoke(d,p,y,E,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),WI(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,ey(i),ud(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qr.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(qr.isInAngularZone())throw new re(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,s,mS,$p,$p);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const mS={};function ud(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ey(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Hp(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function WI(i){i._nesting--,ud(i)}class yS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ra,this.onMicrotaskEmpty=new Ra,this.onStable=new Ra,this.onError=new Ra}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const cd=new fn("",{providedIn:"root",factory:ZI});function ZI(){const i=Pt(qr);let s=!0;const a=new k.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new k.y(d=>{let p;i.runOutsideAngular(()=>{p=i.onStable.subscribe(()=>{qr.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{qr.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,Q.T)(a,c.pipe((0,pe.B)()))}function Ss(i){return i instanceof Function?i():i}let ty=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function fd(i){for(;i;){i[wt]|=64;const s=Ue(i);if(sa(i)&&!s)return i;i=s}return null}const $h=new fn("",{providedIn:"root",factory:()=>!1});let Wp=null;function Gh(i,s){return i[s]??Oc()}function o0(i,s){const a=Oc();a.producerNode?.length&&(i[s]=Wp,a.lView=i,Wp=zh())}const iy={...lo,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{fd(i.lView)},lView:null};function zh(){return Object.create(iy)}function Oc(){return Wp??=zh(),Wp}const Lt={};function JI(i){XI(Bt(),Ae(),Dr()+i,!1)}function XI(i,s,a,c){if(!c)if(3==(3&s[wt])){const p=i.preOrderCheckHooks;null!==p&&Eo(s,p,a)}else{const p=i.preOrderHooks;null!==p&&lc(s,p,0,a)}ws(a)}function pd(i,s=_t.Default){const a=Ae();return null===a?St(i,s):fc(hr(),a,Ne(i),s)}function a0(){throw new Error("invalid")}function Oa(i,s,a,c,d,p,y,E,D,S,x){const F=s.blueprint.slice();return F[wn]=d,F[wt]=140|c,(null!==S||i&&2048&i[wt])&&(F[wt]|=2048),lp(F),F[En]=F[ms]=i,F[bn]=a,F[ra]=y||i&&i[ra],F[It]=E||i&&i[It],F[gs]=D||i&&i[gs]||null,F[yr]=p,F[ys]=function ed(){return u_++}(),F[Ai]=x,F[vs]=S,F[In]=2==s.type?i[In]:F,F}function as(i,s,a,c,d){let p=i.data[s];if(null===p)p=function qh(i,s,a,c,d){const p=sc(),y=vo(),D=i.data[s]=function nD(i,s,a,c,d,p){let y=s?s.injectorIndex:-1,E=0;return function rs(){return null!==Dt.skipHydrationRootTNode}()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(i,s,a,c,d),function ah(){return Dt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const y=function ha(){const i=Dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Ws(p,!0),p}function Pc(i,s,a,c){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function u0(i,s,a,c,d){const p=Gh(s,tu),y=Dr(),E=2&c;try{ws(-1),E&&s.length>Ft&&XI(i,s,Ft,!1),Li(E?2:0,d);const S=E?p:null,x=Kd(S);try{null!==S&&(S.dirty=!1),a(c,d)}finally{lr(S,x)}}finally{E&&null===s[tu]&&o0(s,tu),ws(y),Li(E?3:1,d)}}function Sn(i,s,a){if(Zu(s)){const c=Xr(null);try{const p=s.directiveEnd;for(let y=s.directiveStart;y<p;y++){const E=i.data[y];E.contentQueries&&E.contentQueries(1,a[y],y)}}finally{Xr(c)}}}function Wh(i,s,a){Ir()&&(function sD(i,s,a,c){const d=a.directiveStart,p=a.directiveEnd;ao(a)&&function aD(i,s,a){const c=wr(s,i),d=Zh(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const E=cy(i,Oa(i,d,null,y,c,s,null,i[ra].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=E}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||On(a,s),ai(c,s);const y=a.initialInputs;for(let E=d;E<p;E++){const D=i.data[E],S=So(s,i,E,a);ai(S,s),null!==y&&NS(0,E-d,S,D,0,y),Jr(D)&&(Er(a.index,s)[bn]=So(s,i,E,a))}}(i,s,a,wr(a,s)),64==(64&a.flags)&&oD(i,s,a))}function gd(i,s,a=wr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?a(s,i):i[y];i[d++]=E}}}function Zh(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=c0(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function c0(i,s,a,c,d,p,y,E,D,S,x){const F=Ft+c,z=F+d,X=function eD(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Lt);return a}(F,z),we="function"==typeof S?S():S;return X[et]={type:i,blueprint:X,template:a,queries:null,viewQuery:E,declTNode:s,data:X.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:we,incompleteFirstPass:!1,ssrId:x}}let tD=i=>null;function l0(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?d0(a,s,d,p):c.hasOwnProperty(d)&&d0(a,s,c[d],p)}return a}function d0(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function sy(i,s,a,c){if(Ir()){const d=null===c?null:{"":-1},p=function xS(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(fl(s,y.selectors,!1))if(c||(c=[]),Jr(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),c.unshift(...E,y),f0(i,s,E.length)}else c.unshift(y),f0(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,E;null===p?y=E=null:[y,E]=p,null!==y&&oy(i,s,a,y,d,E),d&&function ay(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new re(-301,!1);c.push(s[d],p)}}}(a,c,d)}a.mergedAttrs=no(a.mergedAttrs,a.attrs)}function oy(i,s,a,c,d,p){for(let S=0;S<c.length;S++)Co(On(a,s),i,c[S].type);!function uy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const x=c[S];x.providersResolver&&x.providersResolver(x)}let y=!1,E=!1,D=Pc(i,s,c.length,null);for(let S=0;S<c.length;S++){const x=c[S];a.mergedAttrs=no(a.mergedAttrs,x.hostAttrs),p0(i,a,s,D,x),Kp(D,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const F=x.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!E&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),E=!0),D++}!function Kh(i,s,a){const d=s.directiveEnd,p=i.data,y=s.attrs,E=[];let D=null,S=null;for(let x=s.directiveStart;x<d;x++){const F=p[x],z=a?a.get(F):null,we=z?z.outputs:null;D=l0(F.inputs,x,D,z?z.inputs:null),S=l0(F.outputs,x,S,we);const Ve=null===D||null===y||Xo(s)?null:uD(D,x,y);E.push(Ve)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=D,s.outputs=S}(i,a,p)}function oD(i,s,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,y=function gm(){return Dt.lFrame.currentDirectiveIndex}();try{ws(p);for(let E=c;E<d;E++){const D=i.data[E],S=s[E];ac(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&MS(D,S)}}finally{ws(-1),ac(y)}}function MS(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function f0(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function Kp(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Jr(s)&&(a[""]=i)}}function p0(i,s,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=uo(d.type)),y=new ss(p,Jr(d),pd);i.blueprint[c]=y,a[c]=y,function h0(i,s,a,c,d){const p=d.hostBindings;if(p){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const E=~s.index;(function iD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,p)}}(i,s,c,Pc(i,a,d.hostVars,Lt),d)}function us(i,s,a,c,d,p){const y=wr(i,s);!function md(i,s,a,c,d,p,y){if(null==p)i.removeAttribute(s,d,a);else{const E=null==y?ee(p):y(p,c||"",d);i.setAttribute(s,d,E,a)}}(s[It],y,p,i.value,a,c,d)}function NS(i,s,a,c,d,p){const y=p[s];if(null!==y)for(let E=0;E<y.length;)nr(c,a,y[E++],y[E++],y[E++])}function nr(i,s,a,c,d){const p=Xr(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{Xr(p)}}function uD(i,s,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const y=i[p];for(let E=0;E<y.length;E+=2)if(y[E]===s){c.push(p,y[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function cD(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function lD(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=i.data[p];lh(a[c]),y.contentQueries(2,s[p],p)}}}function cy(i,s){return i[vr]?i[Qf][Hr]=s:i[vr]=s,i[Qf]=s,s}function ly(i,s,a){lh(0);const c=Xr(null);try{s(i,a)}finally{Xr(c)}}function g0(i){return i[eu]||(i[eu]=[])}function Yp(i){return i.cleanup||(i.cleanup=[])}function Lo(i,s){const a=i[gs],c=a?a.get(Rc,null):null;c&&c.handleError(s)}function dy(i,s,a,c,d){for(let p=0;p<a.length;){const y=a[p++],E=a[p++];nr(i.data[y],s[y],c,E,d)}}function Mu(i,s,a){const c=mo(s,i);!function Sa(i,s,a){i.setValue(s,a)}(i[It],c,a)}function dD(i,s){const a=Er(s,i),c=a[et];!function y0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[wn];null!==d&&null===a[Ai]&&(a[Ai]=Up(d,a[gs])),yd(c,a,a[bn])}function yd(i,s,a){Gr(s);try{const c=i.viewQuery;null!==c&&ly(1,c,a);const d=i.template;null!==d&&u0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&lD(i,s),i.staticViewQueries&&ly(2,i.viewQuery,a);const p=i.components;null!==p&&function hD(i,s){for(let a=0;a<s.length;a++)dD(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[wt]&=-5,zr()}}let hy=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const p=typeof Zone>"u"?null:Zone.current,y=function dm(i,s,a){const c=Object.create(rp);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=s;const d=y=>{c.cleanupFn=y};return c.ref={notify:()=>su(c),run:()=>{if(c.dirty=!1,c.hasRun&&!Cl(c))return;c.hasRun=!0;const y=Kd(c);try{c.cleanupFn(),c.cleanupFn=xl,c.fn(d)}finally{lr(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,S=>{this.all.has(S)&&this.queue.set(S,p)},d);let E;this.all.add(y),y.notify();const D=()=>{y.cleanup(),E?.(),this.all.delete(y),this.queue.delete(y)};return E=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function Qp(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?p=E:1==p?d=Le(d,E):2==p&&(c=Le(c,E+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Fc(i,s,a,c,d=!1){for(;null!==a;){const p=s[a.index];null!==p&&c.push(nn(p)),Or(p)&&fD(p,c);const y=a.type;if(8&y)Fc(i,s,a.child,c);else if(32&y){const E=Z(a,s);let D;for(;D=E();)c.push(D)}else if(16&y){const E=g_(s,a);if(Array.isArray(E))c.push(...E);else{const D=Ue(s[In]);Fc(D[et],D,E,c,!0)}}a=d?a.projectionNext:a.next}return c}function fD(i,s){for(let a=_r;a<i.length;a++){const c=i[a],d=c[et].firstChild;null!==d&&Fc(c[et],c,d,s)}i[ar]!==i[wn]&&s.push(i[ar])}function Jp(i,s,a,c=!0){const d=s[ra],p=d.rendererFactory,y=d.afterRenderEventManager;p.begin?.(),y?.begin();try{v0(i,s,i.template,a)}catch(D){throw c&&Lo(s,D),D}finally{p.end?.(),d.effectManager?.flush(),y?.end()}}function v0(i,s,a,c){const d=s[wt];if(256!=(256&d)){s[ra].effectManager?.flush(),Gr(s);try{lp(s),function oh(i){return Dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&u0(i,s,a,2,c);const y=3==(3&d);if(y){const S=i.preOrderCheckHooks;null!==S&&Eo(s,S,null)}else{const S=i.preOrderHooks;null!==S&&lc(s,S,0,null),ya(s,0)}if(function _0(i){for(let s=kn(i);null!==s;s=zi(s)){if(!s[Wu])continue;const a=s[ur];for(let c=0;c<a.length;c++){Ol(a[c])}}}(s),gy(s,2),null!==i.contentQueries&&lD(i,s),y){const S=i.contentCheckHooks;null!==S&&Eo(s,S)}else{const S=i.contentHooks;null!==S&&lc(s,S,1),ya(s,1)}!function IS(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=Gh(s,Gs);try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)ws(~p);else{const y=p,E=a[++d],D=a[++d];oc(E,y),c.dirty=!1;const S=Kd(c);try{D(2,s[y])}finally{lr(c,S)}}}}finally{null===s[Gs]&&o0(s,Gs),ws(-1)}}(i,s);const E=i.components;null!==E&&w0(s,E,0);const D=i.viewQuery;if(null!==D&&ly(2,D,c),y){const S=i.viewCheckHooks;null!==S&&Eo(s,S)}else{const S=i.viewHooks;null!==S&&lc(s,S,2),ya(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[wt]&=-73,ec(s)}finally{zr()}}}function gy(i,s){for(let a=kn(i);null!==a;a=zi(a))for(let c=_r;c<a.length;c++)Xp(a[c],s)}function gD(i,s,a){Xp(Er(s,i),a)}function Xp(i,s){if(!function da(i){return 128==(128&i[wt])}(i))return;const a=i[et],c=i[wt];if(80&c&&0===s||1024&c||2===s)v0(a,i,a.template,i[bn]);else if(i[io]>0){gy(i,1);const d=a.components;null!==d&&w0(i,d,1)}}function w0(i,s,a){for(let c=0;c<s.length;c++)gD(i,s[c],a)}class Yh{get rootNodes(){const s=this._lView,a=s[et];return Fc(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bn]}set context(s){this._lView[bn]=s}get destroyed(){return 256==(256&this._lView[wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[En];if(Or(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Mm(s,c),gp(a,c))}this._attachedToViewContainer=!1}h_(this._lView[et],this._lView)}onDestroy(s){!function yn(i,s){if(256==(256&i[wt]))throw new re(911,!1);null===i[Hs]&&(i[Hs]=[]),i[Hs].push(s)}(this._lView,s)}markForCheck(){fd(this._cdRefInjectingView||this._lView)}detach(){this._lView[wt]&=-129}reattach(){this._lView[wt]|=128}detectChanges(){Jp(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Su(i,s){Mp(i,s,s[It],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=s}}class vd extends Yh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Jp(s[et],s,s[bn],!1)}checkNoChanges(){}get context(){return null}}class E0 extends Gm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=zt(s);return new Lc(a,this.ngModule)}}function I0(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class yD{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=qn(c);const d=this.injector.get(s,q_,c);return d!==q_||a===q_?d:this.parentInjector.get(s,a,c)}}class Lc extends Uh{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=I0(s.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return I0(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function $d(i){return i.map(jd).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let p=(d=d||this.ngModule)instanceof xa?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new yD(s,p):s,E=y.get(qm,null);if(null===E)throw new re(407,!1);const F={rendererFactory:E,sanitizer:y.get(H_,null),effectManager:y.get(hy,null),afterRenderEventManager:y.get(ty,null)},z=E.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",we=c?function DS(i,s,a,c){const p=c.get($h,!1)||a===ki.ShadowDom,y=i.selectRootElement(s,p);return function CS(i){tD(i)}(y),y}(z,c,this.componentDef.encapsulation,y):Tc(z,X,function mD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(X)),gt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Oe=null;null!==we&&(Oe=Up(we,y,!0));const Tt=c0(0,null,null,1,0,null,null,null,null,null,null),$t=Oa(null,Tt,null,gt,null,null,F,z,y,null,Oe);let gn,Pi;Gr($t);try{const Ps=this.componentDef;let Uf,Bf=null;Ps.findHostDirectiveDefs?(Uf=[],Bf=new Map,Ps.findHostDirectiveDefs(Ps,Uf,Bf),Uf.push(Ps)):Uf=[Ps];const $v=function vD(i,s){const a=i[et],c=Ft;return i[c]=s,as(a,c,2,"#host",null)}($t,we),sT=function _D(i,s,a,c,d,p,y){const E=d[et];!function Qh(i,s,a,c){for(const d of i)s.mergedAttrs=no(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Qp(s,s.mergedAttrs,!0),null!==a&&xp(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=Up(s,d[gs]));const S=p.rendererFactory.createRenderer(s,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const F=Oa(d,Zh(a),null,x,d[i.index],i,p,S,null,null,D);return E.firstCreatePass&&f0(E,i,c.length-1),cy(d,F),d[i.index]=F}($v,we,Ps,Uf,$t,F,z);Pi=Rl(Tt,Ft),we&&function Vo(i,s,a,c){if(c)Ya(i,a,["ng-version",z_.full]);else{const{attrs:d,classes:p}=function Ti(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++c]):8===d&&a.push(p);else{if(!Qr(d))break;d=p}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Ya(i,a,d),p&&p.length>0&&uI(i,a,p.join(" "))}}(z,Ps,we,c),void 0!==a&&function D0(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(Pi,this.ngContentSelectors,a),gn=function OS(i,s,a,c,d,p){const y=hr(),E=d[et],D=wr(y,d);oy(E,d,y,a,null,c);for(let x=0;x<a.length;x++)ai(So(d,E,y.directiveStart+x,y),d);oD(E,d,y),D&&ai(D,d);const S=So(d,E,y.directiveStart+y.componentOffset,y);if(i[bn]=d[bn]=S,null!==p)for(const x of p)x(S,s);return Sn(E,y,i),S}(sT,Ps,Uf,Bf,$t,[vn]),yd(Tt,$t,null)}finally{zr()}return new Ms(this.componentType,gn,ad(Pi,$t),$t,Pi)}}class Ms extends dS{constructor(s,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new vd(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const p=this._rootLView;dy(p[et],p,d,s,a),this.previousInputValues.set(s,a),fd(Er(this._tNode.index,p))}}get injector(){return new Pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function vn(){const i=hr();ma(Ae()[et],i)}function eg(i){let s=function wD(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(Jr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new re(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=tg(i.inputs),y.inputTransforms=tg(i.inputTransforms),y.declaredInputs=tg(i.declaredInputs),y.outputs=tg(i.outputs);const E=d.hostBindings;E&&b0(i,E);const D=d.viewQuery,S=d.contentQueries;if(D&&C0(i,D),S&&Jh(i,S),j(i.inputs,d.inputs),j(i.declaredInputs,d.declaredInputs),j(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),j(y.inputTransforms,d.inputTransforms)),Jr(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(i),E===eg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Pa(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=no(d.hostAttrs,a=no(a,d.hostAttrs))}}(c)}function tg(i){return i===Fi?{}:i===Gt?[]:i}function C0(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function Jh(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{s(c,d,p),a(c,d,p)}:s}function b0(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function _d(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function my(i){return!!M0(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function M0(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ni(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Fr(i,s,a,c){const d=Ae();return Ni(d,_o(),s)&&(Bt(),us(hn(),d,i,s,a,c)),Fr}function Uc(i,s,a,c,d,p){const E=function wd(i,s,a,c){const d=Ni(i,s,a);return Ni(i,s+1,c)||d}(i,function pi(){return Dt.lFrame.bindingIndex}(),a,d);return Zs(2),E?s+ee(a)+c+ee(d)+p:Lt}function ND(i,s,a,c,d,p,y,E){const D=Ae(),S=Bt(),x=i+Ft,F=S.firstCreatePass?function jo(i,s,a,c,d,p,y,E,D){const S=s.consts,x=as(s,i,4,y||null,ei(S,E));sy(s,a,x,ei(S,D)),ma(s,x);const F=x.tView=c0(2,x,c,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S,null);return null!==s.queries&&(s.queries.template(s,x),F.queries=s.queries.embeddedTView(x)),x}(x,S,D,s,a,c,d,p,y):S.data[x];Ws(F,!1);const z=tf(S,D,F,i);Ui()&&Sp(S,D,z,F),ai(z,D),cy(D,D[x]=cD(z,D,z,F)),fi(F)&&Wh(S,D,F),null!=y&&gd(D,F,E)}let tf=function Ou(i,s,a,c){return Bi(!0),s[It].createComment("")};function k0(i,s,a){const c=Ae();return Ni(c,_o(),s)&&function As(i,s,a,c,d,p,y,E){const D=wr(s,a);let x,S=s.inputs;!E&&null!=S&&(x=S[c])?(dy(i,a,x,c,d),ao(s)&&function rD(i,s){const a=Er(s,i);16&a[wt]||(a[wt]|=64)}(a,s.index)):3&s.type&&(c=function TS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,p.setProperty(D,c,d))}(Bt(),hn(),c,i,s,c[It],a,!1),k0}function F0(i,s,a,c,d){const y=d?"class":"style";dy(i,a,s.inputs[y],y,c)}function jc(i,s,a,c){const d=Ae(),p=Bt(),y=Ft+i,E=d[It],D=p.firstCreatePass?function Rs(i,s,a,c,d,p){const y=s.consts,D=as(s,i,2,c,ei(y,d));return sy(s,a,D,ei(y,p)),null!==D.attrs&&Qp(D,D.attrs,!1),null!==D.mergedAttrs&&Qp(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,p,d,s,a,c):p.data[y],S=Ei(p,d,D,E,s,i);d[y]=S;const x=fi(D);return Ws(D,!0),xp(E,S,D),32!=(32&D.flags)&&Ui()&&Sp(p,d,S,D),0===function tc(){return Dt.lFrame.elementDepthCount}()&&ai(S,d),function dr(){Dt.lFrame.elementDepthCount++}(),x&&(Wh(p,d,D),Sn(p,D,d)),null!==c&&gd(d,D),jc}function $c(){let i=hr();vo()?function Fl(){Dt.lFrame.isParent=!1}():(i=i.parent,Ws(i,!1));const s=i;(function Pl(i){return Dt.skipHydrationRootTNode===i})(s)&&function kl(){Dt.skipHydrationRootTNode=null}(),function sh(){Dt.lFrame.elementDepthCount--}();const a=Bt();return a.firstCreatePass&&(ma(a,i),Zu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Es(i){return 0!=(8&i.flags)}(s)&&F0(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function fh(i){return 0!=(16&i.flags)}(s)&&F0(a,s,Ae(),s.stylesWithoutHost,!1),$c}function Ey(i,s,a,c){return jc(i,s,a,c),$c(),Ey}let Ei=(i,s,a,c,d,p)=>(Bi(!0),Tc(c,d,function Vl(){return Dt.lFrame.currentNamespace}()));function kD(){return Ae()}function V0(i){return!!i&&"function"==typeof i.then}function FD(i){return!!i&&"function"==typeof i.subscribe}function U0(i,s,a,c){const d=Ae(),p=Bt(),y=hr();return function VD(i,s,a,c,d,p,y){const E=fi(c),S=i.firstCreatePass&&Yp(i),x=s[bn],F=g0(s);let z=!0;if(3&c.type||y){const Ve=wr(c,s),Je=y?y(Ve):Ve,gt=F.length,Oe=y?$t=>y(nn($t[c.index])):c.index;let Tt=null;if(!y&&E&&(Tt=function GS(i,s,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===c){const E=s[eu],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof y&&(p+=2)}return null}(i,s,d,c.index)),null!==Tt)(Tt.__ngLastListenerFn__||Tt).__ngNextListenerFn__=p,Tt.__ngLastListenerFn__=p,z=!1;else{p=BD(c,s,x,p,!1);const $t=a.listen(Je,d,p);F.push(p,$t),S&&S.push(d,Oe,gt,gt+1)}}else p=BD(c,s,x,p,!1);const X=c.outputs;let we;if(z&&null!==X&&(we=X[d])){const Ve=we.length;if(Ve)for(let Je=0;Je<Ve;Je+=2){const gn=s[we[Je]][we[Je+1]].subscribe(p),Pi=F.length;F.push(p,gn),S&&S.push(d,c.index,Pi,-(Pi+1))}}}(p,d,d[It],y,i,s,c),U0}function UD(i,s,a,c){try{return Li(6,s,a),!1!==a(c)}catch(d){return Lo(i,d),!1}finally{Li(7,s,a)}}function BD(i,s,a,c,d){return function p(y){if(y===Function)return c;fd(i.componentOffset>-1?Er(i.index,s):s);let D=UD(s,a,c,y),S=p.__ngNextListenerFn__;for(;S;)D=UD(s,a,S,y)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function jD(i=1){return function cc(i){return(Dt.lFrame.contextLView=function hu(i,s){for(;i>0;)s=s[ms],i--;return s}(i,Dt.lFrame.contextLView))[bn]}(i)}function Id(i,s){return i<<17|s<<2}function Qn(i){return i>>17&32767}function Hc(i){return 2|i}function Vr(i){return(131068&i)>>2}function by(i,s){return-131069&i|s<<2}function Tr(i){return 1|i}function ug(i,s,a,c,d){const p=i[a+1],y=null===s;let E=c?Qn(p):Vr(p),D=!1;for(;0!==E&&(!1===D||y);){const x=i[E+1];Ty(i[E],s)&&(D=!0,i[E+1]=c?Tr(x):Hc(x)),E=c?Qn(x):Vr(x)}D&&(i[a+1]=c?Hc(p):Tr(p))}function Ty(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&gc(i,s)>=0}function My(i,s){return function zo(i,s,a,c){const d=Ae(),p=Bt(),y=Zs(2);p.firstUpdatePass&&function G0(i,s,a,c){const d=i.data;if(null===d[a+1]){const p=d[Dr()],y=function H0(i,s){return s>=i.expandoStartIndex}(i,a);(function q0(i,s){return 0!=(i.flags&(s?8:16))})(p,c)&&null===s&&!y&&(s=!1),s=function Ii(i,s,a,c){const d=function ch(i){const s=Dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=uf(a=Ny(null,i,s,a,c),s.attrs,c),p=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=Ny(d,i,s,a,c),null===p){let D=function KD(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Vr(c))return i[Qn(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=Ny(null,i,s,D[1],c),D=uf(D,s.attrs,c),function Hn(i,s,a,c){i[Qn(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else p=function Zc(i,s,a){let c;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)c=uf(c,i[p].hostAttrs,a);return uf(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,c),function pr(i,s,a,c,d,p){let y=p?s.classBindings:s.styleBindings,E=Qn(y),D=Vr(y);i[c]=a;let x,S=!1;if(Array.isArray(a)?(x=a[1],(null===x||gc(a,x)>0)&&(S=!0)):x=a,d)if(0!==D){const z=Qn(i[E+1]);i[c+1]=Id(z,E),0!==z&&(i[z+1]=by(i[z+1],c)),i[E+1]=function zD(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=Id(E,0),0!==E&&(i[E+1]=by(i[E+1],c)),E=c;else i[c+1]=Id(D,0),0===E?E=c:i[D+1]=by(i[D+1],c),D=c;S&&(i[c+1]=Hc(i[c+1])),ug(i,x,c,!0),ug(i,x,c,!1),function ku(i,s,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&gc(p,s)>=0&&(a[c+1]=Tr(a[c+1]))}(s,x,i,c,p),y=Id(E,D),p?s.classBindings=y:s.styleBindings=y}(d,p,s,a,y,c)}}(p,i,y,c),s!==Lt&&Ni(d,y,s)&&function pn(i,s,a,c,d,p,y,E){if(!(3&s.type))return;const D=i.data,S=D[E+1],x=function WS(i){return 1==(1&i)}(S)?Cd(D,s,a,d,Vr(S),y):void 0;lf(x)||(lf(p)||function $n(i){return 2==(2&i)}(S)&&(p=Cd(D,null,a,d,E,y)),function VT(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Cc.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Cc.Important),i.setStyle(a,c,d,p))}}(c,y,mo(Dr(),a),d,p))}(p,p.data[Dr()],d,d[It],i,d[y+1]=function z0(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(Ac(i)))),i}(s,a),c,y)}(i,s,null,!0),My}function Ny(i,s,a,c,d){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=s[E],c=uf(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function uf(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const y=s[p];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Gi(i,y,!!a||s[++p]))}return void 0===i?null:i}function Cd(i,s,a,c,d,p){const y=null===s;let E;for(;d>0;){const D=i[d],S=Array.isArray(D),x=S?D[1]:D,F=null===x;let z=a[d+1];z===Lt&&(z=F?Gt:void 0);let X=F?yp(z,c):x===c?z:void 0;if(S&&!lf(X)&&(X=yp(D,c)),lf(X)&&(E=X,y))return E;const we=i[d+1];d=y?Qn(we):Vr(we)}if(null!==s){let D=p?s.residualClasses:s.residualStyles;null!=D&&(E=yp(D,c))}return E}function lf(i){return void 0!==i}function Ry(i,s=""){const a=Ae(),c=Bt(),d=i+Ft,p=c.firstCreatePass?as(c,d,1,s,null):c.data[d],y=W0(c,a,p,s,i);a[d]=y,Ui()&&Sp(c,a,y,p),Ws(p,!1)}let W0=(i,s,a,c,d)=>(Bi(!0),function bc(i,s){return i.createText(s)}(s[It],c));function Z0(i){return Oy("",i,""),Z0}function Oy(i,s,a){const c=Ae(),d=function Ns(i,s,a,c){return Ni(i,_o(),a)?s+ee(a)+c:Lt}(c,i,s,a);return d!==Lt&&Mu(c,Dr(),d),Oy}function K0(i,s,a,c,d){const p=Ae(),y=Uc(p,i,s,a,c,d);return y!==Lt&&Mu(p,Dr(),y),K0}const Kc=void 0;var lC=["en",[["a","p"],["AM","PM"],Kc],[["AM","PM"],Kc,Kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kc,"{1} 'at' {0}",Kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ua(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ba={};function sw(i){const s=function hC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=By(s);if(a)return a;const c=s.split("-")[0];if(a=By(c),a)return a;if("en"===c)return lC;throw new re(701,!1)}function dC(i){return sw(i)[Sd.PluralCase]}function By(i){return i in Ba||(Ba[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Ba[i]}var Sd=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Sd||{});const pf="en-US";let ow=pf;function Zo(i,s,a,c,d){if(i=Ne(i),Array.isArray(i))for(let p=0;p<i.length;p++)Zo(i[p],s,a,c,d);else{const p=Bt(),y=Ae(),E=hr();let D=Rh(i)?i:Ne(i.provide);const S=oS(i),x=1048575&E.providerIndexes,F=E.directiveStart,z=E.providerIndexes>>20;if(Rh(i)||!i.multi){const X=new ss(S,d,pd),we=Qy(D,s,d?x:x+z,F);-1===we?(Co(On(E,y),p,D),Yy(p,i,s.length),s.push(D),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),a.push(X),y.push(X)):(a[we]=X,y[we]=X)}else{const X=Qy(D,s,x+z,F),we=Qy(D,s,x,x+z),Je=we>=0&&a[we];if(d&&!Je||!d&&!(X>=0&&a[X])){Co(On(E,y),p,D);const gt=function Nd(i,s,a,c,d){const p=new ss(i,a,pd);return p.multi=[],p.index=s,p.componentProviders=0,FC(p,d,c&&!a),p}(d?xd:Jy,a.length,d,c,S);!d&&Je&&(a[we].providerFactory=gt),Yy(p,i,s.length,0),s.push(D),E.directiveStart++,E.directiveEnd++,d&&(E.providerIndexes+=1048576),a.push(gt),y.push(gt)}else Yy(p,i,X>-1?X:we,FC(a[d?we:X],S,!d&&c));!d&&c&&Je&&a[we].componentProviders++}}}function Yy(i,s,a,c){const d=Rh(s),p=function _x(i){return!!i.useClass}(s);if(d||p){const D=(p?Ne(s.useClass):s).prototype.ngOnDestroy;if(D){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=S.indexOf(a);-1===x?S.push(a,[c,D]):S[x+1].push(c,D)}else S.push(a,D)}}}function FC(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Qy(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function Jy(i,s,a,c){return Bu(this.multi,[])}function xd(i,s,a,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=So(a,a[et],this.providerFactory.index,c);p=E.slice(0,y),Bu(d,p);for(let D=y;D<E.length;D++)p.push(E[D])}else p=[],Bu(d,p);return p}function Bu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function If(i,s=[]){return a=>{a.providersResolver=(c,d)=>function kC(i,s,a){const c=Bt();if(c.firstCreatePass){const d=Jr(i);Zo(a,c.data,c.blueprint,d,!0),Zo(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Yc{}class Xy{}function Ew(i,s){return new ev(i,s??null,[])}class ev extends Yc{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new E0(this);const d=$r(s);this._bootstrapComponents=Ss(d.bootstrap),this._r3Injector=$I(s,a,[{provide:Yc,useValue:this},{provide:Gm,useValue:this.componentFactoryResolver},...c],J(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Iw extends Xy{constructor(s){super(),this.moduleType=s}create(s){return new ev(this.moduleType,s,[])}}class Dw extends Yc{constructor(s){super(),this.componentFactoryResolver=new E0(this),this.instance=null;const a=new kr([...s.providers,{provide:Yc,useValue:this},{provide:Gm,useValue:this.componentFactoryResolver}],s.parent||kp(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Eg(i,s,a=null){return new Dw({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let Ig=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=xI(0,a.type),d=c.length>0?Eg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ut({token:i,providedIn:"environment",factory:()=>new i(St(xa))})}return i})();function Qc(i){i.getStandaloneInjector=s=>s.get(Ig).getOrCreateStandaloneInjector(i)}function Nw(i,s,a,c,d,p){const y=s+a;return Ni(i,y,d)?function ka(i,s,a){return i[s]=a}(i,y+1,p?c.call(p,d):c(d)):function Df(i,s){const a=i[s];return a===Lt?void 0:a}(i,y+1)}function Ow(i,s){const a=Bt();let c;const d=i+Ft;a.firstCreatePass?(c=function Xc(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??=[]).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=uo(c.type)),E=un(pd);try{const D=ii(!1),S=p();return ii(D),function RD(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Ae(),d,S),S}finally{un(E)}}function el(i,s,a){const c=i+Ft,d=Ae(),p=function yo(i,s){return i[s]}(d,c);return function bf(i,s){return i[et].data[s].pure}(d,c)?Nw(d,function ti(){const i=Dt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,p.transform,a,p):p.transform(a)}function mA(){return this._results[Symbol.iterator]()}class iv{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ra)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=iv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=mA)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function oi(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function os(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=s[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function _A(i,s,a,c=!0){const d=s[et];if(function d_(i,s,a,c){const d=_r+c,p=a.length;c>0&&(a[d-1][Hr]=s),c<p-_r?(s[Hr]=a[d],mm(a,_r+c,s)):(a.push(s),s[Hr]=null),s[En]=a;const y=s[yl];null!==y&&a!==y&&function bp(i,s){const a=i[ur];s[In]!==s[En][En][In]&&(i[Wu]=!0),null===a?i[ur]=[s]:a.push(s)}(y,s);const E=s[or];null!==E&&E.insertView(i),s[wt]|=128}(d,s,i,a),c){const p=m_(a,i),y=s[It],E=xm(y,i[ar]);null!==E&&function Sc(i,s,a,c,d,p){c[wn]=d,c[yr]=s,Mp(i,c,a,1,d,p)}(d,i[yr],y,s,E,p)}}let Tf=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=EA}return i})();const wA=Tf,WC=class extends wA{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,c){const d=function yA(i,s,a,c){const d=s.tView,E=Oa(i,d,a,4096&i[wt]?4096:16,null,s,null,null,null,c?.injector??null,c?.hydrationInfo??null);E[yl]=i[s.index];const S=i[or];return null!==S&&(E[or]=S.createEmbeddedView(d)),yd(d,E,a),E}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:c});return new Yh(d)}};function EA(){return Mg(hr(),Ae())}function Mg(i,s){return 4&i.type?new WC(s,i,ad(i,s)):null}let sv=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=CA}return i})();function CA(){return Rg(hr(),Ae())}const bA=sv,YC=class extends bA{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return ad(this._hostTNode,this._hostLView)}get injector(){return new Pn(this._hostTNode,this._hostLView)}get parentInjector(){const s=$i(this._hostTNode,this._hostLView);if(va(s)){const a=gi(s,this._hostLView),c=ri(s);return new Pn(a[et].data[c+8],a)}return new Pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ov(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(s,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const E=s.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(E,d,false),E}createComponent(s,a,c,d,p){const y=s&&!function fr(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const Ve=a||{};E=Ve.index,c=Ve.injector,d=Ve.projectableNodes,p=Ve.environmentInjector||Ve.ngModuleRef}const D=y?s:new Lc(zt(s)),S=c||this.parentInjector;if(!p&&null==D.ngModule){const Je=(y?S:this.parentInjector).get(xa,null);Je&&(p=Je)}zt(D.componentType??{});const X=D.create(S,d,null,p);return this.insertImpl(X.hostView,E,false),X}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView;if(function cp(i){return Or(i[En])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const S=d[En],x=new YC(S,S[yr],S[En]);x.detach(x.indexOf(s))}}const y=this._adjustIndex(a),E=this._lContainer;return _A(E,d,y,!c),s.attachToViewContainerRef(),mm(Lw(E),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ov(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Mm(this._lContainer,a);c&&(gp(Lw(this._lContainer),a),h_(c[et],c))}detach(s){const a=this._adjustIndex(s,-1),c=Mm(this._lContainer,a);return c&&null!=gp(Lw(this._lContainer),a)?new Yh(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function ov(i){return i[8]}function Lw(i){return i[8]||(i[8]=[])}function Rg(i,s){let a;const c=s[i.index];return Or(c)?a=c:(a=cD(c,s,null,i),s[i.index]=a,cy(s,a)),QC(a,s,i,c),new YC(a,i,s)}let QC=function Vw(i,s,a,c){if(i[ar])return;let d;d=8&a.type?nn(c):function av(i,s){const a=i[It],c=a.createComment(""),d=wr(s,i);return rd(a,xm(a,d),c,function FT(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[ar]=d};class Od{constructor(s){this.queryList=s,this.matches=null}clone(){return new Od(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new Sf(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==$w(s,a).matches&&this.queries[a].setDirty()}}class uv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Og{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Og(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class cv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new cv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(s,a,TA(a,p)),this.matchTNodeWithReadOption(s,a,To(a,s,p,!1,!1))}else c===Tf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,To(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Bh||d===sv||d===Tf&&4&a.type)this.addMatch(a.index,-2);else{const p=To(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function TA(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function XC(i,s,a,c){return-1===a?function JC(i,s){return 11&i.type?ad(i,s):4&i.type?Mg(i,s):null}(s,i):-2===a?function jw(i,s,a){return a===Bh?ad(s,i):a===Tf?Mg(s,i):a===sv?Rg(s,i):void 0}(i,s,c):So(i,i[et],a,s)}function eb(i,s,a,c){const d=s[or].queries[c];if(null===d.matches){const p=i.data,y=a.matches,E=[];for(let D=0;D<y.length;D+=2){const S=y[D];E.push(S<0?null:XC(s,p[S],y[D+1],a.metadata.read))}d.matches=E}return d.matches}function lv(i,s,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=eb(i,s,d,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)c.push(y[E/2]);else{const S=p[E+1],x=s[-D];for(let F=_r;F<x.length;F++){const z=x[F];z[yl]===z[En]&&lv(z[et],z,S,c)}if(null!==x[ur]){const F=x[ur];for(let z=0;z<F.length;z++){const X=F[z];lv(X[et],X,S,c)}}}}}return c}function tb(i){const s=Ae(),a=Bt(),c=uc();lh(c+1);const d=$w(a,c);if(i.dirty&&function up(i){return 4==(4&i[wt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?lv(a,s,c,[]):eb(a,s,d,c);i.reset(p,zm),i.notifyOnChanges()}return!0}return!1}function rb(i,s,a,c){const d=Bt();if(d.firstCreatePass){const p=hr();(function Pg(i,s,a){null===i.queries&&(i.queries=new Og),i.queries.track(new cv(s,a))})(d,new uv(s,a,c),p.index),function ib(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function dv(i,s,a){const c=new iv(4==(4&a));(function kc(i,s,a,c){const d=g0(s);d.push(a),i.firstCreatePass&&Yp(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[or]&&(s[or]=new Sf),s[or].queries.push(new Od(c))}(d,Ae(),a)}function Pd(){return function Af(i,s){return i[or].queries[s].queryList}(Ae(),uc())}function $w(i,s){return i.queries.getByIndex(s)}function Mf(i){return!!$r(i)}const Dv=new fn("Application Initializer");let rE=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Pt(Dv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(V0(p))a.push(p);else if(FD(p)){const y=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Cv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Pf=new fn("LocaleId",{providedIn:"root",factory:()=>Pt(Pf,_t.Optional|_t.SkipSelf)||function VA(){return typeof $localize<"u"&&$localize.locale||pf}()}),gb=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Fd=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class sl{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let sE=(()=>{class i{compileModuleSync(a){return new Iw(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ss($r(a).declarations).reduce((y,E)=>{const D=zt(E);return D&&y.push(new Lc(D)),y},[]);return new sl(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Av=new fn(""),Tb=new fn("");let Mv,pE=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mv||(function mE(i){Mv=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(St(qr),St(gE),St(Tb))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac})}return i})(),gE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Mv?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),ol=null;const xv=new fn("AllowMultipleToken"),yE=new fn("PlatformDestroyListeners"),Bg=new fn("appBootstrapListener");class _E{constructor(s,a){this.name=s,this.token=a}}function xb(i,s,a=[]){const c=`Platform: ${s}`,d=new fn(c);return(p=[])=>{let y=DE();if(!y||y.injector.get(xv,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function wE(i){if(ol&&!ol.get(xv,!1))throw new re(400,!1);(function Ab(){!function tp(i){Jd=i}(()=>{throw new re(600,!1)})})(),ol=i;const s=i.get(Nv);(function EE(i){i.get(tt,null)?.forEach(a=>a())})(i)}(function za(i=[],s){return Fo.create({name:s,providers:[{provide:A_,useValue:"platform"},{provide:yE,useValue:new Set([()=>ol=null])},...i]})}(E,c))}return function IE(i){const s=DE();if(!s)throw new re(401,!1);return s}()}}function DE(){return ol?.get(Nv)??null}let Nv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function qA(i="zone.js",s){return"noop"===i?new yS:"zone.js"===i?new qr(s):i}(c?.ngZone,function Rb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function LC(i,s,a){return new ev(i,s,a)}(a.moduleType,this.injector,function bE(i){return[{provide:qr,useFactory:i},{provide:Nh,multi:!0,useFactory:()=>{const s=Pt(kb,{optional:!0});return()=>s.initialize()}},{provide:Pb,useFactory:CE},{provide:cd,useFactory:ZI}]}(()=>d)),y=p.injector.get(Rc,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:D=>{y.handleError(D)}});p.onDestroy(()=>{Ov(this._modules,p),E.unsubscribe()})}),function Rv(i,s,a){try{const c=a();return V0(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const E=p.injector.get(rE);return E.runInitializers(),E.donePromise.then(()=>(function Ad(i){Ke(i,"Expected localeId to be defined"),"string"==typeof i&&(ow=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Pf,pf)||pf),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const d=Ob({},c);return function zA(i,s,a){const c=new Iw(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(al);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new re(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(yE,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(St(Fo))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Ob(i,s){return Array.isArray(s)?s.reduce(Ob,i):{...i,...s}}let al=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pt(Pb),this.zoneIsStable=Pt(cd),this.componentTypes=[],this.components=[],this.isStable=Pt(Fd).hasPendingTasks.pipe((0,Me.w)(a=>a?(0,fe.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,pe.B)()),this._injector=Pt(xa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Uh;if(!this._injector.get(rE).done)throw!d&&$s(a),new re(405,!1);let y;y=d?a:this._injector.get(Gm).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function vE(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Yc),S=y.create(Fo.NULL,[],c||y.selector,E),x=S.location.nativeElement,F=S.injector.get(Av,null);return F?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),Ov(this.components,S),F?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ov(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Bg,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ov(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ov(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const Pb=new fn("",{providedIn:"root",factory:()=>Pt(Rc).handleError.bind(void 0)});function CE(){const i=Pt(qr),s=Pt(Rc);return a=>i.runOutsideAngular(()=>s.handleError(a))}let kb=(()=>{class i{constructor(){this.zone=Pt(qr),this.applicationRef=Pt(al)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ZA(){return!1}let TE=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=KA}return i})();function KA(i){return function jg(i,s,a){if(ao(i)&&!a){const c=Er(i.index,s);return new Yh(c,c)}return 47&i.type?new Yh(s[In],s):null}(hr(),Ae(),16==(16&i))}class AE{constructor(){}supports(s){return my(s)}create(s){return new Hb(s)}}const ME=(i,s)=>s;class Hb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ME}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<zb(c,d,p)?a:c,E=zb(y,d,p),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const S=E-d,x=D-d;if(S!=x){for(let z=0;z<S;z++){const X=z<p.length?p[z]:p[z]=0,we=X+z;x<=we&&we<S&&(p[z]=X+1)}p[y.previousIndex]=x-S}}E!==D&&s(y,E,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!my(s))throw new re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),c=!0),a=a._next}else d=0,function PS(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new Lf(a,c),p,d),s}_verifyReinsertion(s,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Lf{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xE{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Gb{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new xE,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zb(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class qb{constructor(){}supports(s){return s instanceof Map||M0(s)}create(){return new Wb}}class Wb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||M0(s)))throw new re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new tM(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class tM{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NE(){return new RE([new AE])}let RE=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:NE});constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||NE()),deps:[[i,new xo,new ql]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new re(901,!1)}}return i})();function Zb(){return new OE([new qb])}let OE=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:Zb});constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Zb()),deps:[[i,new xo,new ql]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new re(901,!1)}}return i})();const Jb=xb(null,"core",[]);let Xb=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(St(al))};static#t=this.\u0275mod=ta({type:i});static#n=this.\u0275inj=mn({})}return i})();function iT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function $u(i){const s=zt(i);if(!s)return null;const a=new Lc(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3399:(at,Ce,P)=>{P.d(Ce,{Z:()=>qe});var f=P(9058),Y=P(4537),k=P(7592),Q=P(7879);class ne{constructor(We,Re){this._delegate=We,this.firebase=Re,(0,k._addComponent)(We,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(We,Re=k._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(We);return!lt.isInitialized()&&"EXPLICIT"===(null===(ct=lt.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:Re})}_removeServiceInstance(We,Re=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Re)}_addComponent(We){(0,k._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,k._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ue(){const Ne=function Me(Ne){const We={},Re={__esModule:!0,initializeApp:function re(Pe,oe={}){const q=k.initializeApp(Pe,oe);if((0,f.r3)(We,q.name))return We[q.name];const je=new Ne(q,Re);return We[q.name]=je,je},app:lt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function ee(Pe){const oe=Pe.name,q=oe.replace("-compat","");if(k._registerComponent(Pe)&&"PUBLIC"===Pe.type){const je=(dt=lt())=>{if("function"!=typeof dt[q])throw pe.create("invalid-app-argument",{appName:oe});return dt[q]()};void 0!==Pe.serviceProps&&(0,f.ZB)(je,Pe.serviceProps),Re[q]=je,Ne.prototype[q]=function(...dt){return this._getService.bind(this,oe).apply(this,Pe.multipleInstances?dt:[])}}return"PUBLIC"===Pe.type?Re[q]:null},removeApp:function ct(Pe){delete We[Pe]},useAsService:function Ee(Pe,oe){return"serverAuth"===oe?null:oe},modularAPIs:k}};function lt(Pe){if(!(0,f.r3)(We,Pe=Pe||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Pe});return We[Pe]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function _e(){return Object.keys(We).map(Pe=>We[Pe])}}),lt.App=Ne,Re}(ne);return Ne.INTERNAL=Object.assign(Object.assign({},Ne.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function We(Re){(0,f.ZB)(Ne,Re)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ne}(),j=new Q.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=L;!function Te(Ne){(0,k.registerVersion)("@firebase/app-compat","0.2.13",Ne)}()},7592:(at,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Ie,_addOrOverwriteComponent:()=>Se,_apps:()=>he,_clearComponents:()=>yt,_components:()=>me,_getProvider:()=>Ge,_registerComponent:()=>Ke,_removeServiceInstance:()=>xn,deleteApp:()=>Kr,getApp:()=>sn,getApps:()=>Ar,initializeApp:()=>Gn,onLog:()=>Yr,registerVersion:()=>Vn,setLogLevel:()=>hs});var f=P(5861),Y=P(4537),k=P(7879),Q=P(9058),ne=P(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Me="@firebase/app",L=new k.Yd("@firebase/app"),ie="[DEFAULT]",de={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ie(ye,H){try{ye.container.addComponent(H)}catch(ge){L.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Se(ye,H){ye.container.addOrOverwriteComponent(H)}function Ke(ye){const H=ye.name;if(me.has(H))return L.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ie(ge,ye);return!0}function Ge(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}function xn(ye,H,ge=ie){Ge(ye,H).clearInstance(ge)}function yt(){me.clear()}const ut=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dn{constructor(H,ge,$e){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=$e,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}const mn="9.23.0";function Gn(ye,H={}){let ge=ye;"object"!=typeof H&&(H={name:H});const $e=Object.assign({name:ie,automaticDataCollectionEnabled:!1},H),Ye=$e.name;if("string"!=typeof Ye||!Ye)throw ut.create("bad-app-name",{appName:String(Ye)});if(ge||(ge=(0,Q.aH)()),!ge)throw ut.create("no-options");const ht=he.get(Ye);if(ht){if((0,Q.vZ)(ge,ht.options)&&(0,Q.vZ)($e,ht.config))return ht;throw ut.create("duplicate-app",{appName:Ye})}const Qt=new Y.H0(Ye);for(const V of me.values())Qt.addComponent(V);const U=new dn(ge,$e,Qt);return he.set(Ye,U),U}function sn(ye=ie){const H=he.get(ye);if(!H&&ye===ie&&(0,Q.aH)())return Gn();if(!H)throw ut.create("no-app",{appName:ye});return H}function Ar(){return Array.from(he.values())}function Kr(ye){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(ye){const H=ye.name;he.has(H)&&(he.delete(H),yield Promise.all(ye.container.getProviders().map(ge=>ge.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Vn(ye,H,ge){var $e;let Ye=null!==($e=de[ye])&&void 0!==$e?$e:ye;ge&&(Ye+=`-${ge}`);const ht=Ye.match(/\s|\//),Qt=H.match(/\s|\//);if(ht||Qt){const U=[`Unable to register library "${Ye}" with version "${H}":`];return ht&&U.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),ht&&Qt&&U.push("and"),Qt&&U.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void L.warn(U.join(" "))}Ke(new Y.wA(`${Ye}-version`,()=>({library:Ye,version:H}),"VERSION"))}function Yr(ye,H){if(null!==ye&&"function"!=typeof ye)throw ut.create("invalid-log-argument");(0,k.Am)(ye,H)}function hs(ye){(0,k.Ub)(ye)}const to="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let Nt=null;function un(){return Nt||(Nt=(0,ne.X3)(to,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function zn(){return(zn=(0,f.Z)(function*(ye){try{return yield(yield un()).transaction(bt).objectStore(bt).get(fs(ye))}catch(H){if(H instanceof Q.ZR)L.warn(H.message);else{const ge=ut.create("idb-get",{originalErrorMessage:H?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,H){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(ye,H){try{const $e=(yield un()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,fs(ye)),yield $e.done}catch(ge){if(ge instanceof Q.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function fs(ye){return`${ye.name}!${ye.options.appId}`}class Zt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Vs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,f.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=hi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!H._heartbeatsCache.heartbeats.some(ht=>ht.date===Ye))return H._heartbeatsCache.heartbeats.push({date:Ye,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ht=>{const Qt=new Date(ht.date).valueOf();return Date.now()-Qt<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,f.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=hi(),{heartbeatsToSend:$e,unsentEntries:Ye}=function ps(ye,H=1024){const ge=[];let $e=ye.slice();for(const Ye of ye){const ht=ge.find(Qt=>Qt.agent===Ye.agent);if(ht){if(ht.dates.push(Ye.date),xr(ge)>H){ht.dates.pop();break}}else if(ge.push({agent:Ye.agent,dates:[Ye.date]}),xr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ht=(0,Q.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Ye.length>0?(H._heartbeatsCache.heartbeats=Ye,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ht})()}}function hi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,f.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function _n(ye){return zn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,f.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ht=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ht.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,f.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ht=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ht.lastSentHeartbeatDate,heartbeats:[...ht.heartbeats,...H.heartbeats]})}})()}}function xr(ye){return(0,Q.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Ji(ye){Ke(new Y.wA("platform-logger",H=>new fe(H),"PRIVATE")),Ke(new Y.wA("heartbeat",H=>new Zt(H),"PRIVATE")),Vn(Me,"0.9.13",ye),Vn(Me,"0.9.13","esm2017"),Vn("fire-js","")}("")},4097:(at,Ce,P)=>{P.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=P(7592);(0,f.registerVersion)("firebase","9.23.0","app")},120:(at,Ce,P)=>{P.d(Ce,{Z:()=>f.Z});var f=P(3399);f.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(at,Ce,P)=>{P.r(Ce);var f=P(5861),Y=P(3399),k=P(9058),Q=P(7592),ne=P(7582),fe=P(7879),pe=P(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const qe=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ne=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new fe.Yd("@firebase/auth");function re(v,...h){ct.logLevel<=fe.in.ERROR&&ct.error(`Auth (${Q.SDK_VERSION}): ${v}`,...h)}function _e(v,...h){throw oe(v,...h)}function ee(v,...h){return oe(v,...h)}function Ee(v,h,g){const _=Object.assign(Object.assign({},Ne()),{[h]:g});return new k.LL("auth","Firebase",_).create(h,{appName:v.name})}function Pe(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&_e(v,"argument-error"),Ee(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oe(v,...h){if("string"!=typeof v){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(g,..._)}return We.create(v,...h)}function q(v,h,...g){if(!v)throw oe(h,...g)}function je(v){const h="INTERNAL ASSERTION FAILED: "+v;throw re(h),new Error(h)}function dt(v,h){v||je(h)}function Yt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function cn(){return"http:"===ln()||"https:"===ln()}function ln(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class sr{constructor(h,g){this.shortDelay=h,this.longDelay=g,dt(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Mn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(cn()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(v,h){dt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class de{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const he={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new sr(3e4,6e4);function Ie(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Se(v,h,g,_){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,f.Z)(function*(v,h,g,_,T={}){return Ge(v,T,(0,f.Z)(function*(){let N={},B={};_&&("GET"===h?B=_:N={body:JSON.stringify(_)});const Z=(0,k.xO)(Object.assign({key:v.config.apiKey},B)).slice(1),ke=yield v._getAdditionalHeaders();return ke["Content-Type"]="application/json",v.languageCode&&(ke["X-Firebase-Locale"]=v.languageCode),de.fetch()(ut(v,v.config.apiHost,g,Z),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Ge(v,h,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(v,h,g){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},he),h);try{const T=new dn(v),N=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield N.json();if("needConfirmation"in B)throw mn(v,"account-exists-with-different-credential",B);if(N.ok&&!("errorMessage"in B))return B;{const Z=N.ok?B.errorMessage:B.error.message,[ke,Ue]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw mn(v,"credential-already-in-use",B);if("EMAIL_EXISTS"===ke)throw mn(v,"email-already-in-use",B);if("USER_DISABLED"===ke)throw mn(v,"user-disabled",B);const it=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw Ee(v,it,Ue);_e(v,it)}}catch(T){if(T instanceof k.ZR)throw T;_e(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function yt(v,h,g,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,f.Z)(function*(v,h,g,_,T={}){const N=yield Se(v,h,g,_,T);return"mfaPendingCredential"in N&&_e(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ut(v,h,g,_){const T=`${h}${g}?${_}`;return v.config.emulator?ie(v.config,T):`${v.config.apiScheme}://${T}`}class dn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ee(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(v,h,g){const _={appName:v.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const T=ee(v,h,_);return T.customData._tokenResponse=g,T}function sn(){return(sn=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Yr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function _t(){return(_t=(0,f.Z)(function*(v,h=!1){const g=(0,k.m9)(v),_=yield g.getIdToken(h),T=Nt(_);q(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,B=N?.sign_in_provider;return{claims:T,token:_,authTime:Yr(bt(T.auth_time)),issuedAtTime:Yr(bt(T.iat)),expirationTime:Yr(bt(T.exp)),signInProvider:B||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function bt(v){return 1e3*Number(v)}function Nt(v){const[h,g,_]=v.split(".");if(void 0===h||void 0===g||void 0===_)return re("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,k.tV)(g);return T?JSON.parse(T):(re("Failed to decode base64 JWT payload"),null)}catch(T){return re("Caught error parsing JWT payload as JSON",T?.toString()),null}}function _n(v,h){return zn.apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof k.ZR&&function tn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}class Nn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class fs{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wt(v){return Mr.apply(this,arguments)}function Mr(){return Mr=(0,f.Z)(function*(v){var h;const g=v.auth,_=yield v.getIdToken(),T=yield _n(v,function di(v,h){return Vn.apply(this,arguments)}(g,{idToken:_}));q(T?.users.length,g,"internal-error");const N=T.users[0];v._notifyReloadListener(N);const B=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function Vs(v){return v.map(h=>{var{providerId:g}=h,_=(0,ne._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(N.providerUserInfo):[],Z=function ps(v,h){return[...v.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(v.providerData,B),it=!!v.isAnonymous&&!(v.email&&N.passwordHash||Z?.length),st={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Z,metadata:new fs(N.createdAt,N.lastLoginAt),isAnonymous:it};Object.assign(v,st)}),Mr.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(v){const h=(0,k.m9)(v);yield Wt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(v,h){const g=yield Ge(v,{},(0,f.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=v.config,B=ut(v,T,"/v1/token",`key=${N}`),Z=yield v._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(B,{method:"POST",headers:Z,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){q(h.idToken,"internal-error"),q(typeof h.idToken<"u","internal-error"),q(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function un(v){const h=Nt(v);return q(h,"internal-error"),q(typeof h.exp<"u","internal-error"),q(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,f.Z)(function*(){return q(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:B}=yield function xr(v,h){return Ji.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(T,N,Number(B))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:T,expirationTime:N}=g,B=new ye;return _&&(q("string"==typeof _,"internal-error",{appName:h}),B.refreshToken=_),T&&(q("string"==typeof T,"internal-error",{appName:h}),B.accessToken=T),N&&(q("number"==typeof N,"internal-error",{appName:h}),B.expirationTime=N),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ye,this.toJSON())}_performRefresh(){return je("not implemented")}}function H(v,h){q("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class ge{constructor(h){var{uid:g,auth:_,stsTokenManager:T}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new fs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const _=yield _n(g,g.stsTokenManager.getToken(g.auth,h));return q(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function to(v){return _t.apply(this,arguments)}(this,h)}reload(){return function Zt(v){return hi.apply(this,arguments)}(this)}_assign(h){this!==h&&(q(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new ge(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield Wt(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield _n(h,function Gn(v,h){return sn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,T,N,B,Z,ke,Ue,it;const st=null!==(_=g.displayName)&&void 0!==_?_:void 0,kn=null!==(T=g.email)&&void 0!==T?T:void 0,zi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Ta=null!==(B=g.photoURL)&&void 0!==B?B:void 0,Tu=null!==(Z=g.tenantId)&&void 0!==Z?Z:void 0,bc=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Sa=null!==(Ue=g.createdAt)&&void 0!==Ue?Ue:void 0,Aa=null!==(it=g.lastLoginAt)&&void 0!==it?it:void 0,{uid:Tc,emailVerified:Tm,isAnonymous:Sc,providerData:Su,stsTokenManager:Sm}=g;q(Tc&&Sm,h,"internal-error");const d_=ye.fromJSON(this.name,Sm);q("string"==typeof Tc,h,"internal-error"),H(st,h.name),H(kn,h.name),q("boolean"==typeof Tm,h,"internal-error"),q("boolean"==typeof Sc,h,"internal-error"),H(zi,h.name),H(Ta,h.name),H(Tu,h.name),H(bc,h.name),H(Sa,h.name),H(Aa,h.name);const bp=new ge({uid:Tc,auth:h,email:kn,emailVerified:Tm,displayName:st,isAnonymous:Sc,photoURL:Ta,phoneNumber:zi,tenantId:Tu,stsTokenManager:d_,createdAt:Sa,lastLoginAt:Aa});return Su&&Array.isArray(Su)&&(bp.providerData=Su.map(Am=>Object.assign({},Am))),bc&&(bp._redirectEventId=bc),bp}static _fromIdTokenResponse(h,g,_=!1){return(0,f.Z)(function*(){const T=new ye;T.updateFromServerResponse(g);const N=new ge({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield Wt(N),N})()}}const $e=new Map;function Ye(v){dt(v instanceof Function,"Expected a class definition");let h=$e.get(v);return h?(dt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,$e.set(v,h),h)}const Qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,_){var T=this;return(0,f.Z)(function*(){T.storage[g]=_})()}_get(g){var _=this;return(0,f.Z)(function*(){const T=_.storage[g];return void 0===T?null:T})()}_remove(g){var _=this;return(0,f.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return v.type="NONE",v})();function U(v,h,g){return`firebase:${v}:${h}:${g}`}class V{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:T,name:N}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,N),this.fullPersistenceKey=U("persistence",T.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?ge._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,f.Z)(function*(){if(!g.length)return new V(Ye(Qt),h,_);const T=(yield Promise.all(g.map(function(){var Ue=(0,f.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let N=T[0]||Ye(Qt);const B=U(_,h.config.apiKey,h.name);let Z=null;for(const Ue of g)try{const it=yield Ue._get(B);if(it){const st=ge._fromJSON(h,it);Ue!==N&&(Z=st),N=Ue;break}}catch{}const ke=T.filter(Ue=>Ue._shouldAllowMigration);return N._shouldAllowMigration&&ke.length?(N=ke[0],Z&&(yield N._set(B,Z.toJSON())),yield Promise.all(g.map(function(){var Ue=(0,f.Z)(function*(it){if(it!==N)try{yield it._remove(B)}catch{}});return function(it){return Ue.apply(this,arguments)}}())),new V(N,h,_)):new V(N,h,_)})()}}function W(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Rt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(De(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Nr(h))return"Blackberry";if(Pt(h))return"Webos";if(ae(h))return"Safari";if((h.includes("chrome/")||nt(h))&&!h.includes("edge/"))return"Chrome";if(St(h))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function De(v=(0,k.z$)()){return/firefox\//i.test(v)}function ae(v=(0,k.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function nt(v=(0,k.z$)()){return/crios\//i.test(v)}function Rt(v=(0,k.z$)()){return/iemobile/i.test(v)}function St(v=(0,k.z$)()){return/android/i.test(v)}function Nr(v=(0,k.z$)()){return/blackberry/i.test(v)}function Pt(v=(0,k.z$)()){return/webos/i.test(v)}function qn(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ko(v=(0,k.z$)()){return qn(v)||St(v)||Pt(v)||Nr(v)||/windows phone/i.test(v)||Rt(v)}function Xi(v,h=[]){let g;switch(v){case"Browser":g=W((0,k.z$)());break;case"Worker":g=`${W((0,k.z$)())}-${v}`;break;default:g=v}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${Q.SDK_VERSION}/${_}`}function ki(){return(ki=(0,f.Z)(function*(v){return(yield Se(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fi(v,h){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,f.Z)(function*(v,h){return Se(v,"GET","/v2/recaptchaConfig",Ie(v,h))})).apply(this,arguments)}function js(v){return void 0!==v&&void 0!==v.getResponse}function Yo(v){return void 0!==v&&void 0!==v.enterprise}class Ka{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function es(v){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=h,_.onerror=T=>{const N=ee("internal-error");N.customData=T,g(N)},_.type="text/javascript",_.charset="UTF-8",function Ud(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(_)})}function Qo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class dl{constructor(h){this.type="recaptcha-enterprise",this.auth=Wn(h)}verify(h="verify",g=!1){var _=this;return(0,f.Z)(function*(){function N(){return N=(0,f.Z)(function*(Z){if(!g){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var ke=(0,f.Z)(function*(Ue,it){Fi(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const kn=new Ka(st);return null==Z.tenantId?Z._agentRecaptchaConfig=kn:Z._tenantRecaptchaConfigs[Z.tenantId]=kn,Ue(kn.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{it(st)})});return function(Ue,it){return ke.apply(this,arguments)}}())}),N.apply(this,arguments)}function B(Z,ke,Ue){const it=window.grecaptcha;Yo(it)?it.enterprise.ready(()=>{it.enterprise.execute(Z,{action:h}).then(st=>{ke(st)}).catch(()=>{ke("NO_RECAPTCHA")})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,ke)=>{(function T(Z){return N.apply(this,arguments)})(_.auth).then(Ue=>{if(!g&&Yo(window.grecaptcha))B(Ue,Z,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));es("https://www.google.com/recaptcha/enterprise.js?render="+Ue).then(()=>{B(Ue,Z,ke)}).catch(it=>{ke(it)})}}).catch(Ue=>{ke(Ue)})})})()}}function bi(v,h,g){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(v,h,g,_=!1){const T=new dl(v);let N;try{N=yield T.verify(g)}catch{N=yield T.verify(g,!0)}const B=Object.assign({},h);return Object.assign(B,_?{captchaResp:N}:{captchaResponse:N}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class Qa{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=N=>new Promise((B,Z)=>{try{B(h(N))}catch(ke){Z(ke)}});_.onAbort=g,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const _=[];try{for(const T of g.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const N of _)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class hl{constructor(h,g,_,T){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xo(this),this.idTokenSubscription=new Xo(this),this.beforeStateQueue=new Qa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=Ye(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,N;if(!_._deleted&&(_.persistenceManager=yield V.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var _;const T=yield g.assertedPersistence.getCurrentUser();let N=T,B=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Z=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=N?._redirectEventId,Ue=yield g.tryRedirectSignIn(h);(!Z||Z===ke)&&Ue?.user&&(N=Ue.user,B=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(N)}catch(Z){N=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Z))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return q(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield Wt(h)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Cn(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const _=h?(0,k.m9)(h):null;return _&&q(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&q(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(Ye(h))}))}initializeRecaptchaConfig(){var h=this;return(0,f.Z)(function*(){const g=yield Fi(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Ka(g);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new dl(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,f.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&Ye(h)||g._popupRedirectResolver;q(_,g,"argument-error"),g.redirectPersistenceManager=yield V.create(g,[Ye(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var _,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,T){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return q(B,this,"internal-error"),B.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,_,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const N=yield h._getAppCheckToken();return N&&(_["X-Firebase-AppCheck"]=N),_})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var g;const _=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return _?.error&&function lt(v,...h){ct.logLevel<=fe.in.WARN&&ct.warn(`Auth (${Q.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Wn(v){return(0,k.m9)(v)}class Xo{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ea(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Bd(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class ro{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return je("not implemented")}_getIdTokenResponse(h){return je("not implemented")}_linkToIdToken(h,g){return je("not implemented")}_getReauthenticationResolver(h){return je("not implemented")}}function Kf(v,h){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:resetPassword",Ie(v,h))})).apply(this,arguments)}function jd(v,h){return $d.apply(this,arguments)}function $d(){return($d=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",Ie(v,h))})).apply(this,arguments)}function Rr(v,h){return pl.apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,h))})).apply(this,arguments)}function Gu(v,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:sendOobCode",Ie(v,h))})).apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(v,h){return Gu(v,h)})).apply(this,arguments)}function na(v,h){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(v,h){return Gu(v,h)})).apply(this,arguments)}function zt(v,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(v,h){return Gu(v,h)})).apply(this,arguments)}function $s(){return($s=(0,f.Z)(function*(v,h){return Gu(v,h)})).apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}class qu extends ro{constructor(h,g,_,T=null){super("password",_),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new qu(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new qu(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){var _;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const N=yield bi(h,T,"signInWithPassword");return Rr(h,N)}return Rr(h,T).catch(function(){var N=(0,f.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield bi(h,T,"signInWithPassword");return Rr(h,Z)}return Promise.reject(B)});return function(B){return N.apply(this,arguments)}}());case"emailLink":return function $r(v,h){return ml.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return jd(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Yf(v,h){return Xa.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Si(v,h){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,h))})).apply(this,arguments)}class wt extends ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new wt(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):_e("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=g,N=(0,ne._T)(g,["providerId","signInMethod"]);if(!_||!T)return null;const B=new wt(_,T);return B.idToken=N.idToken||void 0,B.accessToken=N.accessToken||void 0,B.secret=N.secret,B.nonce=N.nonce,B.pendingToken=N.pendingToken||null,B}_getIdTokenResponse(h){return Si(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Si(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Si(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function Hr(){return(Hr=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,h))})).apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h))})).apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(v,h){const g=yield yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h));if(g.temporaryProof)throw mn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const gs={USER_NOT_FOUND:"user-not-found"};function It(){return(It=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),gs)})).apply(this,arguments)}class vr extends ro{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new vr({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new vr({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function io(v,h){return yr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function eu(v,h){return bn.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ra(v,h){return It.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:N}=h;return _||g||T||N?new vr({verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:N}):null}}class In{constructor(h){var g,_,T,N,B,Z;const ke=(0,k.zd)((0,k.pd)(h)),Ue=null!==(g=ke.apiKey)&&void 0!==g?g:null,it=null!==(_=ke.oobCode)&&void 0!==_?_:null,st=function Qf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);q(Ue&&it&&st,"argument-error"),this.apiKey=Ue,this.operation=st,this.code=it,this.continueUrl=null!==(N=ke.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(B=ke.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Z=ke.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const g=function ms(v){const h=(0,k.zd)((0,k.pd)(v)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||g||h||v}(h);try{return new In(g)}catch{return null}}}let so=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,_){return qu._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const T=In.parseLink(_);return q(T,"argument-error"),qu._fromEmailAndCode(g,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class or{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ys extends or{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class vs extends ys{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return q("providerId"in g&&"signInMethod"in g,"argument-error"),wt._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return q(h.idToken||h.accessToken,"argument-error"),wt._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return vs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return vs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:N,nonce:B,providerId:Z}=h;if(!_&&!T&&!g&&!N||!Z)return null;try{return new vs(Z)._credential({idToken:g,accessToken:_,nonce:B,pendingToken:N})}catch{return null}}}let Hs=(()=>{class v extends ys{constructor(){super("facebook.com")}static credential(g){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ai=(()=>{class v extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T}=g;if(!_&&!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),tu=(()=>{class v extends ys{constructor(){super("github.com")}static credential(g){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ft extends ro{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Si(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Si(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Si(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:N}=g;return _&&T&&N&&_===T?new Ft(_,N):null}static _create(h,g){return new Ft(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ia extends or{constructor(h){q(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ia.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ia.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Ft.fromJSON(h);return q(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return Ft._create(_,g)}catch{return null}}}let Wu=(()=>{class v extends ys{constructor(){super("twitter.com")}static credential(g,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=g;if(!_||!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ar(v,h){return oo.apply(this,arguments)}function oo(){return(oo=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signUp",Ie(v,h))})).apply(this,arguments)}class ur{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,T=!1){return(0,f.Z)(function*(){const N=yield ge._fromIdTokenResponse(h,_,T),B=zs(_);return new ur({user:N,providerId:B,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=zs(_);return new ur({user:h,providerId:T,_tokenResponse:_,operationType:g})})()}}function zs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Jf(){return(Jf=(0,f.Z)(function*(v){var h;const g=Wn(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ur({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield ar(g,{returnSecureToken:!0}),T=yield ur._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class cr extends k.ZR{constructor(h,g,_,T){var N;super(g.code,g.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,cr.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,T){return new cr(h,g,_,T)}}function Or(v,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?cr._fromErrorAndOperation(v,N,h,_):N})}function Zu(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function fi(){return fi=(0,f.Z)(function*(v,h){const g=(0,k.m9)(v);yield oa(!0,g,h);const{providerUserInfo:_}=yield function Ar(v,h){return Kr.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=Zu(_||[]);return g.providerData=g.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),fi.apply(this,arguments)}function Jr(v,h){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(v,h,g=!1){const _=yield _n(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return ur._forOperation(v,"link",_)})).apply(this,arguments)}function oa(v,h,g){return vl.apply(this,arguments)}function vl(){return(vl=(0,f.Z)(function*(v,h,g){yield Wt(h);const T=!1===v?"provider-already-linked":"no-such-provider";q(Zu(h.providerData).has(g)===v,h.auth,T)})).apply(this,arguments)}function sm(v,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,f.Z)(function*(v,h,g=!1){const{auth:_}=v,T="reauthenticate";try{const N=yield _n(v,Or(_,T,h,v),g);q(N.idToken,_,"internal-error");const B=Nt(N.idToken);q(B,_,"internal-error");const{sub:Z}=B;return q(v.uid===Z,_,"user-mismatch"),ur._forOperation(v,T,N)}catch(N){throw"auth/user-not-found"===N?.code&&_e(_,"user-mismatch"),N}})).apply(this,arguments)}function _l(v,h){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,f.Z)(function*(v,h,g=!1){const _="signIn",T=yield Or(v,_,h),N=yield ur._fromIdTokenResponse(v,_,T);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function wl(v,h){return zd.apply(this,arguments)}function zd(){return(zd=(0,f.Z)(function*(v,h){return _l(Wn(v),h)})).apply(this,arguments)}function om(v,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(v,h){const g=(0,k.m9)(v);return yield oa(!1,g,h.providerId),Jr(g,h)})).apply(this,arguments)}function am(v,h){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,f.Z)(function*(v,h){return sm((0,k.m9)(v),h)})).apply(this,arguments)}function ep(){return(ep=(0,f.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,h))})).apply(this,arguments)}function _s(){return _s=(0,f.Z)(function*(v,h){const g=Wn(v),_=yield function Kv(v,h){return ep.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),T=yield ur._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(T.user),T}),_s.apply(this,arguments)}class El{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?aa._fromServerResponse(h,g):"totpInfo"in g?Il._fromServerResponse(h,g):_e(h,"internal-error")}}class aa extends El{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new aa(g)}}class Il extends El{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new Il(g)}}function nu(v,h,g){var _;q((null===(_=g.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),q(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(q(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(q(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ru(){return ru=(0,f.Z)(function*(v,h,g){var _;const T=Wn(v),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield bi(T,N,"getOobCode",!0);g&&nu(T,B,g),yield na(T,B)}else g&&nu(T,N,g),yield na(T,N).catch(function(){var B=(0,f.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield bi(T,N,"getOobCode",!0);g&&nu(T,ke,g),yield na(T,ke)}});return function(Z){return B.apply(this,arguments)}}())}),ru.apply(this,arguments)}function ts(){return(ts=(0,f.Z)(function*(v,h,g){yield Kf((0,k.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Mi(){return Mi=(0,f.Z)(function*(v,h){yield function Ti(v,h){return Hu.apply(this,arguments)}((0,k.m9)(v),{oobCode:h})}),Mi.apply(this,arguments)}function er(v,h){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(v,h){const g=(0,k.m9)(v),_=yield Kf(g,{oobCode:h}),T=_.requestType;switch(q(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(_.mfaInfo,g,"internal-error");default:q(_.email,g,"internal-error")}let N=null;return _.mfaInfo&&(N=El._fromServerResponse(Wn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(v,h){const{data:g}=yield er((0,k.m9)(v),h);return g.email})).apply(this,arguments)}function iu(){return iu=(0,f.Z)(function*(v,h,g){var _;const T=Wn(v),N={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ue=yield bi(T,N,"signUpPassword");B=ar(T,Ue)}else B=ar(T,N).catch(function(){var Ue=(0,f.Z)(function*(it){if("auth/missing-recaptcha-token"===it.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield bi(T,N,"signUpPassword");return ar(T,st)}return Promise.reject(it)});return function(it){return Ue.apply(this,arguments)}}());const Z=yield B.catch(Ue=>Promise.reject(Ue)),ke=yield ur._fromIdTokenResponse(T,"signIn",Z);return yield T._updateCurrentUser(ke.user),ke}),iu.apply(this,arguments)}function su(){return su=(0,f.Z)(function*(v,h,g){var _;const T=Wn(v),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function B(Z,ke){q(ke.handleCodeInApp,T,"argument-error"),ke&&nu(T,Z,ke)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Z=yield bi(T,N,"getOobCode",!0);B(Z,g),yield zt(T,Z)}else B(N,g),yield zt(T,N).catch(function(){var Z=(0,f.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield bi(T,N,"getOobCode",!0);B(Ue,g),yield zt(T,Ue)}});return function(ke){return Z.apply(this,arguments)}}())}),su.apply(this,arguments)}function Cl(){return(Cl=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v),T=so.credentialWithLink(h,g||Yt());return q(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),wl(_,T)})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:createAuthUri",Ie(v,h))})).apply(this,arguments)}function ho(){return ho=(0,f.Z)(function*(v,h){const _={identifier:h,continueUri:cn()?Yt():"http://localhost"},{signinMethods:T}=yield function bl(v,h){return Tl.apply(this,arguments)}((0,k.m9)(v),_);return T||[]}),ho.apply(this,arguments)}function au(){return au=(0,f.Z)(function*(v,h){const g=(0,k.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&nu(g.auth,T,h);const{email:N}=yield function Hd(v,h){return zu.apply(this,arguments)}(g.auth,T);N!==v.email&&(yield v.reload())}),au.apply(this,arguments)}function Yu(){return Yu=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&nu(_.auth,N,g);const{email:B}=yield function jr(v,h){return $s.apply(this,arguments)}(_.auth,N);B!==v.email&&(yield v.reload())}),Yu.apply(this,arguments)}function Qd(){return(Qd=(0,f.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sl(){return Sl=(0,f.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,k.m9)(v),N={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},B=yield _n(_,function um(v,h){return Qd.apply(this,arguments)}(_.auth,N));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const Z=_.providerData.find(({providerId:ke})=>"password"===ke);Z&&(Z.displayName=_.displayName,Z.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)}),Sl.apply(this,arguments)}function tp(v,h,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(v,h,g){const{auth:_}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const B=yield _n(v,jd(_,N));yield v._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class la{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class uu extends la{constructor(h,g,_,T){super(h,g,_),this.username=T}}class Al extends la{constructor(h,g){super(h,"facebook.com",g)}}class Xd extends uu{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Ju extends la{constructor(h,g){super(h,"google.com",g)}}class cu extends uu{constructor(h,g,_){super(h,"twitter.com",g,_)}}function np(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function lm(v){var h,g;if(!v)return null;const{providerId:_}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const B=null===(g=null===(h=Nt(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new la(N,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new Al(N,T);case"github.com":return new Xd(N,T);case"google.com":return new Ju(N,T);case"twitter.com":return new cu(N,T,v.screenName||null);case"custom":case"anonymous":return new la(N,null);default:return new la(N,_,T)}}(g)}class ns{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new ns("enroll",h,g)}static _fromMfaPendingCredential(h){return new ns("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ns._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return ns._fromIdtoken(h.multiFactorSession.idToken)}return null}}class po{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=Wn(h),T=g.customData._serverResponse,N=(T.mfaInfo||[]).map(Z=>El._fromServerResponse(_,Z));q(T.mfaPendingCredential,_,"internal-error");const B=ns._fromMfaPendingCredential(T.mfaPendingCredential);return new po(B,N,function(){var Z=(0,f.Z)(function*(ke){const Ue=yield ke._process(_,B);delete T.mfaInfo,delete T.mfaPendingCredential;const it=Object.assign(Object.assign({},T),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(g.operationType){case"signIn":const st=yield ur._fromIdTokenResponse(_,g.operationType,it);return yield _._updateCurrentUser(st.user),st;case"reauthenticate":return q(g.user,_,"internal-error"),ur._forOperation(g.user,g.operationType,it);default:_e(_,"internal-error")}});return function(ke){return Z.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}class nn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>El._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new nn(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ns._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,f.Z)(function*(){const T=h,N=yield _.getSession(),B=yield _n(_.user,T._process(_.user.auth,N,g));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield g.user.getIdToken();try{const N=yield _n(g.user,function nh(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:B})=>B!==_),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const go=new WeakMap,wr="__sak";class ap{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(wr,"1"),this.storage.removeItem(wr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const da=(()=>{class v extends ap{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rl(){const v=(0,k.z$)();return ae(v)||qn(v)}()&&function cl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ko(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),N=this.localCache[_];T!==N&&g(_,N,T)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((Z,ke,Ue)=>{this.notifyListeners(Z,Ue)});const T=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(g.newValue!==Z)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!_)return}const N=()=>{const Z=this.storage.getItem(T);!_&&this.localCache[T]===Z||this.notifyListeners(T,Z)},B=this.storage.getItem(T);!function Us(){return(0,k.w1)()&&10===document.documentMode}()||B===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const N of Array.from(T))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var T=()=>super._set,N=this;return(0,f.Z)(function*(){yield T().call(N,g,_),N.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,T=this;return(0,f.Z)(function*(){const N=yield _().call(T,g);return T.localCache[g]=JSON.stringify(N),N})()}_remove(g){var _=()=>super._remove,T=this;return(0,f.Z)(function*(){yield _().call(T,g),delete T.localCache[g]})()}}return v.type="LOCAL",v})(),ei=(()=>{class v extends ap{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return v.type="SESSION",v})();let Ol=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(N=>N.isListeningto(g));if(_)return _;const T=new v(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,f.Z)(function*(){const T=g,{eventId:N,eventType:B,data:Z}=T.data,ke=_.handlersMap[B];if(!ke?.size)return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:B});const Ue=Array.from(ke).map(function(){var st=(0,f.Z)(function*(kn){return kn(T.origin,Z)});return function(kn){return st.apply(this,arguments)}}()),it=yield function lp(v){return Promise.all(v.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Ue);T.ports[0].postMessage({status:"done",eventId:N,eventType:B,response:it})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ec(v="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return v+g}class hm{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var T=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let B,Z;return new Promise((ke,Ue)=>{const it=ec("",20);N.port1.start();const st=setTimeout(()=>{Ue(new Error("unsupported_event"))},_);Z={messageChannel:N,onMessage(kn){const zi=kn;if(zi.data.eventId===it)switch(zi.data.status){case"ack":clearTimeout(st),B=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),ke(zi.data.response);break;default:clearTimeout(st),clearTimeout(B),Ue(new Error("invalid_response"))}}},T.handlers.add(Z),N.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:h,eventId:it,data:g},[N.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function yn(){return window}function Dt(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function ih(){return(ih=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sh="firebaseLocalStorageDb",rs="firebaseLocalStorage",Pl="fbase_key";class nc{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function rc(v,h){return v.transaction([rs],h?"readwrite":"readonly").objectStore(rs)}function kl(){const v=indexedDB.open(sh,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(rs,{keyPath:Pl})}catch(T){g(T)}}),v.addEventListener("success",(0,f.Z)(function*(){const _=v.result;_.objectStoreNames.contains(rs)?h(_):(_.close(),yield function pm(){const v=indexedDB.deleteDatabase(sh);return new nc(v).toPromise()}(),h(yield kl()))}))})}function Ae(v,h,g){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(v,h,g){const _=rc(v,!0).put({[Pl]:h,value:g});return new nc(_).toPromise()})).apply(this,arguments)}function ic(){return(ic=(0,f.Z)(function*(v,h){const g=rc(v,!1).get(h),_=yield new nc(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function hr(v,h){const g=rc(v,!0).delete(h);return new nc(g).toPromise()}const vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield kl()),g.db})()}_withRetries(g){var _=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const N=yield _._openDb();return yield g(N)}catch(N){if(T++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Dt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Ol._getInstance(function dr(){return Dt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(T,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(T,N){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var _,T;if(g.activeServiceWorker=yield function rh(){return ih.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new hm(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);N&&null!==(_=N[0])&&void 0!==_&&_.fulfilled&&null!==(T=N[0])&&void 0!==T&&T.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function tc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield kl();return yield Ae(g,wr,"1"),yield hr(g,wr),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(N=>Ae(N,g,_)),T.localCache[g]=_,T.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,f.Z)(function*(){const T=yield _._withRetries(N=>function Vi(v,h){return ic.apply(this,arguments)}(N,g));return _.localCache[g]=T,T})()}_remove(g){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(T=>hr(T,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const _=yield g._withRetries(B=>{const Z=rc(B,!1).getAll();return new nc(Z).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:B,value:Z}of _)N.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(Z)&&(g.notifyListeners(B,Z),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!N.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const N of Array.from(T))N(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),pi=1e12;class oh{constructor(h){this.auth=h,this.counter=pi,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new _o(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||pi;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||pi))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var _;return null===(_=g._widgets.get(h||pi))||void 0===_||_.execute(),""})()}}class _o{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;q(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zs(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ah=Qo("rcb"),uh=new sr(3e4,6e4);class gm{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=yn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return q(function ac(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&js(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((_,T)=>{const N=yn().setTimeout(()=>{T(ee(h,"network-request-failed"))},uh.get());yn()[ah]=()=>{yn().clearTimeout(N),delete yn()[ah];const Z=yn().grecaptcha;if(!Z||!js(Z))return void T(ee(h,"internal-error"));const ke=Z.render;Z.render=(Ue,it)=>{const st=ke(Ue,it);return this.counter++,st},this.hostLanguage=g,_(Z)},es(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:ah,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),T(ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=yn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ch{load(h){return(0,f.Z)(function*(){return new oh(h)})()}clearedOneInstance(){}}const uc="recaptcha",lh={theme:"light",type:"image"};class dh{constructor(h,g=Object.assign({},lh),_){this.parameters=g,this.type=uc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(_),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;q(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ch:new gm,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(N=>{const B=Z=>{Z&&(h.tokenChangeListeners.delete(B),N(Z))};h.tokenChangeListeners.add(B),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=yn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){q(cn()&&!Dt(),h.auth,"internal-error"),yield function hp(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Bs(v){return ki.apply(this,arguments)}(h.auth);q(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=vr._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function pa(){return(pa=(0,f.Z)(function*(v,h,g){const _=Wn(v),T=yield hu(_,h,(0,k.m9)(g));return new Gr(T,N=>wl(_,N))})).apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v);yield oa(!1,_,"phone");const T=yield hu(_.auth,h,(0,k.m9)(g));return new Gr(T,N=>om(_,N))})).apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v),T=yield hu(_.auth,h,(0,k.m9)(g));return new Gr(T,N=>am(_,N))})).apply(this,arguments)}function hu(v,h,g){return Dr.apply(this,arguments)}function Dr(){return Dr=(0,f.Z)(function*(v,h,g){var _;const T=yield g.verify();try{let N;if(q("string"==typeof T,v,"argument-error"),q(g.type===uc,v,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const B=N.session;if("phoneNumber"in N)return q("enroll"===B.type,v,"internal-error"),(yield function du(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,h))}(v,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{q("signin"===B.type,v,"internal-error");const Z=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return q(Z,v,"missing-multi-factor-info"),(yield function Fl(v,h){return Se(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,h))}(v,{mfaPendingCredential:B.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function En(v,h){return Hr.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}}),Dr.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(v,h){yield Jr((0,k.m9)(v),h)})).apply(this,arguments)}let wo=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Wn(g)}verifyPhoneNumber(g,_){return hu(this.auth,g,(0,k.m9)(_))}static credential(g,_){return vr._fromVerification(g,_)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:T}=g;return _&&T?vr._fromTokenResponse(_,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function is(v,h){return h?Ye(h):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Et extends ro{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Si(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Si(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Si(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function hh(v){return _l(v.auth,new Et(v),v.bypassAuthState)}function Vl(v){const{auth:h,user:g}=v;return q(g,h,"internal-error"),sm(g,new Et(v),v.bypassAuthState)}function ga(v){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(v){const{auth:h,user:g}=v;return q(g,h,"internal-error"),Jr(g,new Et(v),v.bypassAuthState)})).apply(this,arguments)}class Bi{constructor(h,g,_,T,N=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(_,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:N,tenantId:B,error:Z,type:ke}=h;if(Z)return void g.reject(Z);const Ue={auth:g.auth,requestUri:_,sessionId:T,tenantId:B||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ue))}catch(it){g.reject(it)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return hh;case"linkViaPopup":case"linkViaRedirect":return ga;case"reauthViaPopup":case"reauthViaRedirect":return Vl;default:_e(this.auth,"internal-error")}}resolve(h){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rn=new sr(2e3,1e4);function Eo(){return(Eo=(0,f.Z)(function*(v,h,g){const _=Wn(v);Pe(v,h,or);const T=is(_,g);return new Io(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,or);const T=is(_.auth,g);return new Io(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,or);const T=is(_.auth,g);return new Io(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Io=(()=>{class v extends Bi{constructor(g,_,T,N,B){super(g,_,N,B),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const _=yield g.execute();return q(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,f.Z)(function*(){dt(1===g.filter.length,"Popup operations only handle one event");const _=ec();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Rn.get())};g()}}return v.currentPopupAction=null,v})();const Ys="pendingRedirect",ss=new Map;class Ul extends Bi{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let _=ss.get(g.auth._key());if(!_){try{const N=(yield function Bl(v,h){return dc.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(N)}catch(T){_=()=>Promise.reject(T)}ss.set(g.auth._key(),_)}return g.bypassAuthState||ss.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function dc(){return(dc=(0,f.Z)(function*(v,h){const g=va(h),_=ph(v);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(g));return yield _._remove(g),T})).apply(this,arguments)}function fu(v,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(v,h){return ph(v)._set(va(h),"true")})).apply(this,arguments)}function ni(v,h){ss.set(v._key(),h)}function ph(v){return Ye(v._redirectPersistence)}function va(v){return U(Ys,v.config.apiKey,v.name)}function ri(v,h,g){return function Cr(v,h,g){return gi.apply(this,arguments)}(v,h,g)}function gi(){return(gi=(0,f.Z)(function*(v,h,g){const _=Wn(v);Pe(v,h,or),yield _._initializationPromise;const T=is(_,g);return yield fu(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function _a(v,h,g){return function ii(v,h,g){return Pr.apply(this,arguments)}(v,h,g)}function Pr(){return(Pr=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,or),yield _.auth._initializationPromise;const T=is(_.auth,g);yield fu(T,_.auth);const N=yield gu(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function pu(v,h,g){return function gh(v,h,g){return jl.apply(this,arguments)}(v,h,g)}function jl(){return(jl=(0,f.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,or),yield _.auth._initializationPromise;const T=is(_.auth,g);yield oa(!1,_,h.providerId),yield fu(T,_.auth);const N=yield gu(_);return T._openRedirect(_.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(v,h){return yield Wn(v)._initializationPromise,On(v,h,!1)})).apply(this,arguments)}function On(v,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(v,h,g=!1){const _=Wn(v),T=is(_,h),B=yield new Ul(_,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,h)),B})).apply(this,arguments)}function gu(v){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(v){const h=ec(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class hc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function fc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bo(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!bo(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ee(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mu(h))}saveEventToCache(h){this.cachedEventUids.add(mu(h)),this.lastProcessedEventTime=Date.now()}}function mu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function bo({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function mh(v){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(v,h={}){return Se(v,"GET","/v1/projects",h)})).apply(this,arguments)}const To=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,So=/^https?/;function Is(){return(Is=(0,f.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield mh(v);for(const g of h)try{if($l(g))return}catch{}_e(v,"unauthorized-domain")})).apply(this,arguments)}function $l(v){const h=Yt(),{protocol:g,hostname:_}=new URL(h);if(v.startsWith("chrome-extension://")){const B=new URL(v);return""===B.hostname&&""===_?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===_}if(!So.test(g))return!1;if(To.test(v))return _===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const si=new sr(3e4,6e4);function Hl(){const v=yn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Hi=null;const Gl=new sr(5e3,15e3),pp="__/auth/iframe",zl="emulator/auth/iframe",pc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ia(v){const h=v.config;q(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?ie(h,zl):`https://${v.config.authDomain}/${pp}`,_={apiKey:h.apiKey,appName:v.name,v:Q.SDK_VERSION},T=Ea.get(v.config.apiHost);T&&(_.eid=T);const N=v._getFrameworks();return N.length&&(_.fw=N.join(",")),`${g}?${(0,k.xO)(_).slice(1)}`}function C(){return C=(0,f.Z)(function*(v){const h=yield function Qs(v){return Hi=Hi||function Pn(v){return new Promise((h,g)=>{var _,T,N;function B(){Hl(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Hl(),g(ee(v,"network-request-failed"))},timeout:si.get()})}if(null!==(T=null===(_=yn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(N=yn().gapi)||void 0===N||!N.load){const Z=Qo("iframefcb");return yn()[Z]=()=>{gapi.load?B():g(ee(v,"network-request-failed"))},es(`https://apis.google.com/js/api.js?onload=${Z}`).catch(ke=>g(ke))}B()}}).catch(h=>{throw Hi=null,h})}(v),Hi}(v),g=yn().gapi;return q(g,v,"internal-error"),h.open({where:document.body,url:Ia(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pc,dontclear:!0},_=>new Promise(function(){var T=(0,f.Z)(function*(N,B){yield _.restyle({setHideOnLeave:!1});const Z=ee(v,"network-request-failed"),ke=yn().setTimeout(()=>{B(Z)},Gl.get());function Ue(){yn().clearTimeout(ke),N(_)}_.ping(Ue).then(Ue,()=>{B(Z)})});return function(N,B){return T.apply(this,arguments)}}()))}),C.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xt="__/auth/handler",At="emulator/auth/handler",Bn=encodeURIComponent("fac");function Zn(v,h,g,_,T,N){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(v,h,g,_,T,N){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const B={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:_,v:Q.SDK_VERSION,eventId:T};if(h instanceof or){h.setDefaultLanguage(v.languageCode),B.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[it,st]of Object.entries(N||{}))B[it]=st}if(h instanceof ys){const it=h.getScopes().filter(st=>""!==st);it.length>0&&(B.scopes=it.join(","))}v.tenantId&&(B.tid=v.tenantId);const Z=B;for(const it of Object.keys(Z))void 0===Z[it]&&delete Z[it];const ke=yield v._getAppCheckToken(),Ue=ke?`#${Bn}=${encodeURIComponent(ke)}`:"";return`${function jn({config:v}){return v.emulator?ie(v,At):`https://${v.authDomain}/${xt}`}(v)}?${(0,k.xO)(Z).slice(1)}${Ue}`})).apply(this,arguments)}const Cs="webStorageSupport",os=class fr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ei,this._completeRedirectFn=On,this._overrideRedirectResult=ni}_openPopup(h,g,_,T){var N=this;return(0,f.Z)(function*(){var B;dt(null===(B=N.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Z=yield Zn(h,g,_,Yt(),T);return function ze(v,h,g,_=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let Z="";const ke=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:N,left:B}),Ue=(0,k.z$)().toLowerCase();g&&(Z=nt(Ue)?"_blank":g),De(Ue)&&(h=h||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((kn,[zi,Ta])=>`${kn}${zi}=${Ta},`,"");if(function mr(v=(0,k.z$)()){var h;return qn(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ue)&&"_self"!==Z)return function ot(v,h){const g=document.createElement("a");g.href=v,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",Z),new Qe(null);const st=window.open(h||"",Z,it);q(st,v,"popup-blocked");try{st.focus()}catch{}return new Qe(st)}(h,Z,ec())})()}_openRedirect(h,g,_,T){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function fm(v){yn().location.href=v}(yield Zn(h,g,_,Yt(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:N}=this.eventManagers[g];return T?Promise.resolve(T):(dt(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const _=yield function I(v){return C.apply(this,arguments)}(h),T=new hc(h);return _.register("authEvent",N=>(q(N?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Cs,{type:Cs},T=>{var N;const B=null===(N=T?.[0])||void 0===N?void 0:N[Cs];void 0!==B&&g(!!B),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function wa(v){return Is.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ko()||ae()||qn()}};class oi{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return je("unexpected MultiFactorSessionType")}}}class Da extends oi{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Da(h)}_finalizeEnroll(h,g,_){return function op(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function dp(v,h){return Se(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mm=(()=>{class v{constructor(){}static assertion(g){return Da._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var vm="@firebase/auth";class Gi{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ca(){return window}(0,k.Pz)("authIdTokenMaxAge"),function gc(v){(0,Q._registerComponent)(new pe.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:B,authDomain:Z}=_.options;q(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const ke={apiKey:B,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xi(v)},Ue=new hl(_,T,N,ke);return function Zf(v,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(Ye);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(_,h?.popupRedirectResolver)}(Ue,g),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,Q._registerComponent)(new pe.wA("auth-internal",h=>{const g=Wn(h.getProvider("auth").getImmediate());return new Gi(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)(vm,"0.23.2",function yp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Q.registerVersion)(vm,"0.23.2","esm2017")}("Browser");function Mo(){return Mo=(0,f.Z)(function*(v,h,g){var _;const{BuildInfo:T}=Ca();dt(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function Em(v){return Wl.apply(this,arguments)}(h.sessionId),B={};return qn()?B.ibi=T.packageName:St()?B.apn=T.packageName:_e(v,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=N,Zn(v,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,B)}),Mo.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(v){const{BuildInfo:h}=Ca(),g={};qn()?g.iosBundleId=h.packageName:St()?g.androidPackageName=h.packageName:_e(v,"operation-not-supported-in-this-environment"),yield mh(v,g)})).apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(v,h,g){const{cordova:_}=Ca();let T=()=>{};try{yield new Promise((N,B)=>{let Z=null;function ke(){var st;N();const kn=null===(st=_.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof kn&&kn(),"function"==typeof g?.close&&g.close()}function Ue(){Z||(Z=window.setTimeout(()=>{B(ee(v,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Ue()}h.addPassiveListener(ke),document.addEventListener("resume",Ue,!1),St()&&document.addEventListener("visibilitychange",it,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ue,!1),document.removeEventListener("visibilitychange",it,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function Wl(){return(Wl=(0,f.Z)(function*(v){const h=function Zl(v){if(dt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let _=0;_<v.length;_++)g[_]=v.charCodeAt(_);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class n_ extends hc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function vu(v){return _h.apply(this,arguments)}function _h(){return(_h=(0,f.Z)(function*(v){const h=yield _c()._get(No(v));return h&&(yield _c()._remove(No(v))),h})).apply(this,arguments)}function bs(){const v=[];for(let g=0;g<20;g++){const _=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return v.join("")}function _c(){return Ye(da)}function No(v){return U("authEvent",v.config.apiKey,v.name)}function _u(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,k.zd)(g.join("?"))}const r_=class Im{constructor(){this._redirectPersistence=ei,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=On,this._overrideRedirectResult=ni}_initialize(h){var g=this;return(0,f.Z)(function*(){const _=h._key();let T=g.eventManagers.get(_);return T||(T=new n_(h),g.eventManagers.set(_,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,T){var N=this;return(0,f.Z)(function*(){!function t_(v){var h,g,_,T,N,B,Z,ke,Ue,it;const st=Ca();q("function"==typeof(null===(h=st?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(g=st?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(N=null===(T=null===(_=st?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(ke=null===(Z=null===(B=st?.cordova)||void 0===B?void 0:B.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===ke?void 0:ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(it=null===(Ue=st?.cordova)||void 0===Ue?void 0:Ue.InAppBrowser)||void 0===it?void 0:it.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield N._initialize(h);yield B.initialized(),B.resetRedirect(),function fh(){ss.clear()}(),yield N._originValidation(h);const Z=function _p(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:bs(),postBody:null,tenantId:v.tenantId,error:ee(v,"no-auth-event")}}(h,_,T);yield function vc(v,h){return _c()._set(No(v),h)}(h,Z);const ke=yield function yh(v,h,g){return Mo.apply(this,arguments)}(h,Z,g),Ue=yield function ql(v){const{cordova:h}=Ca();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(v):T=h.InAppBrowser.open(v,function Kt(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(T)})})}(ke);return function e_(v,h,g){return xo.apply(this,arguments)}(h,B,Ue)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function mc(v){return vh.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:T,BuildInfo:N}=Ca(),B=setTimeout((0,f.Z)(function*(){yield vu(h),g.onEvent(wp())}),500),Z=function(){var it=(0,f.Z)(function*(st){clearTimeout(B);const kn=yield vu(h);let zi=null;kn&&st?.url&&(zi=function wh(v,h){var g,_;const T=function wc(v){const h=_u(v),g=h.link?decodeURIComponent(h.link):void 0,_=_u(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return _u(T).link||T||_||g||v}(h);if(T.includes("/__/auth/callback")){const N=_u(T),B=N.firebaseError?function Kl(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,Z=null===(_=null===(g=B?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],ke=Z?ee(Z):null;return ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(kn,st.url)),g.onEvent(zi||wp())});return function(kn){return it.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Z);const ke=T,Ue=`${N.packageName.toLowerCase()}://`;Ca().handleOpenURL=function(){var it=(0,f.Z)(function*(st){if(st.toLowerCase().startsWith(Ue)&&Z({url:st}),"function"==typeof ke)try{ke(st)}catch(kn){console.error(kn)}});return function(st){return it.apply(this,arguments)}}()}};function wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function Ql(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function s_(v=(0,k.z$)()){return!("file:"!==Ql()&&"ionic:"!==Ql()&&"capacitor:"!==Ql()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function a_(){try{const v=self.localStorage,h=ec();if(v)return v.setItem(h,"1"),v.removeItem(h),!function OT(v=(0,k.z$)()){return function Jl(){return(0,k.w1)()&&11===document?.documentMode}()||function Cm(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Ec()&&(0,k.hl)()}return!1}function Ec(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ip(){return(function Ep(){return"http:"===Ql()||"https:"===Ql()}()||(0,k.ru)()||s_())&&!function o_(){return(0,k.b$)()||(0,k.UG)()}()&&a_()&&!Ec()}function Eh(){return s_()&&typeof document<"u"}function xi(){return(xi=(0,f.Z)(function*(){return!!Eh()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const mi={LOCAL:"local",NONE:"none",SESSION:"session"},Eu=q,Iu="persistence";function Xl(v){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(v){yield v._initializationPromise;const h=Cc(),g=U(Iu,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function Cc(){var v;try{return(null===(v=function wu(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Dp=q;class Ro{constructor(){this.browserResolver=Ye(os),this.cordovaResolver=Ye(r_),this.underlyingResolver=null,this._redirectPersistence=ei,this._completeRedirectFn=On,this._overrideRedirectResult=ni}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,_,T)})()}_openRedirect(h,g,_,T){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,_,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Eh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Dp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Ic(){return xi.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Ih(v){return v.unwrap()}function Ch(v){return ed(v)}function ed(v){const{_tokenResponse:h}=v instanceof k.ZR?v.customData:v;if(!h)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return wo.credentialFromResult(v);const g=h.providerId;if(!g||g===ue.PASSWORD)return null;let _;switch(g){case ue.GOOGLE:_=Ai;break;case ue.FACEBOOK:_=Hs;break;case ue.GITHUB:_=tu;break;case ue.TWITTER:_=Wu;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:B,pendingToken:Z,nonce:ke}=h;return N||B||T||Z?Z?g.startsWith("saml.")?Ft._create(g,Z):wt._fromParams({providerId:g,signInMethod:g,pendingToken:Z,idToken:T,accessToken:N}):new vs(g).credential({idToken:T,accessToken:N,rawNonce:ke}):null}return v instanceof k.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function yi(v,h){return h.catch(g=>{throw g instanceof k.ZR&&function u_(v,h){var g;const _=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new c_(v,function eh(v,h){var g;const _=(0,k.m9)(v),T=h;return q(h.customData.operationType,_,"argument-error"),q(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),po._fromError(_,T)}(v,h));else if(_){const T=ed(h),N=h;T&&(N.credential=T,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(v,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Ch(g),additionalUserInfo:np(g),user:Kn.getOrCreate(T)}})}function bh(v,h){return bu.apply(this,arguments)}function bu(){return(bu=(0,f.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>yi(v,g.confirm(_))}})).apply(this,arguments)}class c_{constructor(h,g){this.resolver=g,this.auth=function Dh(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return yi(Ih(this.auth),this.resolver.resolveSignIn(h))}}class Kn{constructor(h){this._delegate=h,this.multiFactor=function mo(v){const h=(0,k.m9)(v);return go.has(h)||go.set(h,nn._fromUser(h)),go.get(h)}(h)}static getOrCreate(h){return Kn.USER_MAP.has(h)||Kn.USER_MAP.set(h,new Kn(h)),Kn.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return yi(g.auth,om(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,f.Z)(function*(){return bh(_.auth,function Tn(v,h,g){return vt.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return yi(g.auth,function fp(v,h,g){return Ks.apply(this,arguments)}(g._delegate,h,Ro))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Xl(Wn(g.auth)),pu(g._delegate,h,Ro)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return yi(g.auth,am(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return bh(this.auth,function zr(v,h,g){return cc.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return yi(this.auth,function lc(v,h,g){return ya.apply(this,arguments)}(this._delegate,h,Ro))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Xl(Wn(g.auth)),_a(g._delegate,h,Ro)})()}sendEmailVerification(h){return function qs(v,h){return au.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function ao(v,h){return fi.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Jd(v,h){return tp((0,k.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Qu(v,h){return tp((0,k.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ws(v,h){return hn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function cm(v,h){return Sl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Yd(v,h,g){return Yu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kn.USER_MAP=new WeakMap;const Oo=q;let Th=(()=>{class v{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Oo(T,"invalid-api-key",{appName:g.name}),Oo(T,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Ro:void 0;this._delegate=_.initialize({options:{persistence:ai(T,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Qr(v,h,g){const _=Wn(v);q(_._canInitEmulator,_,"emulator-config-failed"),q(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!g?.disableWarnings,N=ea(h),{host:B,port:Z}=function fl(v){const h=ea(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const N=T[1];return{host:N,port:Bd(_.substr(N.length+1))}}{const[N,B]=_.split(":");return{host:N,port:Bd(B)}}}(h);_.config.emulator={url:`${N}//${B}${null===Z?"":`:${Z}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:Z,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rm(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,_)}applyActionCode(g){return function Wd(v,h){return Mi.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return er(this._delegate,g)}confirmPasswordReset(g,_){return function uo(v,h,g){return ts.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var T=this;return(0,f.Z)(function*(){return yi(T._delegate,function Dl(v,h,g){return iu.apply(this,arguments)}(T._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ou(v,h){return ho.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Kd(v,h){const g=In.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Oo(Ip(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function br(v,h){return Do.apply(this,arguments)}(g._delegate,Ro);return _?yi(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function JE(v,h){Wn(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,T){const{next:N,error:B,complete:Z}=td(g,_,T);return this._delegate.onAuthStateChanged(N,B,Z)}onIdTokenChanged(g,_,T){const{next:N,error:B,complete:Z}=td(g,_,T);return this._delegate.onIdTokenChanged(N,B,Z)}sendSignInLinkToEmail(g,_){return function ua(v,h,g){return su.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Yv(v,h,g){return ru.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,f.Z)(function*(){let T;switch(function Du(v,h){Eu(Object.values(mi).includes(h),v,"invalid-persistence-type"),(0,k.b$)()?Eu(h!==mi.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?Eu(h===mi.NONE,v,"unsupported-persistence-type"):Ec()?Eu(h===mi.NONE||h===mi.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):Eu(h===mi.NONE||a_(),v,"unsupported-persistence-type")}(_._delegate,g),g){case mi.SESSION:T=ei;break;case mi.LOCAL:T=(yield Ye(vo)._isAvailable())?vo:da;break;case mi.NONE:T=Qt;break;default:return _e("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return yi(this._delegate,function _r(v){return Jf.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return yi(this._delegate,wl(this._delegate,g))}signInWithCustomToken(g){return yi(this._delegate,function qd(v,h){return _s.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return yi(this._delegate,function Zd(v,h,g){return wl((0,k.m9)(v),so.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return yi(this._delegate,function lr(v,h,g){return Cl.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return bh(this._delegate,function fa(v,h,g){return pa.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,f.Z)(function*(){return Oo(Ip(),_._delegate,"operation-not-supported-in-this-environment"),yi(_._delegate,function ma(v,h,g){return Eo.apply(this,arguments)}(_._delegate,g,Ro))})()}signInWithRedirect(g){var _=this;return(0,f.Z)(function*(){return Oo(Ip(),_._delegate,"operation-not-supported-in-this-environment"),yield Xl(_._delegate),ri(_._delegate,g,Ro)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Xr(v,h){return lo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=mi,v})();function td(v,h,g){let _=v;"function"!=typeof v&&({next:_,error:h,complete:g}=v);const T=_;return{next:B=>T(B&&Kn.getOrCreate(B)),error:h,complete:g}}function ai(v,h){const g=function Cu(v,h){const g=Cc();if(!g)return[];const _=U(Iu,v,h);switch(g.getItem(_)){case mi.NONE:return[Qt];case mi.LOCAL:return[vo,ei];case mi.SESSION:return[ei];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(vo)&&g.push(vo),typeof window<"u")for(const _ of[da,ei])g.includes(_)||g.push(_);return g.includes(Qt)||g.push(Qt),g}class ba{constructor(){this.providerId="phone",this._delegate=new wo(Ih(Y.Z.auth()))}static credential(h,g){return wo.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}ba.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,ba.PROVIDER_ID=wo.PROVIDER_ID;const Cp=q;class bm{constructor(h,g,_=Y.Z.app()){var T;Cp(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new dh(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function l_(v){v.INTERNAL.registerComponent(new pe.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Th(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:so,FacebookAuthProvider:Hs,GithubAuthProvider:tu,GoogleAuthProvider:Ai,OAuthProvider:vs,SAMLAuthProvider:ia,PhoneAuthProvider:ba,PhoneMultiFactorGenerator:mm,RecaptchaVerifier:bm,TwitterAuthProvider:Wu,Auth:Th,AuthCredential:ro,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},4303:(at,Ce,P)=>{P.d(Ce,{Jn:()=>mn,KN:()=>Vn,Xd:()=>Ke,qX:()=>Ge});var f=P(5861),Y=P(4537),k=P(7879),Q=P(9058),ne=P(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const Me="@firebase/app",L=new k.Yd("@firebase/app"),de={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ie(ye,H){try{ye.container.addComponent(H)}catch(ge){L.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Ke(ye){const H=ye.name;if(me.has(H))return L.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ie(ge,ye);return!0}function Ge(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}const ut=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),mn="10.4.0";function Vn(ye,H,ge){var $e;let Ye=null!==($e=de[ye])&&void 0!==$e?$e:ye;ge&&(Ye+=`-${ge}`);const ht=Ye.match(/\s|\//),Qt=H.match(/\s|\//);if(ht||Qt){const U=[`Unable to register library "${Ye}" with version "${H}":`];return ht&&U.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),ht&&Qt&&U.push("and"),Qt&&U.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void L.warn(U.join(" "))}Ke(new Y.wA(`${Ye}-version`,()=>({library:Ye,version:H}),"VERSION"))}const to="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let Nt=null;function un(){return Nt||(Nt=(0,ne.X3)(to,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function zn(){return(zn=(0,f.Z)(function*(ye){try{return yield(yield un()).transaction(bt).objectStore(bt).get(fs(ye))}catch(H){if(H instanceof Q.ZR)L.warn(H.message);else{const ge=ut.create("idb-get",{originalErrorMessage:H?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,H){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(ye,H){try{const $e=(yield un()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,fs(ye)),yield $e.done}catch(ge){if(ge instanceof Q.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function fs(ye){return`${ye.name}!${ye.options.appId}`}class Zt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Vs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,f.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=hi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!H._heartbeatsCache.heartbeats.some(ht=>ht.date===Ye))return H._heartbeatsCache.heartbeats.push({date:Ye,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ht=>{const Qt=new Date(ht.date).valueOf();return Date.now()-Qt<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,f.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=hi(),{heartbeatsToSend:$e,unsentEntries:Ye}=function ps(ye,H=1024){const ge=[];let $e=ye.slice();for(const Ye of ye){const ht=ge.find(Qt=>Qt.agent===Ye.agent);if(ht){if(ht.dates.push(Ye.date),xr(ge)>H){ht.dates.pop();break}}else if(ge.push({agent:Ye.agent,dates:[Ye.date]}),xr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ht=(0,Q.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Ye.length>0?(H._heartbeatsCache.heartbeats=Ye,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ht})()}}function hi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,f.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function _n(ye){return zn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,f.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ht=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ht.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,f.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ht=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ht.lastSentHeartbeatDate,heartbeats:[...ht.heartbeats,...H.heartbeats]})}})()}}function xr(ye){return(0,Q.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Ji(ye){Ke(new Y.wA("platform-logger",H=>new fe(H),"PRIVATE")),Ke(new Y.wA("heartbeat",H=>new Zt(H),"PRIVATE")),Vn(Me,"0.9.19",ye),Vn(Me,"0.9.19","esm2017"),Vn("fire-js","")}("")},4537:(at,Ce,P)=>{P.d(Ce,{H0:()=>Me,wA:()=>k});var f=P(5861),Y=P(9058);class k{constructor(L,j,J){this.name=L,this.instanceFactory=j,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const Q="[DEFAULT]";class ne{constructor(L,j){this.name=L,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const j=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(j)){const J=new Y.BH;if(this.instancesDeferred.set(j,J),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&J.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(L){var j;const J=this.normalizeInstanceIdentifier(L?.identifier),Le=null!==(j=L?.optional)&&void 0!==j&&j;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Te){if(Le)return null;throw Te}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function pe(ue){return"EAGER"===ue.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[j,J]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Le});J.resolve(Te)}catch{}}}}clearInstance(L=Q){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,f.Z)(function*(){const j=Array.from(L.instances.values());yield Promise.all([...j.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...j.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=Q){return this.instances.has(L)}getOptions(L=Q){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:j={}}=L,J=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:J,options:j});for(const[Te,qe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Te)&&qe.resolve(Le);return Le}onInit(L,j){var J;const Le=this.normalizeInstanceIdentifier(j),Te=null!==(J=this.onInitCallbacks.get(Le))&&void 0!==J?J:new Set;Te.add(L),this.onInitCallbacks.set(Le,Te);const qe=this.instances.get(Le);return qe&&L(qe,Le),()=>{Te.delete(L)}}invokeOnInitCallbacks(L,j){const J=this.onInitCallbacks.get(j);if(J)for(const Le of J)try{Le(L,j)}catch{}}getOrInitializeService({instanceIdentifier:L,options:j={}}){let J=this.instances.get(L);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=L,ue===Q?void 0:ue),options:j}),this.instances.set(L,J),this.instancesOptions.set(L,j),this.invokeOnInitCallbacks(J,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,J)}catch{}var ue;return J||null}normalizeInstanceIdentifier(L=Q){return this.component?this.component.multipleInstances?L:Q:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const j=this.getProvider(L.name);if(j.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);j.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const j=new ne(L,this);return this.providers.set(L,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(at,Ce,P)=>{P.d(Ce,{Am:()=>ue,Ub:()=>Me,Yd:()=>pe,in:()=>Y});const f=[];var Y=function(L){return L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",L}(Y||{});const k={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Q=Y.INFO,ne={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=(L,j,...J)=>{if(j<L.logLevel)return;const Le=(new Date).toISOString(),Te=ne[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Le}]  ${L.name}:`,...J)};class pe{constructor(j){this.name=j,this._logLevel=Q,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Y))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...j),this._logHandler(this,Y.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...j),this._logHandler(this,Y.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...j),this._logHandler(this,Y.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...j),this._logHandler(this,Y.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...j),this._logHandler(this,Y.ERROR,...j)}}function Me(L){f.forEach(j=>{j.setLogLevel(L)})}function ue(L,j){for(const J of f){let Le=null;j&&j.level&&(Le=k[j.level]),J.userLogHandler=null===L?null:(Te,qe,...Ne)=>{const We=Ne.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");qe>=(Le??Te.logLevel)&&L({level:Y[qe].toLowerCase(),message:We,args:Ne,type:Te.name})}}}},1878:(at,Ce,P)=>{P.d(Ce,{X3:()=>lt});var f=P(5861);const Y=(oe,q)=>q.some(je=>oe instanceof je);let k,Q;const pe=new WeakMap,Me=new WeakMap,ue=new WeakMap,L=new WeakMap,j=new WeakMap;let Te={get(oe,q,je){if(oe instanceof IDBTransaction){if("done"===q)return Me.get(oe);if("objectStoreNames"===q)return oe.objectStoreNames||ue.get(oe);if("store"===q)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Re(oe[q])},set:(oe,q,je)=>(oe[q]=je,!0),has:(oe,q)=>oe instanceof IDBTransaction&&("done"===q||"store"===q)||q in oe};function We(oe){return"function"==typeof oe?function Ne(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...q){return oe.apply(ct(this),q),Re(pe.get(this))}:function(...q){return Re(oe.apply(ct(this),q))}:function(q,...je){const dt=oe.call(ct(this),q,...je);return ue.set(dt,q.sort?q.sort():[q]),Re(dt)}}(oe):(oe instanceof IDBTransaction&&function Le(oe){if(Me.has(oe))return;const q=new Promise((je,dt)=>{const Yt=()=>{oe.removeEventListener("complete",cn),oe.removeEventListener("error",ln),oe.removeEventListener("abort",ln)},cn=()=>{je(),Yt()},ln=()=>{dt(oe.error||new DOMException("AbortError","AbortError")),Yt()};oe.addEventListener("complete",cn),oe.addEventListener("error",ln),oe.addEventListener("abort",ln)});Me.set(oe,q)}(oe),Y(oe,function ne(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Te):oe)}function Re(oe){if(oe instanceof IDBRequest)return function J(oe){const q=new Promise((je,dt)=>{const Yt=()=>{oe.removeEventListener("success",cn),oe.removeEventListener("error",ln)},cn=()=>{je(Re(oe.result)),Yt()},ln=()=>{dt(oe.error),Yt()};oe.addEventListener("success",cn),oe.addEventListener("error",ln)});return q.then(je=>{je instanceof IDBCursor&&pe.set(je,oe)}).catch(()=>{}),j.set(q,oe),q}(oe);if(L.has(oe))return L.get(oe);const q=We(oe);return q!==oe&&(L.set(oe,q),j.set(q,oe)),q}const ct=oe=>j.get(oe);function lt(oe,q,{blocked:je,upgrade:dt,blocking:Yt,terminated:cn}={}){const ln=indexedDB.open(oe,q),Mn=Re(ln);return dt&&ln.addEventListener("upgradeneeded",Cn=>{dt(Re(ln.result),Cn.oldVersion,Cn.newVersion,Re(ln.transaction),Cn)}),je&&ln.addEventListener("blocked",Cn=>je(Cn.oldVersion,Cn.newVersion,Cn)),Mn.then(Cn=>{cn&&Cn.addEventListener("close",()=>cn()),Yt&&Cn.addEventListener("versionchange",sr=>Yt(sr.oldVersion,sr.newVersion,sr))}).catch(()=>{}),Mn}const _e=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],Ee=new Map;function Pe(oe,q){if(!(oe instanceof IDBDatabase)||q in oe||"string"!=typeof q)return;if(Ee.get(q))return Ee.get(q);const je=q.replace(/FromIndex$/,""),dt=q!==je,Yt=ee.includes(je);if(!(je in(dt?IDBIndex:IDBObjectStore).prototype)||!Yt&&!_e.includes(je))return;const cn=function(){var ln=(0,f.Z)(function*(Mn,...Cn){const sr=this.transaction(Mn,Yt?"readwrite":"readonly");let ie=sr.store;return dt&&(ie=ie.index(Cn.shift())),(yield Promise.all([ie[je](...Cn),Yt&&sr.done]))[0]});return function(Cn){return ln.apply(this,arguments)}}();return Ee.set(q,cn),cn}!function qe(oe){Te=oe(Te)}(oe=>({...oe,get:(q,je,dt)=>Pe(q,je)||oe.get(q,je,dt),has:(q,je)=>!!Pe(q,je)||oe.has(q,je)}))},5861:(at,Ce,P)=>{function f(k,Q,ne,fe,pe,Me,ue){try{var L=k[Me](ue),j=L.value}catch(J){return void ne(J)}L.done?Q(j):Promise.resolve(j).then(fe,pe)}function Y(k){return function(){var Q=this,ne=arguments;return new Promise(function(fe,pe){var Me=k.apply(Q,ne);function ue(j){f(Me,fe,pe,ue,L,"next",j)}function L(j){f(Me,fe,pe,ue,L,"throw",j)}ue(void 0)})}}P.d(Ce,{Z:()=>Y})},7582:(at,Ce,P)=>{function Q(ie,de){var he={};for(var me in ie)Object.prototype.hasOwnProperty.call(ie,me)&&de.indexOf(me)<0&&(he[me]=ie[me]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(me=Object.getOwnPropertySymbols(ie);Ie<me.length;Ie++)de.indexOf(me[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ie,me[Ie])&&(he[me[Ie]]=ie[me[Ie]])}return he}function J(ie,de,he,me){return new(he||(he=Promise))(function(Se,Ke){function Ge(qt){try{yt(me.next(qt))}catch(ut){Ke(ut)}}function xn(qt){try{yt(me.throw(qt))}catch(ut){Ke(ut)}}function yt(qt){qt.done?Se(qt.value):function Ie(Se){return Se instanceof he?Se:new he(function(Ke){Ke(Se)})}(qt.value).then(Ge,xn)}yt((me=me.apply(ie,de||[])).next())})}function re(ie){return this instanceof re?(this.v=ie,this):new re(ie)}function _e(ie,de,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=he.apply(ie,de||[]),Se=[];return Ie={},Ke("next"),Ke("throw"),Ke("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Ke(dn){me[dn]&&(Ie[dn]=function(mn){return new Promise(function(Gn,sn){Se.push([dn,mn,Gn,sn])>1||Ge(dn,mn)})})}function Ge(dn,mn){try{!function xn(dn){dn.value instanceof re?Promise.resolve(dn.value.v).then(yt,qt):ut(Se[0][2],dn)}(me[dn](mn))}catch(Gn){ut(Se[0][3],Gn)}}function yt(dn){Ge("next",dn)}function qt(dn){Ge("throw",dn)}function ut(dn,mn){dn(mn),Se.shift(),Se.length&&Ge(Se[0][0],Se[0][1])}}function Ee(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,de=ie[Symbol.asyncIterator];return de?de.call(ie):(ie=function Ne(ie){var de="function"==typeof Symbol&&Symbol.iterator,he=de&&ie[de],me=0;if(he)return he.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&me>=ie.length&&(ie=void 0),{value:ie&&ie[me++],done:!ie}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),he={},me("next"),me("throw"),me("return"),he[Symbol.asyncIterator]=function(){return this},he);function me(Se){he[Se]=ie[Se]&&function(Ke){return new Promise(function(Ge,xn){!function Ie(Se,Ke,Ge,xn){Promise.resolve(xn).then(function(yt){Se({value:yt,done:Ge})},Ke)}(Ge,xn,(Ke=ie[Se](Ke)).done,Ke.value)})}}}P.d(Ce,{FC:()=>_e,KL:()=>Ee,_T:()=>Q,mG:()=>J,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},at=>{at(at.s=3662)}]);
"use strict";(self.webpackChunkwebRTCDemo=self.webpackChunkwebRTCDemo||[]).push([[179],{6304:(at,Ce,P)=>{P.d(Ce,{Dh:()=>xe,GT:()=>fe,cc:()=>Te,hO:()=>Ve,on:()=>L,pX:()=>ne,xv:()=>ue});var p=P(5879),Y=P(120),k=P(2793);at=P.hmd(at);const Q=["ngOnDestroy"],ne=(Oe,ct,lt,re={})=>new Proxy(Oe,{get:(_e,ee)=>lt.runOutsideAngular(()=>{var Ee;if(Oe[ee])return!(null===(Ee=re?.spy)||void 0===Ee)&&Ee.get&&re.spy.get(ee,Oe[ee]),Oe[ee];if(Q.indexOf(ee)>-1)return()=>{};const Pe=ct.toPromise().then(oe=>{const q=oe&&oe[ee];return"function"==typeof q?q.bind(oe):q&&q.then?q.then(je=>lt.run(()=>je)):lt.run(()=>q)});return new Proxy(()=>{},{get:(oe,q)=>Pe[q],apply:(oe,q,je)=>Pe.then(ht=>{var Qt;const dn=ht&&ht(...je);return!(null===(Qt=re?.spy)||void 0===Qt)&&Qt.apply&&re.spy.apply(ee,je,dn),dn})})})}),fe=(Oe,ct)=>{ct.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(re=>{Object.defineProperty(Oe.prototype,re,Object.getOwnPropertyDescriptor(lt.prototype||lt,re))})})};class pe{constructor(ct){return ct}}const xe=new p.OlP("angularfire2.app.options"),ue=new p.OlP("angularfire2.app.name");function L(Oe,ct,lt){const _e="object"==typeof lt&&lt||{};_e.name=_e.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ee=Y.Z.apps.filter(Pe=>Pe&&Pe.name===_e.name)[0]||ct.runOutsideAngular(()=>Y.Z.initializeApp(Oe,_e));try{JSON.stringify(Oe)!==JSON.stringify(Ee.options)&&j("error",`${Ee.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ee)}const j=(Oe,...ct)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Oe](...ct)},J={provide:pe,useFactory:L,deps:[xe,p.R0b,[new p.FiY,ue]]};let Ve=(()=>{class Oe{constructor(lt){Y.Z.registerVersion("angularfire",k.q4.full,"core"),Y.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Y.Z.registerVersion("angular",p.q4F.full,lt.toString())}static initializeApp(lt,re){return{ngModule:Oe,providers:[{provide:xe,useValue:lt},{provide:ue,useValue:re}]}}}return Oe.\u0275fac=function(lt){return new(lt||Oe)(p.LFG(p.Lbi))},Oe.\u0275mod=p.oAB({type:Oe}),Oe.\u0275inj=p.cJS({providers:[J]}),Oe})();function Te(Oe,ct,lt,re,_e){const[,ee,Ee]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Oe)||[];if(ee)return function qe(Oe,ct){try{return Oe.toString()===ct.toString()}catch{return Oe===ct}}(_e,Ee)||(We("error",`${ct} was already initialized on the ${lt} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:_e,was:Ee})),ee;{const Pe=re();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Pe,_e]),Pe}}const Re=!!at.hot,We=(Oe,...ct)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Oe](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(at,Ce,P)=>{P.d(Ce,{q4:()=>Wi,iC:()=>kl,HU:()=>Ol,vb:()=>ma,JM:()=>No});var p=P(5879),Y=P(4097),k=P(5861),Q=P(4303),ne=P(9058),fe=P(4537),pe=P(7879);const xe=(I,C)=>C.some(A=>I instanceof A);let ue,L;const Ve=new WeakMap,Te=new WeakMap,qe=new WeakMap,Re=new WeakMap,We=new WeakMap;let lt={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return Te.get(I);if("objectStoreNames"===C)return I.objectStoreNames||qe.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ee(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ee(I){return"function"==typeof I?function _e(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(Pe(this),C),Ee(Ve.get(this))}:function(...C){return Ee(I.apply(Pe(this),C))}:function(C,...A){const O=I.call(Pe(this),C,...A);return qe.set(O,C.sort?C.sort():[C]),Ee(O)}}(I):(I instanceof IDBTransaction&&function ct(I){if(Te.has(I))return;const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("complete",K),I.removeEventListener("error",le),I.removeEventListener("abort",le)},K=()=>{A(),G()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),G()};I.addEventListener("complete",K),I.addEventListener("error",le),I.addEventListener("abort",le)});Te.set(I,C)}(I),xe(I,function j(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,lt):I)}function Ee(I){if(I instanceof IDBRequest)return function Oe(I){const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("success",K),I.removeEventListener("error",le)},K=()=>{A(Ee(I.result)),G()},le=()=>{O(I.error),G()};I.addEventListener("success",K),I.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&Ve.set(A,I)}).catch(()=>{}),We.set(C,I),C}(I);if(Re.has(I))return Re.get(I);const C=ee(I);return C!==I&&(Re.set(I,C),We.set(C,I)),C}const Pe=I=>We.get(I),je=["get","getKey","getAll","getAllKeys","count"],ht=["put","add","delete","clear"],Qt=new Map;function dn(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Qt.get(C))return Qt.get(C);const A=C.replace(/FromIndex$/,""),O=C!==A,G=ht.includes(A);if(!(A in(O?IDBIndex:IDBObjectStore).prototype)||!G&&!je.includes(A))return;const K=function(){var le=(0,k.Z)(function*(Ye,...ze){const ot=this.transaction(Ye,G?"readwrite":"readonly");let Mt=ot.store;return O&&(Mt=Mt.index(ze.shift())),(yield Promise.all([Mt[A](...ze),G&&ot.done]))[0]});return function(ze){return le.apply(this,arguments)}}();return Qt.set(C,K),K}!function re(I){lt=I(lt)}(I=>({...I,get:(C,A,O)=>dn(C,A)||I.get(C,A,O),has:(C,A)=>!!dn(C,A)||I.has(C,A)}));const hn="@firebase/installations",xn="0.6.4",Tn=1e4,rr=`w:${xn}`,ie="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",he=36e5,Ze=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Nn({projectId:I}){return`${de}/projects/${I}/installations`}function gt(I){return{token:I.token,requestStatus:2,expiresIn:Sr(I.expiresIn),creationTime:Date.now()}}function qt(I,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,k.Z)(function*(I,C){const O=(yield C.json()).error;return Ze.create("request-failed",{requestName:I,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function fn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Kn(I){return rn.apply(this,arguments)}function rn(){return(rn=(0,k.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function Sr(I){return Number(I.replace("s","000"))}function $n(){return($n=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:A}){const O=Nn(I),G=fn(I),K=C.getImmediate({optional:!0});if(K){const ot=yield K.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const Ye={method:"POST",headers:G,body:JSON.stringify({fid:A,authVersion:ie,appId:I.appId,sdkVersion:rr})},ze=yield Kn(()=>fetch(O,Ye));if(ze.ok){const ot=yield ze.json();return{fid:ot.fid||A,registrationStatus:2,refreshToken:ot.refreshToken,authToken:gt(ot.authToken)}}throw yield qt("Create Installation",ze)})).apply(this,arguments)}function Qr(I){return new Promise(C=>{setTimeout(C,I)})}const so=/^[cdef][\w-]{21}$/,_t="";function bt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const A=function xt(I){return function gs(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return so.test(A)?A:_t}catch{return _t}}function cn(I){return`${I.appName}!${I.appId}`}const En=new Map;function Yn(I,C){const A=cn(I);ms(A,C),function Wt(I,C){const A=function Kt(){return!Ar&&"BroadcastChannel"in self&&(Ar=new BroadcastChannel("[Firebase] FID Change"),Ar.onmessage=I=>{ms(I.data.key,I.data.fid)}),Ar}();A&&A.postMessage({key:I,fid:C}),function yi(){0===En.size&&Ar&&(Ar.close(),Ar=null)}()}(A,C)}function ms(I,C){const A=En.get(I);if(A)for(const O of A)O(C)}let Ar=null;const ys="firebase-installations-database",Vs=1,Mr="firebase-installations-store";let ns=null;function ye(){return ns||(ns=function oe(I,C,{blocked:A,upgrade:O,blocking:G,terminated:K}={}){const le=indexedDB.open(I,C),Ye=Ee(le);return O&&le.addEventListener("upgradeneeded",ze=>{O(Ee(le.result),ze.oldVersion,ze.newVersion,Ee(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),Ye.then(ze=>{K&&ze.addEventListener("close",()=>K()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Ye}(ys,Vs,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Mr)}})),ns}function H(I,C){return ge.apply(this,arguments)}function ge(){return(ge=(0,k.Z)(function*(I,C){const A=cn(I),G=(yield ye()).transaction(Mr,"readwrite"),K=G.objectStore(Mr),le=yield K.get(A);return yield K.put(C,A),yield G.done,(!le||le.fid!==C.fid)&&Yn(I,C.fid),C})).apply(this,arguments)}function $e(I){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,k.Z)(function*(I){const C=cn(I),O=(yield ye()).transaction(Mr,"readwrite");yield O.objectStore(Mr).delete(C),yield O.done})).apply(this,arguments)}function ft(I,C){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,k.Z)(function*(I,C){const A=cn(I),G=(yield ye()).transaction(Mr,"readwrite"),K=G.objectStore(Mr),le=yield K.get(A),Ye=C(le);return void 0===Ye?yield K.delete(A):yield K.put(Ye,A),yield G.done,Ye&&(!le||le.fid!==Ye.fid)&&Yn(I,Ye.fid),Ye})).apply(this,arguments)}function U(I){return V.apply(this,arguments)}function V(){return V=(0,k.Z)(function*(I){let C;const A=yield ft(I.appConfig,O=>{const G=function W(I){return Pt(I||{fid:bt(),registrationStatus:0})}(O),K=function De(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ze.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},O=function ae(I,C){return tt.apply(this,arguments)}(I,A);return{installationEntry:A,registrationPromise:O}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Nt(I)}:{installationEntry:C}}(I,G);return C=K.registrationPromise,K.installationEntry});return A.fid===_t?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),V.apply(this,arguments)}function tt(){return tt=(0,k.Z)(function*(I,C){try{const A=yield function mi(I,C){return $n.apply(this,arguments)}(I,C);return H(I.appConfig,A)}catch(A){throw Ge(A)&&409===A.customData.serverCode?yield $e(I.appConfig):yield H(I.appConfig,{fid:C.fid,registrationStatus:0}),A}}),tt.apply(this,arguments)}function Nt(I){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,k.Z)(function*(I){let C=yield xr(I.appConfig);for(;1===C.registrationStatus;)yield Qr(100),C=yield xr(I.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:O}=yield U(I);return O||A}return C})).apply(this,arguments)}function xr(I){return ft(I,C=>{if(!C)throw Ze.create("installation-not-found");return Pt(C)})}function Pt(I){return function Qn(I){return 1===I.registrationStatus&&I.registrationTime+Tn<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function fr(){return(fr=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:C},A){const O=function Us(I,{fid:C}){return`${Nn(I)}/${C}/authTokens:generate`}(I,A),G=function mn(I,{refreshToken:C}){const A=fn(I);return A.append("Authorization",function Yr(I){return`${ie} ${I}`}(C)),A}(I,A),K=C.getImmediate({optional:!0});if(K){const ot=yield K.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const Ye={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:rr,appId:I.appId}})},ze=yield Kn(()=>fetch(O,Ye));if(ze.ok)return gt(yield ze.json());throw yield qt("Generate Auth Token",ze)})).apply(this,arguments)}function zo(I){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,k.Z)(function*(I,C=!1){let A;const O=yield ft(I.appConfig,K=>{if(!js(K))throw Ze.create("not-registered");const le=K.authToken;if(!C&&function qo(I){return 2===I.requestStatus&&!function ja(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+he}(I)}(le))return K;if(1===le.requestStatus)return A=function rs(I,C){return Bs.apply(this,arguments)}(I,C),K;{if(!navigator.onLine)throw Ze.create("app-offline");const Ye=function Ld(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}(K);return A=function $i(I,C){return Gt.apply(this,arguments)}(I,Ye),Ye}});return A?yield A:O.authToken}),Xc.apply(this,arguments)}function Bs(){return(Bs=(0,k.Z)(function*(I,C){let A=yield ji(I.appConfig);for(;1===A.authToken.requestStatus;)yield Qr(100),A=yield ji(I.appConfig);const O=A.authToken;return 0===O.requestStatus?zo(I,C):O})).apply(this,arguments)}function ji(I){return ft(I,C=>{if(!js(C))throw Ze.create("not-registered");return function is(I){return 1===I.requestStatus&&I.requestTime+Tn<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Gt(){return Gt=(0,k.Z)(function*(I,C){try{const A=yield function Yt(I,C){return fr.apply(this,arguments)}(I,C),O=Object.assign(Object.assign({},C),{authToken:A});return yield H(I.appConfig,O),A}catch(A){if(!Ge(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const O=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield H(I.appConfig,O)}else yield $e(I.appConfig);throw A}}),Gt.apply(this,arguments)}function js(I){return void 0!==I&&2===I.registrationStatus}function Zo(){return(Zo=(0,k.Z)(function*(I){const C=I,{installationEntry:A,registrationPromise:O}=yield U(C);return O?O.catch(console.error):zo(C).catch(console.error),A.fid})).apply(this,arguments)}function $a(){return $a=(0,k.Z)(function*(I,C=!1){const A=I;return yield function tl(I){return Mi.apply(this,arguments)}(A),(yield zo(A,C)).token}),$a.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(I){const{registrationPromise:C}=yield U(I);C&&(yield C)})).apply(this,arguments)}function Yo(I){return Ze.create("missing-app-config-values",{valueName:I})}const rl="installations",hm=I=>{const C=I.getProvider("app").getImmediate(),A=function Jr(I){if(!I||!I.options)throw Yo("App Configuration");if(!I.name)throw Yo("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!I.options[A])throw Yo(A);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,Q.qX)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ao=I=>{const C=I.getProvider("app").getImmediate(),A=(0,Q.qX)(C,rl).getImmediate();return{getId:()=>function Wo(I){return Zo.apply(this,arguments)}(A),getToken:G=>function el(I){return $a.apply(this,arguments)}(A,G)}};(function qf(){(0,Q.Xd)(new fe.wA(rl,hm,"PUBLIC")),(0,Q.Xd)(new fe.wA("installations-internal",ao,"PRIVATE"))})(),(0,Q.KN)(hn,xn),(0,Q.KN)(hn,xn,"esm2017");const Ga="@firebase/remote-config",Nr=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wt{constructor(C,A,O,G){this.client=C,this.storage=A,this.storageCache=O,this.logger=G}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-A,G=O<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${G}.`),G}fetch(C){var A=this;return(0,k.Z)(function*(){const[O,G]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(G&&A.isCachedDataFresh(C.cacheMaxAgeMillis,O))return G;C.eTag=G&&G.eTag;const K=yield A.client.fetch(C),le=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&le.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(le),K})()}}function Dn(I=navigator){return I.languages&&I.languages[0]||I.language}class Hr{constructor(C,A,O,G,K,le){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=O,this.projectId=G,this.apiKey=K,this.appId=le}fetch(C){var A=this;return(0,k.Z)(function*(){const[O,G]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ze={sdk_version:A.sdkVersion,app_instance_id:O,app_instance_id_token:G,app_id:A.appId,language_code:Dn()},ot={method:"POST",headers:Ye,body:JSON.stringify(ze)},Mt=fetch(le,ot),St=new Promise((dr,ls)=>{C.signal.addEventListener(()=>{const ai=new Error("The operation was aborted.");ai.name="AbortError",ls(ai)})});let Gn;try{yield Promise.race([Mt,St]),Gn=yield Mt}catch(dr){let ls="fetch-client-network";throw"AbortError"===dr?.name&&(ls="fetch-timeout"),Nr.create(ls,{originalErrorMessage:dr?.message})}let Xn=Gn.status;const Ts=Gn.headers.get("ETag")||void 0;let zn,Ss;if(200===Gn.status){let dr;try{dr=yield Gn.json()}catch(ls){throw Nr.create("fetch-client-parse",{originalErrorMessage:ls?.message})}zn=dr.entries,Ss=dr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ss?Xn=500:"NO_CHANGE"===Ss?Xn=304:("NO_TEMPLATE"===Ss||"EMPTY_CONFIG"===Ss)&&(zn={}),304!==Xn&&200!==Xn)throw Nr.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:Ts,config:zn}})()}}class qa{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,k.Z)(function*(){const O=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,O)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:O}){var G=this;return(0,k.Z)(function*(){yield function uo(I,C){return new Promise((A,O)=>{const G=Math.max(C-Date.now(),0),K=setTimeout(A,G);I.addEventListener(()=>{clearTimeout(K),O(Nr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const K=yield G.client.fetch(C);return yield G.storage.deleteThrottleMetadata(),K}catch(K){if(!function pr(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const le={throttleEndTimeMillis:Date.now()+(0,ne.$s)(O),backoffCount:O+1};return yield G.storage.setThrottleMetadata(le),G.attemptFetch(C,le)}})()}}class Xo{constructor(C,A,O,G,K){this.app=C,this._client=A,this._storageCache=O,this._storage=G,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function It(I,C){const A=I.target.error||void 0;return Nr.create(C,{originalErrorMessage:A&&A?.message})}const gr="app_namespace_store";class al{constructor(C,A,O,G=function Cn(){return new Promise((I,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=O=>{C(It(O,"storage-open"))},A.onsuccess=O=>{I(O.target.result)},A.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(gr,{keyPath:"compositeKey"})}}catch(A){C(Nr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=O,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((G,K)=>{const Ye=O.transaction([gr],"readonly").objectStore(gr),ze=A.createCompositeKey(C);try{const ot=Ye.get(ze);ot.onerror=Mt=>{K(It(Mt,"storage-get"))},ot.onsuccess=Mt=>{const St=Mt.target.result;G(St?St.value:void 0)}}catch(ot){K(Nr.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(C,A){var O=this;return(0,k.Z)(function*(){const G=yield O.openDbPromise;return new Promise((K,le)=>{const ze=G.transaction([gr],"readwrite").objectStore(gr),ot=O.createCompositeKey(C);try{const Mt=ze.put({compositeKey:ot,value:A});Mt.onerror=St=>{le(It(St,"storage-set"))},Mt.onsuccess=()=>{K()}}catch(Mt){le(Nr.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(C){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((G,K)=>{const Ye=O.transaction([gr],"readwrite").objectStore(gr),ze=A.createCompositeKey(C);try{const ot=Ye.delete(ze);ot.onerror=Mt=>{K(It(Mt,"storage-delete"))},ot.onsuccess=()=>{G()}}catch(ot){K(Nr.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class co{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,k.Z)(function*(){const A=C.storage.getLastFetchStatus(),O=C.storage.getLastSuccessfulFetchTimestampMillis(),G=C.storage.getActiveConfig(),K=yield A;K&&(C.lastFetchStatus=K);const le=yield O;le&&(C.lastSuccessfulFetchTimestampMillis=le);const Ye=yield G;Ye&&(C.activeConfig=Ye)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Hs(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function ir(){(0,Q.Xd)(new fe.wA("remote-config",function I(C,{instanceIdentifier:A}){const O=C.getProvider("app").getImmediate(),G=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Nr.create("registration-window");if(!(0,ne.hl)())throw Nr.create("indexed-db-unavailable");const{projectId:K,apiKey:le,appId:Ye}=O.options;if(!K)throw Nr.create("registration-project-id");if(!le)throw Nr.create("registration-api-key");if(!Ye)throw Nr.create("registration-app-id");const ze=new al(Ye,O.name,A=A||"firebase"),ot=new co(ze),Mt=new pe.Yd(Ga);Mt.logLevel=pe.in.ERROR;const St=new Hr(G,Q.Jn,A,K,le,Ye),Gn=new qa(St,ze),Xn=new wt(Gn,ze,ot,Mt),Ts=new Xo(O,Xn,ot,ze,Mt);return function jr(I){const C=(0,ne.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ts),Ts},"PUBLIC").setMultipleInstances(!0)),(0,Q.KN)(Ga,"0.4.4"),(0,Q.KN)(Ga,"0.4.4","esm2017")}();const Wa=(I,C)=>C.some(A=>I instanceof A);let Gs,Lt;const Zu=new WeakMap,sr=new WeakMap,lo=new WeakMap,or=new WeakMap,zs=new WeakMap;let ar={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return sr.get(I);if("objectStoreNames"===C)return I.objectStoreNames||lo.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return vi(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ho(I){return"function"==typeof I?function Ku(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ea(){return Lt||(Lt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(Xr(this),C),vi(Zu.get(this))}:function(...C){return vi(I.apply(Xr(this),C))}:function(C,...A){const O=I.call(Xr(this),C,...A);return lo.set(O,C.sort?C.sort():[C]),vi(O)}}(I):(I instanceof IDBTransaction&&function Kf(I){if(sr.has(I))return;const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("complete",K),I.removeEventListener("error",le),I.removeEventListener("abort",le)},K=()=>{A(),G()},le=()=>{O(I.error||new DOMException("AbortError","AbortError")),G()};I.addEventListener("complete",K),I.addEventListener("error",le),I.addEventListener("abort",le)});sr.set(I,C)}(I),Wa(I,function fm(){return Gs||(Gs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ar):I)}function vi(I){if(I instanceof IDBRequest)return function mr(I){const C=new Promise((A,O)=>{const G=()=>{I.removeEventListener("success",K),I.removeEventListener("error",le)},K=()=>{A(vi(I.result)),G()},le=()=>{O(I.error),G()};I.addEventListener("success",K),I.addEventListener("error",le)});return C.then(A=>{A instanceof IDBCursor&&Zu.set(A,I)}).catch(()=>{}),zs.set(C,I),C}(I);if(or.has(I))return or.get(I);const C=ho(I);return C!==I&&(or.set(I,C),zs.set(C,I)),C}const Xr=I=>zs.get(I);function ta(I,C,{blocked:A,upgrade:O,blocking:G,terminated:K}={}){const le=indexedDB.open(I,C),Ye=vi(le);return O&&le.addEventListener("upgradeneeded",ze=>{O(vi(le.result),ze.oldVersion,ze.newVersion,vi(le.transaction))}),A&&le.addEventListener("blocked",()=>A()),Ye.then(ze=>{K&&ze.addEventListener("close",()=>K()),G&&ze.addEventListener("versionchange",()=>G())}).catch(()=>{}),Ye}function na(I,{blocked:C}={}){const A=indexedDB.deleteDatabase(I);return C&&A.addEventListener("blocked",()=>C()),vi(A).then(()=>{})}const ul=["get","getKey","getAll","getAllKeys","count"],pm=["put","add","delete","clear"],Yu=new Map;function cl(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(Yu.get(C))return Yu.get(C);const A=C.replace(/FromIndex$/,""),O=C!==A,G=pm.includes(A);if(!(A in(O?IDBIndex:IDBObjectStore).prototype)||!G&&!ul.includes(A))return;const K=function(){var le=(0,k.Z)(function*(Ye,...ze){const ot=this.transaction(Ye,G?"readwrite":"readonly");let Mt=ot.store;return O&&(Mt=Mt.index(ze.shift())),(yield Promise.all([Mt[A](...ze),G&&ot.done]))[0]});return function(ze){return le.apply(this,arguments)}}();return Yu.set(C,K),K}!function Rr(I){ar=I(ar)}(I=>({...I,get:(C,A,O)=>cl(C,A)||I.get(C,A,O),has:(C,A)=>!!cl(C,A)||I.has(C,A)}));const $d="/firebase-messaging-sw.js",ll="/firebase-cloud-messaging-push-scope",Hd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gm="https://fcmregistrations.googleapis.com/v1",bn="google.c.a.c_id",mm="google.c.a.c_l",Yf="google.c.a.ts";var Gd=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(Gd||{});function Is(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dl(I){const A=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(A),G=new Uint8Array(O.length);for(let K=0;K<O.length;++K)G[K]=O.charCodeAt(K);return G}const ra="fcm_token_details_db",hl=5,Za="fcm_token_object_Store";function Ka(){return Ka=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(ra))return null;let C=null;return(yield ta(ra,hl,{upgrade:(O=(0,k.Z)(function*(G,K,le,Ye){var ze;if(K<2||!G.objectStoreNames.contains(Za))return;const ot=Ye.objectStore(Za),Mt=yield ot.index("fcmSenderId").get(I);if(yield ot.clear(),Mt)if(2===K){const St=Mt;if(!St.auth||!St.p256dh||!St.endpoint)return;C={token:St.fcmToken,createTime:null!==(ze=St.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Is(St.vapidKey)}}}else if(3===K){const St=Mt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Is(St.auth),p256dh:Is(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Is(St.vapidKey)}}}else if(4===K){const St=Mt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Is(St.auth),p256dh:Is(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Is(St.vapidKey)}}}}),function(K,le,Ye,ze){return O.apply(this,arguments)})})).close(),yield na(ra),yield na("fcm_vapid_details_db"),yield na("undefined"),function fo(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var O}),Ka.apply(this,arguments)}const ss="firebase-messaging-database",zd=1,Oi="firebase-messaging-store";let nr=null;function po(){return nr||(nr=ta(ss,zd,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Oi)}})),nr}function ei(I){return go.apply(this,arguments)}function go(){return go=(0,k.Z)(function*(I){const C=Qa(I),O=yield(yield po()).transaction(Oi).objectStore(Oi).get(C);if(O)return O;{const G=yield function Xv(I){return Ka.apply(this,arguments)}(I.appConfig.senderId);if(G)return yield fl(I,G),G}}),go.apply(this,arguments)}function fl(I,C){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,k.Z)(function*(I,C){const A=Qa(I),G=(yield po()).transaction(Oi,"readwrite");return yield G.objectStore(Oi).put(C,A),yield G.done,C})).apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(I){const C=Qa(I),O=(yield po()).transaction(Oi,"readwrite");yield O.objectStore(Oi).delete(C),yield O.done})).apply(this,arguments)}function Qa({appConfig:I}){return I.appId}const ur=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pl(I,C){return gl.apply(this,arguments)}function gl(){return(gl=(0,k.Z)(function*(I,C){const A=yield Zd(I),O=ym(C),G={method:"POST",headers:A,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(Xa(I.appConfig),G)).json()}catch(le){throw ur.create("token-subscribe-failed",{errorInfo:le?.toString()})}if(K.error)throw ur.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw ur.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Ja(){return(Ja=(0,k.Z)(function*(I,C){const A=yield Zd(I),O=ym(C.subscriptionOptions),G={method:"PATCH",headers:A,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(`${Xa(I.appConfig)}/${C.token}`,G)).json()}catch(le){throw ur.create("token-update-failed",{errorInfo:le?.toString()})}if(K.error)throw ur.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw ur.create("token-update-no-token");return K.token})).apply(this,arguments)}function mo(I,C){return qs.apply(this,arguments)}function qs(){return(qs=(0,k.Z)(function*(I,C){const O={method:"DELETE",headers:yield Zd(I)};try{const K=yield(yield fetch(`${Xa(I.appConfig)}/${C}`,O)).json();if(K.error)throw ur.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(G){throw ur.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function Xa({projectId:I}){return`${gm}/projects/${I}/registrations`}function Zd(I){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,k.Z)(function*({appConfig:I,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function ym({p256dh:I,auth:C,endpoint:A,vapidKey:O}){const G={web:{endpoint:A,auth:C,p256dh:I}};return O!==Hd&&(G.web.applicationPubKey=O),G}const Kd=6048e5;function yl(){return yl=(0,k.Z)(function*(I){const C=yield function eu(I,C){return vl.apply(this,arguments)}(I.swRegistration,I.vapidKey),A={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:Is(C.getKey("auth")),p256dh:Is(C.getKey("p256dh"))},O=yield ei(I.firebaseDependencies);if(O){if(function Qd(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}(O.subscriptionOptions,A))return Date.now()>=O.createTime+Kd?function Jf(I,C){return sa.apply(this,arguments)}(I,{token:O.token,createTime:Date.now(),subscriptionOptions:A}):O.token;try{yield mo(I.firebaseDependencies,O.token)}catch(G){console.warn(G)}return _m(I.firebaseDependencies,A)}return _m(I.firebaseDependencies,A)}),yl.apply(this,arguments)}function Ju(){return Ju=(0,k.Z)(function*(I){const C=yield ei(I.firebaseDependencies);C&&(yield mo(I.firebaseDependencies,C.token),yield function qd(I){return ia.apply(this,arguments)}(I.firebaseDependencies));const A=yield I.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Ju.apply(this,arguments)}function sa(){return sa=(0,k.Z)(function*(I,C){try{const A=yield function ml(I,C){return Ja.apply(this,arguments)}(I.firebaseDependencies,C),O=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield fl(I.firebaseDependencies,O),A}catch(A){throw yield function Yd(I){return Ju.apply(this,arguments)}(I),A}}),sa.apply(this,arguments)}function _m(I,C){return oa.apply(this,arguments)}function oa(){return(oa=(0,k.Z)(function*(I,C){const O={token:yield pl(I,C),createTime:Date.now(),subscriptionOptions:C};return yield fl(I,O),O.token})).apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dl(C)})})).apply(this,arguments)}function Xu(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function tu(I,C){if(!C.notification)return;I.notification={};const A=C.notification.title;A&&(I.notification.title=A);const O=C.notification.body;O&&(I.notification.body=O);const G=C.notification.image;G&&(I.notification.image=G);const K=C.notification.icon;K&&(I.notification.icon=K)}(C,I),function Xf(I,C){C.data&&(I.data=C.data)}(C,I),function _l(I,C){var A,O,G,K,le;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;I.fcmOptions={};const Ye=null!==(G=null===(O=C.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==G?G:null===(K=C.notification)||void 0===K?void 0:K.click_action;Ye&&(I.fcmOptions.link=Ye);const ze=null===(le=C.fcmOptions)||void 0===le?void 0:le.analytics_label;ze&&(I.fcmOptions.analyticsLabel=ze)}(C,I),C}function wl(I,C){const A=[];for(let O=0;O<I.length;O++)A.push(I.charAt(O)),O<C.length&&A.push(C.charAt(O));return A.join("")}function El(I){return ur.create("missing-app-config-values",{valueName:I})}wl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tp{constructor(C,A,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function ep(I){if(!I||!I.options)throw El("App Configuration Object");if(!I.name)throw El("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=I;for(const O of C)if(!A[O])throw El(O);return{appName:I.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:G,installations:A,analyticsProvider:O}}_delete(){return Promise.resolve()}}function nu(){return(nu=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register($d,{scope:ll}),I.swRegistration.update().catch(()=>{})}catch(C){throw ur.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function yo(){return(yo=(0,k.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield function ec(I){return nu.apply(this,arguments)}(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function vo(){return(vo=(0,k.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=Hd)})).apply(this,arguments)}function ru(){return ru=(0,k.Z)(function*(I,C){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield function os(I,C){return vo.apply(this,arguments)}(I,C?.vapidKey),yield function np(I,C){return yo.apply(this,arguments)}(I,C?.serviceWorkerRegistration),function vm(I){return yl.apply(this,arguments)}(I)}),ru.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(I,C,A){const O=function Xd(I){switch(I){case Gd.NOTIFICATION_CLICKED:return"notification_open";case Gd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:A[bn],message_name:A[mm],message_time:A[Yf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nn(){return nn=(0,k.Z)(function*(I,C){const A=C.data;if(!A.isFirebaseMessaging)return;I.onMessageHandler&&A.messageType===Gd.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Xu(A)):I.onMessageHandler.next(Xu(A)));const O=A.data;(function wm(I){return"object"==typeof I&&!!I&&bn in I})(O)&&"1"===O["google.c.a.e"]&&(yield function rp(I,C,A){return Hi.apply(this,arguments)}(I,A.messageType,O))}),nn.apply(this,arguments)}const _o="@firebase/messaging",yr=I=>{const C=new tp(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function eh(I,C){return nn.apply(this,arguments)}(C,A)),C},ip=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:O=>function Jd(I,C){return ru.apply(this,arguments)}(C,O)}};function Eo(){return vr.apply(this,arguments)}function vr(){return(vr=(0,k.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Il(){(0,Q.Xd)(new fe.wA("messaging",yr,"PUBLIC")),(0,Q.Xd)(new fe.wA("messaging-internal",ip,"PRIVATE")),(0,Q.KN)(_o,"0.12.4"),(0,Q.KN)(_o,"0.12.4","esm2017")}();const yn="analytics",Im="firebase_id",Dt="origin",th=6e4,nh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nc="https://www.googletagmanager.com/gtag/js",cr=new pe.Yd("@firebase/analytics"),_r=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function as(I){if(!I.startsWith(nc)){const C=_r.create("invalid-gtag-resource",{gtagURL:I});return cr.warn(C.message),""}return I}function Cl(I){return Promise.all(I.map(C=>C.catch(A=>A)))}function Ae(){return(Ae=(0,k.Z)(function*(I,C,A,O,G,K){const le=O[G];try{if(le)yield C[le];else{const ze=(yield Cl(A)).find(ot=>ot.measurementId===G);ze&&(yield C[ze.appId])}}catch(Ye){cr.error(Ye)}I("config",G,K)})).apply(this,arguments)}function Gi(){return(Gi=(0,k.Z)(function*(I,C,A,O,G){try{let K=[];if(G&&G.send_to){let le=G.send_to;Array.isArray(le)||(le=[le]);const Ye=yield Cl(A);for(const ze of le){const ot=Ye.find(St=>St.measurementId===ze),Mt=ot&&C[ot.appId];if(!Mt){K=[];break}K.push(Mt)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),I("event",O,G||{})}catch(K){cr.error(K)}})).apply(this,arguments)}const ua=30,Tl=new class Io{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function up(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Sl(){return(Sl=(0,k.Z)(function*(I){var C;const{appId:A,apiKey:O}=I,G={method:"GET",headers:up(O)},K=nh.replace("{app-id}",A),le=yield fetch(K,G);if(200!==le.status&&304!==le.status){let Ye="";try{const ze=yield le.json();null!==(C=ze.error)&&void 0!==C&&C.message&&(Ye=ze.error.message)}catch{}throw _r.create("config-fetch-failed",{httpStatus:le.status,responseMessage:Ye})}return le.json()})).apply(this,arguments)}function _i(){return(_i=(0,k.Z)(function*(I,C=Tl,A){const{appId:O,apiKey:G,measurementId:K}=I.options;if(!O)throw _r.create("no-app-id");if(!G){if(K)return{measurementId:K,appId:O};throw _r.create("no-api-key")}const le=C.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new oh;return setTimeout((0,k.Z)(function*(){Ye.abort()}),void 0!==A?A:th),ih({appId:O,apiKey:G,measurementId:K},le,Ye,C)})).apply(this,arguments)}function ih(I,C,A){return Do.apply(this,arguments)}function Do(){return Do=(0,k.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:A},O,G=Tl){var K;const{appId:le,measurementId:Ye}=I;try{yield function Zs(I,C){return new Promise((A,O)=>{const G=Math.max(C-Date.now(),0),K=setTimeout(A,G);I.addEventListener(()=>{clearTimeout(K),O(_r.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(O,C)}catch(ze){if(Ye)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:le,measurementId:Ye};throw ze}try{const ze=yield function e_(I){return Sl.apply(this,arguments)}(I);return G.deleteThrottleMetadata(le),ze}catch(ze){const ot=ze;if(!function sh(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ot)){if(G.deleteThrottleMetadata(le),Ye)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:le,measurementId:Ye};throw ze}const Mt=503===Number(null===(K=ot?.customData)||void 0===K?void 0:K.httpStatus)?(0,ne.$s)(A,G.intervalMillis,ua):(0,ne.$s)(A,G.intervalMillis),St={throttleEndTimeMillis:Date.now()+Mt,backoffCount:A+1};return G.setThrottleMetadata(le,St),cr.debug(`Calling attemptFetch again in ${Mt} millis`),ih(I,St,O,G)}}),Do.apply(this,arguments)}class oh{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let ac,zr;function uc(){return(uc=(0,k.Z)(function*(I,C,A,O,G){if(G&&G.global)I("event",A,O);else{const K=yield C;I("event",A,Object.assign(Object.assign({},O),{send_to:K}))}})).apply(this,arguments)}function Ds(){return(Ds=(0,k.Z)(function*(){if(!(0,ne.hl)())return cr.warn(_r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return cr.warn(_r.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Co(){return Co=(0,k.Z)(function*(I,C,A,O,G,K,le){var Ye;const ze=function ni(I){return _i.apply(this,arguments)}(I);ze.then(Xn=>{A[Xn.measurementId]=Xn.appId,I.options.measurementId&&Xn.measurementId!==I.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>cr.error(Xn)),C.push(ze);const ot=function wr(){return Ds.apply(this,arguments)}().then(Xn=>{if(Xn)return O.getId()}),[Mt,St]=yield Promise.all([ze,ot]);(function oc(I){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(nc)&&A.src.includes(I))return A;return null})(K)||function ic(I,C){const A=function rc(I,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(I,C)),A}("firebase-js-sdk-policy",{createScriptURL:as}),O=document.createElement("script"),G=`${nc}?l=${I}&id=${C}`;O.src=A?A?.createScriptURL(G):G,O.async=!0,document.head.appendChild(O)}(K,Mt.measurementId),zr&&(G("consent","default",zr),function lc(I){zr=I}(void 0)),G("js",new Date);const Gn=null!==(Ye=le?.config)&&void 0!==Ye?Ye:{};return Gn[Dt]="firebase",Gn.update=!0,null!=St&&(Gn[Im]=St),G("config",Mt.measurementId,Gn),ac&&(G("set",ac),function iu(I){ac=I}(void 0)),Mt.measurementId}),Co.apply(this,arguments)}class us{constructor(C){this.app=C}_delete(){return delete Et[this.app.options.appId],Promise.resolve()}}let Et={},lh=[];const Al={};let qi,On,da="dataLayer",ha=!1;function fa(I,C,A){!function dc(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((O,G)=>`(${G+1}) ${O}`).join(" "),A=_r.create("invalid-analytics-context",{errorInfo:C});cr.warn(A.message)}}();const O=I.options.appId;if(!O)throw _r.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw _r.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Et[O])throw _r.create("already-exists",{id:O});if(!ha){!function Dm(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(da);const{wrappedGtag:K,gtagCore:le}=function lr(I,C,A,O,G){let K=function(...le){window[O].push(arguments)};return window[G]&&"function"==typeof window[G]&&(K=window[G]),window[G]=function sc(I,C,A,O){function K(){return K=(0,k.Z)(function*(le,...Ye){try{if("event"===le){const[ze,ot]=Ye;yield function jt(I,C,A,O,G){return Gi.apply(this,arguments)}(I,C,A,ze,ot)}else if("config"===le){const[ze,ot]=Ye;yield function bl(I,C,A,O,G,K){return Ae.apply(this,arguments)}(I,C,A,O,ze,ot)}else if("consent"===le){const[ze]=Ye;I("consent","update",ze)}else if("get"===le){const[ze,ot,Mt]=Ye;I("get",ze,ot,Mt)}else if("set"===le){const[ze]=Ye;I("set",ze)}else I(le,...Ye)}catch(ze){cr.error(ze)}}),K.apply(this,arguments)}return function G(le){return K.apply(this,arguments)}}(K,I,C,A),{gtagCore:K,wrappedGtag:window[G]}}(Et,lh,Al,da,"gtag");On=K,qi=le,ha=!0}return Et[O]=function pn(I,C,A,O,G,K,le){return Co.apply(this,arguments)}(I,lh,Al,C,qi,da,A),new us(I)}function To(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,k.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const pa="@firebase/analytics";!function Er(){(0,Q.Xd)(new fe.wA(yn,(C,{options:A})=>fa(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,Q.Xd)(new fe.wA("analytics-internal",function I(C){try{const A=C.getProvider(yn).getImmediate();return{logEvent:(O,G,K)=>function ri(I,C,A,O){I=(0,ne.m9)(I),function Cm(I,C,A,O,G){return uc.apply(this,arguments)}(On,Et[I.app.options.appId],C,A,O).catch(G=>cr.error(G))}(A,O,G,K)}}catch(A){throw _r.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,Q.KN)(pa,"0.10.0"),(0,Q.KN)(pa,"0.10.0","esm2017")}();var wi=P(1954),si=P(2631);const ou=new class Or extends si.v{}(class ga extends wi.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(C,A,O):(C.flush(this),0)}});var Nl=P(6321),Ir=P(9397),So=P(5137),Pn=P(3093);const Wi=new p.GfV("7.6.1"),au="__angularfire_symbol__analyticsIsSupportedValue",Zi="__angularfire_symbol__analyticsIsSupported",Ao="__angularfire_symbol__remoteConfigIsSupportedValue",fc="__angularfire_symbol__remoteConfigIsSupported",uu="__angularfire_symbol__messagingIsSupportedValue",Mo="__angularfire_symbol__messagingIsSupported";function No(I,C,A){if(C){if(1===C.length)return C[0];const K=C.filter(le=>le.app===A);if(1===K.length)return K[0]}return A.container.getProvider(I).getImmediate({optional:!0})}globalThis[Zi]||(globalThis[Zi]=To().then(I=>globalThis[au]=I).catch(()=>globalThis[au]=!1)),globalThis[Mo]||(globalThis[Mo]=Eo().then(I=>globalThis[uu]=I).catch(()=>globalThis[uu]=!1)),globalThis[fc]||(globalThis[fc]=Hs().then(I=>globalThis[Ao]=I).catch(()=>globalThis[Ao]=!1));const ma=(I,C)=>{const A=C?[C]:(0,Y.C6)(),O=[];return A.forEach(G=>{G.container.getProvider(I).instances.forEach(le=>{O.includes(le)||O.push(le)})}),O};function bs(){}class Rl{constructor(C,A=ou){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,O){const G=this.zone;return this.delegate.schedule(function(le){G.runGuarded(()=>{C.apply(this,[le])})},A,O)}}class oi{constructor(C){this.zone=C,this.task=null}call(C,A){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),A.pipe((0,Ir.b)({next:O,complete:O,error:O})).subscribe(C).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ol=(()=>{class I{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Rl(Zone.current)),this.insideAngular=A.run(()=>new Rl(Zone.current,Nl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(A){return new(A||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function kn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function kl(I){return kn(),function gc(I){return function(A){return(A=A.lift(new oi(I.ngZone))).pipe((0,So.R)(I.outsideAngular),(0,Pn.Q)(I.insideAngular))}}(kn())(I)}},9058:(at,Ce,P)=>{P.d(Ce,{$s:()=>$e,BH:()=>ee,G6:()=>rr,L:()=>ue,LL:()=>Se,Pz:()=>_e,Sg:()=>Ee,UG:()=>q,US:()=>fe,ZB:()=>J,ZR:()=>Ie,aH:()=>re,b$:()=>Qt,eu:()=>de,hl:()=>ie,jU:()=>je,m9:()=>Jt,ne:()=>cn,pd:()=>bt,r3:()=>rn,ru:()=>ht,tV:()=>L,uI:()=>oe,vZ:()=>$n,w1:()=>hn,xO:()=>so,xb:()=>Yr,z$:()=>Pe,zI:()=>he,zd:()=>_t});const Q=function(U){const V=[];let W=0;for(let De=0;De<U.length;De++){let ae=U.charCodeAt(De);ae<128?V[W++]=ae:ae<2048?(V[W++]=ae>>6|192,V[W++]=63&ae|128):55296==(64512&ae)&&De+1<U.length&&56320==(64512&U.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&U.charCodeAt(++De)),V[W++]=ae>>18|240,V[W++]=ae>>12&63|128,V[W++]=ae>>6&63|128,V[W++]=63&ae|128):(V[W++]=ae>>12|224,V[W++]=ae>>6&63|128,V[W++]=63&ae|128)}return V},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,V){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<U.length;ae+=3){const tt=U[ae],Nt=ae+1<U.length,Tt=Nt?U[ae+1]:0,xr=ae+2<U.length,Pt=xr?U[ae+2]:0;let fr=(15&Tt)<<2|Pt>>6,Us=63&Pt;xr||(Us=64,Nt||(fr=64)),De.push(W[tt>>2],W[(3&tt)<<4|Tt>>4],W[fr],W[Us])}return De.join("")},encodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(U):this.encodeByteArray(Q(U),V)},decodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(U):function(U){const V=[];let W=0,De=0;for(;W<U.length;){const ae=U[W++];if(ae<128)V[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const tt=U[W++];V[De++]=String.fromCharCode((31&ae)<<6|63&tt)}else if(ae>239&&ae<365){const xr=((7&ae)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;V[De++]=String.fromCharCode(55296+(xr>>10)),V[De++]=String.fromCharCode(56320+(1023&xr))}else{const tt=U[W++],Nt=U[W++];V[De++]=String.fromCharCode((15&ae)<<12|(63&tt)<<6|63&Nt)}}return V.join("")}(this.decodeStringToByteArray(U,V))},decodeStringToByteArray(U,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<U.length;){const tt=W[U.charAt(ae++)],Tt=ae<U.length?W[U.charAt(ae)]:0;++ae;const Pt=ae<U.length?W[U.charAt(ae)]:64;++ae;const Yt=ae<U.length?W[U.charAt(ae)]:64;if(++ae,null==tt||null==Tt||null==Pt||null==Yt)throw new pe;De.push(tt<<2|Tt>>4),64!==Pt&&(De.push(Tt<<4&240|Pt>>2),64!==Yt&&De.push(Pt<<6&192|Yt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ue=function(U){return function(U){const V=Q(U);return fe.encodeByteArray(V,!0)}(U).replace(/\./g,"")},L=function(U){try{return fe.decodeString(U,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(U,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!Ve(W)||(U[W]=J(U[W],V[W]));return U}function Ve(U){return"__proto__"!==U}const Oe=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=U&&L(U[1]);return V&&JSON.parse(V)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},re=()=>{var U;return null===(U=Oe())||void 0===U?void 0:U.config},_e=U=>{var V;return null===(V=Oe())||void 0===V?void 0:V[`_${U}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,De)=>{W?this.reject(W):this.resolve(De),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,De))}}}function Ee(U,V){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=V||"demo-project",ae=U.iat||0,tt=U.sub||U.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Nt)),""].join(".")}function Pe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function q(){var U;const V=null===(U=Oe())||void 0===U?void 0:U.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return"object"==typeof self&&self.self===self}function ht(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hn(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function rr(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((U,V)=>{try{let W=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),W||self.indexedDB.deleteDatabase(De),U(!0)},ae.onupgradeneeded=()=>{W=!1},ae.onerror=()=>{var tt;V((null===(tt=ae.error)||void 0===tt?void 0:tt.message)||"")}}catch(W){V(W)}})}function he(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(V,W,De){super(W),this.code=V,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(V,W,De){this.service=V,this.serviceName=W,this.errors=De}create(V,...W){const De=W[0]||{},ae=`${this.service}/${V}`,tt=this.errors[V],Nt=tt?function Ze(U,V){return U.replace(Ge,(W,De)=>{const ae=V[De];return null!=ae?String(ae):`<${De}?>`})}(tt,De):"Error";return new Ie(ae,`${this.serviceName}: ${Nt} (${ae}).`,De)}}const Ge=/\{\$([^}]+)}/g;function rn(U,V){return Object.prototype.hasOwnProperty.call(U,V)}function Yr(U){for(const V in U)if(Object.prototype.hasOwnProperty.call(U,V))return!1;return!0}function $n(U,V){if(U===V)return!0;const W=Object.keys(U),De=Object.keys(V);for(const ae of W){if(!De.includes(ae))return!1;const tt=U[ae],Nt=V[ae];if(Qr(tt)&&Qr(Nt)){if(!$n(tt,Nt))return!1}else if(tt!==Nt)return!1}for(const ae of De)if(!W.includes(ae))return!1;return!0}function Qr(U){return null!==U&&"object"==typeof U}function so(U){const V=[];for(const[W,De]of Object.entries(U))Array.isArray(De)?De.forEach(ae=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(ae))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(De));return V.length?"&"+V.join("&"):""}function _t(U){const V={};return U.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,tt]=De.split("=");V[decodeURIComponent(ae)]=decodeURIComponent(tt)}}),V}function bt(U){const V=U.indexOf("?");if(!V)return"";const W=U.indexOf("#",V);return U.substring(V,W>0?W:void 0)}function cn(U,V){const W=new En(U,V);return W.subscribe.bind(W)}class En{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(De=>{this.error(De)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,De){let ae;if(void 0===V&&void 0===W&&void 0===De)throw new Error("Missing Observer.");ae=function tn(U,V){if("object"!=typeof U||null===U)return!1;for(const W of V)if(W in U&&"function"==typeof U[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:De},void 0===ae.next&&(ae.next=Rn),void 0===ae.error&&(ae.error=Rn),void 0===ae.complete&&(ae.complete=Rn);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),tt}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}const ns=1e3,ye=2,H=144e5,ge=.5;function $e(U,V=ns,W=ye){const De=V*Math.pow(W,U),ae=Math.round(ge*De*(Math.random()-.5)*2);return Math.min(H,De+ae)}function Jt(U){return U&&U._delegate?U._delegate:U}},1194:(at,Ce,P)=>{var p=P(5879);let Y=null;function k(){return Y}class ne{}const fe=new p.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(ue)},providedIn:"platform"})}return n})();const xe=new p.OlP("Location Initialized");let ue=(()=>{class n extends pe{constructor(){super(),this._doc=(0,p.f3M)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function L(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(qe)},providedIn:"root"})}return n})();const Te=new p.OlP("appBaseHref");let qe=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+J(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+J(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(pe),p.LFG(Te,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Re=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=L(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+J(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+J(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(pe),p.LFG(Te,8))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})(),We=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function re(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(lt(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function ct(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=J;static#t=this.joinWithSlash=L;static#n=this.stripTrailingSlash=j;static#r=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ve))};static#i=this.\u0275prov=p.Yz7({token:n,factory:function(){return function Oe(){return new We((0,p.LFG)(Ve))}()},providedIn:"root"})}return n})();function lt(n){return n.replace(/\/index.html$/,"")}class oo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ha=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new oo(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),nl(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{nl(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function nl(n,e){n.context.$implicit=e.item}let Ko=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zf("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zf("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class dm{constructor(){this.$implicit=null,this.ngIf=null}}function zf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}class Gu{createSubscription(e,t){return(0,p.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,p.rg0)(()=>e.unsubscribe())}}class Nr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const il=new Nr,zu=new Gu;let Qo=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return il;if((0,p.F4k)(t))return zu;throw function xi(n,e){return new p.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.sBO,16))};static#t=this.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Sn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();function _s(n){return"server"===n}let ir=(()=>{class n{static#e=this.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new ws((0,p.LFG)(fe),window)})}return n})();class ws{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Es(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Qd extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Xu extends Qd{static makeCurrent(){!function Q(n){Y||(Y=n)}(new Xu)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xf(){return tu=tu||document.querySelector("base"),tu?tu.getAttribute("href"):null}();return null==t?null:function wm(n){_l=_l||document.createElement("a"),_l.setAttribute("href",n);const e=_l.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Wo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _l,tu=null,ep=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const El=new p.OlP("EventManagerPlugins");let tp=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(El),p.LFG(p.R0b))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class ec{constructor(e){this._doc=e}}const nu="ng-app-id";let np=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_s(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${nu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(nu),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(nu,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const yo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},os=/%COMP%/g,Hi=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nn(n,e){return e.map(t=>t.replace(os,n))}let _o=(()=>{class n{constructor(t,r,o,u,l,m,E,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=E,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=_s(m),this.defaultRenderer=new wo(t,l,E,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===p.ifc.ShadowDom&&(r={...r,encapsulation:p.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof sp?o.applyToHost(t):o instanceof vr&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,E=this.eventManager,b=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,R=this.platformIsServer;switch(r.encapsulation){case p.ifc.Emulated:u=new sp(E,b,r,this.appId,M,l,m,R);break;case p.ifc.ShadowDom:return new Eo(E,b,t,r,l,m,this.nonce,R);default:u=new vr(E,b,r,M,l,m,R)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(tp),p.LFG(np),p.LFG(p.AFp),p.LFG(Hi),p.LFG(fe),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();class wo{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(yo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Il(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Il(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=yo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=yo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Il(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Eo extends wo{constructor(e,t,r,o,u,l,m,E){super(e,u,l,E),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=nn(o.id,o.styles);for(const M of b){const R=document.createElement("style");m&&R.setAttribute("nonce",m),R.textContent=M,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vr extends wo{constructor(e,t,r,o,u,l,m,E){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=E?nn(E,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class sp extends vr{constructor(e,t,r,o,u,l,m,E){const b=o+"-"+r.id;super(e,t,r,u,l,m,E,b),this.contentAttr=function Xd(n){return"_ngcontent-%COMP%".replace(os,n)}(b),this.hostAttr=function eh(n){return"_nghost-%COMP%".replace(os,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let aa=(()=>{class n extends ec{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const op=["alt","control","meta","shift"],ti={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ap={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Dl=(()=>{class n extends ec{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),op.forEach(b=>{const M=r.indexOf(b);M>-1&&(r.splice(M,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const E={};return E.domEventName=o,E.fullKey=l,E}static matchEventFullKeyCode(t,r){let o=ti[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),op.forEach(l=>{l!==o&&(0,ap[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();const cr=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Dt(){Xu.makeCurrent()},multi:!0},{provide:fe,useFactory:function nh(){return(0,p.RDi)(document),document},deps:[]}]),rh=new p.OlP(""),_r=[{provide:p.rWj,useClass:class wl{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new p.vHH(5103,!1);return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(E){l=l||E,u--,0==u&&r(l)};o.forEach(E=>{E.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],as=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function th(){return new p.qLn},deps:[]},{provide:El,useClass:aa,multi:!0,deps:[fe,p.R0b,p.Lbi]},{provide:El,useClass:Dl,multi:!0,deps:[fe]},_o,np,tp,{provide:p.FYo,useExisting:_o},{provide:class Ri{},useClass:ep,deps:[]},[]];let Cl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(rh,12))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({providers:[...as,..._r],imports:[Sn,p.hGG]})}return n})(),Ae=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(fe))};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(r){let o=null;return o=r?new r:function bl(){return new Ae((0,p.LFG)(fe))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;var Gr=P(5592),ca=P(4674),An=P(2459),mt=P(2096),zr=P(5619);const{isArray:lc}=Array,{getPrototypeOf:iu,prototype:wr,keys:Ds}=Object;function pn(n){if(1===n.length){const e=n[0];if(lc(e))return{args:e,keys:null};if(function Co(n){return n&&"object"==typeof n&&iu(n)===wr}(e)){const t=Ds(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var us=P(2737),Et=P(7398);const{isArray:lh}=Array;function da(n){return(0,Et.U)(e=>function Al(n,e){return lh(e)?n(...e):n(e)}(n,e))}var zi=P(4564);function qi(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var On=P(8251),ha=P(7103);function bo(...n){const e=(0,zi.yG)(n),t=(0,zi.jO)(n),{args:r,keys:o}=pn(n);if(0===r.length)return(0,An.D)([],e);const u=new Gr.y(function dc(n,e,t=us.y){return r=>{fa(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let E=0;E<o;E++)fa(e,()=>{const b=(0,An.D)(n[E],e);let M=!1;b.subscribe((0,On.x)(r,R=>{u[E]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>qi(o,l):us.y));return t?u.pipe(da(t)):u}function fa(n,e,t){n?(0,ha.f)(t,n,e):e()}const Ks=(0,P(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var To=P(7537);function cs(...n){return function Ys(){return(0,To.J)(1)}()((0,An.D)(n,(0,zi.yG)(n)))}var Ml=P(4829);function xl(n){return new Gr.y(e=>{(0,Ml.Xf)(n()).subscribe(e)})}var hc=P(8407);function su(n,e){const t=(0,ca.m)(n)?n:()=>n,r=o=>o.error(t());return new Gr.y(e?o=>e.schedule(r,0,o):r)}var Cs=P(6232),dh=P(7394),ri=P(9360);function hh(){return(0,ri.e)((n,e)=>{let t=null;n._refCount++;const r=(0,On.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pa extends Gr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ri.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,On.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dh.w0.EMPTY)}return e}refCount(){return hh()(this)}}var ii=P(8645),Er=P(4664);function wi(n){return n<=0?()=>Cs.E:(0,ri.e)((e,t)=>{let r=0;e.subscribe((0,On.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function ga(...n){const e=(0,zi.yG)(n);return(0,ri.e)((t,r)=>{(e?cs(n,t,e):cs(n,t)).subscribe(r)})}function si(n,e){return(0,ri.e)((t,r)=>{let o=0;t.subscribe((0,On.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Or=P(1631);function ou(n){return(0,ri.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function fh(n=Nl){return(0,ri.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Nl(){return new Ks}function Ir(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((o,u)=>n(o,u,r)):us.y,wi(1),t?ou(e):fh(()=>new Ks))}function So(n,e){return(0,ca.m)(e)?(0,Or.z)(n,e,1):(0,Or.z)(n,1)}var Pn=P(9397);function Wi(n){return(0,ri.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,On.x)(t,void 0,void 0,l=>{u=(0,Ml.Xf)(n(l,Wi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Zi(n,e){return(0,ri.e)(function au(n,e,t,r,o){return(u,l)=>{let m=t,E=e,b=0;u.subscribe((0,On.x)(l,M=>{const R=b++;E=m?n(E,M,R):(m=!0,M),r&&l.next(E)},o&&(()=>{m&&l.next(E),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ao(n){return n<=0?()=>Cs.E:(0,ri.e)((e,t)=>{let r=[];e.subscribe((0,On.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Mo(n){return(0,ri.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var pc=P(2420);const kt="primary",xo=Symbol("RouteTitle");class No{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ma(n){return new No(n)}function bs(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function oi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Ol(n[o],e[o]))return!1;return!0}function Ol(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function kn(n){return n.length>0?n[n.length-1]:null}function Ki(n){return function la(n){return!!n&&(n instanceof Gr.y||(0,ca.m)(n.lift)&&(0,ca.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,An.D)(Promise.resolve(n)):(0,mt.of)(n)}const Qs={exact:function gc(n,e,t){if(!le(n.segments,e.segments)||!C(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!gc(n.children[r],e.children[r],t))return!1;return!0},subset:va},Pl={exact:function kl(n,e){return oi(n,e)},subset:function ya(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ol(n[t],e[t]))},ignored:()=>!0};function dp(n,e,t){return Qs[t.paths](n.root,e.root,t.matrixParams)&&Pl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function va(n,e,t){return I(n,e,e.segments,t)}function I(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!le(o,t)||e.hasChildren()||!C(o,t,r))}if(n.segments.length===t.length){if(!le(n.segments,t)||!C(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!va(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(le(n.segments,o)&&C(n.segments,o,r)&&n.children[kt])&&I(n.children[kt],e,u,r)}}function C(n,e,t){return e.every((r,o)=>Pl[t](n[o].parameters,r.parameters))}class A{constructor(e=new O([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ma(this.queryParams)),this._queryParamMap}toString(){return Mt.serialize(this)}}class O{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return St(this)}}class G{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ma(this.parameters)),this._parameterMap}toString(){return ai(this)}}function le(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ze=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return new ot},providedIn:"root"})}return n})();class ot{parse(e){const t=new mc(e);return new A(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gn(e.root,!0)}`,r=function bm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ts(t)}=${Ts(o)}`).join("&"):`${Ts(t)}=${Ts(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function zn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Mt=new ot;function St(n){return n.segments.map(e=>ai(e)).join("/")}function Gn(n,e){if(!n.hasChildren())return St(n);if(e){const t=n.children[kt]?Gn(n.children[kt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==kt&&r.push(`${o}:${Gn(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ye(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===kt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==kt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===kt?[Gn(n.children[kt],!1)]:[`${o}:${Gn(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${St(n)}/${t[0]}`:`${St(n)}/(${t.join("//")})`}}function Xn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ts(n){return Xn(n).replace(/%3B/gi,";")}function Ss(n){return Xn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dr(n){return decodeURIComponent(n)}function ls(n){return dr(n.replace(/\+/g,"%20"))}function ai(n){return`${Ss(n.path)}${function _a(n){return Object.keys(n).map(e=>`;${Ss(e)}=${Ss(n[e])}`).join("")}(n.parameters)}`}const hp=/^[^\/()?;#]+/;function Ro(n){const e=n.match(hp);return e?e[0]:""}const Tm=/^[^\/()?;=#]+/,Sm=/^[^=?&#]+/,Yi=/^[^&#]+/;class mc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new O(e,t)),r}parseSegment(){const e=Ro(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new G(dr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function fp(n){const e=n.match(Tm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ro(this.remaining);o&&(r=o,this.capture(r))}e[dr(t)]=dr(r)}parseQueryParam(e){const t=function t_(n){const e=n.match(Sm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function pp(n){const e=n.match(Yi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=ls(t),u=ls(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ro(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new p.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[kt]:new O([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function n_(n){return n.segments.length>0?new O([],{[kt]:n}):n}function gp(n){const e={};for(const r of Object.keys(n.children)){const u=gp(n.children[r]);if(r===kt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Am(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new O(n.segments.concat(e.segments),e.children)}return n}(new O(n.segments,e))}function cu(n){return n instanceof A}function wa(n){let e;const o=n_(function t(u){const l={};for(const E of u.children){const b=t(E);l[E.outlet]=b}const m=new O(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function Mm(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return yc(o,o,o,t,r);const u=function r_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Fl(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([E,b])=>{m[E]="string"==typeof b?b.split("/"):b}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Fl(t,e,r)}(e);if(u.toRoot())return yc(o,o,new O([],{}),t,r);const l=function i_(n,e,t){if(n.isAbsolute)return new Po(e,!0,0);if(!t)return new Po(e,!1,NaN);if(null===t.parent)return new Po(t,!0,0);const r=gh(n.commands[0])?0:1;return function xm(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new p.vHH(4005,!1);o=r.segments.length}return new Po(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?vc(l.segmentGroup,l.index,u.commands):Vl(l.segmentGroup,l.index,u.commands);return yc(o,l.segmentGroup,m,t,r)}function gh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Oo(n){return"object"==typeof n&&null!=n&&n.outlets}function yc(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([E,b])=>{u[E]=Array.isArray(b)?b.map(M=>`${M}`):`${b}`}),l=n===e?t:mh(n,e,t);const m=n_(gp(l));return new A(m,u,o)}function mh(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:mh(u,e,t)}),new O(n.segments,r)}class Fl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gh(r[0]))throw new p.vHH(4003,!1);const o=r.find(Oo);if(o&&o!==kn(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Po{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vl(n,e,t){if(n||(n=new O([],{})),0===n.segments.length&&n.hasChildren())return vc(n,e,t);const r=function s_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(Oo(m))break;const E=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&b&&"object"==typeof b&&void 0===b.outlets){if(!yh(E,b,l))return u;r+=2}else{if(!yh(E,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new O(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new O(n.segments.slice(r.pathIndex),n.children),vc(u,0,o)}return r.match&&0===o.length?new O(n.segments,{}):r.match&&!n.hasChildren()?mp(n,e,t):r.match?vc(n,0,o):mp(n,e,t)}function vc(n,e,t){if(0===t.length)return new O(n.segments,{});{const r=function Ll(n){return Oo(n[0])?n[0].outlets:{[kt]:n}}(t),o={};if(Object.keys(r).some(u=>u!==kt)&&n.children[kt]&&1===n.numberOfChildren&&0===n.children[kt].segments.length){const u=vc(n.children[kt],e,t);return new O(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=Vl(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new O(n.segments,o)}}function mp(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Oo(u)){const E=_c(u.outlets);return new O(r,E)}if(0===o&&gh(t[0])){r.push(new G(n.segments[e].path,lu(t[0]))),o++;continue}const l=Oo(u)?u.outlets[kt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&gh(m)?(r.push(new G(l,lu(m))),o+=2):(r.push(new G(l,{})),o++)}return new O(r,{})}function _c(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=mp(new O([],{}),0,r))}),e}function lu(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yh(n,e,t){return n==t.path&&oi(e,t.parameters)}const vh="imperative";class As{constructor(e,t){this.id=e,this.url=t}}class wc extends As{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends As{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ul extends As{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ec extends As{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class du extends As{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Bl extends As{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nm extends As{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o_ extends As{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yp extends As{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class LE extends As{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rm{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class VE{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class a_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $l{}class Om{constructor(e){this.url=e}}class l_{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ic,this.attachRef=null}}let Ic=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new l_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _p{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_h(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_h(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Dc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Dc(e,this._root).map(t=>t.value)}}function _h(n,e){if(n===e.value)return e;for(const t of e.children){const r=_h(n,t);if(r)return r}return null}function Dc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Dc(n,t);if(r.length)return r.unshift(e),r}return[]}class Pi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ei extends _p{constructor(e,t){super(e),this.snapshot=t,wp(this,e)}toString(){return this.snapshot.toString()}}function fu(n,e){const t=function pu(n,e){const l=new mu([],{},{},"",{},kt,e,null,{});return new bc("",new Pi(l,[]))}(0,e),r=new zr.X([new G("",{})]),o=new zr.X({}),u=new zr.X({}),l=new zr.X({}),m=new zr.X(""),E=new gu(r,o,l,m,u,kt,e,t.root);return E.snapshot=t.root,new Ei(new Pi(E,[]),t)}class gu{constructor(e,t,r,o,u,l,m,E){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=E,this.title=this.dataSubject?.pipe((0,Et.U)(b=>b[xo]))??(0,mt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>ma(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>ma(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Cc(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mu{get title(){return this.data?.[xo]}constructor(e,t,r,o,u,l,m,E,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=E,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ma(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ma(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bc extends _p{constructor(e,t){super(t),this.url=e,wp(this,t)}toString(){return Fo(this._root)}}function wp(n,e){e.value._routerState=n,e.children.forEach(t=>wp(n,t))}function Fo(n){const e=n.children.length>0?` { ${n.children.map(Fo).join(", ")} } `:"";return`${n.value}${e}`}function wh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,oi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),oi(e.params,t.params)||n.paramsSubject.next(t.params),function Rl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!oi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),oi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Eh(n,e){const t=oi(n.params,e.params)&&function K(n,e){return le(n,e)&&n.every((t,r)=>oi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Eh(n.parent,e.parent))}let Ih=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=kt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Ic),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(Gl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,E=new d_(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:E,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]})}return n})();class d_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===gu?this.route:e===Ic?this.childContexts:this.parent.get(e,t)}}const Gl=new p.OlP("");let Ii=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=bo([r.queryParams,r.params,r.data]).pipe((0,Er.w)(([u,l,m],E)=>(m={...u,...l,...m},0===E?(0,mt.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,p.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function yu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function h_(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return yu(n,r,o);return yu(n,r)})}(n,e,t);return new Pi(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>yu(n,m)),l}}const r=function er(n){return new gu(new zr.X(n.url),new zr.X(n.params),new zr.X(n.queryParams),new zr.X(n.fragment),new zr.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>yu(n,u));return new Pi(r,o)}}const Lo="ngNavigationCancelingError";function Ch(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=zl(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function zl(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Lo]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ea(n){return n&&n[Lo]}let Ep=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(r,o){1&r&&p._UZ(0,"router-outlet")},dependencies:[Ih],encapsulation:2})}return n})();function B(n){const e=n.children&&n.children.map(B),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=Ep),t}function Z(n){return n.outlet||kt}function Ue(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Fn{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=hu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=hu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=hu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=hu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new u_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new jl(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(wh(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),wh(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Ue(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Qi{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ia{constructor(e,t){this.component=e,this.route=t}}function vu(n,e,t){const r=n._root;return Ca(r,e?e._root:null,t,[r.value])}function Da(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Ca(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=hu(e);return n.children.forEach(l=>{(function Sc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const E=function km(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!le(n.url,e.url);case"pathParamsOrQueryParamsChange":return!le(n.url,e.url)||!oi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eh(n,e)||!oi(n.queryParams,e.queryParams);default:return!Eh(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Qi(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Ca(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ia(m.outlet.component,l))}else l&&Ac(e,m,o),o.canActivateChecks.push(new Qi(r)),Ca(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>Ac(m,t.getContext(l),o)),o}function Ac(n,e,t){const r=hu(n),o=n.value;Object.entries(r).forEach(([u,l])=>{Ac(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Ia(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function _u(n){return"function"==typeof n}function jE(n){return n instanceof Ks||"EmptyError"===n?.name}const bh=Symbol("INITIAL_VALUE");function ql(){return(0,Er.w)(n=>bo(n.map(e=>e.pipe(wi(1),ga(bh)))).pipe((0,Et.U)(e=>{for(const t of e)if(!0!==t){if(t===bh)return bh;if(!1===t||t instanceof A)return t}return!0}),si(e=>e!==bh),wi(1)))}function m_(n){return(0,hc.z)((0,Pn.b)(e=>{if(cu(e))throw Ch(0,e)}),(0,Et.U)(e=>!0===e))}class Dp{constructor(e){this.segmentGroup=e||null}}class Cp{constructor(e){this.urlTree=e}}function ba(n){return su(new Dp(n))}function v_(n){return su(new Cp(n))}class qE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,mt.of)(r);if(o.numberOfChildren>1||!o.children[kt])return su(new p.vHH(4e3,!1));o=o.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new A(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,E])=>{l[m]=this.createSegmentGroup(e,E,r,o)}),new O(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new p.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const bp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tp(n,e,t,r,o){const u=w_(n,e,t);return u.matched?(r=function Pm(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function y_(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,mt.of)(!0);const u=o.map(l=>{const m=Da(l,n);return Ki(function g_(n){return n&&_u(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,mt.of)(u).pipe(ql(),m_())}(r,e,t).pipe((0,Et.U)(l=>!0===l?u:{...bp}))):(0,mt.of)(u)}function w_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...bp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||bs)(t,n,e);if(!o)return{...bp};const u={};Object.entries(o.posParams??{}).forEach(([m,E])=>{u[m]=E.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function E_(n,e,t,r){return t.length>0&&function LT(n,e,t){return t.some(r=>Sp(n,e,r)&&Z(r)!==kt)}(n,t,r)?{segmentGroup:new O(e,FT(r,new O(t,n.children))),slicedSegments:[]}:0===t.length&&function WE(n,e,t){return t.some(r=>Sp(n,e,r))}(n,t,r)?{segmentGroup:new O(n.segments,kT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new O(n.segments,n.children),slicedSegments:t}}function kT(n,e,t,r,o){const u={};for(const l of r)if(Sp(n,t,l)&&!o[Z(l)]){const m=new O([],{});u[Z(l)]=m}return{...o,...u}}function FT(n,e){const t={};t[kt]=e;for(const r of n)if(""===r.path&&Z(r)!==kt){const o=new O([],{});t[Z(r)]=o}return t}function Sp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class VT{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new qE(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=E_(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,kt).pipe(Wi(t=>{if(t instanceof Cp)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dp?this.noMatchError(t):t}),(0,Et.U)(t=>{const r=new mu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},kt,this.rootComponentType,null,{}),o=new Pi(r,t),u=new bc("",o),l=function FE(n,e,t=null,r=null){return Mm(wa(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,kt).pipe(Wi(r=>{throw r instanceof Dp?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Hl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,An.D)(o).pipe(So(u=>{const l=r.children[u],m=function ke(n,e){const t=n.filter(r=>Z(r)===e);return t.push(...n.filter(r=>Z(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),Zi((u,l)=>(u.push(...l),u)),ou(null),function fc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((o,u)=>n(o,u,r)):us.y,Ao(1),t?ou(e):fh(()=>new Ks))}(),(0,Or.z)(u=>{if(null===u)return ba(r);const l=ZE(u);return function UT(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,mt.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,An.D)(t).pipe(So(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(Wi(E=>{if(E instanceof Dp)return(0,mt.of)(null);throw E}))),Ir(m=>!!m),Wi(m=>{if(jE(m))return function I_(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,mt.of)([]):ba(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function jm(n,e,t,r){return!!(Z(n)===r||r!==kt&&Sp(e,t,n))&&("**"===n.path||w_(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):ba(o):ba(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?v_(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Or.z)(l=>{const m=new O(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:E,remainingSegments:b,positionalParamSegments:M}=w_(t,o,u);if(!m)return ba(t);const R=this.applyRedirects.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?v_(R):this.applyRedirects.lineralizeSegments(o,R).pipe((0,Or.z)($=>this.processSegment(e,r,t,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const E=o.length>0?kn(o).parameters:{},b=new mu(o,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YE(r),Z(r),r.component??r._loadedComponent??null,r,Zl(r));m=(0,mt.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=Tp(t,r,o,e).pipe((0,Et.U)(({matched:E,consumedSegments:b,remainingSegments:M,parameters:R})=>E?{snapshot:new mu(b,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YE(r),Z(r),r.component??r._loadedComponent??null,r,Zl(r)),consumedSegments:b,remainingSegments:M}:null));return m.pipe((0,Er.w)(E=>null===E?ba(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Er.w)(({routes:b})=>{const M=r._loadedInjector??e,{snapshot:R,consumedSegments:$,remainingSegments:te}=E,{segmentGroup:be,slicedSegments:Be}=E_(t,$,te,b);if(0===Be.length&&be.hasChildren())return this.processChildren(M,b,be).pipe((0,Et.U)(pt=>null===pt?null:[new Pi(R,pt)]));if(0===b.length&&0===Be.length)return(0,mt.of)([new Pi(R,[])]);const He=Z(r)===u;return this.processSegment(M,b,be,Be,He?kt:u,!0).pipe((0,Et.U)(pt=>[new Pi(R,pt)]))}))))}getChildConfig(e,t,r){return t.children?(0,mt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,mt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function zE(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,mt.of)(!0);const u=o.map(l=>{const m=Da(l,n);return Ki(function p_(n){return n&&_u(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,mt.of)(u).pipe(ql(),m_())}(e,t,r).pipe((0,Or.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Pn.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Bm(n){return su(zl(!1,3))}())):(0,mt.of)({routes:[],injector:e})}}function rx(n){const e=n.value.routeConfig;return e&&""===e.path}function ZE(n){const e=[],t=new Set;for(const r of n){if(!rx(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=ZE(r.children);e.push(new Pi(r.value,o))}return e.filter(r=>!t.has(r))}function YE(n){return n.data||{}}function Zl(n){return n.resolve||{}}function tI(n){return"string"==typeof n.title||null===n.title}function C_(n){return(0,Er.w)(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,Et.U)(()=>e)):(0,mt.of)(e)})}const Sh=new p.OlP("ROUTES");let b_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,mt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ki(t.loadComponent()).pipe((0,Et.U)(Ah),(0,Pn.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Mo(()=>{this.componentLoaders.delete(t)})),o=new pa(r,()=>new ii.x).pipe(hh());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,mt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function BT(n,e,t,r){return Ki(n.loadChildren()).pipe((0,Et.U)(Ah),(0,Or.z)(o=>o instanceof p.YKP||Array.isArray(o)?(0,mt.of)(o):(0,An.D)(e.compileModuleAsync(o))),(0,Et.U)(o=>{r&&r(n);let u,l,m=!1;return Array.isArray(o)?(l=o,!0):(u=o.create(t).injector,l=u.get(Sh,[],{optional:!0,self:!0}).flat()),{routes:l.map(B),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(r)})),l=new pa(u,()=>new ii.x).pipe(hh());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ah(n){return function Mc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Hm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ii.x,this.transitionAbortSubject=new ii.x,this.configLoader=(0,p.f3M)(b_),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(ze),this.rootContexts=(0,p.f3M)(Ic),this.inputBindingEnabled=null!==(0,p.f3M)(Gl,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,mt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new VE(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Rm(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new zr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vh,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(si(u=>0!==u.id),(0,Et.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,Er.w)(u=>{this.currentTransition=u;let l=!1,m=!1;return(0,mt.of)(u).pipe((0,Pn.b)(E=>{this.currentNavigation={id:E.id,initialUrl:E.rawUrl,extractedUrl:E.extractedUrl,trigger:E.source,extras:E.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Er.w)(E=>{const b=E.currentBrowserUrl.toString(),M=!t.navigated||E.extractedUrl.toString()!==b||b!==E.currentUrlTree.toString();if(!M&&"reload"!==(E.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const $="";return this.events.next(new Ec(E.id,this.urlSerializer.serialize(E.rawUrl),$,0)),E.resolve(null),Cs.E}if(t.urlHandlingStrategy.shouldProcessUrl(E.rawUrl))return(0,mt.of)(E).pipe((0,Er.w)($=>{const te=this.transitions?.getValue();return this.events.next(new wc($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),te!==this.transitions?.getValue()?Cs.E:Promise.resolve($)}),function $m(n,e,t,r,o,u){return(0,Or.z)(l=>function Th(n,e,t,r,o,u,l="emptyOnly"){return new VT(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Et.U)(({state:m,tree:E})=>({...l,targetSnapshot:m,urlAfterRedirects:E}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Pn.b)($=>{u.targetSnapshot=$.targetSnapshot,u.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:$.urlAfterRedirects};const te=new Bl($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(te)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(E.currentRawUrl)){const{id:$,extractedUrl:te,source:be,restoredState:Be,extras:He}=E,pt=new wc($,this.urlSerializer.serialize(te),be,Be);this.events.next(pt);const At=fu(0,this.rootComponentType).snapshot;return this.currentTransition=u={...E,targetSnapshot:At,urlAfterRedirects:te,extras:{...He,skipLocationChange:!1,replaceUrl:!1}},(0,mt.of)(u)}{const $="";return this.events.next(new Ec(E.id,this.urlSerializer.serialize(E.extractedUrl),$,1)),E.resolve(null),Cs.E}}),(0,Pn.b)(E=>{const b=new Nm(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}),(0,Et.U)(E=>(this.currentTransition=u={...E,guards:vu(E.targetSnapshot,E.currentSnapshot,this.rootContexts)},u)),function Wl(n,e){return(0,Or.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,mt.of)({...t,guardsResult:!0}):function $E(n,e,t,r){return(0,An.D)(n).pipe((0,Or.z)(o=>function GE(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,mt.of)(!0);const l=u.map(m=>{const E=Ue(e)??o,b=Da(m,E);return Ki(function Vm(n){return n&&_u(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):E.runInContext(()=>b(n,e,t,r))).pipe(Ir())});return(0,mt.of)(l).pipe(ql())}(o.component,o.route,t,e,r)),Ir(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Or.z)(m=>m&&function Fm(n){return"boolean"==typeof n}(m)?function HE(n,e,t,r){return(0,An.D)(e).pipe(So(o=>cs(function nx(n,e){return null!==n&&e&&e(new a_(n)),(0,mt.of)(!0)}(o.route.parent,r),function OT(n,e){return null!==n&&e&&e(new vp(n)),(0,mt.of)(!0)}(o.route,r),function PT(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Tc(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xl(()=>{const m=l.guards.map(E=>{const b=Ue(l.node)??t,M=Da(E,b);return Ki(function Lm(n){return n&&_u(n.canActivateChild)}(M)?M.canActivateChild(r,n):b.runInContext(()=>M(r,n))).pipe(Ir())});return(0,mt.of)(m).pipe(ql())}));return(0,mt.of)(u).pipe(ql())}(n,o.path,t),function Um(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const o=r.map(u=>xl(()=>{const l=Ue(e)??t,m=Da(u,l);return Ki(function Ip(n){return n&&_u(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Ir())}));return(0,mt.of)(o).pipe(ql())}(n,o.route,t))),Ir(o=>!0!==o,!0))}(r,u,n,e):(0,mt.of)(m)),(0,Et.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,E=>this.events.next(E)),(0,Pn.b)(E=>{if(u.guardsResult=E.guardsResult,cu(E.guardsResult))throw Ch(0,E.guardsResult);const b=new o_(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot,!!E.guardsResult);this.events.next(b)}),si(E=>!!E.guardsResult||(this.cancelNavigationTransition(E,"",3),!1)),C_(E=>{if(E.guards.canActivateChecks.length)return(0,mt.of)(E).pipe((0,Pn.b)(b=>{const M=new yp(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}),(0,Er.w)(b=>{let M=!1;return(0,mt.of)(b).pipe(function D_(n,e){return(0,Or.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,mt.of)(t);let u=0;return(0,An.D)(o).pipe(So(l=>function QE(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!tI(o)&&(u[xo]=o.title),function JE(n,e,t,r){const o=function XE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,mt.of)({});const u={};return(0,An.D)(o).pipe((0,Or.z)(l=>function eI(n,e,t,r){const o=Ue(e)??r,u=Da(n,o);return Ki(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Ir(),(0,Pn.b)(m=>{u[l]=m}))),Ao(1),function uu(n){return(0,Et.U)(()=>n)}(u),Wi(l=>jE(l)?Cs.E:su(l)))}(u,n,e,r).pipe((0,Et.U)(l=>(n._resolvedData=l,n.data=Hl(n,t).resolve,o&&tI(o)&&(n.data[xo]=o.title),null)))}(l.route,r,n,e)),(0,Pn.b)(()=>u++),Ao(1),(0,Or.z)(l=>u===o.length?(0,mt.of)(t):Cs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Pn.b)({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(b,"",2)}}))}),(0,Pn.b)(b=>{const M=new LE(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(M)}))}),C_(E=>{const b=M=>{const R=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&R.push(this.configLoader.loadComponent(M.routeConfig).pipe((0,Pn.b)($=>{M.component=$}),(0,Et.U)(()=>{})));for(const $ of M.children)R.push(...b($));return R};return bo(b(E.targetSnapshot.root)).pipe(ou(),wi(1))}),C_(()=>this.afterPreactivation()),(0,Et.U)(E=>{const b=function Dh(n,e,t){const r=yu(n,e._root,t?t._root:void 0);return new Ei(r,e)}(t.routeReuseStrategy,E.targetSnapshot,E.currentRouterState);return this.currentTransition=u={...E,targetRouterState:b},u}),(0,Pn.b)(()=>{this.events.next(new $l)}),((n,e,t,r)=>(0,Et.U)(o=>(new Fn(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,E=>this.events.next(E),this.inputBindingEnabled),wi(1),(0,Pn.b)({next:E=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ko(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects))),t.titleStrategy?.updateTitle(E.targetRouterState.snapshot),E.resolve(!0)},complete:()=>{l=!0}}),function ph(n){return(0,ri.e)((e,t)=>{(0,Ml.Xf)(n).subscribe((0,On.x)(t,()=>t.complete(),pc.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Pn.b)(E=>{throw E}))),Mo(()=>{l||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),Wi(E=>{if(m=!0,Ea(E))this.events.next(new Ul(u.id,this.urlSerializer.serialize(u.extractedUrl),E.message,E.cancellationCode)),function ui(n){return Ea(n)&&cu(n.url)}(E)?this.events.next(new Om(E.url)):u.resolve(!1);else{this.events.next(new du(u.id,this.urlSerializer.serialize(u.extractedUrl),E,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(E))}catch(b){u.reject(b)}}return Cs.E}))}))}cancelNavigationTransition(t,r,o){const u=new Ul(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jT(n){return n!==vh}let $T=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===kt);return r}getResolvedTitleForRoute(t){return t.data[xo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(ix)},providedIn:"root"})}return n})(),ix=(()=>{class n extends $T{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ae))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(nI)},providedIn:"root"})}return n})();class ox{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let nI=(()=>{class n extends ox{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=p.n5z(n)))(o||n)}}();static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Gm=new p.OlP("",{providedIn:"root",factory:()=>({})});let HT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(GT)},providedIn:"root"})}return n})(),GT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ap=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ap||{});function zm(n,e){n.events.pipe(si(t=>t instanceof ko||t instanceof Ul||t instanceof du||t instanceof Ec),(0,Et.U)(t=>t instanceof ko||t instanceof Ec?Ap.COMPLETE:t instanceof Ul&&(0===t.code||1===t.code)?Ap.REDIRECTING:Ap.FAILED),si(t=>t!==Ap.REDIRECTING),wi(1)).subscribe(()=>{e()})}function wu(n){throw n}function Mp(n,e,t){return e.parse("/")}const rI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ms=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this._events=new ii.x,this.options=(0,p.f3M)(Gm,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||wu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Mp,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(HT),this.routeReuseStrategy=(0,p.f3M)(sx),this.titleStrategy=(0,p.f3M)($T),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(Sh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(Hm),this.urlSerializer=(0,p.f3M)(ze),this.location=(0,p.f3M)(We),this.componentInputBindingEnabled=!!(0,p.f3M)(Gl,{optional:!0}),this.eventsSubscription=new dh.w0,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new A,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fu(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(zT(r)&&this._events.next(r));if(r instanceof wc)jT(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Ec)this.rawUrlTree=o.rawUrl;else if(r instanceof Bl){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof $l)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof Ul)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Om){const u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jT(o.source)};this.scheduleNavigation(u,vh,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof du&&this.restoreHistory(o,!0),r instanceof ko&&(this.navigated=!0),zT(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vh,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const E={...o};delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(B),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:E}=r,b=E?this.currentUrlTree.fragment:l;let R,M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}null!==M&&(M=this.removeEmptyProps(M));try{R=wa(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return Mm(R,t,M,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=cu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,vh,null,r)}navigate(t,r={skipLocationChange:!1}){return function ax(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...rI}:!1===r?{...iI}:r,cu(t))return dp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return dp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,E,b;l?(m=l.resolve,E=l.reject,b=l.promise):b=new Promise((R,$)=>{m=R,E=$});const M=this.pendingTasks.add();return zm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:m,reject:E,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zT(n){return!(n instanceof $l||n instanceof Om)}class qT{}let ZT=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(si(t=>t instanceof ko),So(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,An.D)(o).pipe((0,To.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,mt.of)(null);const u=o.pipe((0,Or.z)(l=>null===l?(0,mt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,An.D)([u,l]).pipe((0,To.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Ms),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(qT),p.LFG(b_))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const A_=new p.OlP("");let oI=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ko?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ec&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof c_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new c_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){p.$Z()};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac})}return n})();function Js(n,e){return{\u0275kind:n,\u0275providers:e}}function uI(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Ms),o=n.get(cI);1===n.get(qm)&&r.initialNavigation(),n.get(dI,null,p.XFs.Optional)?.setUpPreloading(),n.get(A_,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const cI=new p.OlP("",{factory:()=>new ii.x}),qm=new p.OlP("",{providedIn:"root",factory:()=>1}),dI=new p.OlP("");function QT(n){return Js(0,[{provide:dI,useExisting:ZT},{provide:qT,useExisting:n}])}const Mh=new p.OlP("ROUTER_FORROOT_GUARD"),hI=[We,{provide:ze,useClass:ot},Ms,Ic,{provide:gu,useFactory:function M_(n){return n.routerState.root},deps:[Ms]},b_,[]];function fI(){return new p.PXZ("Router",Ms)}let Wm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hI,[],{provide:Sh,multi:!0,useValue:t},{provide:Mh,useFactory:mI,deps:[[Ms,new p.FiY,new p.tp0]]},{provide:Gm,useValue:r||{}},r?.useHash?{provide:Ve,useClass:Re}:{provide:Ve,useClass:qe},{provide:A_,useFactory:()=>{const n=(0,p.f3M)(ir),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(Gm),r=(0,p.f3M)(Hm),o=(0,p.f3M)(ze);return t.scrollOffset&&n.setOffset(t.scrollOffset),new oI(o,r,n,e,t)}},r?.preloadingStrategy?QT(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:fI},r?.initialNavigation?Zm(r):[],r?.bindToComponentInputs?Js(8,[Ii,{provide:Gl,useExisting:Ii}]).\u0275providers:[],[{provide:eS,useFactory:uI},{provide:p.tb,multi:!0,useExisting:eS}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(Mh,8))};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})();function mI(n){return"guarded"}function Zm(n){return["disabled"===n.initialNavigation?Js(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Ms);return()=>{e.setUpLocationChangeListener()}}},{provide:qm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Js(2,[{provide:qm,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(xe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Ms),u=e.get(cI);zm(o,()=>{r(!0)}),e.get(Hm).afterPreactivation=()=>(r(!0),u.closed?(0,mt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const eS=new p.OlP(""),N_=[];let Km=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[Wm.forRoot(N_),Wm]})}return n})();var ve=P(5861),Ym=P(6321),Ln=P(2793);function Nh(){return(0,ri.e)((n,e)=>{let t,r=!1;n.subscribe((0,On.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var nt,O_=P(3997),Vo=P(6304),vI=(P(8977),P(3399)),Eu=P(7592),Qm=P(4537),xc=P(7879),an=P(9058),P_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xs={},Jm=Jm||{},Ft=P_||self;function k_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Xm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var F_="closure_uid_"+(1e9*Math.random()>>>0),px=0;function gx(n,e,t){return n.call.apply(n.bind,arguments)}function ey(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ki(n,e,t){return(ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gx:ey).apply(null,arguments)}function Rh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function xs(){this.s=this.s,this.o=this.o}xs.prototype.s=!1,xs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function rS(n){Object.prototype.hasOwnProperty.call(n,F_)&&n[F_]||(n[F_]=++px)}(this)},xs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ty=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Kl(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Rp(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(k_(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function Dr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var V_=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch{}return n}();function Yl(n){return/^[\s\xa0]*$/.test(n)}function Ql(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Iu(n){return-1!=Ql().indexOf(n)}function Op(n){return Op[" "](n),n}Op[" "]=function(){};var B_,n,iS=Iu("Opera"),Jl=Iu("Trident")||Iu("MSIE"),_I=Iu("Edge"),U_=_I||Jl,ny=Iu("Gecko")&&!(-1!=Ql().toLowerCase().indexOf("webkit")&&!Iu("Edge"))&&!(Iu("Trident")||Iu("MSIE"))&&!Iu("Edge"),wI=-1!=Ql().toLowerCase().indexOf("webkit")&&!Iu("Edge");function EI(){var n=Ft.document;return n?n.documentMode:void 0}e:{var II="",j_=(n=Ql(),ny?/rv:([^\);]+)(\)|;)/.exec(n):_I?/Edge\/([\d\.]+)/.exec(n):Jl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):wI?/WebKit\/(\S+)/.exec(n):iS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(j_&&(II=j_?j_[1]:""),Jl){var Oh=EI();if(null!=Oh&&Oh>parseFloat(II)){B_=String(Oh);break e}}B_=II}var CI=Ft.document&&Jl&&(EI()||parseInt(B_,10))||void 0;function Xl(n,e){if(Dr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ny){e:{try{Op(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ry[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xl.$.h.call(this)}}Pr(Xl,Dr);var ry={2:"touch",3:"pen",4:"mouse"};Xl.prototype.h=function(){Xl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fp="closure_listenable_"+(1e6*Math.random()|0),bI=0;function sS(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++bI,this.fa=this.ia=!1}function Lp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function TI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vp(n){const e={};for(const t in n)e[t]=n[t];return e}const SI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ed(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<SI.length;u++)t=SI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nc(n){this.src=n,this.g={},this.h=0}function $_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ty(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Lp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iy(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}Nc.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=iy(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new sS(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var H_="closure_lm_"+(1e6*Math.random()|0),G_={};function AI(n,e,t,r,o){if(r&&r.once)return sy(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)AI(n,e[u],t,r,o);return null}return t=Z_(t),n&&n[Fp]?n.O(e,t,Xm(r)?!!r.capture:!!r,o):z_(n,e,t,!1,r,o)}function z_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Xm(o)?!!o.capture:!!o,m=W_(n);if(m||(n[H_]=m=new Nc(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function MI(){const e=uS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)V_||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(q_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sy(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)sy(n,e[u],t,r,o);return null}return t=Z_(t),n&&n[Fp]?n.P(e,t,Xm(r)?!!r.capture:!!r,o):z_(n,e,t,!0,r,o)}function aS(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)aS(n,e[u],t,r,o);else r=Xm(r)?!!r.capture:!!r,t=Z_(t),n&&n[Fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iy(u=n.g[e],t,r,o))&&(Lp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=W_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iy(e,t,r,o)),(t=-1<n?e[n]:null)&&Up(t))}function Up(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Fp])$_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(q_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=W_(e))?($_(t,n),0==t.h&&(t.src=null,e[H_]=null)):Lp(n)}}}function q_(n){return n in G_?G_[n]:G_[n]="on"+n}function uS(n,e){if(n.fa)n=!0;else{e=new Xl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Up(n),n=t.call(r,e)}return n}function W_(n){return(n=n[H_])instanceof Nc?n:null}var oy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z_(n){return"function"==typeof n?n:(n[oy]||(n[oy]=function(e){return n.handleEvent(e)}),n[oy])}function qr(){xs.call(this),this.i=new Nc(this),this.S=this,this.J=null}function Di(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Dr(e,n);else if(e instanceof Dr)e.target=e.target||n;else{var o=e;ed(e=new Dr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=ay(l,r,!0,e)&&o}if(o=ay(l=e.g=n,r,!0,e)&&o,o=ay(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ay(l=e.g=t[u],r,!1,e)&&o}function ay(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,E=l.la||l.src;l.ia&&$_(n.i,l),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Pr(qr,xs),qr.prototype[Fp]=!0,qr.prototype.removeEventListener=function(n,e,t,r){aS(this,n,e,t,r)},qr.prototype.N=function(){if(qr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lp(t[r]);delete n.g[e],n.h--}}this.J=null},qr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},qr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var xI=Ft.JSON.stringify;function RI(){var n=OI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var K_=new class NI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mx,n=>n.reset());class mx{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Y_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Rc(n){Ft.setTimeout(()=>{throw n},0)}let td,Bp=!1,OI=new class Uo{constructor(){this.h=this.g=null}add(e,t){const r=K_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},PI=()=>{const n=Ft.Promise.resolve(void 0);td=()=>{n.then(Q_)}};var Q_=()=>{for(var n;n=RI();){try{n.h.call(n.g)}catch(t){Rc(t)}var e=K_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Bp=!1};function Ns(n,e){qr.call(this),this.h=n||1,this.g=e||Ft,this.j=ki(this.qb,this),this.l=Date.now()}function uy(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function J_(n,e,t){if("function"==typeof n)t&&(n=ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function cS(n){n.g=J_(()=>{n.g=null,n.i&&(n.i=!1,cS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pr(Ns,qr),(nt=Ns.prototype).ga=!1,nt.T=null,nt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Di(this,"tick"),this.ga&&(uy(this),this.start()))}},nt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.N=function(){Ns.$.N.call(this),uy(this),delete this.g};class ci extends xs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cS(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jp(n){xs.call(this),this.h=n,this.g={}}Pr(jp,xs);var cy=[];function kI(n,e,t,r){Array.isArray(t)||(t&&(cy[0]=t.toString()),t=cy);for(var o=0;o<t.length;o++){var u=AI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function FI(n){TI(n.g,function(e,t){this.g.hasOwnProperty(t)&&Up(e)},n),n.g={}}function Ph(){this.g=!0}function kh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function BI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return xI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}jp.prototype.N=function(){jp.$.N.call(this),FI(this)},jp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ph.prototype.Ea=function(){this.g=!1},Ph.prototype.info=function(){};var nd={},jI=null;function ly(){return jI=jI||new qr}function X_(n){Dr.call(this,nd.Ta,n)}function Ta(n){const e=ly();Di(e,new X_(e))}function Sa(n,e){Dr.call(this,nd.STAT_EVENT,n),this.stat=e}function kr(n){const e=ly();Di(e,new Sa(e,n))}function $I(n,e){Dr.call(this,nd.Ua,n),this.size=e}function $p(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}nd.Ta="serverreachability",Pr(X_,Dr),nd.STAT_EVENT="statevent",Pr(Sa,Dr),nd.Ua="timingevent",Pr($I,Dr);var Hp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},e0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gp(){}function zp(){}Gp.prototype.h=null;var n0,Lh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dy(){Dr.call(this,"d")}function t0(){Dr.call(this,"c")}function hy(){}function qp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new jp(this),this.P=yx,this.V=new Ns(n=U_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new r0}function r0(){this.i=null,this.g="",this.h=!1}Pr(dy,Dr),Pr(t0,Dr),Pr(hy,Gp),hy.prototype.g=function(){return new XMLHttpRequest},hy.prototype.i=function(){return{}},n0=new hy;var yx=45e3,s0={},o0={};function HI(n,e,t){n.L=1,n.v=Bh(eo(e)),n.s=t,n.S=!0,a0(n,null)}function a0(n,e){n.G=Date.now(),py(n),n.A=eo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),d0(t.i,"t",r),n.C=0,t=n.l.J,n.h=new r0,n.g=C0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new ci(ki(n.Pa,n,n.g),n.O)),kI(n.U,n.g,"readystatechange",n.nb),e=n.I?Vp(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ta(),function LI(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),E=0;E<m.length;E++){var b=m[E].split("=");if(1<b.length){var M=b[0];b=b[1];var R=M.split("_");l=2<=R.length&&"type"==R[1]?l+(M+"=")+b+"&":l+(M+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function u0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function lS(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=fy(n,t),o==o0){4==e&&(n.o=4,kr(14),r=!1),kh(n.j,n.m,null,"[Incomplete Response]");break}if(o==s0){n.o=4,kr(15),kh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kh(n.j,n.m,o,null),gy(n,o)}u0(n)&&o!=o0&&o!=s0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,kr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Iy(e),e.M=!0,kr(11))):(kh(n.j,n.m,t,"[Invalid Chunked Response]"),Oc(n),Zp(n))}function fy(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?o0:(t=Number(e.substring(t,r)),isNaN(t)?s0:(r+=1)+t>e.length?o0:(e=e.slice(r,r+t),n.C=r+t,e))}function py(n){n.Y=Date.now()+n.P,c0(n,n.P)}function c0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$p(ki(n.lb,n),e)}function Wp(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Zp(n){0==n.l.H||n.J||E0(n.l,n)}function Oc(n){Wp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,uy(n.V),FI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function gy(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Yp(t.i,n)))if(!n.K&&Yp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Dy(t),ng(t)}Ey(t),kr(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=$p(ki(t.ib,t),6e3));if(1>=yS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else jo(t,11)}else if((n.K||t.g==n)&&Dy(t),!Yl(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const M=b[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const be=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(be){var u=r.i;u.g||-1==be.indexOf("spdy")&&-1==be.indexOf("quic")&&-1==be.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(yy(u,u.h),u.h=null))}if(r.F){const Be=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.Da=Be,Vn(r.I,r.F,Be))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=D0(r,r.J?r.pa:null,r.Y),l.K){QI(r.i,l);var m=l,E=r.L;E&&m.setTimeout(E),m.B&&(Wp(m),py(m)),r.g=l}else iD(r);0<t.j.length&&ud(t)}else"stop"!=b[0]&&"close"!=b[0]||jo(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?jo(t,7):_0(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Ta()}catch{}}function l0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(k_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function GI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(k_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ut(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(k_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(nt=qp.prototype).setTimeout=function(n){this.P=n},nt.nb=function(n){n=n.target;const e=this.M;e&&3==Bo(n)?e.l():this.Pa(n)},nt.Pa=function(n){try{if(n==this.g)e:{const M=Bo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||U_||this.g&&(this.h.h||this.g.ja()||m0(this.g)))){this.J||4!=M||7==e||Ta(),Wp(this);var t=this.g.da();this.ca=t;t:if(u0(this)){var r=m0(this.g);n="";var o=r.length,u=4==Bo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oc(this),Zp(this);var l="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function VI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,kr(12),Oc(this),Zp(this);break e}kh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gy(this,t)}this.S?(lS(this,M,l),U_&&this.i&&3==M&&(kI(this.U,this.V,"tick",this.mb),this.V.start())):(kh(this.j,this.m,l,null),gy(this,l)),4==M&&Oc(this),this.i&&!this.J&&(4==M?E0(this.l,this):(this.i=!1,py(this)))}else(function y0(n){const e={};n=(n.g&&2<=Bo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Yl(n[r]))continue;var t=Y_(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function oS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,kr(12)):(this.o=0,kr(13)),Oc(this),Zp(this)}}}catch{}},nt.mb=function(){if(this.g){var n=Bo(this.g),e=this.g.ja();this.C<e.length&&(Wp(this),lS(this,n,e),this.i&&4!=n&&py(this))}},nt.cancel=function(){this.J=!0,Oc(this)},nt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ta(),kr(17)),Oc(this),this.o=2,Zp(this)):c0(this,this.Y-n)};var rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function id(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof id){this.h=n.h,Du(this,n.j),this.s=n.s,this.g=n.g,Vh(this,n.m),this.l=n.l;var e=n.i,t=new Kp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Uh(this,t),this.o=n.o}else n&&(e=String(n).match(rd))?(this.h=!1,Du(this,e[1]||"",!0),this.s=sd(e[2]||""),this.g=sd(e[3]||"",!0),Vh(this,e[4]),this.l=sd(e[5]||"",!0),Uh(this,e[6]||"",!0),this.o=sd(e[7]||"")):(this.h=!1,this.i=new Kp(null,this.h))}function eo(n){return new id(n)}function Du(n,e,t){n.j=t?sd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Uh(n,e,t){e instanceof Kp?(n.i=e,function pS(n,e){e&&!n.j&&(Pc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(ZI(this,r),d0(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=od(e,fS)),n.i=new Kp(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function Bh(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function od(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}id.prototype.toString=function(){var n=[],e=this.j;e&&n.push(od(e,my,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(od(e,my,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(od(t,"/"==t.charAt(0)?hS:dS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",od(t,WI)),n.join("")};var my=/[#\/\?@]/g,dS=/[#\?:]/g,hS=/[#\?]/g,fS=/[#\?@]/g,WI=/#/g;function Kp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pc(n){n.g||(n.g=new Map,n.h=0,n.i&&function zI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ZI(n,e){Pc(n),e=ad(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function KI(n,e){return Pc(n),e=ad(n,e),n.g.has(e)}function d0(n,e,t){ZI(n,e),0<t.length&&(n.i=null,n.g.set(ad(n,e),Kl(t)),n.h+=t.length)}function ad(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ds(n){this.l=n||mS,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Kp.prototype).add=function(n,e){Pc(this),this.i=null,n=ad(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Pc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},nt.ta=function(){Pc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},nt.Z=function(n){Pc(this);let e=[];if("string"==typeof n)KI(this,n)&&(e=e.concat(this.g.get(ad(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return Pc(this),this.i=null,KI(this,n=ad(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var mS=10;function YI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yS(n){return n.h?1:n.g?n.g.size:0}function Yp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yy(n,e){n.g?n.g.add(e):n.h=e}function QI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Kl(n.i)}ds.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var vS=class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}};function XI(){this.g=new vS}function _S(n,e,t){const r=t||"";try{l0(n,function(o,u){let l=o;Xm(o)&&(l=xI(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function jh(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Qp(n){this.l=n.fc||null,this.j=n.ob||!1}function vy(n,e){qr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=h0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pr(Qp,Gp),Qp.prototype.g=function(){return new vy(this.l,this.j)},Qp.prototype.i=function(n){return function(){return n}}({}),Pr(vy,qr);var h0=0;function eD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Jp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hs(n)}function hs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=vy.prototype).open=function(n,e){if(this.readyState!=h0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hs(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jp(this)),this.readyState=h0},nt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hs(this)),this.g&&(this.readyState=3,hs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},nt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jp(this):hs(this),3==this.readyState&&eD(this)}},nt.Za=function(n){this.g&&(this.response=this.responseText=n,Jp(this))},nt.Ya=function(n){this.g&&(this.response=n,Jp(this))},nt.ka=function(){this.g&&Jp(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var f0=Ft.JSON.parse;function hr(n){qr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=p0,this.L=this.M=!1}Pr(hr,qr);var p0="",ES=/^https?$/i,tD=["POST","PUT"];function Xp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,_y(n),eg(n)}function _y(n){n.F||(n.F=!0,Di(n,"complete"),Di(n,"error"))}function IS(n){if(n.h&&typeof Jm<"u"&&(!n.C[1]||4!=Bo(n)||2!=n.da()))if(n.v&&4==Bo(n))J_(n.La,0,n);else if(Di(n,"readystatechange"),4==Bo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(rd)[1]||null;!o&&Ft.self&&Ft.self.location&&(o=Ft.self.location.protocol.slice(0,-1)),r=!ES.test(o?o.toLowerCase():"")}t=r}if(t)Di(n,"complete"),Di(n,"success");else{n.m=6;try{var u=2<Bo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",_y(n)}}finally{eg(n)}}}function eg(n,e){if(n.g){g0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Di(n,"ready");try{t.onreadystatechange=r}catch{}}}function g0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Bo(n){return n.g?n.g.readyState:0}function m0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case p0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Aa(n){let e="";return TI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function v0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Aa(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function tg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wy(n){this.Ga=0,this.j=[],this.l=new Ph,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tg("baseRetryDelayMs",5e3,n),this.hb=tg("retryDelaySeedMs",1e4,n),this.eb=tg("forwardChannelMaxRetries",2,n),this.xa=tg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ds(n&&n.concurrentRequestLimit),this.Ja=new XI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function _0(n){if(rD(n),3==n.H){var e=n.W++,t=eo(n.I);if(Vn(t,"SID",n.K),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),kc(n,t),(e=new qp(n,n.l,e)).L=2,e.v=Bh(eo(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=C0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),py(e)}oD(n)}function ng(n){n.g&&(Iy(n),n.g.cancel(),n.g=null)}function rD(n){ng(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),Dy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function ud(n){if(!YI(n.i)&&!n.m){n.m=!0;var e=n.Na;td||PI(),Bp||(td(),Bp=!0),OI.add(e,n),n.C=0}}function w0(n,e){var t;t=e?e.m:n.W++;const r=eo(n.I);Vn(r,"SID",n.K),Vn(r,"RID",t),Vn(r,"AID",n.V),kc(n,r),n.o&&n.s&&v0(r,n.o,n.s),t=new qp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=DS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yy(n.i,t),HI(t,r,e)}function kc(n,e){n.na&&TI(n.na,function(t,r){Vn(e,r,t)}),n.h&&l0({},function(t,r){Vn(e,r,t)})}function DS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ki(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let b=o[E].g;const M=o[E].map;if(b-=u,0>b)u=Math.max(0,o[E].g-100),m=!1;else try{_S(M,l,"req"+b+"_")}catch{r&&r(M)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function iD(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;td||PI(),Bp||(td(),Bp=!0),OI.add(e,n),n.A=0}}function Ey(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=$p(ki(n.Ma,n),I0(n,n.A)),n.A++,0))}function Iy(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function sD(n){n.g=new qp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=eo(n.wa);Vn(e,"RID","rpc"),Vn(e,"SID",n.K),Vn(e,"AID",n.V),Vn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Vn(e,"TO",n.qa),Vn(e,"TYPE","xmlhttp"),kc(n,e),n.o&&n.s&&v0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Bh(eo(e)),t.s=null,t.S=!0,a0(t,n)}function Dy(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function E0(n,e){var t=null;if(n.g==e){Dy(n),Iy(n),n.g=null;var r=2}else{if(!Yp(n.i,e))return;t=e.F,QI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Di(r=ly(),new $I(r,t)),ud(n)}else iD(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function rg(n,e){return!(yS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=$p(ki(n.Na,n,e),I0(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ey(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:jo(n,5);break;case 4:jo(n,10);break;case 3:jo(n,6);break;default:jo(n,2)}}function I0(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function jo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ki(n.pb,n);t||(t=new id("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Du(t,"https"),Bh(t)),function wS(n,e){const t=new Ph;if(Ft.Image){const r=new Image;r.onload=Rh(jh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Rh(jh,t,r,"TestLoadImage: error",!1,e),r.onabort=Rh(jh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rh(jh,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else kr(2);n.H=0,n.h&&n.h.za(e),oD(n),rD(n)}function oD(n){if(n.H=0,n.ma=[],n.h){const e=JI(n.i);(0!=e.length||0!=n.j.length)&&(Rp(n.ma,e),Rp(n.ma,n.j),n.i.i.length=0,Kl(n.j),n.j.length=0),n.h.ya()}}function D0(n,e,t){var r=t instanceof id?eo(t):new id(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Vh(r,r.m);else{var o=Ft.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new id(null);r&&Du(u,r),e&&(u.g=e),o&&Vh(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Vn(r,t,e),Vn(r,"VER",n.ra),kc(n,r),r}function C0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ha&&!n.va?new Qp({ob:!0}):n.va)).Oa(n.J),e}function aD(){}function Cy(){if(Jl&&!(10<=Number(CI)))throw Error("Environmental error: no available transport.")}function Ci(n,e){qr.call(this),this.g=new wy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Yl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $h(this)}function uD(n){dy.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cD(){t0.call(this),this.status=1}function $h(n){this.g=n}function $o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function b0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(nt=hr.prototype).Oa=function(n){this.M=n},nt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():n0.g(),this.C=function Fh(n){return n.h||(n.h=n.i())}(this.u?this.u:n0),this.g.onreadystatechange=ki(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Xp(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ft.FormData&&n instanceof Ft.FormData,!(0<=ty(tD,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{g0(this),0<this.B&&((this.L=function nD(n){return Jl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ki(this.ua,this)):this.A=J_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Xp(this,u)}},nt.ua=function(){typeof Jm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Di(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Di(this,"complete"),Di(this,"abort"),eg(this))},nt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eg(this,!0)),hr.$.N.call(this)},nt.La=function(){this.s||(this.G||this.v||this.l?IS(this):this.kb())},nt.kb=function(){IS(this)},nt.isActive=function(){return!!this.g},nt.da=function(){try{return 2<Bo(this)?this.g.status:-1}catch{return-1}},nt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),f0(e)}},nt.Ia=function(){return this.m},nt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=wy.prototype).ra=8,nt.H=1,nt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new qp(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Vp(u),ed(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=DS(this,o,e),Vn(t=eo(this.I),"RID",n),Vn(t,"CVER",22),this.F&&Vn(t,"X-HTTP-Session-Id",this.F),kc(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Aa(u)))+"&"+e:this.o&&v0(t,this.o,u)),yy(this.i,o),this.bb&&Vn(t,"TYPE","init"),this.P?(Vn(t,"$req",e),Vn(t,"SID","null"),o.aa=!0,HI(o,t,null)):HI(o,t,e),this.H=2}}else 3==this.H&&(n?w0(this,n):0==this.j.length||YI(this.i)||w0(this))},nt.Ma=function(){if(this.u=null,sD(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=$p(ki(this.jb,this),n)}},nt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kr(10),ng(this),sD(this))},nt.ib=function(){null!=this.v&&(this.v=null,ng(this),Ey(this),kr(19))},nt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),kr(2)):(this.l.info("Failed to ping google.com"),kr(1))},nt.isActive=function(){return!!this.h&&this.h.isActive(this)},(nt=aD.prototype).Ba=function(){},nt.Aa=function(){},nt.za=function(){},nt.ya=function(){},nt.isActive=function(){return!0},nt.Va=function(){},Cy.prototype.g=function(n,e){return new Ci(n,e)},Pr(Ci,qr),Ci.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;kr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=D0(n,null,n.Y),ud(n)},Ci.prototype.close=function(){_0(this.g)},Ci.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=xI(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ud(e)},Ci.prototype.N=function(){this.g.h=null,delete this.j,_0(this.g),delete this.g,Ci.$.N.call(this)},Pr(uD,dy),Pr(cD,t0),Pr($h,aD),$h.prototype.Ba=function(){Di(this.g,"a")},$h.prototype.Aa=function(n){Di(this.g,new uD(n))},$h.prototype.za=function(n){Di(this.g,new cD)},$h.prototype.ya=function(){Di(this.g,"b")},Pr($o,function CS(){this.blockSize=-1}),$o.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$o.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)b0(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){b0(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){b0(this,r),o=0;break}}this.h=o,this.i+=e},$o.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var bS={};function by(n){return-128<=n&&128>n?function Pp(n,e){var t=bS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function to(n){if(isNaN(n)||!isFinite(n))return Gh;if(0>n)return bi(to(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Hh;return new vn(e,0)}var Hh=4294967296,Gh=by(0),T0=by(1),dD=by(16777216);function Cu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function no(n){return-1==n.h}function bi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(T0)}function Ty(n,e){return n.add(bi(e))}function ig(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function zh(n,e){this.g=n,this.h=e}function Sy(n,e){if(Cu(e))throw Error("division by zero");if(Cu(n))return new zh(Gh,Gh);if(no(n))return e=Sy(bi(n),e),new zh(bi(e.g),bi(e.h));if(no(e))return e=Sy(n,bi(e)),new zh(bi(e.g),e.h);if(30<n.g.length){if(no(n)||no(e))throw Error("slowDivide_ only works with positive integers.");for(var t=T0,r=e;0>=r.X(n);)t=TS(t),r=TS(r);var o=cd(t,1),u=cd(r,1);for(r=cd(r,2),t=cd(t,2);!Cu(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=cd(r,1),t=cd(t,1)}return e=Ty(n,o.R(e)),new zh(o,e)}for(o=Gh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=to(t)).R(e);no(l)||0<l.X(n);)l=(u=to(t-=r)).R(e);Cu(u)&&(u=T0),o=o.add(u),n=Ty(n,l)}return new zh(o,n)}function TS(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function cd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(o,n.h)}(nt=vn.prototype).ea=function(){if(no(this))return-bi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Hh+r)*e,e*=Hh}return n},nt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Cu(this))return"0";if(no(this))return"-"+bi(this).toString(n);for(var e=to(Math.pow(n,6)),t=this,r="";;){var o=Sy(t,e).g,u=((0<(t=Ty(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Cu(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},nt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},nt.X=function(n){return no(n=Ty(this,n))?-1:Cu(n)?0:1},nt.abs=function(){return no(this)?bi(this):this},nt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},nt.R=function(n){if(Cu(this)||Cu(n))return Gh;if(no(this))return no(n)?bi(this).R(bi(n)):bi(bi(this).R(n));if(no(n))return bi(this.R(bi(n)));if(0>this.X(dD)&&0>n.X(dD))return to(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,E=65535&n.D(o);t[2*r+2*o]+=l*E,ig(t,2*r+2*o),t[2*r+2*o+1]+=u*E,ig(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,ig(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,ig(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},nt.gb=function(n){return Sy(this,n).h},nt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},nt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},nt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},Cy.prototype.createWebChannel=Cy.prototype.g,Ci.prototype.send=Ci.prototype.u,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,Hp.NO_ERROR=0,Hp.TIMEOUT=8,Hp.HTTP_ERROR=6,e0.COMPLETE="complete",zp.EventType=Lh,Lh.OPEN="a",Lh.CLOSE="b",Lh.ERROR="c",Lh.MESSAGE="d",qr.prototype.listen=qr.prototype.O,hr.prototype.listenOnce=hr.prototype.P,hr.prototype.getLastError=hr.prototype.Sa,hr.prototype.getLastErrorCode=hr.prototype.Ia,hr.prototype.getStatus=hr.prototype.da,hr.prototype.getResponseJson=hr.prototype.Wa,hr.prototype.getResponseText=hr.prototype.ja,hr.prototype.send=hr.prototype.ha,hr.prototype.setWithCredentials=hr.prototype.Oa,$o.prototype.digest=$o.prototype.l,$o.prototype.reset=$o.prototype.reset,$o.prototype.update=$o.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=to,vn.fromString=function lD(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return bi(lD(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=to(Math.pow(e,8)),r=Gh,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=to(Math.pow(e,u)),r=r.R(u).add(to(l))):r=(r=r.R(t)).add(to(l))}return r};var hD=Xs.createWebChannelTransport=function(){return new Cy},vx=Xs.getStatEventTarget=function(){return ly()},qh=Xs.ErrorCode=Hp,SS=Xs.EventType=e0,AS=Xs.Event=nd,Ay=Xs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MS=Xs.FetchXmlHttpFactory=Qp,Rs=Xs.WebChannel=zp,sg=Xs.XhrIo=hr,Fi=Xs.Md5=$o,ro=Xs.Integer=vn;const og="@firebase/firestore";class _n{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let Fc="9.23.0";const Os=new xc.Yd("@firebase/firestore");function Lc(){return Os.logLevel}function Fe(n,...e){if(Os.logLevel<=xc.in.DEBUG){const t=e.map(Vc);Os.debug(`Firestore (${Fc}): ${n}`,...t)}}function Un(n,...e){if(Os.logLevel<=xc.in.ERROR){const t=e.map(Vc);Os.error(`Firestore (${Fc}): ${n}`,...t)}}function Ti(n,...e){if(Os.logLevel<=xc.in.WARN){const t=e.map(Vc);Os.warn(`Firestore (${Fc}): ${n}`,...t)}}function Vc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Fc}) INTERNAL ASSERTION FAILED: `+n;throw Un(e),new Error(e)}function dt(n,e){n||rt()}function Xe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class S0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}}class gD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mD{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},E=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new S0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new _n(e)}}class A0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new A0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _x{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.T=t.token,new NS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function RS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class OS{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=RS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ag(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function yD(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new tr(0,0))}static max(){return new vt(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ld{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ld.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends ld{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const M0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends ld{construct(e,t,r){return new qn(e,t,r)}static isValidIdentifier(e){return M0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(Zt.fromString(e))}static fromName(e){return new Qe(Zt.fromString(e).popFirst(5))}static empty(){return new Qe(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new Zt(e.slice()))}}class Uc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function My(n){return n.fields.find(e=>2===e.kind)}function dd(n){return n.fields.filter(e=>2!==e.kind)}Uc.UNKNOWN_ID=-1;class xy{constructor(e,t){this.fieldPath=e,this.kind=t}}class cg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cg(0,Li.min())}}function vD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Li(o,Qe.empty(),e)}function Ny(n){return new Li(n.readTime,n.key,-1)}class Li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Li(vt.min(),Qe.empty(),-1)}static max(){return new Li(vt.max(),Qe.empty(),-1)}}function Zh(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const kS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _D{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bc(n){return lg.apply(this,arguments)}function lg(){return lg=(0,ve.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==kS)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),lg.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},E=>r(E))}),l=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let E=0;E<u;E++){const b=E;t(e[b]).next(M=>{l[b]=M,++m,m===u&&r(l)},M=>o(M))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class dg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Fr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Kh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=x0(r.target.error);this.v.reject(new Kh(e,o))}}static open(e,t,r,o){try{return new dg(t,e.transaction(o,r))}catch(u){throw new Kh(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wD(t)}}class Ho{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ho.S((0,an.z$)())&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),hd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,an.hl)())return!1;if(Ho.C())return!0;const e=(0,an.z$)(),t=Ho.S(e),r=0<t&&t<10,o=Ho.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Kh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Kh(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const E=dg.open(u.db,e,l?"readonly":"readwrite",r),b=o(E).next(M=>(E.P(),M)).catch(M=>(E.abort(M),se.reject(M))).toPromise();return b.catch(()=>{}),yield E.R,b}catch(E){const b=E,M="FirebaseError"!==b.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",M),u.close(),!M)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class FS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return hd(this.L.delete())}}class Kh extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bu(n){return"IndexedDbTransactionError"===n.name}class wD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hd(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),hd(this.store.add(e))}get(e){return hd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),hd(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),hd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const l=x0(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new se((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const E=new FS(m),b=t(m.primaryKey,m.value,E);if(b instanceof se){const M=b.catch(R=>(E.done(),se.reject(R)));r.push(M)}E.isDone?o():null===E.K?m.continue():m.continue(E.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hd(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=x0(r.target.error);t(o)}})}let ED=!1;function x0(n){const e=Ho.S((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ED||(ED=!0,setTimeout(()=>{throw r},0)),r}}return n}class LS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){bu(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Bc(r)}yield t.et(6e4)}))}}class N0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=Ny(u);Zh(l,r)>0&&(r=l)}),new Li(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function hg(n){return null==n}function jc(n){return 0===n&&1/n==-1/0}function fg(n){return"number"==typeof n&&Number.isInteger(n)&&!jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DD(e)),e=ID(n.get(t),e);return DD(e)}function ID(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function DD(n){return n+"\x01\x01"}function Ma(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:rt()}u=l+2}return new Zt(r)}const CD=["userId","batchId"];function Yh(n,e){return[n,li(e)]}function Ry(n,e,t){return[n,li(e),t]}const bD={},TD=["prefixPath","collectionGroup","readTime","documentId"],VS=["prefixPath","collectionGroup","documentId"],US=["collectionGroup","readTime","prefixPath","documentId"],SD=["canonicalId","targetId"],R0=["targetId","path"],AD=["path","targetId"],O0=["collectionId","parent"],MD=["indexId","uid"],BS=["uid","sequenceNumber"],xD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ND=["indexId","uid","orderedDocumentKey"],RD=["userId","collectionPath","documentId"],OD=["userId","collectionPath","largestBatchId"],jS=["userId","collectionGroup","largestBatchId"],PD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$S=[...PD,"documentOverlays"],P0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oy=P0,kD=[...Oy,"indexConfiguration","indexState","indexEntries"];class Py extends _D{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=Xe(n);return Ho.M(t.ht,e)}function k0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function F0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mn{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pg(this.root,e,this.comparator,!1)}getReverseIterator(){return new pg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pg(this.root,e,this.comparator,!0)}}class pg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Lr.RED,this.left=o??Lr.EMPTY,this.right=u??Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Lr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Lr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Lr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FD(this.data.getIterator())}getIteratorFrom(e){return new FD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class FD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new un(qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ag(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $c extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $c("Invalid base64 string: "+o):o}}(e);return new Zr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const V0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fd(n){if(dt(!!n),"string"==typeof n){let e=0;const t=V0.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cr(n.seconds),nanos:Cr(n.nanos)}}function Cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function ky(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gg(n){const e=n.mapValue.fields.__previous_value__;return ky(e)?gg(e):e}function mg(n){const e=fd(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class Kr{constructor(e,t,r,o,u,l,m,E,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=E,this.useFetchStreams=b}}class Au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}const Hc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fy={nullValue:"NULL_VALUE"};function Mu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ky(n)?4:LD(n)?9007199254740991:10:rt()}function xa(n,e){if(n===e)return!0;const t=Mu(n);if(t!==Mu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mg(n).isEqual(mg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=fd(r.timestampValue),l=fd(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Su(n.bytesValue).isEqual(Su(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Cr(r.geoPointValue.latitude)===Cr(o.geoPointValue.latitude)&&Cr(r.geoPointValue.longitude)===Cr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Cr(r.integerValue)===Cr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Cr(r.doubleValue),l=Cr(o.doubleValue);return u===l?jc(u)===jc(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return ag(n.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(k0(u)!==k0(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!xa(u[m],l[m])))return!1;return!0}(n,e);default:return rt()}var o}function Jh(n,e){return void 0!==(n.values||[]).find(t=>xa(t,e))}function xu(n,e){if(n===e)return 0;const t=Mu(n),r=Mu(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Cr(o.integerValue||o.doubleValue),m=Cr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return pd(n.timestampValue,e.timestampValue);case 4:return pd(mg(n),mg(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Su(o),m=Su(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let E=0;E<l.length&&E<m.length;E++){const b=Vt(l[E],m[E]);if(0!==b)return b}return Vt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Vt(Cr(o.latitude),Cr(u.latitude));return 0!==l?l:Vt(Cr(o.longitude),Cr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let E=0;E<l.length&&E<m.length;++E){const b=xu(l[E],m[E]);if(b)return b}return Vt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Hc.mapValue&&u===Hc.mapValue)return 0;if(o===Hc.mapValue)return 1;if(u===Hc.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),E=u.fields||{},b=Object.keys(E);m.sort(),b.sort();for(let M=0;M<m.length&&M<b.length;++M){const R=Vt(m[M],b[M]);if(0!==R)return R;const $=xu(l[m[M]],E[b[M]]);if(0!==$)return $}return Vt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function pd(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=fd(n),r=fd(e),o=Vt(t.seconds,r.seconds);return 0!==o?o:Vt(t.nanos,r.nanos)}function Xh(n){return U0(n)}function U0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=fd(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=U0(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${U0(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ly(n){return!!n&&"integerValue"in n}function Vy(n){return!!n&&"arrayValue"in n}function B0(n){return!!n&&"nullValue"in n}function Uy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ps(n){return!!n&&"mapValue"in n}function vg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Na(n){return"nullValue"in n?Fy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gd(Au.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function Go(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gd(Au.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hc:rt()}function io(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function j0(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ps(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vg(t)}setAll(e){let t=qn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=vg(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Ps(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ps(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new di(vg(this.value))}}function VD(n){const e=[];return Tu(n.fields,(t,r)=>{const o=new qn([t]);if(Ps(r)){const u=VD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Vi(e)}class Wn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Wn(e,0,vt.min(),vt.min(),vt.min(),di.empty(),0)}static newFoundDocument(e,t,r,o){return new Wn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Wn(e,2,t,vt.min(),vt.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,vt.min(),vt.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gc{constructor(e,t){this.position=e,this.inclusive=t}}function UD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):xu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function By(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xa(n.position[t],e.position[t]))return!1;return!0}class Ra{constructor(e,t="asc"){this.field=e,this.dir=t}}function HS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class $0{}class Xt extends $0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new GS(e,t,r):"array-contains"===t?new $D(e,r):"in"===t?new W0(e,r):"not-in"===t?new HD(e,r):"array-contains-any"===t?new GD(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new z0(e,r):new Hy(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xu(t,this.value)):null!==t&&Mu(this.value)===Mu(t)&&this.matchesComparison(xu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends $0{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wn(e,t)}matches(e){return md(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function md(n){return"and"===n.op}function jy(n){return"or"===n.op}function ef(n){return BD(n)&&md(n)}function BD(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function $y(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Xh(n.value);if(ef(n))return n.filters.map(e=>$y(e)).join(",");{const e=n.filters.map(t=>$y(t)).join(",");return`${n.op}(${e})`}}function H0(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&xa(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&H0(u,r.filters[l]),!0)}(n,e):void rt();var t,r}function G0(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function jD(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${Xh(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(jD).join(" ,")+"}"}(n):"Filter";var e}class GS extends Xt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class z0 extends Xt{constructor(e,t){super(e,"in",t),this.keys=q0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hy extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=q0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function q0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class $D extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vy(t)&&Jh(t.arrayValue,this.value)}}class W0 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jh(this.value.arrayValue,t)}}class HD extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jh(this.value.arrayValue,t)}}class GD extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jh(this.value.arrayValue,r))}}class zD{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function Gy(n,e=null,t=[],r=[],o=null,u=null,l=null){return new zD(n,e,t,r,o,u,l)}function zc(n){const e=Xe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$y(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),hg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xh(r)).join(",")),e.dt=t}return e.dt}function _g(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!H0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!By(n.startAt,e.startAt)&&By(n.endAt,e.endAt)}function zy(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qy(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function qD(n,e,t){let r=Fy,o=!0;for(const u of qy(n,e)){let l=Fy,m=!0;switch(u.op){case"<":case"<=":l=Na(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Fy}io({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];io({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function WD(n,e,t){let r=Hc,o=!0;for(const u of qy(n,e)){let l=Hc,m=!0;switch(u.op){case">=":case">":l=Go(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Hc}j0({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];j0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Nu{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=E,this.wt=null,this._t=null}}function ZD(n,e,t,r,o,u,l,m){return new Nu(n,e,t,r,o,u,l,m)}function tf(n){return new Nu(n)}function KD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Z0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Wy(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function K0(n){return null!==n.collectionGroup}function yd(n){const e=Xe(n);if(null===e.wt){e.wt=[];const t=Wy(e),r=Z0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Ra(t)),e.wt.push(new Ra(qn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ra(qn.keyField(),u))}}}return e.wt}function Xi(n){const e=Xe(n);if(!e._t)if("F"===e.limitType)e._t=Gy(e.path,e.collectionGroup,yd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of yd(e))t.push(new Ra(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Gc(e.startAt.position,e.startAt.inclusive):null;e._t=Gy(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function Y0(n,e){e.getFirstInequalityField(),Wy(n);const t=n.filters.concat([e]);return new Nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zy(n,e,t){return new Nu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wg(n,e){return _g(Xi(n),Xi(e))&&n.limitType===e.limitType}function YD(n){return`${zc(Xi(n))}|lt:${n.limitType}`}function Ky(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>jD(r)).join(", ")}]`),hg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xh(r)).join(",")),`Target(${t})`}(Xi(n))}; limitType=${n.limitType})`}function nf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of yd(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=UD(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,yd(t),r)||t.endAt&&!function(o,u,l){const m=UD(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,yd(t),r)));var t,r}function Q0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J0(n){return(e,t)=>{let r=!1;for(const o of yd(n)){const u=QD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function QD(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),E=l.data.field(o);return null!==m&&null!==E?xu(m,E):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return F0(this.inner)}size(){return this.innerSize}}const JD=new Mn(Qe.comparator);function es(){return JD}const X0=new Mn(Qe.comparator);function rf(...n){let e=X0;for(const t of n)e=e.insert(t.key,t);return e}function ew(n){let e=X0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ui(){return Eg()}function XD(){return Eg()}function Eg(){return new Oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const sf=new Mn(Qe.comparator),Ex=new un(Qe.comparator);function Bt(...n){let e=Ex;for(const t of n)e=e.add(t);return e}const Ix=new un(Vt);function Yy(){return Ix}function tw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function zS(n){return{integerValue:""+n}}function vd(n,e){return fg(e)?zS(e):tw(n,e)}class Qy{constructor(){this._=void 0}}function qS(n,e,t){return n instanceof af?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ky(o)&&(o=gg(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Pa?Ig(n,e):n instanceof Vr?ZS(n,e):function(r,o){const u=_d(r,o),l=nw(u)+nw(r.gt);return Ly(u)&&Ly(r.gt)?zS(l):tw(r.serializer,l)}(n,e)}function WS(n,e,t){return n instanceof Pa?Ig(n,e):n instanceof Vr?ZS(n,e):t}function _d(n,e){return n instanceof wd?Ly(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class af extends Qy{}class Pa extends Qy{constructor(e){super(),this.elements=e}}function Ig(n,e){const t=eC(e);for(const r of n.elements)t.some(o=>xa(o,r))||t.push(r);return{arrayValue:{values:t}}}class Vr extends Qy{constructor(e){super(),this.elements=e}}function ZS(n,e){let t=eC(e);for(const r of n.elements)t=t.filter(o=>!xa(o,r));return{arrayValue:{values:t}}}class wd extends Qy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function nw(n){return Cr(n.integerValue||n.doubleValue)}function eC(n){return Vy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uf{constructor(e,t){this.field=e,this.transform=t}}class nC{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Xy{}function rC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fa(n.key,Zn.none()):new Ru(n.key,n.data,Zn.none());{const t=n.data,r=di.empty();let o=new un(qn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new ka(n.key,r,new Vi(o.toArray()),Zn.none())}}function Dg(n,e,t){n instanceof Ru?function(r,o,u){const l=r.value.clone(),m=iw(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ka?function(r,o,u){if(!Jy(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=iw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(rw(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cg(n,e,t,r){return n instanceof Ru?function(o,u,l,m){if(!Jy(o.precondition,u))return l;const E=o.value.clone(),b=sC(o.fieldTransforms,m,u);return E.setAll(b),u.convertToFoundDocument(u.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof ka?function(o,u,l,m){if(!Jy(o.precondition,u))return l;const E=sC(o.fieldTransforms,m,u),b=u.data;return b.setAll(rw(o)),b.setAll(E),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(M=>M.field))}(n,e,t,r):(l=t,Jy(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function KS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=_d(r.transform,o||null);null!=u&&(null===t&&(t=di.empty()),t.set(r.field,u))}return t||null}function iC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ag(t,r,(o,u)=>function tC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Pa&&r instanceof Pa||t instanceof Vr&&r instanceof Vr?ag(t.elements,r.elements,xa):t instanceof wd&&r instanceof wd?xa(t.gt,r.gt):t instanceof af&&r instanceof af);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ru extends Xy{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ka extends Xy{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function rw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function iw(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,WS(l,m,t[o]))}return r}function sC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,qS(u,l,e))}return r}class Fa extends Xy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ed extends Xy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sw{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Dg(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XD();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const E=rC(l,m);null!==E&&r.set(o.key,E),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&ag(this.mutations,e.mutations,(t,r)=>iC(t,r))&&ag(this.baseMutations,e.baseMutations,(t,r)=>iC(t,r))}}class ow{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=sf;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new ow(e,t,r,o)}}class aw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aC{constructor(e,t){this.count=e,this.unchangedNames=t}}var br,sn;function uw(n){switch(n){default:return rt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function uC(n){if(void 0===n)return Un("GRPC error has no .code"),ce.UNKNOWN;switch(n){case br.OK:return ce.OK;case br.CANCELLED:return ce.CANCELLED;case br.UNKNOWN:return ce.UNKNOWN;case br.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case br.INTERNAL:return ce.INTERNAL;case br.UNAVAILABLE:return ce.UNAVAILABLE;case br.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case br.NOT_FOUND:return ce.NOT_FOUND;case br.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case br.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case br.ABORTED:return ce.ABORTED;case br.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case br.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case br.DATA_LOSS:return ce.DATA_LOSS;default:return rt()}}(sn=br||(br={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class cw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return lw}static getOrCreateInstance(){return null===lw&&(lw=new cw),lw}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let lw=null;function YS(){return new TextEncoder}const Dx=new ro([4294967295,4294967295],0);function QS(n){const e=YS().encode(n),t=new Fi;return t.update(e),new Uint8Array(t.digest())}function dw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ro([t,r],0),new ro([o,u],0)]}class cf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bg(`Invalid padding: ${t}`);if(r<0)throw new bg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new bg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ro.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(ro.fromNumber(r)));return 1===o.compare(Dx)&&(o=new ro([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=QS(e),[r,o]=dw(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new cf(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=QS(e),[r,o]=dw(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class bg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,lf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tg(vt.min(),o,new Mn(Vt),es(),Bt())}}class lf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lf(r,t,Bt(),Bt(),Bt())}}class qc{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class cC{constructor(e,t){this.targetId=e,this.Vt=t}}class lC{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class dC{constructor(){this.St=0,this.Dt=hC(),this.Ct=Zr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Bt(),t=Bt(),r=Bt();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new lf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=hC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class JS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=es(),this.zt=XS(),this.Wt=new Mn(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(zy(l))if(0===o){const m=new Qe(l.path);this.Yt(r,m,Wn.newNoDocument(m,vt.min()))}else dt(1===o);else{const m=this.ie(r);if(m!==o){const E=this.re(e,m);0!==E&&(this.ee(r),this.Wt=this.Wt.insert(r,2===E?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=cw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,M,R){var $,te,be,Be,He,pt;const At={localCacheCount:M,existenceFilterCount:R.count},Ct=R.unchangedNames;return Ct&&(At.bloomFilter={applied:0===b,hashCount:null!==($=Ct?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Be=null===(be=null===(te=Ct?.bits)||void 0===te?void 0:te.bitmap)||void 0===be?void 0:be.length)&&void 0!==Be?Be:0,padding:null!==(pt=null===(He=Ct?.bits)||void 0===He?void 0:He.padding)&&void 0!==pt?pt:0}),At}(E,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let E,b;try{E=Su(u).toUint8Array()}catch(M){if(M instanceof $c)return Ti("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{b=new cf(E,l,m)}catch(M){return Ti(M instanceof bg?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&zy(m.target)){const E=new Qe(m.target.path);null!==this.jt.get(E)||this.ae(l,E)||this.Yt(l,E,Wn.newNoDocument(E,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Bt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(E=>{const b=this.se(E);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new Tg(e,t,this.Wt,this.jt,r);return this.jt=es(),this.zt=XS(),this.Wt=new Mn(Vt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new dC,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new un(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dC),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function XS(){return new Mn(Qe.comparator)}function hC(){return new Mn(Qe.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},eA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tA={and:"AND",or:"OR"};class Sg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hw(n,e){return n.useProto3Json||hg(e)?e:{value:e}}function Id(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gC(n,e){return Id(n,e.toTimestamp())}function Tr(n){return dt(!!n),vt.fromTimestamp(function(e){const t=fd(e);return new tr(t.seconds,t.nanos)}(n))}function ev(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mC(n){const e=Zt.fromString(n);return dt(TC(e)),e}function Dd(n,e){return ev(n.databaseId,e.path)}function La(n,e){const t=mC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(yC(t))}function tv(n,e){return ev(n.databaseId,e)}function fw(n){const e=mC(n);return 4===e.length?Zt.emptyPath():yC(e)}function Ag(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yC(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vC(n,e,t){return{name:Dd(n,e),fields:t.value.mapValue.fields}}function nv(n,e,t){const r=La(n,e.name),o=Tr(e.updateTime),u=e.createTime?Tr(e.createTime):vt.min(),l=new di({mapValue:{fields:e.fields}}),m=Wn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Mg(n,e){let t;if(e instanceof Ru)t={update:vC(n,e.key,e.value)};else if(e instanceof Fa)t={delete:Dd(n,e.key)};else if(e instanceof ka)t={update:vC(n,e.key,e.data),updateMask:oA(e.fieldMask)};else{if(!(e instanceof Ed))return rt();t={verify:Dd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof af)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vr)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function pw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(Tr(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),m=new af):"appendMissingElements"in l?m=new Pa(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Vr(l.removeAllFromArray.values||[]):"increment"in l?m=new wd(u,l.increment):rt();const E=qn.fromServerFormat(l.fieldPath);return new uf(E,m)}(n,o)):[];var o;if(e.update){const o=La(n,e.update.name),u=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Vi((e.updateMask.fieldPaths||[]).map(b=>qn.fromServerFormat(b)));return new ka(o,u,l,t,r)}return new Ru(o,u,t,r)}if(e.delete){const o=La(n,e.delete);return new Fa(o,t)}if(e.verify){const o=La(n,e.verify);return new Ed(o,t)}return rt()}function wC(n,e){return{documents:[tv(n,e.path)]}}function gw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0!==E.length)return bC(wn.create(E,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(b=>{return{field:Wc((M=b).field),direction:DC(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=hw(n,e.limit);var m,E;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function EC(n){let e=fw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=function(M){const R=IC(M);return R instanceof wn&&ef(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(M=>{return new Ra(Cd((R=M).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,hg(R)?null:R}(t.limit));let E=null;var M;t.startAt&&(E=new Gc((M=t.startAt).values||[],!!M.before));let b=null;return t.endAt&&(b=function(M){return new Gc(M.values||[],!M.before)}(t.endAt)),ZD(e,o,l,u,m,"F",E,b)}function IC(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cd(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Cd(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cd(e.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Cd(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Xt.create(Cd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>IC(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function DC(n){return fC[n]}function CC(n){return eA[n]}function sA(n){return tA[n]}function Wc(n){return{fieldPath:n.canonicalString()}}function Cd(n){return qn.fromServerFormat(n.fieldPath)}function bC(n){return n instanceof Xt?function(e){if("=="===e.op){if(Uy(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NAN"}};if(B0(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Uy(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NAN"}};if(B0(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(e.field),op:CC(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>bC(r));return 1===t.length?t[0]:{compositeFilter:{op:sA(e.op),filters:t}}}(n):rt()}function oA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ou{constructor(e,t,r,o,u=vt.min(),l=vt.min(),m=Zr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=E}withSequenceNumber(e){return new Ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rv{constructor(e){this.fe=e}}function yw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:df(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Dd(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Id(o,u.version.toTimestamp()),createTime:Id(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bd(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:bd(e.version)}}var o,u;return r}function df(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Td(n){const e=new tr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Pu(n,e){const t=(e.baseMutations||[]).map(u=>pw(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>pw(n.fe,u)),o=tr.fromMillis(e.localWriteTimeMs);return new sw(e.batchId,o,t,r)}function xg(n){const e=Td(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Td(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Xi(tf(fw(o.documents[0])))):r=Xi(EC(n.query)),new Ou(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function vw(n,e){const t=bd(e.snapshotVersion),r=bd(e.lastLimboFreeSnapshotVersion);let o;o=zy(e.target)?wC(n.fe,e.target):gw(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function ku(n){const e=EC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zy(e,e.limit,"L"):e}function iv(n,e){return new aw(e.largestBatchId,pw(n.fe,e.overlayMutation))}function SC(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function aA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:bd(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class _w{getBundleMetadata(e,t){return sv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Td(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return sv(e).put({bundleId:(r=t).id,createTime:bd(Tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AC(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:ku(o.bundledQuery),readTime:Td(o.readTime)};var o})}saveNamedQuery(e,t){return AC(e).put({name:(r=t).name,readTime:bd(Tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sv(n){return Wr(n,"bundles")}function AC(n){return Wr(n,"namedQueries")}class Ng{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Ng(e,t.uid||"")}getOverlay(e,t){return hf(e).get(SC(this.userId,t)).next(r=>r?iv(this.serializer,r):null)}getOverlays(e,t){const r=Ui();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new aw(t,l);o.push(this.we(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(li(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(hf(e).J("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ui(),u=li(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return hf(e).j("collectionPathOverlayIndex",l).next(m=>{for(const E of m){const b=iv(this.serializer,E);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ui();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hf(e).X({index:"collectionGroupOverlayIndex",range:m},(E,b,M)=>{const R=iv(this.serializer,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):M.done()}).next(()=>u)}we(e,t){return hf(e).put(function(r,o,u){const[l,m,E]=SC(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Mg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function hf(n){return Wr(n,"documentOverlays")}class Sd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Cr(e.integerValue));else if("doubleValue"in e){const r=Cr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),jc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Su(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?LD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function MC(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ov(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=MC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Sd.Ve=new Sd;class xC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=ov(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=ov(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class NC{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class RC{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ff{constructor(){this.je=new xC,this.ze=new NC(this.je),this.We=new RC(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Ad{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ad(this.indexId,this.documentKey,this.arrayValue,r)}}function Zc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=OC(n.arrayValue,e.arrayValue),0!==t?t:(t=OC(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function OC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){dt(e.collectionGroup===this.collectionId);const t=My(e);if(void 0!==t&&!this.en(t))return!1;const r=dd(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ww(n){var e,t;if(dt(n instanceof Xt||n instanceof wn),n instanceof Xt){if(n instanceof W0){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return wn.create(o,"or")}return n}const r=n.filters.map(o=>ww(o));return wn.create(r,n.op)}function Cx(n){if(0===n.getFilters().length)return[];const e=kC(ww(n));return dt(PC(e)),av(e)||Ew(e)?[e]:e.getFilters()}function av(n){return n instanceof Xt}function Ew(n){return n instanceof wn&&ef(n)}function PC(n){return av(n)||Ew(n)||function(e){if(e instanceof wn&&jy(e)){for(const t of e.getFilters())if(!av(t)&&!Ew(t))return!1;return!0}return!1}(n)}function kC(n){if(dt(n instanceof Xt||n instanceof wn),n instanceof Xt)return n;if(1===n.filters.length)return kC(n.filters[0]);const e=n.filters.map(r=>kC(r));let t=wn.create(e,n.op);return t=uv(t),PC(t)?t:(dt(t instanceof wn),dt(md(t)),dt(t.filters.length>1),t.filters.reduce((r,o)=>Iw(r,o)))}function Iw(n,e){let t;return dt(n instanceof Xt||n instanceof wn),dt(e instanceof Xt||e instanceof wn),t=n instanceof Xt?e instanceof Xt?wn.create([n,e],"and"):FC(n,e):e instanceof Xt?FC(e,n):function(r,o){if(dt(r.filters.length>0&&o.filters.length>0),md(r)&&md(o))return G0(r,o.getFilters());const u=jy(r)?r:o,l=jy(r)?o:r,m=u.filters.map(E=>Iw(E,l));return wn.create(m,"or")}(n,e),uv(t)}function FC(n,e){if(md(e))return G0(e,n.getFilters());{const t=e.filters.map(r=>Iw(n,r));return wn.create(t,"or")}}function uv(n){if(dt(n instanceof Xt||n instanceof wn),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return uv(e[0]);if(BD(n))return n;const t=e.map(o=>uv(o)),r=[];return t.forEach(o=>{o instanceof Xt?r.push(o):o instanceof wn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:wn.create(r,n.op)}class cA{constructor(){this.rn=new Dw}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Li.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Dw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new un(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Zt.comparator)).toArray()}}const cv=new Uint8Array(0);class lA{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Dw,this.un=new Oa(r=>zc(r),(r,o)=>_g(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:li(o)};return LC(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[yD(t),""],!1,!0);return LC(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ma(l.parent))}return r})}addFieldIndex(e,t){const r=lv(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Og(e);return u.next(m=>{l.put(aA(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=lv(e),o=Og(e),u=Rg(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rg(e);let o=!0;const u=new Map;return se.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Bt();const m=[];return se.forEach(u,(E,b)=>{var M;Fe("IndexedDbIndexManager",`Using index ${M=E,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${zc(t)}`);const R=function(Ct,Ot){const Ht=My(Ot);if(void 0===Ht)return null;for(const on of qy(Ct,Ht.fieldPath))switch(on.op){case"array-contains-any":return on.value.arrayValue.values||[];case"array-contains":return[on.value]}return null}(b,E),$=function(Ct,Ot){const Ht=new Map;for(const on of dd(Ot))for(const ps of qy(Ct,on.fieldPath))switch(ps.op){case"==":case"in":Ht.set(on.fieldPath.canonicalString(),ps.value);break;case"not-in":case"!=":return Ht.set(on.fieldPath.canonicalString(),ps.value),Array.from(Ht.values())}return null}(b,E),te=function(Ct,Ot){const Ht=[];let on=!0;for(const ps of dd(Ot)){const lm=0===ps.kind?qD(Ct,ps.fieldPath,Ct.startAt):WD(Ct,ps.fieldPath,Ct.startAt);Ht.push(lm.value),on&&(on=lm.inclusive)}return new Gc(Ht,on)}(b,E),be=function(Ct,Ot){const Ht=[];let on=!0;for(const ps of dd(Ot)){const lm=0===ps.kind?WD(Ct,ps.fieldPath,Ct.endAt):qD(Ct,ps.fieldPath,Ct.endAt);Ht.push(lm.value),on&&(on=lm.inclusive)}return new Gc(Ht,on)}(b,E),Be=this.hn(E,b,te),He=this.hn(E,b,be),pt=this.ln(E,b,$),At=this.fn(E.indexId,R,Be,te.inclusive,He,be.inclusive,pt);return se.forEach(At,Ct=>r.H(Ct,t.limit).next(Ot=>{Ot.forEach(Ht=>{const on=Qe.fromSegments(Ht.documentKey);l.has(on)||(l=l.add(on),m.push(on))})}))}).next(()=>m)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Cx(wn.create(e.filters,"and")).map(r=>Gy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),b=E/(null!=t?t.length:1),M=[];for(let R=0;R<E;++R){const $=t?this.dn(t[R/b]):cv,te=this.wn(e,$,r[R%b],o),be=this._n(e,$,u[R%b],l),Be=m.map(He=>this.wn(e,$,He,!0));M.push(...this.createRange(te,be,Be))}return M}wn(e,t,r,o){const u=new Ad(e,Qe.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Ad(e,Qe.empty(),t,r);return o?u.Je():u}an(e,t){const r=new uA(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return se.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let E=new un(qn.comparator),b=!1;for(const M of m.filters)for(const R of M.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:E=E.add(R.field));for(const M of m.orderBy)M.field.isKeyField()||(E=E.add(M.field));return E.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new ff;for(const o of dd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);Sd.Ve._e(u,l)}return r.Qe()}dn(e){const t=new ff;return Sd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new ff;return Sd.Ve._e(gd(this.databaseId,t),r.He(function(o){const u=dd(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new ff);let u=0;for(const l of dd(e)){const m=r[u++];for(const E of o)if(this.yn(t,l.fieldPath)&&Vy(m))o=this.pn(o,l,m);else{const b=E.He(l.kind);Sd.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const E=new ff;E.seed(m.Qe()),Sd.Ve._e(l,E.He(t.kind)),u.push(E)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lv(e),o=Og(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{l.push(function(b,M){const R=M?new cg(M.sequenceNumber,new Li(Td(M.readTime),new Qe(Ma(M.documentKey)),M.largestBatchId)):cg.empty(),$=b.fields.map(([te,be])=>new xy(qn.fromServerFormat(te),be));return new Uc(b.indexId,b.collectionGroup,$,R)}(m,E))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=lv(e),u=Og(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,E=>u.put(aA(E.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,E=>this.En(e,o,E).next(b=>{const M=this.An(u,E);return b.isEqual(M)?se.resolve():this.vn(e,u,E,b,M)}))))})}Rn(e,t,r,o){return Rg(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return Rg(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=Rg(e);let u=new un(Zc);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Ad(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new un(Zc);const o=this.mn(t,e);if(null==o)return r;const u=My(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Vy(l))for(const m of l.arrayValue.values||[])r=r.add(new Ad(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Ad(t.indexId,e.key,cv,o));return r}vn(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,E,b,M,R){const $=m.getIterator(),te=E.getIterator();let be=Qh($),Be=Qh(te);for(;be||Be;){let He=!1,pt=!1;if(be&&Be){const At=b(be,Be);At<0?pt=!0:At>0&&(He=!0)}else null!=be?pt=!0:He=!0;He?(M(Be),Be=Qh(te)):pt?(R(be),be=Qh($)):(be=Qh($),Be=Qh(te))}}(o,u,Zc,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),se.waitFor(l)}Tn(e){let t=1;return Og(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Zc(l,m)).filter((l,m,E)=>!m||0!==Zc(l,E[m-1]));const o=[];o.push(e);for(const l of r){const m=Zc(l,e),E=Zc(l,t);if(0===m)o[0]=e.Je();else if(m>0&&E<0)o.push(l),o.push(l.Je());else if(E>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,cv,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,cv,[]]))}return u}bn(e,t){return Zc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(VC)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||rt())).next(VC)}}function LC(n){return Wr(n,"collectionParents")}function Rg(n){return Wr(n,"indexEntries")}function lv(n){return Wr(n,"indexConfiguration")}function Og(n){return Wr(n,"indexState")}function VC(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Zh(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Li(e.readTime,e.documentKey,t)}const pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const E=r.X({range:l},(M,R,$)=>(m++,$.delete()));u.push(E.next(()=>{dt(1===m)}));const b=[];for(const M of t.mutations){const R=Ry(e,M.key.path,t.batchId);u.push(o.delete(R)),b.push(M.key)}return se.waitFor(u).next(()=>b)}function Pg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class kg{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new kg(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=gf(e),l=Fu(e);return l.add({}).next(m=>{dt("number"==typeof m);const E=new sw(m,t,r,o),b=function($,te,be){const Be=be.baseMutations.map(pt=>Mg($.fe,pt)),He=be.mutations.map(pt=>Mg($.fe,pt));return{userId:te,batchId:be.batchId,localWriteTimeMs:be.localWriteTime.toMillis(),baseMutations:Be,mutations:He}}(this.serializer,this.userId,E),M=[];let R=new un(($,te)=>Vt($.canonicalString(),te.canonicalString()));for(const $ of o){const te=Ry(this.userId,$.key.path,m);R=R.add($.key.path.popLast()),M.push(l.put(b)),M.push(u.put(te,bD))}return R.forEach($=>{M.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[m]=E.keys()}),se.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(r=>r?(dt(r.userId===this.userId),Pu(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Fu(e).X({index:"userMutationsIndex",range:o},(l,m,E)=>{m.userId===this.userId&&(dt(m.batchId>=r),u=Pu(this.serializer,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).j("userMutationsIndex",t).next(r=>r.map(o=>Pu(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return gf(e).X({range:o},(l,m,E)=>{const[b,M,R]=l,$=Ma(M);if(b===this.userId&&t.path.isEqual($))return Fu(e).get(R).next(te=>{if(!te)throw rt();dt(te.userId===this.userId),u.push(Pu(this.serializer,te))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Vt);const o=[];return t.forEach(u=>{const l=Yh(this.userId,u.path),m=IDBKeyRange.lowerBound(l),E=gf(e).X({range:m},(b,M,R)=>{const[$,te,be]=b,Be=Ma(te);$===this.userId&&u.path.isEqual(Be)?r=r.add(be):R.done()});o.push(E)}),se.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Yh(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new un(Vt);return gf(e).X({range:l},(E,b,M)=>{const[R,$,te]=E,be=Ma($);R===this.userId&&r.isPrefixOf(be)?be.length===o&&(m=m.add(te)):M.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Fu(e).get(u).next(l=>{if(null===l)throw rt();dt(l.userId===this.userId),r.push(Pu(this.serializer,l))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Cw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return gf(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const E=Ma(u[1]);o.push(E)}else m.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return bw(e,this.userId,t)}xn(e){return dA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bw(n,e,t){const r=Yh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return gf(n).X({range:u,Y:!0},(m,E,b)=>{const[M,R,$]=m;M===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function Fu(n){return Wr(n,"mutations")}function gf(n){return Wr(n,"documentMutations")}function dA(n){return Wr(n,"mutationQueues")}class mf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mf(0)}static Mn(){return new mf(-1)}}class UC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new mf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yf(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return yf(e).X((l,m)=>{const E=xg(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return yf(e).X((r,o)=>{const u=xg(o);t(u)})}$n(e){return BC(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}On(e,t){return BC(e).put("targetGlobalKey",t)}Fn(e,t){return yf(e).put(vw(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yf(e).X({range:o,index:"queryTargetsIndex"},(l,m,E)=>{const b=xg(m);_g(t,b.target)&&(u=b,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Kc(e);return t.forEach(l=>{const m=li(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=Kc(e);return se.forEach(t,u=>{const l=li(u.path);return se.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Kc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Kc(e);let u=Bt();return o.X({range:r,Y:!0},(l,m,E)=>{const b=Ma(l[1]),M=new Qe(b);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=li(t.path),o=IDBKeyRange.bound([r],[yD(r)],!1,!0);let u=0;return Kc(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],E,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return yf(e).get(t).next(r=>r?xg(r):null)}}function yf(n){return Wr(n,"targets")}function BC(n){return Wr(n,"targetGlobal")}function Kc(n){return Wr(n,"targetDocuments")}function jC([n,e],[t,r]){const o=Vt(n,t);return 0===o?Vt(e,r):o}class Fg{constructor(e){this.Ln=e,this.buffer=new un(jC),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $C{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bu(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bc(r)}yield t.Qn(3e5)}))}}class Tw{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ji.ct);const r=new Fg(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(pf)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pf):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,E,b;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),Lc()<=xc.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-M}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(b-E)+`ms\nTotal Duration: ${b-M}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class bx{constructor(e,t){this.db=e,this.garbageCollector=function HC(n,e){return new Tw(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return dv(e,r)}removeReference(e,t,r){return dv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dv(e,t)}Xn(e,t){return function(r,o){let u=!1;return dA(r).Z(l=>bw(r,l,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const E=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),Kc(e).delete([0,li(l.path)])))});o.push(E)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dv(e,t)}Yn(e,t){const r=Kc(e);let o,u=Ji.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:E,sequenceNumber:b})=>{0===l?(u!==Ji.ct&&t(new Qe(Ma(o)),u),u=b,o=E):u=Ji.ct}).next(()=>{u!==Ji.ct&&t(new Qe(Ma(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dv(n,e){return Kc(n).put((r=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:r}));var r}class hA{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Va(e).put(r)}removeEntry(e,t,r){return Va(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],df(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Wn.newInvalidDocument(t);return Va(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(vf(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Wn.newInvalidDocument(t)};return Va(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(vf(t))},(o,u)=>{r={document:this.ts(t,u),size:Pg(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=es(),o=new Mn(Qe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,Pg(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let o=new un(Sw);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(vf(o.first()),vf(o.last())),l=o.getIterator();let m=l.getNext();return Va(e).X({index:"documentKeyIndex",range:u},(E,b,M)=>{const R=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&Sw(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?M.G(vf(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Va(e).j(IDBKeyRange.bound(l,m,!0)).next(E=>{let b=es();for(const M of E){const R=this.ts(Qe.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);R.isFoundDocument()&&(nf(t,R)||o.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=es();const l=qC(t,r),m=qC(t,Li.max());return Va(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(E,b,M)=>{const R=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new fA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zC(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Zn(e,t){return zC(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function mw(n,e){let t;if(e.document)t=nv(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=Td(e.noDocument.readTime);t=Wn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Qe.fromSegments(e.unknownDocument.path),o=Td(e.unknownDocument.version);t=Wn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new tr(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Wn.newInvalidDocument(e)}}function GC(n){return new Lg(n)}class fA extends hA{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Oa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new un((u,l)=>Vt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const E=yw(this.os.serializer,l);o=o.add(u.path.popLast());const b=Pg(E);r+=b-m.size,t.push(this.os.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=yw(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function zC(n){return Wr(n,"remoteDocumentGlobal")}function Va(n){return Wr(n,"remoteDocumentsV14")}function vf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qC(n,e){const t=e.documentKey.path.toArray();return[n,df(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Vt(t[u],r[u]),o)return o;return o=Vt(t.length,r.length),o||(o=Vt(t[t.length-2],r[r.length-2]),o||Vt(t[t.length-1],r[r.length-1]))}class hv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Cg(r.mutation,o,Vi.empty(),tr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Ui();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=rf();return u.forEach((m,E)=>{l=l.insert(m,E.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ui();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=es();const l=Eg(),m=Eg();return t.forEach((E,b)=>{const M=r.get(b.key);o.has(b.key)&&(void 0===M||M.mutation instanceof ka)?u=u.insert(b.key,b):void 0!==M?(l.set(b.key,M.mutation.getFieldMask()),Cg(M.mutation,b,M.mutation.getFieldMask(),tr.now())):l.set(b.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,u).next(E=>(E.forEach((b,M)=>l.set(b,M)),t.forEach((b,M)=>{var R;return m.set(b,new hv(M,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Eg();let o=new Mn((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(E=>{const b=t.get(E);if(null===b)return;let M=r.get(E)||Vi.empty();M=m.applyToLocalView(b,M),r.set(E,M);const R=(o.get(m.batchId)||Bt()).add(E);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const E=m.getNext(),b=E.key,M=E.value,R=XD();M.forEach($=>{if(!u.has($)){const te=rC(t.get($),r.get($));null!==te&&R.set($,te),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):K0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Ui());let m=-1,E=u;return l.next(b=>se.forEach(b,(M,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(M)?se.resolve():this.remoteDocumentCache.getEntry(e,M).next($=>{E=E.insert(M,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,E,b,Bt())).next(M=>({batchId:m,changes:ew(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let o=rf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=rf();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,m=>{const E=(b=t,M=m.child(o),new Nu(M,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,M;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(b=>{b.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,E)=>{const b=E.getKey();null===u.get(b)&&(u=u.insert(b,Wn.newInvalidDocument(b)))});let l=rf();return u.forEach((m,E)=>{const b=o.get(m);void 0!==b&&Cg(b.mutation,E,Vi.empty(),tr.now()),nf(t,E)&&(l=l.insert(m,E))}),l})}}class pA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Tr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:ku(r.bundledQuery),readTime:Tr(r.readTime)}),se.resolve();var r}}class ZC{constructor(){this.overlays=new Mn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ui();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Ui(),u=t.length+1,l=new Qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const E=m.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Mn((b,M)=>b-M);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let M=u.get(b.largestBatchId);null===M&&(M=Ui(),u=u.insert(b.largestBatchId,M)),M.set(b.getKey(),b)}}const m=Ui(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,M)=>m.set(b,M)),!(m.size()>=o)););return se.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new aw(t,r));let u=this.ls.get(t);void 0===u&&(u=Bt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class Aw{constructor(){this.fs=new un(hi.ds),this.ws=new un(hi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new hi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new hi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new Zt([])),r=new hi(t,e),o=new hi(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new Zt([])),r=new hi(t,e),o=new hi(t,e+1);let u=Bt();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new hi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class KC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new un(hi.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new sw(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new hi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),o=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Vt);return t.forEach(o=>{const u=new hi(o,0),l=new hi(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new hi(new Qe(u),0);let m=new un(Vt);return this.Rs.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(E.As)),!0)},l),se.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,o=>{const u=new hi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new hi(t,0),o=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fv{constructor(e){this.Ds=e,this.docs=new Mn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Wn.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=es();const l=t.path,m=new Qe(l.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:b,value:{document:M}}=E.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Zh(Ny(M),r)<=0||(o.has(M.key)||nf(t,M))&&(u=u.insert(M.key,M.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,o){rt()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gA(this)}getSize(e){return se.resolve(this.size)}}class gA extends hA{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class mA{constructor(e){this.persistence=e,this.xs=new Oa(t=>zc(t),_g),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Aw,this.targetCount=0,this.Ms=mf.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class pv{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ji(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new mA(this),this.indexManager=new cA,this.remoteDocumentCache=new fv(r=>this.referenceDelegate.Ls(r)),this.serializer=new rv(t),this.qs=new pA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new KC(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new YC(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class YC extends _D{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Qs=new Aw,this.js=null}static zs(e){return new _f(e)}get Ws(){if(this.js)return this.js;throw rt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const o=Qe.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yA{constructor(e){this.serializer=e}O(e,t,r,o){const u=new dg("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CD,{unique:!0}),m.createObjectStore("documentMutations"),Mw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Mw(e)),l=l.next(()=>function(m){const E=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,E){return E.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CD,{unique:!0});const M=E.store("mutations"),R=b.map($=>M.put($));return se.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:RD});E.createIndex("collectionPathOverlayIndex",OD,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",jS,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:TD});E.createIndex("documentKeyIndex",VS),E.createIndex("collectionGroupIndex",US)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:MD}).createIndex("sequenceNumberIndex",BS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:xD}).createIndex("documentKeyIndex",ND,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Pg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>se.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>se.forEach(m,E=>{dt(E.userId===u.userId);const b=Pu(this.serializer,E);return Cw(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const E=new Zt(l),b=[0,li(E)];u.push(t.get(b).next(M=>M?se.resolve():t.put({targetId:0,path:li(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:O0});const r=t.store("collectionParents"),o=new Dw,u=l=>{if(o.add(l)){const m=l.lastSegment(),E=l.popLast();return r.put({collectionId:m,parent:li(E)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const E=new Zt(l);return u(E.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,E],b)=>{const M=Ma(m);return u(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=xg(o),l=vw(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),E=(b=l,b.document?new Qe(Zt.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const M={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(M))}).next(()=>se.waitFor(o))}si(e,t){const r=t.store("mutations"),o=GC(this.serializer),u=new pv(_f.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(E=>{var b;let M=null!==(b=m.get(E.userId))&&void 0!==b?b:Bt();Pu(this.serializer,E).keys().forEach(R=>M=M.add(R)),m.set(E.userId,M)}),se.forEach(m,(E,b)=>{const M=new _n(b),R=Ng.de(this.serializer,M),$=u.getIndexManager(M),te=kg.de(M,this.serializer,$,u.referenceDelegate);return new WC(o,te,R,$).recalculateAndSaveOverlaysForDocumentKeys(new Py(t,Ji.ct),E).next()})})}}function Mw(n){n.createObjectStore("targetDocuments",{keyPath:R0}).createIndex("documentTargetsIndex",AD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SD,{unique:!0}),n.createObjectStore("targetGlobal")}const gv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xw{constructor(e,t,r,o,u,l,m,E,b,M,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=M,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!xw.D())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bx(this,o),this.di=t+"main",this.serializer=new rv(E),this.wi=new Ho(this.di,this.ui,new yA(this.serializer)),this.Bs=new UC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GC(this.serializer),this.qs=new _w,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&Un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,gv);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ji(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(bu(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Ug(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return wf(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wr(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(E=>-1===l.indexOf(E));return se.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):Ug(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,gv);return!1}}return!(!this.networkEnabled||!this.inForeground)||wf(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Py(t,Ji.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>wf(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return kg.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lA(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Ng.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?kD:14===l?Oy:13===l?P0:12===l?$S:11===l?PD:void rt();var l;let m;return this.wi.runTransaction(e,o,u,E=>(m=new Py(E,this.Os?this.Os.next():Ji.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw Un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ne(ce.FAILED_PRECONDITION,kS);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Oi(e){return Ug(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,gv)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ug(e).put("owner",t)}static D(){return Ho.D()}Ai(e){const t=Ug(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Un(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,an.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Un("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Un("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ug(n){return Wr(n,"owner")}function wf(n){return Wr(n,"clientMetadata")}function Bg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new mv(e,t.fromCache,r,o)}}class yv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(KD(t))return se.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Zy(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(E=>{const b=this.ji(t,m);return this.zi(t,b,l,E.readTime)?this.Ki(e,Zy(t,null,"F")):this.Wi(e,b,t,E)}))})))}Gi(e,t,r,o){return KD(t)||o.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(Lc()<=xc.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ky(t)),this.Wi(e,l,t,vD(o,-1)))})}ji(e,t){let r=new un(J0(e));return t.forEach((o,u)=>{nf(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return Lc()<=xc.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Ky(t)),this.Ui.getDocumentsMatchingQuery(e,t,Li.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Nw{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Mn(Vt),this.Yi=new Oa(u=>zc(u),_g),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function QC(n,e,t,r){return new Nw(n,e,t,r)}function JC(n,e){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,ve.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let E=Bt();for(const b of o){l.push(b.batchId);for(const M of b.mutations)E=E.add(M.key)}for(const b of u){m.push(b.batchId);for(const M of b.mutations)E=E.add(M.key)}return t.localDocuments.getDocuments(r,E).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),Rw.apply(this,arguments)}function Ow(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function kw(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=es();return t.forEach((m,E)=>{const b=u.get(m);E.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),E.isNoDocument()&&E.version.isEqual(vt.min())?(e.removeEntry(m,E.readTime),l=l.insert(m,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||0===E.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(E),l=l.insert(m,E)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",E.version)}),{nr:l,sr:o}})}function _A(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Md(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Ou(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function xd(n,e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!bu(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),Fw.apply(this,arguments)}function jg(n,e,t){const r=Xe(n);let o=vt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,E,b){const M=Xe(m),R=M.Yi.get(b);return void 0!==R?se.resolve(M.Ji.get(R)):M.Bs.getTargetData(E,b)}(r,l,Xi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(E=>{u=E})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:Bt())).next(m=>(Vw(r,Q0(e),m),{documents:m,ir:u})))}function Lw(n,e){const t=Xe(n),r=Xe(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function XC(n,e){const t=Xe(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,vD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Vw(t,e,o),o))}function Vw(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Ai(){return Ai=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n);let u=Bt(),l=es();for(const b of t){const M=e.rr(b.metadata.name);b.document&&(u=u.add(M));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(M,R)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),E=yield Md(o,(b=r,Xi(tf(Zt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>kw(b,m,l).next(M=>(m.apply(b),M)).next(M=>o.Bs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>o.Bs.addMatchingKeys(b,u,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,M.nr,M.sr)).next(()=>M.nr)))}),Ai.apply(this,arguments)}function Ef(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,ve.Z)(function*(n,e,t=Bt()){const r=yield Md(n,Xi(ku(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Tr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Zr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Uw.apply(this,arguments)}function eb(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tb(n,e){return`firestore_targets_${n}_${e}`}class $g{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ne(o.error.code,o.error.message))),l?new $g(e,t,o.state,u):(Un("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ne(r.error.code,r.error.message))),u?new Nd(e,r.state,o):(Un("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Yy();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=fg(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Bw(e,u):(Un("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nb{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nb(t.clientId,t.onlineState):(Un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rb{constructor(){this.activeTargetIds=Yy()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rd{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mn(Vt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=eb(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new rb),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(eb(e.persistenceKey,o));if(u){const l=Bw.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tb(this.persistenceKey,e));if(r){const o=Nd.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tb(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=Ji.ct;if(null!=u)try{const m=JSON.parse(u);dt("number"==typeof m),l=m}catch(m){Un("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Ji.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new $g(this.currentUser,e,t,r),u=EA(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=tb(this.persistenceKey,e),u=new Nd(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Bw.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return $g.ar(new _n(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Nd.ar(o,t)}br(e){return nb.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(E=>{o.has(E)||l.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Yy();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ib{constructor(){this.Hr=new rb,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new rb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jw{Yr(e){}shutdown(){}}class sb{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hg=null;function $w(){return null===Hg?Hg=268435456+Math.round(2147483648*Math.random()):Hg++,"0x"+Hg.toString(16)}const IA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DA{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fi="WebChannelConnection";class ob extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=$w(),m=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const E={};return this.Eo(E,o,u),this.Ao(e,m,E,r).then(b=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Ti("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${IA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=$w();return new Promise((l,m)=>{const E=new sg;E.setWithCredentials(!0),E.listenOnce(SS.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case qh.NO_ERROR:const M=E.getResponseJson();Fe(fi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(M)),l(M);break;case qh.TIMEOUT:Fe(fi,`RPC '${e}' ${u} timed out`),m(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const R=E.getStatus();if(Fe(fi,`RPC '${e}' ${u} failed with status:`,R,"response text:",E.getResponseText()),R>0){let $=E.getResponseJson();Array.isArray($)&&($=$[0]);const te=$?.error;if(te&&te.status&&te.message){const be=function(Be){const He=Be.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(He)>=0?He:ce.UNKNOWN}(te.status);m(new Ne(be,te.message))}else m(new Ne(ce.UNKNOWN,"Server responded with status "+E.getStatus()))}else m(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe(fi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Fe(fi,`RPC '${e}' ${u} sending request:`,o),E.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=$w(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=hD(),m=vx(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(E.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(E.xmlHttpFactory=new MS({})),this.Eo(E.initMessageHeaders,t,r),E.encodeInitMessageHeaders=!0;const M=u.join("");Fe(fi,`Creating RPC '${e}' stream ${o}: ${M}`,E);const R=l.createWebChannel(M,E);let $=!1,te=!1;const be=new DA({ro:He=>{te?Fe(fi,`Not sending because RPC '${e}' stream ${o} is closed:`,He):($||(Fe(fi,`Opening RPC '${e}' stream ${o} transport.`),R.open(),$=!0),Fe(fi,`RPC '${e}' stream ${o} sending:`,He),R.send(He))},oo:()=>R.close()}),Be=(He,pt,At)=>{He.listen(pt,Ct=>{try{At(Ct)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Be(R,Rs.EventType.OPEN,()=>{te||Fe(fi,`RPC '${e}' stream ${o} transport opened.`)}),Be(R,Rs.EventType.CLOSE,()=>{te||(te=!0,Fe(fi,`RPC '${e}' stream ${o} transport closed`),be.wo())}),Be(R,Rs.EventType.ERROR,He=>{te||(te=!0,Ti(fi,`RPC '${e}' stream ${o} transport errored:`,He),be.wo(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),Be(R,Rs.EventType.MESSAGE,He=>{var pt;if(!te){const At=He.data[0];dt(!!At);const Ot=At.error||(null===(pt=At[0])||void 0===pt?void 0:pt.error);if(Ot){Fe(fi,`RPC '${e}' stream ${o} received error:`,Ot);const Ht=Ot.status;let on=function(lm){const rO=br[lm];if(void 0!==rO)return uC(rO)}(Ht),ps=Ot.message;void 0===on&&(on=ce.INTERNAL,ps="Unknown error status: "+Ht+" with message "+Ot.message),te=!0,be.wo(new Ne(on,ps)),R.close()}else Fe(fi,`RPC '${e}' stream ${o} received:`,At),be._o(At)}}),Be(m,AS.STAT_EVENT,He=>{He.stat===Ay.PROXY?Fe(fi,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===Ay.NOPROXY&&Fe(fi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{be.fo()},0),be}}function ab(){return typeof window<"u"?window:null}function Od(){return typeof document<"u"?document:null}function Pd(n){return new Sg(n,!0)}class ub{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Hw{constructor(e,t,r,o,u,l,m,E){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ub(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Un(t.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CA extends Hw{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function _C(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:rt(),o=e.targetChange.targetIds||[],u=function(E,b){return E.useProto3Json?(dt(void 0===b||"string"==typeof b),Zr.fromBase64String(b||"")):(dt(void 0===b||b instanceof Uint8Array),Zr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(E){const b=void 0===E.code?ce.UNKNOWN:uC(E.code);return new Ne(b,E.message||"")}(l);t=new lC(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=La(n,r.document.name),u=Tr(r.document.updateTime),l=r.document.createTime?Tr(r.document.createTime):vt.min(),m=new di({mapValue:{fields:r.document.fields}}),E=Wn.newFoundDocument(o,u,l,m);t=new qc(r.targetIds||[],r.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const r=e.documentDelete,o=La(n,r.document),u=r.readTime?Tr(r.readTime):vt.min(),l=Wn.newNoDocument(o,u);t=new qc([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=La(n,r.document);t=new qc([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new aC(o,u);t=new cC(r.targetId,l)}}var E;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Tr(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ag(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=zy(m)?{documents:wC(o,m)}:{query:gw(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=pC(o,u.resumeToken);const E=hw(o,u.expectedCount);null!==E&&(l.expectedCount=E)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=Id(o,u.snapshotVersion.toTimestamp());const E=hw(o,u.expectedCount);null!==E&&(l.expectedCount=E)}return l}(this.serializer,e);const r=function iA(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ag(this.serializer),t.removeTarget=e,this.Wo(t)}}class cb extends Hw{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function rA(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let u=Tr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Tr(o)),new nC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.cu(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ag(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mg(this.serializer,r))};this.Wo(t)}}class If extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ce.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class Gw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Un(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Tx{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var E;Yc(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ve.Z)(function*(b){const M=Xe(b);M.vu.add(4),yield Df(M),M.bu.set("Unknown"),M.vu.delete(4),yield Gg(M)}),function(b){return E.apply(this,arguments)})(l))}))}),this.bu=new Gw(r,o)}}function Gg(n){return lb.apply(this,arguments)}function lb(){return lb=(0,ve.Z)(function*(n){if(Yc(n))for(const e of n.Ru)yield e(!0)}),lb.apply(this,arguments)}function Df(n){return zw.apply(this,arguments)}function zw(){return zw=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),zw.apply(this,arguments)}function _v(n,e){const t=Xe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Iv(t)?Ev(t):bf(t).Ko()&&wv(t,e))}function Cf(n,e){const t=Xe(n),r=bf(t);t.Au.delete(e),r.Ko()&&db(t,e),0===t.Au.size&&(r.Ko()?r.jo():Yc(t)&&t.bu.set("Unknown"))}function wv(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bf(n).su(e)}function db(n,e){n.Vu.qt(e),bf(n).iu(e)}function Ev(n){n.Vu=new JS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),bf(n).start(),n.bu.gu()}function Iv(n){return Yc(n)&&!bf(n).Uo()&&n.Au.size>0}function Yc(n){return 0===Xe(n).vu.size}function hb(n){n.Vu=void 0}function fb(n){return qw.apply(this,arguments)}function qw(){return qw=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{wv(n,e)})}),qw.apply(this,arguments)}function pb(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,ve.Z)(function*(n,e){hb(n),Iv(n)?(n.bu.Iu(e),Ev(n)):n.bu.set("Unknown")}),Dv.apply(this,arguments)}function gb(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof lC&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bv(n,r)}else if(e instanceof qc?n.Vu.Ht(e):e instanceof cC?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield Ow(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(E);b&&o.Au.set(E,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,E)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Zr.EMPTY_BYTE_STRING,b.snapshotVersion)),db(o,m);const M=new Ou(b.target,m,E,b.sequenceNumber);wv(o,M)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield bv(n,r)}var r}),Cv.apply(this,arguments)}function bv(n,e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=(0,ve.Z)(function*(n,e,t){if(!bu(e))throw e;n.vu.add(1),yield Df(n),n.bu.set("Offline"),t||(t=()=>Ow(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Gg(n)}))}),Ww.apply(this,arguments)}function TA(n,e){return e().catch(t=>bv(n,t,e))}function kd(n){return mb.apply(this,arguments)}function mb(){return mb=(0,ve.Z)(function*(n){const e=Xe(n),t=Lu(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Sx(e);)try{const o=yield _A(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,Ax(e,o)}catch(o){yield bv(e,o)}SA(e)&&AA(e)}),mb.apply(this,arguments)}function Sx(n){return Yc(n)&&n.Eu.length<10}function Ax(n,e){n.Eu.push(e);const t=Lu(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function SA(n){return Yc(n)&&!Lu(n).Uo()&&n.Eu.length>0}function AA(n){Lu(n).start()}function Mx(n){return yb.apply(this,arguments)}function yb(){return yb=(0,ve.Z)(function*(n){Lu(n).hu()}),yb.apply(this,arguments)}function xx(n){return vb.apply(this,arguments)}function vb(){return vb=(0,ve.Z)(function*(n){const e=Lu(n);for(const t of n.Eu)e.uu(t.mutations)}),vb.apply(this,arguments)}function _b(n,e,t){return zg.apply(this,arguments)}function zg(){return zg=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),o=ow.from(r,e,t);yield TA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield kd(n)}),zg.apply(this,arguments)}function wb(n,e){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,ve.Z)(function*(n,e){var t;e&&Lu(n).ou&&(yield(t=(0,ve.Z)(function*(r,o){if(uw(u=o.code)&&u!==ce.ABORTED){const l=r.Eu.shift();Lu(r).Qo(),yield TA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield kd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),SA(n)&&AA(n)}),Zw.apply(this,arguments)}function qg(n,e){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,ve.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Yc(t);t.vu.add(3),yield Df(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Gg(t)}),Kw.apply(this,arguments)}function Eb(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,ve.Z)(function*(n,e){const t=Xe(n);e?(t.vu.delete(2),yield Gg(t)):e||(t.vu.add(2),yield Df(t),t.bu.set("Unknown"))}),Ib.apply(this,arguments)}function bf(n){return n.Su||(n.Su=function(e,t,r){const o=Xe(e);return o.fu(),new CA(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:fb.bind(null,n),ao:pb.bind(null,n),nu:gb.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),Iv(n)?Ev(n):n.bu.set("Unknown")):(yield n.Su.stop(),hb(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Lu(n){return n.Du||(n.Du=function(e,t,r){const o=Xe(e);return o.fu(),new cb(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:Mx.bind(null,n),ao:wb.bind(null,n),au:xx.bind(null,n),cu:_b.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield kd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Yw{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new Yw(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(n,e){if(Un("AsyncQueue",`${e}: ${n}`),bu(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Sf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=rf(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new Sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MA{constructor(){this.Cu=new Mn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Af{constructor(e,t,r,o,u,l,m,E,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=E,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Af(e,t,Sf.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Wg{constructor(){this.Nu=void 0,this.listeners=[]}}class Tv{constructor(){this.queries=new Oa(e=>YD(e),wg),this.onlineState="Unknown",this.ku=new Set}}function Qw(n,e){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Wg),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=Tf(l,`Initialization of query '${Ky(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&Zg(t)}),Jw.apply(this,arguments)}function Xw(n,e){return eE.apply(this,arguments)}function eE(){return eE=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),eE.apply(this,arguments)}function xA(n,e){const t=Xe(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&Zg(t)}function NA(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Zg(n){n.ku.forEach(e=>{e.next()})}class tE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Af(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class RA{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Db{constructor(e){this.serializer=e}rr(e){return La(this.serializer,e)}ur(e){return e.metadata.exists?nv(this.serializer,e.document,!1):Wn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Tr(e)}}class OA{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cb(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Zt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Db(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function wA(n,e,t,r){return Ai.apply(this,arguments)}(e.localStore,new Db(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield Ef(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Cb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bb{constructor(e){this.key=e}}class Tb{constructor(e){this.key=e}}class Sb{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Bt(),this.mutatedKeys=Bt(),this.tc=J0(e),this.ec=new Sf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new MA,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const $=o.get(M),te=nf(this.query,R)?R:null,be=!!$&&this.mutatedKeys.has($.key),Be=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let He=!1;$&&te?$.data.isEqual(te.data)?be!==Be&&(r.track({type:3,doc:te}),He=!0):this.rc($,te)||(r.track({type:2,doc:te}),He=!0,(E&&this.tc(te,E)>0||b&&this.tc(te,b)<0)&&(m=!0)):!$&&te?(r.track({type:0,doc:te}),He=!0):$&&!te&&(r.track({type:1,doc:$}),He=!0,(E||b)&&(m=!0)),He&&(te?(l=l.add(te),u=Be?u.add(M):u.delete(M)):(l=l.delete(M),u=u.delete(M)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const M="F"===this.query.limitType?l.last():l.first();l=l.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,M)=>function(R,$){const te=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return te(R)-te($)}(b.type,M.type)||this.tc(b.doc,M.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,E=m!==this.Xu;return this.Xu=m,0!==u.length||E?{snapshot:new Af(this.query,e.ec,o,u,e.mutatedKeys,0===m,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new MA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Bt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Tb(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new bb(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Bt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Af.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class PA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ab{constructor(e){this.key=e,this.fc=!1}}class nE{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Oa(m=>YD(m),wg),this._c=new Map,this.mc=new Set,this.gc=new Mn(Qe.comparator),this.yc=new Map,this.Ic=new Aw,this.Tc={},this.Ec=new Map,this.Ac=mf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function kA(n,e){return rE.apply(this,arguments)}function rE(){return rE=(0,ve.Z)(function*(n,e){const t=jb(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Md(t.localStore,Xi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Sv(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&_v(t.remoteStore,l)}return o}),rE.apply(this,arguments)}function Sv(n,e,t,r,o){return Av.apply(this,arguments)}function Av(){return Av=(0,ve.Z)(function*(n,e,t,r,o){n.Rc=(R,$,te)=>{return(be=(0,ve.Z)(function*(Be,He,pt,At){let Ct=He.view.sc(pt);Ct.zi&&(Ct=yield jg(Be.localStore,He.query,!1).then(({documents:on})=>He.view.sc(on,Ct)));const Ot=At&&At.targetChanges.get(He.targetId),Ht=He.view.applyChanges(Ct,Be.isPrimaryClient,Ot);return Rv(Be,He.targetId,Ht.cc),Ht.snapshot}),function(Be,He,pt,At){return be.apply(this,arguments)})(n,R,$,te);var be};const u=yield jg(n.localStore,e,!0),l=new Sb(e,u.ir),m=l.sc(u.documents),E=lf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,E);Rv(n,t,b.cc);const M=new PA(e,t,l);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Av.apply(this,arguments)}function Nx(n,e){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,ve.Z)(function*(n,e){const t=Xe(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!wg(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Cf(t.remoteStore,r.targetId),Mf(t,r.targetId)}).catch(Bc))):(Mf(t,r.targetId),yield xd(t.localStore,r.targetId,!0))}),Bi.apply(this,arguments)}function Mv(){return Mv=(0,ve.Z)(function*(n,e,t){const r=Lv(n);try{const o=yield function(u,l){const m=Xe(u),E=tr.now(),b=l.reduce(($,te)=>$.add(te.key),Bt());let M,R;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let te=es(),be=Bt();return m.Zi.getEntries($,b).next(Be=>{te=Be,te.forEach((He,pt)=>{pt.isValidDocument()||(be=be.add(He))})}).next(()=>m.localDocuments.getOverlayedDocuments($,te)).next(Be=>{M=Be;const He=[];for(const pt of l){const At=KS(pt,M.get(pt.key).overlayedDocument);null!=At&&He.push(new ka(pt.key,At,VD(At.value.mapValue),Zn.exists(!0)))}return m.mutationQueue.addMutationBatch($,E,He,l)}).next(Be=>{R=Be;const He=Be.applyToLocalDocumentSet(M,be);return m.documentOverlayCache.saveOverlays($,Be.batchId,He)})}).then(()=>({batchId:R.batchId,changes:ew(M)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let E=u.Tc[u.currentUser.toKey()];E||(E=new Mn(Vt)),E=E.insert(l,m),u.Tc[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Vu(r,o.changes),yield kd(r.remoteStore)}catch(o){const u=Tf(o,"Failed to persist write");t.reject(u)}}),Mv.apply(this,arguments)}function xb(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,ve.Z)(function*(n,e){const t=Xe(n);try{const r=yield function Pw(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((M,R)=>{const $=o.get(R);if(!$)return;m.push(t.Bs.removeMatchingKeys(u,M.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,M.addedDocuments,R)));let te=$.withSequenceNumber(u.currentSequenceNumber);var be,Be,He;null!==e.targetMismatches.get(R)?te=te.withResumeToken(Zr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):M.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(M.resumeToken,r)),o=o.insert(R,te),Be=te,He=M,(0===(be=$).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-be.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,te))});let E=es(),b=Bt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,M))}),m.push(kw(u,l,e.documentUpdates).next(M=>{E=M.nr,b=M.sr})),!r.isEqual(vt.min())){const M=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(M)}return se.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,E,b)).next(()=>E)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?dt(l.fc):o.removedDocuments.size>0&&(dt(l.fc),l.fc=!1))}),yield Vu(t,r,e)}catch(r){yield Bc(r)}}),xv.apply(this,arguments)}function Nb(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Xe(u);m.onlineState=l;let E=!1;m.queries.forEach((b,M)=>{for(const R of M.listeners)R.Mu(l)&&(E=!0)}),E&&Zg(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iE(n,e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,ve.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new Mn(Qe.comparator);l=l.insert(u,Wn.newNoDocument(u,vt.min()));const m=Bt().add(u),E=new Tg(vt.min(),new Map,new Mn(Vt),l,m);yield xb(r,E),r.gc=r.gc.remove(u),r.yc.delete(e),Ov(r)}else yield xd(r.localStore,e,!1).then(()=>Mf(r,e,t)).catch(Bc)}),Ua.apply(this,arguments)}function Rb(n,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,ve.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield function vA(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,E,b){const M=E.batch,R=M.keys();let $=se.resolve();return R.forEach(te=>{$=$.next(()=>b.getEntry(m,te)).next(be=>{const Be=E.docVersions.get(te);dt(null!==Be),be.version.compareTo(Be)<0&&(M.applyToRemoteDocument(be,E),be.isValidDocument()&&(be.setReadTime(E.commitVersion),b.addEntry(be)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let E=0;E<l.mutationResults.length;++E)l.mutationResults[E].transformResults.length>0&&(m=m.add(l.batch.mutations[E].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);uE(t,r,null),aE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vu(t,o)}catch(o){yield Bc(o)}}),Kg.apply(this,arguments)}function sE(n,e,t){return oE.apply(this,arguments)}function oE(){return oE=(0,ve.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,l){const m=Xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return m.mutationQueue.lookupMutationBatch(E,l).next(M=>(dt(null!==M),b=M.keys(),m.mutationQueue.removeMutationBatch(E,M))).next(()=>m.mutationQueue.performConsistencyCheck(E)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(E,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,b)).next(()=>m.localDocuments.getDocuments(E,b))})}(r.localStore,e);uE(r,e,t),aE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vu(r,o)}catch(o){yield Bc(o)}}),oE.apply(this,arguments)}function Nv(){return Nv=(0,ve.Z)(function*(n,e){const t=Xe(n);Yc(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Tf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Nv.apply(this,arguments)}function aE(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function uE(n,e,t){const r=Xe(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Mf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Ob(n,r)})}function Ob(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Cf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Ov(n))}function Rv(n,e,t){for(const r of t)r instanceof bb?(n.Ic.addReference(r.key,e),Ox(n,r)):r instanceof Tb?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Ob(n,r.key)):rt()}function Ox(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),Ov(n))}function Ov(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(Zt.fromString(e)),r=n.Ac.next();n.yc.set(r,new Ab(t)),n.gc=n.gc.insert(t,r),_v(n.remoteStore,new Ou(Xi(tf(t.path)),r,"TargetPurposeLimboResolution",Ji.ct))}}function Vu(n,e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,E)=>{l.push(r.Rc(E,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const M=mv.Li(E.targetId,b);u.push(M)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,ve.Z)(function*(E,b){const M=Xe(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>se.forEach(b,$=>se.forEach($.Fi,te=>M.persistence.referenceDelegate.addReference(R,$.targetId,te)).next(()=>se.forEach($.Bi,te=>M.persistence.referenceDelegate.removeReference(R,$.targetId,te)))))}catch(R){if(!bu(R))throw R;Fe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const $=R.targetId;if(!R.fromCache){const te=M.Ji.get($),Be=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);M.Ji=M.Ji.insert($,Be)}}}),function(E,b){return m.apply(this,arguments)})(r.localStore,u))}),Pv.apply(this,arguments)}function Px(n,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,ve.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield JC(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vu(t,r.er)}var o}),Yg.apply(this,arguments)}function Pb(n,e){const t=Xe(n),r=t.yc.get(e);if(r&&r.fc)return Bt().add(r.key);{let o=Bt();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function kb(n,e){return cE.apply(this,arguments)}function cE(){return cE=(0,ve.Z)(function*(n,e){const t=Xe(n),r=yield jg(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&Rv(t,e.targetId,o.cc),o}),cE.apply(this,arguments)}function Fb(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,ve.Z)(function*(n,e){const t=Xe(n);return XC(t.localStore,e).then(r=>Vu(t,r))}),kv.apply(this,arguments)}function xf(n,e,t,r){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(l,m){const E=Xe(l),b=Xe(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>b.Sn(M,m).next(R=>R?E.localDocuments.getDocuments(M,R):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield kd(o.remoteStore):"acknowledged"===t||"rejected"===t?(uE(o,e,r||null),aE(o,e),m=e,Xe(Xe(o.localStore).mutationQueue).Cn(m)):rt(),yield Vu(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Nf.apply(this,arguments)}function Fv(){return Fv=(0,ve.Z)(function*(n,e){const t=Xe(n);if(jb(t),Lv(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Vb(t,r.toArray());t.vc=!0,yield Eb(t.remoteStore,!0);for(const u of o)_v(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Mf(t,l),xd(t.localStore,l,!0))),Cf(t.remoteStore,l)}),yield o,yield Vb(t,r),function(u){const l=Xe(u);l.yc.forEach((m,E)=>{Cf(l.remoteStore,E)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Mn(Qe.comparator)}(t),t.vc=!1,yield Eb(t.remoteStore,!1)}}),Fv.apply(this,arguments)}function Vb(n,e,t){return lE.apply(this,arguments)}function lE(){return lE=(0,ve.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const l of e){let m;const E=r._c.get(l);if(E&&0!==E.length){m=yield Md(r.localStore,Xi(E[0]));for(const b of E){const M=r.wc.get(b),R=yield kb(r,M);R.snapshot&&u.push(R.snapshot)}}else{const b=yield Lw(r.localStore,l);m=yield Md(r.localStore,b),yield Sv(r,FA(b),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),lE.apply(this,arguments)}function FA(n){return ZD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ub(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).$i()}function LA(n,e,t,r){return dE.apply(this,arguments)}function dE(){return dE=(0,ve.Z)(function*(n,e,t,r){const o=Xe(n);if(o.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield XC(o.localStore,Q0(u[0])),m=Tg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Zr.EMPTY_BYTE_STRING);yield Vu(o,l,m);break}case"rejected":yield xd(o.localStore,e,!0),Mf(o,e,r);break;default:rt()}}),dE.apply(this,arguments)}function kx(n,e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=(0,ve.Z)(function*(n,e,t){const r=jb(n);if(r.vc){for(const o of e){if(r._c.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield Lw(r.localStore,o),l=yield Md(r.localStore,u);yield Sv(r,FA(u),l.targetId,!1,l.resumeToken),_v(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield xd(r.localStore,o,!1).then(()=>{Cf(r.remoteStore,o),Mf(r,o)}).catch(Bc))}}),Bb.apply(this,arguments)}function jb(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iE.bind(null,e),e.dc.nu=xA.bind(null,e.eventManager),e.dc.Pc=NA.bind(null,e.eventManager),e}function Lv(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sE.bind(null,e),e}class Qg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=Pd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return QC(this.persistence,new yv,e.initialUser,this.serializer)}createPersistence(e){return new pv(_f.zs,this.serializer)}createSharedClientState(e){return new ib}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $b extends Qg{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Lv(r.Vc.syncEngine),yield kd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return QC(this.persistence,new yv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new $C(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new N0(t,this.persistence);return new LS(e.asyncQueue,r)}createPersistence(e){const t=Bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new xw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ab(),Od(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ib}}class BA extends $b{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof Rd&&(r.sharedClientState.syncEngine={jr:xf.bind(null,o),zr:LA.bind(null,o),Wr:kx.bind(null,o),$i:Ub.bind(null,o),Qr:Fb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ve.Z)(function*(l){yield function Lb(n,e){return Fv.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ab();if(!Rd.D(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rd(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jg{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Nb(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Px.bind(null,r.syncEngine),yield Eb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tv}createDatastore(e){const t=Pd(e.databaseInfo.databaseId),r=new ob(e.databaseInfo);return new If(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Nb(this.syncEngine,m,0),l=sb.D()?new sb:new jw,new Tx(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,E,b){const M=new nE(r,o,u,l,m,E);return b&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Xe(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Df(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jA(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $A{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new RA(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Vv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,l){const m=Xe(u),E=Ag(m.serializer)+"/documents",b={documents:l.map(te=>Dd(m.serializer,te))},M=yield m.vo("BatchGetDocuments",E,b,l.length),R=new Map;M.forEach(te=>{const be=function nA(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=La(t,r.found.name),u=Tr(r.found.updateTime),l=r.found.createTime?Tr(r.found.createTime):vt.min(),m=new di({mapValue:{fields:r.found.fields}});return Wn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=La(t,r.missing),u=Tr(r.readTime);return Wn.newNoDocument(o,u)}(n,e):rt()}(m.serializer,te);R.set(be.key.toString(),be)});const $=[];return l.forEach(te=>{const be=R.get(te.toString());dt(!!be),$.push(be)}),$}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new Ed(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const l=Xe(o),m=Ag(l.serializer)+"/documents",E={writes:u.map(b=>Mg(l.serializer,b))};yield l.Io("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class HA{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new ub(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new Vv(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!hg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uw(t)}return!1}}class GA{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=_n.UNAUTHENTICATED,this.clientId=OS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Tf(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Xg(n,e){return Uu.apply(this,arguments)}function Uu(){return Uu=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield JC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Uu.apply(this,arguments)}function Uv(n,e){return em.apply(this,arguments)}function em(){return em=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fE(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>qg(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>qg(e.remoteStore,u)),n._onlineComponents=e}),em.apply(this,arguments)}function Bv(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function fE(n){return tm.apply(this,arguments)}function tm(){return tm=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Bv(t))throw t;Ti("Error using user provided cache. Falling back to memory cache: "+t),yield Xg(n,new Qg)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Xg(n,new Qg);return n._offlineComponents}),tm.apply(this,arguments)}function Rf(n){return Of.apply(this,arguments)}function Of(){return Of=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Uv(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Uv(n,new Jg))),n._onlineComponents}),Of.apply(this,arguments)}function zA(n){return fE(n).then(e=>e.persistence)}function pE(n){return fE(n).then(e=>e.localStore)}function qA(n){return Rf(n).then(e=>e.remoteStore)}function jv(n){return Rf(n).then(e=>e.syncEngine)}function Pf(n){return gE.apply(this,arguments)}function gE(){return gE=(0,ve.Z)(function*(n){const e=yield Rf(n),t=e.eventManager;return t.onListen=kA.bind(null,e.syncEngine),t.onUnlisten=Nx.bind(null,e.syncEngine),t}),gE.apply(this,arguments)}function mE(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,m,E){const b=new hE({next:R=>{u.enqueueAndForget(()=>Xw(o,M));const $=R.docs.has(l);!$&&R.fromCache?E.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&R.fromCache&&m&&"server"===m.source?E.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new tE(tf(l.path),b,{includeMetadataChanges:!0,Ku:!0});return Qw(o,M)}(yield Pf(n),n.asyncQueue,e,t,r)})),r.promise}function qb(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,m,E){const b=new hE({next:R=>{u.enqueueAndForget(()=>Xw(o,M)),R.fromCache&&"server"===m.source?E.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new tE(l,b,{includeMetadataChanges:!0,Ku:!0});return Qw(o,M)}(yield Pf(n),n.asyncQueue,e,t,r)})),r.promise}function $v(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Kb=new Map;function vE(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KA(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YA(n){if(!Qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yb(n){if(Qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hv(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qb(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _E{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=$v(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pD;switch(t.type){case"firstParty":return new xS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kb.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Kb.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class Bu extends pi{constructor(e,t,r){super(e,t,tf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Qe(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function Xb(n,e,...t){if(n=(0,an.m9)(n),vE("collection","path",e),n instanceof kf){const r=Zt.fromString(e,...t);return Yb(r),new Bu(n,null,r)}{if(!(n instanceof Bn||n instanceof Bu))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return Yb(r),new Bu(n.firestore,null,r)}}function nm(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=OS.A()),vE("doc","path",e),n instanceof kf){const r=Zt.fromString(e,...t);return YA(r),new Bn(n,null,new Qe(r))}{if(!(n instanceof Bn||n instanceof Bu))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return YA(r),new Bn(n.firestore,n instanceof Bu?n.converter:null,new Qe(r))}}function EE(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof Bn||n instanceof Bu)&&(e instanceof Bn||e instanceof Bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IE(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof pi&&e instanceof pi&&n.firestore===e.firestore&&wg(n._query,e._query)&&n.converter===e.converter}class Gv{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ub(this,"async_queue_retry"),this.Xc=()=>{const t=Od();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Od();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Od();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Fr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!bu(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Un("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=Yw.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&rt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function DE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class QA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends kf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Gv,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tT(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||tT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tT(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Kr(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,$v(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new GA(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function nT(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Xg(n,t),yield Uv(n,e),r.resolve()}catch(o){const u=o;if(!Bv(u))throw u;Ti("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function eM(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(Zr.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ju(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ff{constructor(e){this._methodName=e}}class i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const s=/^__.*__$/;class a{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class c{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class f{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Lf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(d(this.ca)&&s.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class y{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pd(e)}ya(e,t,r,o=!1){return new f({ca:e,methodName:t,ga:r,path:qn.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function w(n){const e=n._freezeSettings(),t=Pd(n._databaseId);return new y(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);ln("Data must be an object, but it was:",l,r);const m=Rt(r,l);let E,b;if(u.merge)E=new Vi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const $=gi(e,R,t);if(!l.contains($))throw new Ne(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);rT(M,$)||M.push($)}E=new Vi(M),b=l.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,b=l.fieldTransforms;return new a(new di(m),E,b)}class T extends Ff{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T}}function x(n,e,t){return new f({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class F extends Ff{_toFieldTransform(e){return new uf(e.path,new af)}isEqual(e){return e instanceof F}}class z extends Ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=x(this,e,!0),r=this.pa.map(u=>Me(u,t)),o=new Pa(r);return new uf(e.path,o)}isEqual(e){return this===e}}class X extends Ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=x(this,e,!0),r=this.pa.map(u=>Me(u,t)),o=new Vr(r);return new uf(e.path,o)}isEqual(e){return this===e}}class we extends Ff{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new wd(e.serializer,vd(e.serializer,this.Ia));return new uf(e.path,t)}isEqual(e){return this===e}}function Le(n,e,t,r){const o=n.ya(1,e,t);ln("Data must be an object, but it was:",o,r);const u=[],l=di.empty();Tu(r,(E,b)=>{const M=Hu(e,E,t);b=(0,an.m9)(b);const R=o.da(M);if(b instanceof T)u.push(M);else{const $=Me(b,R);null!=$&&(u.push(M),l.set(M,$))}});const m=new Vi(u);return new c(l,m,o.fieldTransforms)}function Je(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[gi(e,r,t)],E=[o];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(gi(e,u[$])),E.push(u[$+1]);const b=[],M=di.empty();for(let $=m.length-1;$>=0;--$)if(!rT(b,m[$])){const te=m[$];let be=E[$];be=(0,an.m9)(be);const Be=l.da(te);if(be instanceof T)b.push(te);else{const He=Me(be,Be);null!=He&&(b.push(te),M.set(te,He))}}const R=new Vi(b);return new c(M,R,l.fieldTransforms)}function yt(n,e,t,r=!1){return Me(t,n.ya(r?4:3,e))}function Me(n,e){if($t(n=(0,an.m9)(n)))return ln("Unsupported field value:",e,n),Rt(n,e);if(n instanceof Ff)return function(t,r){if(!d(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Me(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vd(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=tr.fromDate(t);return{timestampValue:Id(r.serializer,o)}}if(t instanceof tr){const o=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Id(r.serializer,o)}}if(t instanceof i)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ju)return{bytesValue:pC(r.serializer,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ev(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Hv(t)}`)}(n,e)}function Rt(n,e){const t={};return F0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,o)=>{const u=Me(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function $t(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof i||n instanceof ju||n instanceof Bn||n instanceof Ff)}function ln(n,e,t){if(!$t(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Hv(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function gi(n,e,t){if((e=(0,an.m9)(e))instanceof Qc)return e._internalPath;if("string"==typeof e)return Hu(n,e);throw Lf("Field path arguments must be of type string or ",n,!1,void 0,t)}const $u=new RegExp("[~\\*/\\[\\]]");function Hu(n,e,t){if(e.search($u)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lf(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||l)&&(E+=" (found",u&&(E+=` in field ${r}`),l&&(E+=` in document ${o}`),E+=")"),new Ne(ce.INVALID_ARGUMENT,m+n+E)}function rT(n,e){return n.some(t=>t.isEqual(e))}class rm{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cO extends rm{data(){return super.data()}}function iT(n,e){return"string"==typeof e?Hu(n,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}function qx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tM{}class CE extends tM{}function Vf(n,e,...t){let r=[];e instanceof tM&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof qv).length,l=o.filter(m=>m instanceof bE).length;if(u>1||u>0&&l>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class bE extends CE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bE(e,t,r)}_apply(e){const t=this._parse(e);return Yx(e._query,t),new pi(e.firestore,e.converter,Y0(e._query,t))}_parse(e){const t=w(e.firestore);return function(o,u,l,m,E,b,M){let R;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Kx(M,b);const $=[];for(const te of M)$.push(Zx(m,o,te));R={arrayValue:{values:$}}}else R=Zx(m,o,M)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Kx(M,b),R=yt(l,"where",M,"in"===b||"not-in"===b);return Xt.create(E,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qv extends tM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)Yx(u,m),u=Y0(u,m)}(e._query,t),new pi(e.firestore,e.converter,Y0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nM extends CE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nM(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ra(o,u);return function(m,E){if(null===Z0(m)){const b=Wy(m);null!==b&&Qx(0,b,E.field)}}(r,l),l}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Nu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sT extends CE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sT(e,t,r)}_apply(e){return new pi(e.firestore,e.converter,Zy(e._query,this._limit,this._limitType))}}class oT extends CE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oT(e,t,r)}_apply(e){const t=Wx(e,this.type,this._docOrFields,this._inclusive);return new pi(e.firestore,e.converter,(o=t,new Nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class aT extends CE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aT(e,t,r)}_apply(e){const t=Wx(e,this.type,this._docOrFields,this._inclusive);return new pi(e.firestore,e.converter,(o=t,new Nu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Wx(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof rm)return function(o,u,l,m,E){if(!m)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const M of yd(o))if(M.field.isKeyField())b.push(gd(u,m.key));else{const R=m.data.field(M.field);if(ky(R))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const $=M.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(R)}return new Gc(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=w(n.firestore);return function(u,l,m,E,b,M){const R=u.explicitOrderBy;if(b.length>R.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let te=0;te<b.length;te++){const be=b[te];if(R[te].field.isKeyField()){if("string"!=typeof be)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof be}`);if(!K0(u)&&-1!==be.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${be}' contains a slash.`);const Be=u.path.child(Zt.fromString(be));if(!Qe.isDocumentKey(Be))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const He=new Qe(Be);$.push(gd(l,He))}else{const Be=yt(m,E,be);$.push(Be)}}return new Gc($,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Zx(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K0(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Qe.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gd(n,new Qe(r))}if(t instanceof Bn)return gd(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hv(t)}.`)}function Kx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yx(n,e){if(e.isInequality()){const r=Wy(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Z0(n);null!==u&&Qx(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qx(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rM{convertValue(e,t="none"){switch(Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Tu(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new i(Cr(e.latitude),Cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mg(e));default:return null}}convertTimestamp(e){const t=fd(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);dt(TC(r));const o=new Au(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||Un(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function uT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vO extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fd extends rm{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class TE extends Fd{data(e={}){return super.data(e)}}class Uf{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new im(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new TE(this._firestore,this._userDataWriter,r.key,r,new im(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new TE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new im(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new TE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new im(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==l.type&&(E=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:wO(l.type),doc:m,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function Xx(n,e){return n instanceof Fd&&e instanceof Fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uf&&e instanceof Uf&&n._firestore===e._firestore&&IE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bf extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function eN(n,e,t){n=en(n,Bn);const r=en(n.firestore,jn),o=uT(n.converter,e,t);return Wv(r,[D(w(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Zn.none())])}function tN(n,e,t,...r){n=en(n,Bn);const o=en(n.firestore,jn),u=w(o);let l;return l="string"==typeof(e=(0,an.m9)(e))||e instanceof Qc?Je(u,"updateDoc",n._key,e,t,r):Le(u,"updateDoc",n._key,e),Wv(o,[l.toMutation(n._key,Zn.exists(!0))])}function nN(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||DE(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(DE(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,b,M;if(n instanceof Bn)b=en(n.firestore,jn),M=tf(n._key.path),E={next:R=>{e[l]&&e[l](iM(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=en(n,pi);b=en(R.firestore,jn),M=R._query;const $=new Bf(b);E={next:te=>{e[l]&&e[l](new Uf(b,$,R,te))},error:e[l+1],complete:e[l+2]},qx(n._query)}return function(R,$,te,be){const Be=new hE(be),He=new tE($,Be,te);return R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Qw(yield Pf(R),He)})),()=>{Be.Dc(),R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Xw(yield Pf(R),He)}))}}(Ur(b),M,m,E)}function Wv(n,e){return function(t,r){const o=new Fr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Mb(n,e,t){return Mv.apply(this,arguments)}(yield jv(t),r,o)})),o.promise}(Ur(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),o=new Bf(n);return new Fd(n,o,e._key,r,new im(t.hasPendingWrites,t.fromCache),e.converter)}const VO={maxAttempts:5};class rN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=w(e)}set(e,t,r){this._verifyNotCommitted();const o=jf(e,this._firestore),u=uT(o.converter,t,r),l=D(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Zn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=jf(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Qc?Je(this._dataReader,"WriteBatch.update",u._key,t,r,o):Le(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jf(e,this._firestore);return this._mutations=this._mutations.concat(new Fa(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jf(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class UO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=w(e)}get(e){const t=jf(e,this._firestore),r=new vO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new rm(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new rm(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=jf(e,this._firestore),u=uT(o.converter,t,r),l=D(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=jf(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof Qc?Je(this._dataReader,"Transaction.update",u._key,t,r,o):Le(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=jf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jf(e,this._firestore),r=new Bf(this._firestore);return super.get(e).then(o=>new Fd(this._firestore,r,t._key,o._document,new im(!1,!1),t.converter))}}function sM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sN(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function oN(){if(!function L0(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fc=Eu.SDK_VERSION,(0,Eu._registerComponent)(new Qm.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new jn(new mD(t.getProvider("auth-internal")),new _x(t.getProvider("app-check-internal")),function(m,E){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(m.options.projectId,E)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Eu.registerVersion)(og,"3.13.0",n),(0,Eu.registerVersion)(og,"3.13.0","esm2017")}();class SE{constructor(e){this._delegate=e}static fromBase64String(e){return oN(),new SE(ju.fromBase64String(e))}static fromUint8Array(e){return sN(),new SE(ju.fromUint8Array(e))}toBase64(){return oN(),this._delegate.toBase64()}toUint8Array(){return sN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oM(n){return function ZO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class KO{enableIndexedDbPersistence(e,t){return function Vx(n,e){eM(n=en(n,jn));const t=Ur(n);if(t._uninitializedComponentsProvider)throw new Ne(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ti("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Jg;return nT(t,o,new $b(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ux(n){eM(n=en(n,jn));const e=Ur(n);if(e._uninitializedComponentsProvider)throw new Ne(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Ti("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Jg;return nT(e,r,new BA(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JA(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Ho.D())return Promise.resolve();const o=r+"main";yield Ho.delete(o)}),function(r){return t.apply(this,arguments)})(Bg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ti("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Jb(n,e,t,r={}){var o;const u=(n=en(n,kf))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,E;if("string"==typeof r.mockUserToken)m=r.mockUserToken,E=_n.MOCK_USER;else{m=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new _n(b)}n._authCredentials=new gD(new S0(m,E))}}(this._delegate,e,t,r)}enableNetwork(){return function jx(n){return function WA(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zA(n),t=yield qA(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o.vu.delete(0),Gg(o)}(t)}))}(Ur(n=en(n,jn)))}(this._delegate)}disableNetwork(){return function $x(n){return function Gb(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield zA(n),t=yield qA(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=Xe(o);u.vu.add(0),yield Df(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ur(n=en(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,KA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Bx(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Rx(n,e){return Nv.apply(this,arguments)}(yield jv(e),t)})),t.promise}(Ur(n=en(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function MO(n,e){return function Wb(n,e){const t=new hE(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Pf(n),o=t,Xe(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Pf(n),o=t,void Xe(r).ku.delete(o);var r,o}))}}(Ur(n=en(n,jn)),DE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zv(this,Xb(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ba(this,nm(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fs(this,function wE(n,e){if(n=en(n,kf),vE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pi(n,null,(t=e,new Nu(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BO(n,e,t){n=en(n,jn);const r=Object.assign(Object.assign({},VO),t);return function(o){if(o.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Fr;return o.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const E=yield function Hb(n){return Rf(n).then(e=>e.datastore)}(o);new HA(o.asyncQueue,E,l,u,m).run()})),m.promise}(Ur(n),o=>e(new UO(n,o)),r)}(this._delegate,t=>e(new uN(this,t)))}batch(){return Ur(this._delegate),new cN(new rN(this._delegate,e=>Wv(this._delegate,e)))}loadBundle(e){return function Hx(n,e){const t=Ur(n=en(n,jn)),r=new QA;return function yE(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?YS().encode(u):u,E=function(E,b){if(E instanceof Uint8Array)return jA(E,b);if(E instanceof ArrayBuffer)return jA(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new $A(E,l);var E}(t,Pd(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function VA(n,e,t){const r=Xe(n);var o;(o=(0,ve.Z)(function*(u,l,m){try{const E=yield l.getMetadata();if(yield function($,te){const be=Xe($),Be=Tr(te.createTime);return be.persistence.runTransaction("hasNewerBundle","readonly",He=>be.qs.getBundleMetadata(He,te.id)).then(He=>!!He&&He.createTime.compareTo(Be)>=0)}(u.localStore,E))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=E).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(Cb(E));const b=new OA(E,u.localStore,l.serializer);let M=yield l.bc();for(;M;){const $=yield b.zu(M);$&&m._updateProgress($),M=yield l.bc()}const R=yield b.complete();return yield Vu(u,R.Ju,void 0),yield function($,te){const be=Xe($);return be.persistence.runTransaction("Save bundle","readwrite",Be=>be.qs.saveBundleMetadata(Be,te))}(u.localStore,E),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(E){return Ti("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var $}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield jv(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XA(n,e){return function Fx(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield pE(n),e)}))}(Ur(n=en(n,jn)),e).then(t=>t?new pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fs(this,t):null)}}class cT extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new SE(new ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ba.forKey(t,this.firestore,null)}}class uN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}get(e){const t=om(e);return this._delegate.get(t).then(r=>new AE(this._firestore,new Fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=om(e);return r?(sM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=om(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=om(e);return this._delegate.delete(t),this}}class cN{constructor(e){this._delegate=e}set(e,t,r){const o=om(e);return r?(sM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=om(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=om(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new TE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ME(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sm.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new sm(e,new cT(e),t),o.set(t,u)),u}}sm.INSTANCES=new WeakMap;class Ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ba(t,new Bn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ba(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zv(this.firestore,Xb(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof Bn&&EE(this._delegate,e)}set(e,t){t=sM("DocumentReference.set",t);try{return t?eN(this._delegate,e,t):eN(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tN(this._delegate,e):tN(this._delegate,e,t,...r)}catch(o){throw ks(o,"updateDoc()","DocumentReference.update()")}}delete(){return function SO(n){return Wv(en(n.firestore,jn),[new Fa(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=lN(e),r=dN(e,o=>new AE(this.firestore,new Fd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return nN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function IO(n){n=en(n,Bn);const e=en(n.firestore,jn),t=Ur(e),r=new Bf(e);return function zb(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const m=yield function(E,b){const M=Xe(E);return M.persistence.runTransaction("read document","readonly",R=>M.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Tf(m,`Failed to get document '${u} from cache`);l.reject(E)}}),function(o,u,l){return r.apply(this,arguments)})(yield pE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Fd(e,r,n._key,o,new im(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function DO(n){n=en(n,Bn);const e=en(n.firestore,jn);return mE(Ur(e),n._key,{source:"server"}).then(t=>iM(e,n,t))}(this._delegate):function EO(n){n=en(n,Bn);const e=en(n.firestore,jn);return mE(Ur(e),n._key).then(t=>iM(e,n,t))}(this._delegate),t.then(r=>new AE(this.firestore,new Fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ba(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function lN(n){for(const e of n)if("object"==typeof e&&!oM(e))return e;return{}}function dN(n,e){var t,r;let o;return o=oM(n[0])?n[0]:oM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class AE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Xx(this._delegate,e._delegate)}}class ME extends AE{data(e){const t=this._delegate.data(e);return function fD(n,e){n||rt()}(void 0!==t),t}}class Fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cT(e)}where(e,t,r){try{return new Fs(this.firestore,Vf(this._delegate,function lO(n,e,t){const r=e,o=iT("where",n);return bE._create(o,r,t)}(e,t,r)))}catch(o){throw ks(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fs(this.firestore,Vf(this._delegate,function dO(n,e="asc"){const t=e,r=iT("orderBy",n);return nM._create(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fs(this.firestore,Vf(this._delegate,function hO(n){return Qb("limit",n),sT._create("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fs(this.firestore,Vf(this._delegate,function fO(n){return Qb("limitToLast",n),sT._create("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fs(this.firestore,Vf(this._delegate,function pO(...n){return oT._create("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fs(this.firestore,Vf(this._delegate,function gO(...n){return oT._create("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fs(this.firestore,Vf(this._delegate,function mO(...n){return aT._create("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fs(this.firestore,Vf(this._delegate,function yO(...n){return aT._create("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return IE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bO(n){n=en(n,pi);const e=en(n.firestore,jn),t=Ur(e),r=new Bf(e);return function ZA(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const m=yield jg(o,u,!0),E=new Sb(u,m.ir),b=E.sc(m.documents),M=E.applyChanges(b,!1);l.resolve(M.snapshot)}catch(m){const E=Tf(m,`Failed to execute query '${u} against cache`);l.reject(E)}}),function(o,u,l){return r.apply(this,arguments)})(yield pE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Uf(e,r,n,o))}(this._delegate):"server"===e?.source?function TO(n){n=en(n,pi);const e=en(n.firestore,jn),t=Ur(e),r=new Bf(e);return qb(t,n._query,{source:"server"}).then(o=>new Uf(e,r,n,o))}(this._delegate):function CO(n){n=en(n,pi);const e=en(n.firestore,jn),t=Ur(e),r=new Bf(e);return qx(n._query),qb(t,n._query).then(o=>new Uf(e,r,n,o))}(this._delegate),t.then(r=>new aM(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lN(e),r=dN(e,o=>new aM(this.firestore,new Uf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return nN(this._delegate,t,r)}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}class QO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ME(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ME(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ME(this._firestore,r))})}isEqual(e){return Xx(this._delegate,e._delegate)}}class Zv extends Fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ba(this.firestore,e):null}doc(e){try{return new Ba(this.firestore,void 0===e?nm(this._delegate):nm(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function AO(n,e){const t=en(n.firestore,jn),r=nm(n),o=uT(n.converter,e);return Wv(t,[D(w(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ba(this.firestore,t))}isEqual(e){return EE(this._delegate,e._delegate)}withConverter(e){return new Zv(this.firestore,this._delegate.withConverter(e?sm.getInstance(this.firestore,e):null))}}function om(n){return en(n,Bn)}class uM{constructor(...e){this._delegate=new Qc(...e)}static documentId(){return new uM(qn.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $O(){return new F("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new am(e)}static delete(){const e=function jO(){return new T("deleteField")}();return e._methodName="FieldValue.delete",new am(e)}static arrayUnion(...e){const t=function HO(...n){return new z("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new am(t)}static arrayRemove(...e){const t=function GO(...n){return new X("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new am(t)}static increment(e){const t=function zO(n){return new we("increment",n)}(e);return t._methodName="FieldValue.increment",new am(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const JO={Firestore:aN,GeoPoint:i,Timestamp:tr,Blob:SE,Transaction:uN,WriteBatch:cN,DocumentReference:Ba,DocumentSnapshot:AE,Query:Fs,QueryDocumentSnapshot:ME,QuerySnapshot:aM,CollectionReference:Zv,FieldPath:uM,FieldValue:am,setLogLevel:function YO(n){!function Wh(n){Os.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function eP(n){(function XO(n,e){n.INTERNAL.registerComponent(new Qm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},JO)))})(n,(e,t)=>new aN(e,t,new KO)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(vI.Z);var tP=P(3019),lT=P(3093),nP=P(4552);class rP extends ii.x{constructor(e=1/0,t=1/0,r=nP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=l;E+=2)m=E;m&&r.splice(0,m+1)}}}var iP=P(3020);function hN(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,iP.B)({connector:()=>new rP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function fN(n,e){return(0,ca.m)(e)?(0,Er.w)(()=>n,e):(0,Er.w)(()=>n)}var cM=P(5137);P(4097);var dM=P(4303);const hM=new Map,gN={activated:!1,tokenObservers:[]},cP={initialized:!1,enabled:!1};function Br(n){return hM.get(n)||Object.assign({},gN)}function hT(){return cP}const fM="https://content-firebaseappcheck.googleapis.com/v1",fP="exchangeDebugToken",mN={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class gP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function mP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pM(n){if(!Br(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function gT(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw ts.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw ts.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw ts.create("fetch-parse-error",{originalErrorMessage:R?.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(E[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+b,issuedAtTimeMillis:M}}),mM.apply(this,arguments)}function yN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${fM}/projects/${t}/apps/${r}:${fP}?key=${o}`,body:{debug_token:e}}}const wP="firebase-app-check-database",EP=1,xE="firebase-app-check-store";let mT=null;function yM(){return yM=(0,ve.Z)(function*(n,e){const r=(yield function _N(){return mT||(mT=new Promise((n,e)=>{try{const t=indexedDB.open(wP,EP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ts.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xE,{keyPath:"compositeKey"})}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t?.message}))}}),mT)}()).transaction(xE,"readwrite"),u=r.objectStore(xE).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=E=>{l()},r.onerror=E=>{var b;m(ts.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})}),yM.apply(this,arguments)}const NE=new xc.Yd("@firebase/app-check");function wM(n,e){return(0,an.hl)()?function DP(n,e){return function wN(n,e){return yM.apply(this,arguments)}(function IN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{NE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IM(){return hT().enabled}function DM(){return CM.apply(this,arguments)}function CM(){return CM=(0,ve.Z)(function*(){const n=hT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),CM.apply(this,arguments)}const MP={error:"UNKNOWN_ERROR"};function xP(n){return an.US.encodeString(JSON.stringify(n),!1)}function yT(n){return bM.apply(this,arguments)}function bM(){return bM=(0,ve.Z)(function*(n,e=!1){const t=n.app;pM(t);const r=Br(t);let u,o=r.token;if(o&&!Kv(o)&&(r.token=void 0,o=void 0),!o){const E=yield r.cachedTokenPromise;E&&(Kv(E)?o=E:yield wM(t,void 0))}if(!e&&o&&Kv(o))return{token:o.token};let m,l=!1;if(IM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gT(yN(t,yield DM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const E=yield r.exchangeTokenPromise;return yield wM(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Br(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?NE.warn(E.message):NE.error(E),u=E}return o?u?m=Kv(o)?{token:o.token,internalError:u}:TN(u):(m={token:o.token},r.token=o,yield wM(t,o)):m=TN(u),l&&function bN(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),bM.apply(this,arguments)}function TM(){return TM=(0,ve.Z)(function*(n){const e=n.app;pM(e);const{provider:t}=Br(e);if(IM()){const r=yield DM(),{token:o}=yield gT(yN(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),TM.apply(this,arguments)}function AM(n,e){const t=Br(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function CN(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function NP(n){const{app:e}=n;return new gP((0,ve.Z)(function*(){let r;if(r=Br(e).token?yield yT(n,!0):yield yT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},mN.RETRIAL_MIN_WAIT,mN.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Kv(n){return n.expireTimeMillis-Date.now()>0}function TN(n){return{token:xP(MP),error:n}}class RP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)AM(this.app,t.next);return Promise.resolve()}}const PN="app-check-internal";!function qP(){(0,dM.Xd)(new Qm.wA("app-check",n=>function OP(n,e){return new RP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PN).initialize()})),(0,dM.Xd)(new Qm.wA(PN,n=>function PP(n){return{getToken:e=>yT(n,e),getLimitedUseToken:()=>function DN(n){return TM.apply(this,arguments)}(n),addTokenListener:e=>function SM(n,e,t,r){const{app:o}=n,u=Br(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Kv(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),CN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>CN(n))}(n,"INTERNAL",e),removeTokenListener:e=>AM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,dM.KN)("@firebase/app-check","0.8.0")}();class RM{constructor(){return(0,Ln.vb)("app-check")}}typeof window<"u"&&window;var QP=P(120);const FN=new p.OlP("angularfire2.auth.use-emulator"),LN=new p.OlP("angularfire2.auth.settings"),VN=new p.OlP("angularfire2.auth.tenant-id"),UN=new p.OlP("angularfire2.auth.langugage-code"),BN=new p.OlP("angularfire2.auth.use-device-language"),jN=new p.OlP("angularfire.auth.persistence"),$N=(n,e,t,r,o,u,l,m)=>(0,Vo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),l)for(const[b,M]of Object.entries(l))E.settings[b]=M;return m&&E.setPersistence(m),E},[t,r,o,u,l,m]);let HN=(()=>{class n{constructor(t,r,o,u,l,m,E,b,M,R,$,te){const be=new ii.x,Be=(0,mt.of)(void 0).pipe((0,lT.Q)(l.outsideAngular),(0,Er.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8977)))),(0,Et.U)(()=>(0,Vo.on)(t,u,r)),(0,Et.U)(He=>$N(He,u,m,b,M,R,E,$)),hN({bufferSize:1,refCount:!1}));if(_s(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{Be.pipe(Ir()).subscribe();const pt=Be.pipe((0,Er.w)(Ot=>Ot.getRedirectResult().then(Ht=>Ht,()=>null)),Ln.iC,hN({bufferSize:1,refCount:!1})),At=Be.pipe((0,Er.w)(Ot=>new Gr.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(on=>Ht.next(on),on=>Ht.error(on),()=>Ht.complete()))})))),Ct=Be.pipe((0,Er.w)(Ot=>new Gr.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(on=>Ht.next(on),on=>Ht.error(on),()=>Ht.complete()))}))));this.authState=pt.pipe(fN(At),(0,cM.R)(l.outsideAngular),(0,lT.Q)(l.insideAngular)),this.user=pt.pipe(fN(Ct),(0,cM.R)(l.outsideAngular),(0,lT.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Er.w)(Ot=>Ot?(0,An.D)(Ot.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe((0,Er.w)(Ot=>Ot?(0,An.D)(Ot.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,tP.T)(pt,be,this.authState.pipe(si(Ot=>!Ot))).pipe((0,Et.U)(Ot=>Ot?.user?Ot:null),(0,cM.R)(l.outsideAngular),(0,lT.Q)(l.insideAngular))}return(0,Vo.pX)(this,Be,u,{spy:{apply:(He,pt,At)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&At.then(Ct=>be.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vo.Dh),p.LFG(Vo.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ln.HU),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(UN,8),p.LFG(BN,8),p.LFG(jN,8),p.LFG(RM,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function GN(n,e){return function XP(n,e=Ym.z){return new Gr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function PM(n,e){return GN(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function _T(n,e){return PM(n,e).pipe(ga(void 0),Nh(),(0,Et.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const E=o.find(M=>M.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(M=>M.ref.isEqual(l.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(l.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function zN(n,e,t){return _T(n,t).pipe(Zi((r,o)=>function t1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function n1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,O_.x)(),(0,Et.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function kM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function qN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_T(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ga(void 0),Nh(),si(([r,o])=>o.length>0||!r),(0,Et.U)(([r,o])=>o),Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return PM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ln.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Ln.iC)}add(e){return this.ref.add(e)}doc(e){return new ZN(this.ref.doc(e),this.afs)}}class ZN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=QN(r,t);return new WN(o,u,this.afs)}snapshotChanges(){return function e1(n,e){return GN(n,e).pipe(ga(void 0),Nh(),(0,Et.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(Ln.iC)}}class r1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_T(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),si(t=>t.length>0),Ln.iC):_T(this.query,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return zN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(e={}){return PM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Ln.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Ln.iC)}}const KN=new p.OlP("angularfire2.enableFirestorePersistence"),YN=new p.OlP("angularfire2.firestore.persistenceSettings"),i1=new p.OlP("angularfire2.firestore.settings"),s1=new p.OlP("angularfire2.firestore.use-emulator");function QN(n,e=(t=>t)){return{query:e(n),ref:n}}let JN=(()=>{class n{constructor(t,r,o,u,l,m,E,b,M,R,$,te,be,Be,He,pt,At){this.schedulers=E;const Ct=(0,Vo.on)(t,m,r),Ot=M;R&&$N(Ct,m,$,be,Be,He,te,pt),[this.firestore,this.persistenceEnabled$]=(0,Vo.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const Ht=m.runOutsideAngular(()=>Ct.firestore());if(u&&Ht.settings(u),Ot&&Ht.useEmulator(...Ot),o&&!_s(l)){const on=()=>{try{return(0,An.D)(Ht.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ps){return typeof console<"u"&&console.warn(ps),(0,mt.of)(!1)}};return[Ht,m.runOutsideAngular(on)]}return[Ht,(0,mt.of)(!1)]},[u,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=QN(o,r),m=this.schedulers.ngZone.run(()=>u);return new WN(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new r1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new ZN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vo.Dh),p.LFG(Vo.xv,8),p.LFG(KN,8),p.LFG(i1,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ln.HU),p.LFG(YN,8),p.LFG(s1,8),p.LFG(HN,8),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(UN,8),p.LFG(BN,8),p.LFG(jN,8),p.LFG(RM,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),o1=(()=>{class n{constructor(){QP.Z.registerVersion("angularfire",Ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KN,useValue:!0},{provide:YN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[JN]}),n})(),XN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:n})}return n})(),um=(()=>{class n extends XN{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=p.n5z(n)))(o||n)}}();static#t=this.\u0275dir=p.lG2({type:n,features:[p.qOj]})}return n})();const Jc=new p.OlP("NgValueAccessor"),c1={provide:Jc,useExisting:(0,p.Gpc)(()=>wT),multi:!0},d1=new p.OlP("CompositionEventMode");let wT=(()=>{class n extends XN{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function l1(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(d1,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&p.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[p._Bn([c1]),p.qOj]})}return n})();const fs=new p.OlP("NgValidators"),Hf=new p.OlP("NgAsyncValidators");function lR(n){return null!=n}function dR(n){return(0,p.QGY)(n)?(0,An.D)(n):n}function hR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function fR(n,e){return e.map(t=>t(n))}function pR(n){return n.map(e=>function f1(n){return!n.validate}(e)?e:t=>e.validate(t))}function FM(n){return null!=n?function gR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return hR(fR(t,e))}}(pR(n)):null}function LM(n){return null!=n?function mR(n){if(!n)return null;const e=n.filter(lR);return 0==e.length?null:function(t){return function a1(...n){const e=(0,zi.jO)(n),{args:t,keys:r}=pn(n),o=new Gr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let E=l,b=l;for(let M=0;M<l;M++){let R=!1;(0,Ml.Xf)(t[M]).subscribe((0,On.x)(u,$=>{R||(R=!0,b--),m[M]=$},()=>E--,void 0,()=>{(!E||!R)&&(b||u.next(r?qi(r,m):m),u.complete())}))}});return e?o.pipe(da(e)):o}(fR(t,e).map(dR)).pipe((0,Et.U)(hR))}}(pR(n)):null}function yR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VM(n){return n?Array.isArray(n)?n:[n]:[]}function IT(n,e){return Array.isArray(n)?n.includes(e):n===e}function wR(n,e){const t=VM(e);return VM(n).forEach(o=>{IT(t,o)||t.push(o)}),t}function ER(n,e){return VM(e).filter(t=>!IT(n,t))}class IR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ls extends IR{get formDirective(){return null}get path(){return null}}class Gf extends IR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class DR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let CR=(()=>{class n extends DR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Gf,2))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&p.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[p.qOj]})}return n})();const RE="VALID",CT="INVALID",Yv="PENDING",OE="DISABLED";function bT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class AR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===RE}get invalid(){return this.status===CT}get pending(){return this.status==Yv}get disabled(){return this.status===OE}get enabled(){return this.status!==OE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ER(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ER(e,this._rawAsyncValidators))}hasValidator(e){return IT(this._rawValidators,e)}hasAsyncValidator(e){return IT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=OE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=RE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===RE||this.status===Yv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?OE:RE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yv,this._hasOwnPendingAsyncValidator=!0;const t=dR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?OE:this.errors?CT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yv)?Yv:this._anyControlsHaveStatus(CT)?CT:RE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function v1(n){return Array.isArray(n)?FM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function _1(n){return Array.isArray(n)?LM(n):n||null}(this._rawAsyncValidators)}}const Qv=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>TT}),TT="always";function PE(n,e,t=TT){(function GM(n,e){const t=function vR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function _R(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();MT(e._rawValidators,o),MT(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function I1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MR(n,e)})}(n,e),function C1(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function E1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function MT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function OR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const PR=class extends AR{constructor(e=null,t,r){super(function jM(n){return(bT(n)?n.validators:n)||null}(t),function $M(n,e){return(bT(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=OR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){OR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},R1={provide:Gf,useExisting:(0,p.Gpc)(()=>KM)},LR=(()=>Promise.resolve())();let KM=(()=>{class n extends Gf{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new PR,this._registered=!1,this.name="",this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function WM(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===wT?t=u:function S1(n){return Object.getPrototypeOf(n.constructor)===um}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){PE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){LR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,p.VuI)(r);LR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ST(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Ls,9),p.Y36(fs,10),p.Y36(Hf,10),p.Y36(Jc,10),p.Y36(p.sBO,8),p.Y36(Qv,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([R1]),p.qOj,p.TTD]})}return n})(),UR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})(),rk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[UR]})}return n})(),sk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Qv,useValue:t.callSetDisabledState??TT}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[rk]})}return n})();function ok(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",4)(1,"span"),p._uU(2),p.qZA(),p.TgZ(3,"button",5),p.NdJ("click",function(){p.CHM(t);const o=p.oxw(2);return p.KtG(o.answerUser())}),p._uU(4,"Answer"),p.qZA(),p.TgZ(5,"button",5),p.NdJ("click",function(){p.CHM(t);const o=p.oxw(2);return p.KtG(o.hangUp())}),p._uU(6,"Hang Up"),p.qZA()()}if(2&n){const t=p.oxw(2);p.xp6(2),p.hij("",t.me.callerName," is calling you...")}}function ak(n,e){if(1&n&&(p.TgZ(0,"div",2)(1,"p"),p._uU(2,"You are: "),p.TgZ(3,"b"),p._uU(4),p.qZA()(),p.YNc(5,ok,7,1,"div",3),p.qZA()),2&n){const t=p.oxw();p.xp6(4),p.Oqu(t.me.name),p.xp6(1),p.Q6J("ngIf","A<-B"===t.me.status)}}function uk(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"label"),p._uU(2,"Type your username:"),p.qZA(),p.TgZ(3,"input",6),p.NdJ("ngModelChange",function(o){p.CHM(t);const u=p.oxw();return p.KtG(u.userName=o)})("keypress",function(o){p.CHM(t);const u=p.oxw();return p.KtG(u.checkKey(o))}),p.qZA(),p.TgZ(4,"button",7),p.NdJ("click",function(){p.CHM(t);const o=p.oxw();return p.KtG(o.joinRoom())}),p._uU(5,"Enter the Room"),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(3),p.Q6J("ngModel",t.userName),p.xp6(1),p.Q6J("disabled",!t.canLogin)}}function ck(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",10)(1,"p"),p._uU(2),p.qZA(),p.TgZ(3,"p"),p._uU(4),p.qZA(),p.TgZ(5,"p"),p._uU(6),p.qZA(),p.TgZ(7,"button",5),p.NdJ("click",function(){const u=p.CHM(t).$implicit,l=p.oxw(2);return p.KtG(l.callUser(u))}),p._uU(8,"Make a Call"),p.qZA()()}if(2&n){const t=e.$implicit,r=p.oxw(2);p.ekj("hidden",t.name===r.userName||((null==t?null:t.lastPing)||0)<r.pingCut)("busy",!!t.status),p.xp6(2),p.Oqu(t.name),p.xp6(2),p.hij("Status: ",t.status,""),p.xp6(2),p.hij("Ping: ",null==t?null:t.lastPing,"")}}function lk(n,e){if(1&n&&(p.TgZ(0,"div")(1,"h2"),p._uU(2,"Common Room"),p.qZA(),p.TgZ(3,"div",8),p.YNc(4,ck,9,7,"div",9),p.ALo(5,"async"),p.qZA()()),2&n){const t=p.oxw();p.xp6(4),p.Q6J("ngForOf",p.lcZ(5,1,t.users$))}}function dk(n,e){if(1&n&&(p.TgZ(0,"p"),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("",null==t.callee?null:t.callee.name," is ringing...")}}function hk(n,e){if(1&n&&(p.TgZ(0,"p"),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("You are connecting to ",null==t.callee?null:t.callee.name,", please wait...")}}function fk(n,e){if(1&n&&(p.TgZ(0,"p"),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("You are connected to ",null==t.callee?null:t.callee.name,"")}}function pk(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h2"),p._uU(2),p.qZA(),p.YNc(3,dk,2,1,"p",1),p.YNc(4,hk,2,1,"p",1),p.YNc(5,fk,2,1,"p",1),p.TgZ(6,"button",5),p.NdJ("click",function(){p.CHM(t);const o=p.oxw();return p.KtG(o.hangUp())}),p._uU(7,"Hang Up"),p.qZA(),p._UZ(8,"br"),p.TgZ(9,"div",11)(10,"label",12),p._uU(11,"You"),p.qZA(),p._UZ(12,"video",13),p.qZA(),p.TgZ(13,"div",14)(14,"label",15),p._uU(15),p.qZA(),p._UZ(16,"video",13),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(2),p.hij("Calling ",null==t.callee?null:t.callee.name,""),p.xp6(1),p.Q6J("ngIf","A->B"===(null==t.me?null:t.me.status)),p.xp6(1),p.Q6J("ngIf","A>>B"===(null==t.me?null:t.me.status)),p.xp6(1),p.Q6J("ngIf","A==B"===(null==t.me?null:t.me.status)),p.xp6(7),p.Q6J("srcObject",t.myVideoSrc),p.xp6(3),p.Oqu(null==t.caller?null:t.caller.name),p.xp6(1),p.Q6J("srcObject",t.remoteVideoSrc)}}function gk(n,e){if(1&n&&(p.TgZ(0,"p"),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("You are connecting to ",null==t.caller?null:t.caller.name,", please wait...")}}function mk(n,e){if(1&n&&(p.TgZ(0,"p"),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("You are connected to ",null==t.caller?null:t.caller.name,"")}}function yk(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"h2"),p._uU(2),p.qZA(),p.YNc(3,gk,2,1,"p",1),p.YNc(4,mk,2,1,"p",1),p._UZ(5,"br"),p.TgZ(6,"button",5),p.NdJ("click",function(){p.CHM(t);const o=p.oxw();return p.KtG(o.hangUp())}),p._uU(7,"Hang Up"),p.qZA(),p._UZ(8,"br"),p.TgZ(9,"div",11)(10,"label",12),p._uU(11,"You"),p.qZA(),p._UZ(12,"video",13),p.qZA(),p.TgZ(13,"div",14)(14,"label",15),p._uU(15),p.qZA(),p._UZ(16,"video",13),p.qZA()()}if(2&n){const t=p.oxw();p.xp6(2),p.hij("",null==t.caller?null:t.caller.name," is calling you"),p.xp6(1),p.Q6J("ngIf","A<<B"===(null==t.me?null:t.me.status)),p.xp6(1),p.Q6J("ngIf","A==B"===(null==t.me?null:t.me.status)),p.xp6(8),p.Q6J("srcObject",t.myVideoSrc),p.xp6(3),p.Oqu(null==t.caller?null:t.caller.name),p.xp6(1),p.Q6J("srcObject",t.remoteVideoSrc)}}let vk=(()=>{class n{constructor(t){this.af=t,this.userName="",this.status="",this.canLogin=!0,this.usersRef=this.af.collection("users"),this.users$=this.usersRef.valueChanges({idField:"id"}),this.pingCut=(new Date).getTime()-3e5,this.PEER_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.1.google.com:19302"},{urls:"stun:stun2.1.google.com:19302"}]},this.OFFER_OPTIONS={iceRestart:!0,offerToReceiveAudio:!0,offerToReceiveVideo:!0}}ngOnInit(){this.userName=localStorage.getItem("userName"),this.userName?(this.canLogin=!1,this.initRoom()):(this.userName=`user-${Math.floor(1e5*Math.random())}`,this.status="out")}getUserByName(t){return function R_(n,e){const t="object"==typeof e;return new Promise((r,o)=>{let l,u=!1;n.subscribe({next:m=>{l=m,u=!0},error:o,complete:()=>{u?r(l):t?r(e.defaultValue):o(new Ks)}})})}(this.users$.pipe((0,Et.U)(r=>r.find(o=>o.name===t)),wi(1)))}checkKey(t){"Enter"===t.key&&this.canLogin&&this.joinRoom()}joinRoom(){this.canLogin=!1;const t={name:this.userName,created:(new Date).toUTCString(),status:"",remoteSDP:"",callerName:"",callerId:""};this.usersRef.add(t).then(()=>{localStorage.setItem("userName",this.userName),this.initRoom()})}initRoom(){this.canLogin=!0,this.meSub&&this.meSub.unsubscribe(),this.meSub=this.users$.pipe((0,Et.U)(t=>t.find(r=>r.name===this.userName))).subscribe(t=>{this.myDoc=this.af.doc("users/"+t.id),t?(this.onMeChange(t),this.me=t):this.status="out"}),setInterval(()=>{this.pingCut=(new Date).getTime()-3e5;const t=(new Date).getTime();this.myDoc&&this.myDoc.update({lastPing:t})},1e4)}callUser(t){var r=this;return(0,ve.Z)(function*(){console.log("Calling",t),r.calleeDoc=r.af.doc("users/"+t.id),yield r.myDoc.update({status:"A->B"}),yield r.calleeDoc.update({status:"A<-B",callerName:r.me.name,callerId:r.me.id}),r.status="caller",r.calleeSub&&r.calleeSub.unsubscribe(),r.calleeSub=r.calleeDoc.valueChanges({idField:"id"}).subscribe(o=>{r.onCalleeChange(o),r.callee=o})})()}answerUser(){var t=this;return(0,ve.Z)(function*(){t.callerSub&&t.callerSub.unsubscribe(),t.callerSub=t.callerDoc.valueChanges({idField:"id"}).subscribe(r=>{t.onCallerChange(r),t.caller=r}),t.myDoc.update({status:"A<<B"}),t.callerDoc.update({status:"A>>B"})})()}hangUp(){this.myDoc.update({status:"",remoteSDP:"",callerId:""}),this.calleeDoc&&this.calleeDoc.update({status:"",remoteSDP:"",callerId:""}),this.callerDoc&&this.callerDoc.update({status:"",remoteSDP:"",callerId:""}),this.terminate()}onMeChange(t){this.status="in",("A->B"===t.status||"A>>B"===t.status)&&(this.status="caller"),"A<<B"===t.status&&(this.status="callee"),"A==B"===t.status&&(this.status=t.callerId?"caller":"callee"),"A<-B"===t.status&&(console.log("You are getting a call from",t.callerName),this.me?.callerId&&!this.callerDoc&&(this.callerDoc=this.af.doc("users/"+this.me.callerId))),"A->B"===this.me?.status&&"A>>B"===t.status&&(console.log("start creating offer"),this.createOffer()),"A<<B"===t?.status&&!this.me?.remoteSDP&&t?.remoteSDP&&this.createAnswer(t.remoteSDP),"A>>B"===t?.status&&!this.me?.remoteSDP&&t?.remoteSDP&&this.acknowledgeOffer(t.remoteSDP)}onCalleeChange(t){}onCallerChange(t){}createOffer(){var t=this;return(0,ve.Z)(function*(){let r=0,o="",u=!1;t.localStream=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),t.myVideoSrc=t.localStream,t.peer=new RTCPeerConnection(t.PEER_CONFIG),t.remoteStream=new MediaStream,t.remoteVideoSrc=t.remoteStream,t.peer.ontrack=function(){var E=(0,ve.Z)(function*(b){return b.streams[0].getTracks().forEach(M=>t.remoteStream.addTrack(M))});return function(b){return E.apply(this,arguments)}}(),t.localStream.getTracks().forEach(E=>t.peer.addTrack(E,t.localStream)),t.peer.onicecandidate=()=>{r++,o=JSON.stringify(t.peer.localDescription),4===r&&(t.sendOffer(o),u=!0)},t.peer.onconnectionstatechange=E=>{"connected"===E.target.connectionState&&(t.myDoc.update({status:"A==B"}),t.calleeDoc.update({status:"A==B"}))};const m=yield t.peer.createOffer(t.OFFER_OPTIONS);yield t.peer.setLocalDescription(m),setTimeout(()=>{u||t.sendOffer(o)},1e4)})()}sendOffer(t){console.log("sending an offer"),this.calleeDoc.update({remoteSDP:t})}createAnswer(t){var r=this;return(0,ve.Z)(function*(){console.log("Creating the answer for the offer");let o=0,u="",l=!1;r.localStream=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),r.myVideoSrc=r.localStream,r.peer=new RTCPeerConnection(r.PEER_CONFIG),r.remoteStream=new MediaStream,r.remoteVideoSrc=r.remoteStream,r.peer.ontrack=function(){var E=(0,ve.Z)(function*(b){return b.streams[0].getTracks().forEach(M=>r.remoteStream.addTrack(M))});return function(b){return E.apply(this,arguments)}}(),r.localStream.getTracks().forEach(E=>r.peer.addTrack(E,r.localStream)),r.peer.onicecandidate=()=>{o++,u=JSON.stringify(r.peer.localDescription),4===o&&(r.sendAnswer(u),l=!0)},r.peer.onconnectionstatechange=E=>{},yield r.peer.setRemoteDescription(JSON.parse(t));const m=yield r.peer.createAnswer();yield r.peer.setLocalDescription(m),setTimeout(()=>{l||r.sendAnswer(u)},1e4)})()}sendAnswer(t){console.log("sending answer"),this.callerDoc.update({remoteSDP:t})}acknowledgeOffer(t){var r=this;return(0,ve.Z)(function*(){yield r.peer.setRemoteDescription(JSON.parse(t))})()}terminate(){this.peer&&this.peer.close(),this.localStream&&this.localStream.getTracks().forEach(t=>t.stop()),this.remoteStream&&this.remoteStream.getTracks().forEach(t=>t.stop())}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(JN))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:5,consts:[["class","profile",4,"ngIf"],[4,"ngIf"],[1,"profile"],["class","ringing-label",4,"ngIf"],[1,"ringing-label"],[3,"click"],["name","username","autofocus","true",2,"margin-left","15px",3,"ngModel","ngModelChange","keypress"],[2,"margin-left","15px",3,"disabled","click"],[1,"users-room"],["class","user",3,"hidden","busy",4,"ngFor","ngForOf"],[1,"user"],[1,"local-video"],[1,"you-label"],["playsinline","","autoplay","",3,"srcObject"],[1,"remote-video"],[1,"remote-label"]],template:function(r,o){1&r&&(p.TgZ(0,"h1"),p._uU(1,"WebRTC Demo"),p.qZA(),p.YNc(2,ak,6,2,"div",0),p.YNc(3,uk,6,2,"div",1),p.YNc(4,lk,6,3,"div",1),p.YNc(5,pk,17,7,"div",1),p.YNc(6,yk,17,6,"div",1)),2&r&&(p.xp6(2),p.Q6J("ngIf",o.me),p.xp6(1),p.Q6J("ngIf","out"===o.status),p.xp6(1),p.Q6J("ngIf","in"===o.status),p.xp6(1),p.Q6J("ngIf","caller"===o.status),p.xp6(1),p.Q6J("ngIf","callee"===o.status))},dependencies:[Ha,Ko,wT,CR,KM,Qo],styles:[".profile[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:300px;height:100px;padding:10px}.user[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;min-width:150px;min-height:105px;border:1px solid black;padding:15px;border-radius:4px;margin:10px;text-align:center;background:palegreen}.user.hidden[_ngcontent-%COMP%]{display:none}.user.busy[_ngcontent-%COMP%]{background:rgba(255,0,0,.231372549)}.ringing-label[_ngcontent-%COMP%]{font-size:34px;color:red;position:fixed;top:50px;left:400px}.ringing-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;font-size:24px}.local-video[_ngcontent-%COMP%]{position:fixed;bottom:10px;right:10px}.local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:300px}.remote-video[_ngcontent-%COMP%]{position:fixed;left:10px;bottom:10px;width:65%}.remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;max-height:400px}"]})}return n})();const _k_firebase={projectId:"jb-webrtc-demo",appId:"1:516293736350:web:45e2c49ac8c391fdd4488f",storageBucket:"jb-webrtc-demo.appspot.com",apiKey:"AIzaSyA23-iBfDar-xElk4WwttBxs7mZHtfIVSU",authDomain:"jb-webrtc-demo.firebaseapp.com",messagingSenderId:"516293736350",measurementId:"G-HDRCGN5T4T"};let wk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n,bootstrap:[vk]});static#n=this.\u0275inj=p.cJS({imports:[Cl,Km,Vo.hO.initializeApp(_k_firebase),o1,sk]})}return n})();cr().bootstrapModule(wk).catch(n=>console.error(n))},5619:(at,Ce,P)=>{P.d(Ce,{X:()=>Y});var p=P(8645);class Y extends p.x{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const ne=super._subscribe(Q);return!ne.closed&&Q.next(this._value),ne}getValue(){const{hasError:Q,thrownError:ne,_value:fe}=this;if(Q)throw ne;return this._throwIfClosed(),fe}next(Q){super.next(this._value=Q)}}},5592:(at,Ce,P)=>{P.d(Ce,{y:()=>xe});var p=P(305),Y=P(7394),k=P(4850),Q=P(8407),ne=P(2653),fe=P(4674),pe=P(1441);let xe=(()=>{class J{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const qe=new J;return qe.source=this,qe.operator=Te,qe}subscribe(Te,qe,Re){const We=function j(J){return J&&J instanceof p.Lv||function L(J){return J&&(0,fe.m)(J.next)&&(0,fe.m)(J.error)&&(0,fe.m)(J.complete)}(J)&&(0,Y.Nn)(J)}(Te)?Te:new p.Hp(Te,qe,Re);return(0,pe.x)(()=>{const{operator:Oe,source:ct}=this;We.add(Oe?Oe.call(We,ct):ct?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Te){try{return this._subscribe(Te)}catch(qe){Te.error(qe)}}forEach(Te,qe){return new(qe=ue(qe))((Re,We)=>{const Oe=new p.Hp({next:ct=>{try{Te(ct)}catch(lt){We(lt),Oe.unsubscribe()}},error:We,complete:Re});this.subscribe(Oe)})}_subscribe(Te){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Te)}[k.L](){return this}pipe(...Te){return(0,Q.U)(Te)(this)}toPromise(Te){return new(Te=ue(Te))((qe,Re)=>{let We;this.subscribe(Oe=>We=Oe,Oe=>Re(Oe),()=>qe(We))})}}return J.create=Ve=>new J(Ve),J})();function ue(J){var Ve;return null!==(Ve=J??ne.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(at,Ce,P)=>{P.d(Ce,{x:()=>pe});var p=P(5592),Y=P(7394);const Q=(0,P(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=P(9039),fe=P(1441);let pe=(()=>{class ue extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const J=new xe(this,this);return J.operator=j,J}_throwIfClosed(){if(this.closed)throw new Q}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:J}=this;for(;J.length;)J.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:J,isStopped:Ve,observers:Te}=this;return J||Ve?Y.Lc:(this.currentObservers=null,Te.push(j),new Y.w0(()=>{this.currentObservers=null,(0,ne.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:J,thrownError:Ve,isStopped:Te}=this;J?j.error(Ve):Te&&j.complete()}asObservable(){const j=new p.y;return j.source=this,j}}return ue.create=(L,j)=>new xe(L,j),ue})();class xe extends pe{constructor(L,j){super(),this.destination=L,this.source=j}next(L){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===J||J.call(j,L)}error(L){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===J||J.call(j,L)}complete(){var L,j;null===(j=null===(L=this.destination)||void 0===L?void 0:L.complete)||void 0===j||j.call(L)}_subscribe(L){var j,J;return null!==(J=null===(j=this.source)||void 0===j?void 0:j.subscribe(L))&&void 0!==J?J:Y.Lc}}},305:(at,Ce,P)=>{P.d(Ce,{Hp:()=>Re,Lv:()=>J});var p=P(4674),Y=P(7394),k=P(2653),Q=P(3894),ne=P(2420);const fe=ue("C",void 0,void 0);function ue(re,_e,ee){return{kind:re,value:_e,error:ee}}var L=P(7599),j=P(1441);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=lt}static create(_e,ee,Ee){return new Re(_e,ee,Ee)}next(_e){this.isStopped?ct(function xe(re){return ue("N",re,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?ct(function pe(re){return ue("E",void 0,re)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?ct(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Te(re,_e){return Ve.call(re,_e)}class qe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ee}=this;if(ee.next)try{ee.next(_e)}catch(Ee){We(Ee)}}error(_e){const{partialObserver:ee}=this;if(ee.error)try{ee.error(_e)}catch(Ee){We(Ee)}else We(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ee){We(ee)}}}class Re extends J{constructor(_e,ee,Ee){let Pe;if(super(),(0,p.m)(_e)||!_e)Pe={next:_e??void 0,error:ee??void 0,complete:Ee??void 0};else{let oe;this&&k.config.useDeprecatedNextContext?(oe=Object.create(_e),oe.unsubscribe=()=>this.unsubscribe(),Pe={next:_e.next&&Te(_e.next,oe),error:_e.error&&Te(_e.error,oe),complete:_e.complete&&Te(_e.complete,oe)}):Pe=_e}this.destination=new qe(Pe)}}function We(re){k.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(re):(0,Q.h)(re)}function ct(re,_e){const{onStoppedNotification:ee}=k.config;ee&&L.z.setTimeout(()=>ee(re,_e))}const lt={closed:!0,next:ne.Z,error:function Oe(re){throw re},complete:ne.Z}},7394:(at,Ce,P)=>{P.d(Ce,{Lc:()=>fe,w0:()=>ne,Nn:()=>pe});var p=P(4674);const k=(0,P(2306).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((J,Ve)=>`${Ve+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var Q=P(9039);class ne{constructor(L){this.initialTeardown=L,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let L;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Te){L=Te instanceof k?Te.errors:[Te]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Te of Ve)try{xe(Te)}catch(qe){L=L??[],qe instanceof k?L=[...L,...qe.errors]:L.push(qe)}}if(L)throw new k(L)}}add(L){var j;if(L&&L!==this)if(this.closed)xe(L);else{if(L instanceof ne){if(L.closed||L._hasParent(this))return;L._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(L)}}_hasParent(L){const{_parentage:j}=this;return j===L||Array.isArray(j)&&j.includes(L)}_addParent(L){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(L),j):j?[j,L]:L}_removeParent(L){const{_parentage:j}=this;j===L?this._parentage=null:Array.isArray(j)&&(0,Q.P)(j,L)}remove(L){const{_finalizers:j}=this;j&&(0,Q.P)(j,L),L instanceof ne&&L._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const fe=ne.EMPTY;function pe(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,p.m)(ue.remove)&&(0,p.m)(ue.add)&&(0,p.m)(ue.unsubscribe)}function xe(ue){(0,p.m)(ue)?ue():ue.unsubscribe()}},2653:(at,Ce,P)=>{P.d(Ce,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(at,Ce,P)=>{P.d(Ce,{E:()=>Y});const Y=new(P(5592).y)(ne=>ne.complete())},2459:(at,Ce,P)=>{P.d(Ce,{D:()=>_e});var p=P(4829),Y=P(3093),k=P(5137),fe=P(5592),xe=P(4971),ue=P(4674),L=P(7103);function J(ee,Ee){if(!ee)throw new Error("Iterable cannot be null");return new fe.y(Pe=>{(0,L.f)(Pe,Ee,()=>{const oe=ee[Symbol.asyncIterator]();(0,L.f)(Pe,Ee,()=>{oe.next().then(q=>{q.done?Pe.complete():Pe.next(q.value)})},0,!0)})})}var Ve=P(8382),Te=P(4026),qe=P(4266),Re=P(3664),We=P(5726),Oe=P(9853),ct=P(541);function _e(ee,Ee){return Ee?function re(ee,Ee){if(null!=ee){if((0,Ve.c)(ee))return function Q(ee,Ee){return(0,p.Xf)(ee).pipe((0,k.R)(Ee),(0,Y.Q)(Ee))}(ee,Ee);if((0,qe.z)(ee))return function pe(ee,Ee){return new fe.y(Pe=>{let oe=0;return Ee.schedule(function(){oe===ee.length?Pe.complete():(Pe.next(ee[oe++]),Pe.closed||this.schedule())})})}(ee,Ee);if((0,Te.t)(ee))return function ne(ee,Ee){return(0,p.Xf)(ee).pipe((0,k.R)(Ee),(0,Y.Q)(Ee))}(ee,Ee);if((0,We.D)(ee))return J(ee,Ee);if((0,Re.T)(ee))return function j(ee,Ee){return new fe.y(Pe=>{let oe;return(0,L.f)(Pe,Ee,()=>{oe=ee[xe.h](),(0,L.f)(Pe,Ee,()=>{let q,je;try{({value:q,done:je}=oe.next())}catch(ht){return void Pe.error(ht)}je?Pe.complete():Pe.next(q)},0,!0)}),()=>(0,ue.m)(oe?.return)&&oe.return()})}(ee,Ee);if((0,ct.L)(ee))return function lt(ee,Ee){return J((0,ct.Q)(ee),Ee)}(ee,Ee)}throw(0,Oe.z)(ee)}(ee,Ee):(0,p.Xf)(ee)}},4829:(at,Ce,P)=>{P.d(Ce,{Xf:()=>Ve});var p=P(7582),Y=P(4266),k=P(4026),Q=P(5592),ne=P(8382),fe=P(5726),pe=P(9853),xe=P(3664),ue=P(541),L=P(4674),j=P(3894),J=P(4850);function Ve(re){if(re instanceof Q.y)return re;if(null!=re){if((0,ne.c)(re))return function Te(re){return new Q.y(_e=>{const ee=re[J.L]();if((0,L.m)(ee.subscribe))return ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(re);if((0,Y.z)(re))return function qe(re){return new Q.y(_e=>{for(let ee=0;ee<re.length&&!_e.closed;ee++)_e.next(re[ee]);_e.complete()})}(re);if((0,k.t)(re))return function Re(re){return new Q.y(_e=>{re.then(ee=>{_e.closed||(_e.next(ee),_e.complete())},ee=>_e.error(ee)).then(null,j.h)})}(re);if((0,fe.D)(re))return Oe(re);if((0,xe.T)(re))return function We(re){return new Q.y(_e=>{for(const ee of re)if(_e.next(ee),_e.closed)return;_e.complete()})}(re);if((0,ue.L)(re))return function ct(re){return Oe((0,ue.Q)(re))}(re)}throw(0,pe.z)(re)}function Oe(re){return new Q.y(_e=>{(function lt(re,_e){var ee,Ee,Pe,oe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ee=(0,p.KL)(re);!(Ee=yield ee.next()).done;)if(_e.next(Ee.value),_e.closed)return}catch(q){Pe={error:q}}finally{try{Ee&&!Ee.done&&(oe=ee.return)&&(yield oe.call(ee))}finally{if(Pe)throw Pe.error}}_e.complete()})})(re,_e).catch(ee=>_e.error(ee))})}},3019:(at,Ce,P)=>{P.d(Ce,{T:()=>fe});var p=P(7537),Y=P(4829),k=P(6232),Q=P(4564),ne=P(2459);function fe(...pe){const xe=(0,Q.yG)(pe),ue=(0,Q._6)(pe,1/0),L=pe;return L.length?1===L.length?(0,Y.Xf)(L[0]):(0,p.J)(ue)((0,ne.D)(L,xe)):k.E}},2096:(at,Ce,P)=>{P.d(Ce,{of:()=>k});var p=P(4564),Y=P(2459);function k(...Q){const ne=(0,p.yG)(Q);return(0,Y.D)(Q,ne)}},8251:(at,Ce,P)=>{P.d(Ce,{x:()=>Y});var p=P(305);function Y(Q,ne,fe,pe,xe){return new k(Q,ne,fe,pe,xe)}class k extends p.Lv{constructor(ne,fe,pe,xe,ue,L){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=L,this._next=fe?function(j){try{fe(j)}catch(J){ne.error(J)}}:super._next,this._error=xe?function(j){try{xe(j)}catch(J){ne.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(at,Ce,P)=>{P.d(Ce,{x:()=>Q});var p=P(2737),Y=P(9360),k=P(8251);function Q(fe,pe=p.y){return fe=fe??ne,(0,Y.e)((xe,ue)=>{let L,j=!0;xe.subscribe((0,k.x)(ue,J=>{const Ve=pe(J);(j||!fe(L,Ve))&&(j=!1,L=Ve,ue.next(J))}))})}function ne(fe,pe){return fe===pe}},7398:(at,Ce,P)=>{P.d(Ce,{U:()=>k});var p=P(9360),Y=P(8251);function k(Q,ne){return(0,p.e)((fe,pe)=>{let xe=0;fe.subscribe((0,Y.x)(pe,ue=>{pe.next(Q.call(ne,ue,xe++))}))})}},7537:(at,Ce,P)=>{P.d(Ce,{J:()=>k});var p=P(1631),Y=P(2737);function k(Q=1/0){return(0,p.z)(Y.y,Q)}},1631:(at,Ce,P)=>{P.d(Ce,{z:()=>xe});var p=P(7398),Y=P(4829),k=P(9360),Q=P(7103),ne=P(8251),pe=P(4674);function xe(ue,L,j=1/0){return(0,pe.m)(L)?xe((J,Ve)=>(0,p.U)((Te,qe)=>L(J,Te,Ve,qe))((0,Y.Xf)(ue(J,Ve))),j):("number"==typeof L&&(j=L),(0,k.e)((J,Ve)=>function fe(ue,L,j,J,Ve,Te,qe,Re){const We=[];let Oe=0,ct=0,lt=!1;const re=()=>{lt&&!We.length&&!Oe&&L.complete()},_e=Ee=>Oe<J?ee(Ee):We.push(Ee),ee=Ee=>{Te&&L.next(Ee),Oe++;let Pe=!1;(0,Y.Xf)(j(Ee,ct++)).subscribe((0,ne.x)(L,oe=>{Ve?.(oe),Te?_e(oe):L.next(oe)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Oe--;We.length&&Oe<J;){const oe=We.shift();qe?(0,Q.f)(L,qe,()=>ee(oe)):ee(oe)}re()}catch(oe){L.error(oe)}}))};return ue.subscribe((0,ne.x)(L,_e,()=>{lt=!0,re()})),()=>{Re?.()}}(J,Ve,ue,j)))}},3093:(at,Ce,P)=>{P.d(Ce,{Q:()=>Q});var p=P(7103),Y=P(9360),k=P(8251);function Q(ne,fe=0){return(0,Y.e)((pe,xe)=>{pe.subscribe((0,k.x)(xe,ue=>(0,p.f)(xe,ne,()=>xe.next(ue),fe),()=>(0,p.f)(xe,ne,()=>xe.complete(),fe),ue=>(0,p.f)(xe,ne,()=>xe.error(ue),fe)))})}},3020:(at,Ce,P)=>{P.d(Ce,{B:()=>ne});var p=P(4829),Y=P(8645),k=P(305),Q=P(9360);function ne(pe={}){const{connector:xe=(()=>new Y.x),resetOnError:ue=!0,resetOnComplete:L=!0,resetOnRefCountZero:j=!0}=pe;return J=>{let Ve,Te,qe,Re=0,We=!1,Oe=!1;const ct=()=>{Te?.unsubscribe(),Te=void 0},lt=()=>{ct(),Ve=qe=void 0,We=Oe=!1},re=()=>{const _e=Ve;lt(),_e?.unsubscribe()};return(0,Q.e)((_e,ee)=>{Re++,!Oe&&!We&&ct();const Ee=qe=qe??xe();ee.add(()=>{Re--,0===Re&&!Oe&&!We&&(Te=fe(re,j))}),Ee.subscribe(ee),!Ve&&Re>0&&(Ve=new k.Hp({next:Pe=>Ee.next(Pe),error:Pe=>{Oe=!0,ct(),Te=fe(lt,ue,Pe),Ee.error(Pe)},complete:()=>{We=!0,ct(),Te=fe(lt,L),Ee.complete()}}),(0,p.Xf)(_e).subscribe(Ve))})(J)}}function fe(pe,xe,...ue){if(!0===xe)return void pe();if(!1===xe)return;const L=new k.Hp({next:()=>{L.unsubscribe(),pe()}});return(0,p.Xf)(xe(...ue)).subscribe(L)}},5137:(at,Ce,P)=>{P.d(Ce,{R:()=>Y});var p=P(9360);function Y(k,Q=0){return(0,p.e)((ne,fe)=>{fe.add(k.schedule(()=>ne.subscribe(fe),Q))})}},4664:(at,Ce,P)=>{P.d(Ce,{w:()=>Q});var p=P(4829),Y=P(9360),k=P(8251);function Q(ne,fe){return(0,Y.e)((pe,xe)=>{let ue=null,L=0,j=!1;const J=()=>j&&!ue&&xe.complete();pe.subscribe((0,k.x)(xe,Ve=>{ue?.unsubscribe();let Te=0;const qe=L++;(0,p.Xf)(ne(Ve,qe)).subscribe(ue=(0,k.x)(xe,Re=>xe.next(fe?fe(Ve,Re,qe,Te++):Re),()=>{ue=null,J()}))},()=>{j=!0,J()}))})}},9397:(at,Ce,P)=>{P.d(Ce,{b:()=>ne});var p=P(4674),Y=P(9360),k=P(8251),Q=P(2737);function ne(fe,pe,xe){const ue=(0,p.m)(fe)||pe||xe?{next:fe,error:pe,complete:xe}:fe;return ue?(0,Y.e)((L,j)=>{var J;null===(J=ue.subscribe)||void 0===J||J.call(ue);let Ve=!0;L.subscribe((0,k.x)(j,Te=>{var qe;null===(qe=ue.next)||void 0===qe||qe.call(ue,Te),j.next(Te)},()=>{var Te;Ve=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var qe;Ve=!1,null===(qe=ue.error)||void 0===qe||qe.call(ue,Te),j.error(Te)},()=>{var Te,qe;Ve&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(qe=ue.finalize)||void 0===qe||qe.call(ue)}))}):Q.y}},1954:(at,Ce,P)=>{P.d(Ce,{o:()=>ne});var p=P(7394);class Y extends p.w0{constructor(pe,xe){super()}schedule(pe,xe=0){return this}}const k={setInterval(fe,pe,...xe){const{delegate:ue}=k;return ue?.setInterval?ue.setInterval(fe,pe,...xe):setInterval(fe,pe,...xe)},clearInterval(fe){const{delegate:pe}=k;return(pe?.clearInterval||clearInterval)(fe)},delegate:void 0};var Q=P(9039);class ne extends Y{constructor(pe,xe){super(pe,xe),this.scheduler=pe,this.work=xe,this.pending=!1}schedule(pe,xe=0){var ue;if(this.closed)return this;this.state=pe;const L=this.id,j=this.scheduler;return null!=L&&(this.id=this.recycleAsyncId(j,L,xe)),this.pending=!0,this.delay=xe,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(j,this.id,xe),this}requestAsyncId(pe,xe,ue=0){return k.setInterval(pe.flush.bind(pe,this),ue)}recycleAsyncId(pe,xe,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return xe;null!=xe&&k.clearInterval(xe)}execute(pe,xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(pe,xe);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,xe){let L,ue=!1;try{this.work(pe)}catch(j){ue=!0,L=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),L}unsubscribe(){if(!this.closed){const{id:pe,scheduler:xe}=this,{actions:ue}=xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.P)(ue,this),null!=pe&&(this.id=this.recycleAsyncId(xe,pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(at,Ce,P)=>{P.d(Ce,{v:()=>k});var p=P(4552);class Y{constructor(ne,fe=Y.now){this.schedulerActionCtor=ne,this.now=fe}schedule(ne,fe=0,pe){return new this.schedulerActionCtor(this,ne).schedule(pe,fe)}}Y.now=p.l.now;class k extends Y{constructor(ne,fe=Y.now){super(ne,fe),this.actions=[],this._active=!1}flush(ne){const{actions:fe}=this;if(this._active)return void fe.push(ne);let pe;this._active=!0;do{if(pe=ne.execute(ne.state,ne.delay))break}while(ne=fe.shift());if(this._active=!1,pe){for(;ne=fe.shift();)ne.unsubscribe();throw pe}}}},6321:(at,Ce,P)=>{P.d(Ce,{z:()=>k});var p=P(1954);const k=new(P(2631).v)(p.o)},4552:(at,Ce,P)=>{P.d(Ce,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(at,Ce,P)=>{P.d(Ce,{z:()=>p});const p={setTimeout(Y,k,...Q){const{delegate:ne}=p;return ne?.setTimeout?ne.setTimeout(Y,k,...Q):setTimeout(Y,k,...Q)},clearTimeout(Y){const{delegate:k}=p;return(k?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4971:(at,Ce,P)=>{P.d(Ce,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(at,Ce,P)=>{P.d(Ce,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(at,Ce,P)=>{P.d(Ce,{_6:()=>fe,jO:()=>Q,yG:()=>ne});var p=P(4674);function k(pe){return pe[pe.length-1]}function Q(pe){return(0,p.m)(k(pe))?pe.pop():void 0}function ne(pe){return function Y(pe){return pe&&(0,p.m)(pe.schedule)}(k(pe))?pe.pop():void 0}function fe(pe,xe){return"number"==typeof k(pe)?pe.pop():xe}},9039:(at,Ce,P)=>{function p(Y,k){if(Y){const Q=Y.indexOf(k);0<=Q&&Y.splice(Q,1)}}P.d(Ce,{P:()=>p})},2306:(at,Ce,P)=>{function p(Y){const Q=Y(ne=>{Error.call(ne),ne.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}P.d(Ce,{d:()=>p})},1441:(at,Ce,P)=>{P.d(Ce,{O:()=>Q,x:()=>k});var p=P(2653);let Y=null;function k(ne){if(p.config.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),ne(),fe){const{errorThrown:pe,error:xe}=Y;if(Y=null,pe)throw xe}}else ne()}function Q(ne){p.config.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ne)}},7103:(at,Ce,P)=>{function p(Y,k,Q,ne=0,fe=!1){const pe=k.schedule(function(){Q(),fe?Y.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Y.add(pe),!fe)return pe}P.d(Ce,{f:()=>p})},2737:(at,Ce,P)=>{function p(Y){return Y}P.d(Ce,{y:()=>p})},4266:(at,Ce,P)=>{P.d(Ce,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},5726:(at,Ce,P)=>{P.d(Ce,{D:()=>Y});var p=P(4674);function Y(k){return Symbol.asyncIterator&&(0,p.m)(k?.[Symbol.asyncIterator])}},4674:(at,Ce,P)=>{function p(Y){return"function"==typeof Y}P.d(Ce,{m:()=>p})},8382:(at,Ce,P)=>{P.d(Ce,{c:()=>k});var p=P(4850),Y=P(4674);function k(Q){return(0,Y.m)(Q[p.L])}},3664:(at,Ce,P)=>{P.d(Ce,{T:()=>k});var p=P(4971),Y=P(4674);function k(Q){return(0,Y.m)(Q?.[p.h])}},4026:(at,Ce,P)=>{P.d(Ce,{t:()=>Y});var p=P(4674);function Y(k){return(0,p.m)(k?.then)}},541:(at,Ce,P)=>{P.d(Ce,{L:()=>Q,Q:()=>k});var p=P(7582),Y=P(4674);function k(ne){return(0,p.FC)(this,arguments,function*(){const pe=ne.getReader();try{for(;;){const{value:xe,done:ue}=yield(0,p.qq)(pe.read());if(ue)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(xe)}}finally{pe.releaseLock()}})}function Q(ne){return(0,Y.m)(ne?.getReader)}},9360:(at,Ce,P)=>{P.d(Ce,{A:()=>Y,e:()=>k});var p=P(4674);function Y(Q){return(0,p.m)(Q?.lift)}function k(Q){return ne=>{if(Y(ne))return ne.lift(function(fe){try{return Q(fe,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(at,Ce,P)=>{function p(){}P.d(Ce,{Z:()=>p})},8407:(at,Ce,P)=>{P.d(Ce,{U:()=>k,z:()=>Y});var p=P(2737);function Y(...Q){return k(Q)}function k(Q){return 0===Q.length?p.y:1===Q.length?Q[0]:function(fe){return Q.reduce((pe,xe)=>xe(pe),fe)}}},3894:(at,Ce,P)=>{P.d(Ce,{h:()=>k});var p=P(2653),Y=P(7599);function k(Q){Y.z.setTimeout(()=>{const{onUnhandledError:ne}=p.config;if(!ne)throw Q;ne(Q)})}},9853:(at,Ce,P)=>{function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>p})},5879:(at,Ce,P)=>{P.d(Ce,{$8M:()=>gc,$WT:()=>$s,$Z:()=>zI,AFp:()=>Xs,ALo:()=>Fu,AaK:()=>J,CHM:()=>Gi,CRH:()=>xd,EJc:()=>Kw,EpF:()=>SD,F4k:()=>AD,FYo:()=>iy,FiY:()=>Fl,GfV:()=>z_,Gpc:()=>qe,HDt:()=>Lu,JOm:()=>bc,KtG:()=>sc,LFG:()=>Tt,Lbi:()=>Ft,Lck:()=>SC,MMx:()=>hf,NdJ:()=>O0,Ojb:()=>rS,OlP:()=>gn,Oqu:()=>z0,P3R:()=>JT,PXZ:()=>uE,Q6J:()=>N0,QGY:()=>R0,Qsj:()=>H_,R0b:()=>ci,RDi:()=>YE,Rgc:()=>Lg,SBq:()=>Nc,Sil:()=>Tf,Suo:()=>Md,TTD:()=>ec,TgZ:()=>jc,VuI:()=>JA,X6Q:()=>dE,XFs:()=>_t,Xpm:()=>Gu,Xq5:()=>hD,Xts:()=>Mh,Y36:()=>rd,YKP:()=>iv,YNc:()=>Kh,Yjl:()=>sl,Yz7:()=>ut,Z0I:()=>rn,ZZ4:()=>yE,_Bn:()=>vw,_UZ:()=>li,_c5:()=>Yb,_uU:()=>H0,aQg:()=>$v,c2e:()=>wb,cJS:()=>mn,cg1:()=>Bt,dDg:()=>xb,dqk:()=>tn,eFA:()=>Ov,eJc:()=>Nd,ekj:()=>Uy,eoX:()=>xv,f3M:()=>Pt,g9A:()=>Jm,h0i:()=>ku,hGG:()=>Hv,hij:()=>Hy,iGM:()=>kw,ifc:()=>ji,ip1:()=>_b,jDz:()=>MC,kL8:()=>Yy,lG2:()=>Jo,lcZ:()=>UC,lqb:()=>Ln,lri:()=>Mb,n5z:()=>Qs,oAB:()=>Qo,oxw:()=>OD,q4F:()=>MI,qFp:()=>zx,qLn:()=>Rc,qOj:()=>to,qZA:()=>fg,rWj:()=>Mv,rg0:()=>_l,sBO:()=>VA,s_b:()=>fv,soG:()=>qg,tb:()=>sE,tp0:()=>Po,uIk:()=>Fc,vHH:()=>re,vpe:()=>Ns,wAp:()=>vd,xp6:()=>GI,z2F:()=>xf,zSh:()=>N_,zs3:()=>Uo});var p=P(8645),Y=P(7394),k=P(5592),Q=P(3019),ne=P(5619),fe=P(2096),pe=P(3020),xe=P(4664),ue=P(3997);function L(i){for(let s in i)if(i[s]===L)return s;throw Error("Could not find renamed property on target object.")}function j(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ve(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Te=L({__forward_ref__:L});function qe(i){return i.__forward_ref__=qe,i.toString=function(){return J(this())},i}function Re(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(Te)&&i.__forward_ref__===qe}function Oe(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class re extends Error{constructor(s,a){super(function _e(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function je(i,s){throw new re(-201,!1)}function Ze(i,s){null==i&&function Ge(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Kn(i){return Sr(i,$n)||Sr(i,gs)}function rn(i){return null!==Kn(i)}function Sr(i,s){return i.hasOwnProperty(s)?i[s]:null}function mi(i){return i&&(i.hasOwnProperty(Qr)||i.hasOwnProperty(so))?i[Qr]:null}const $n=L({\u0275prov:L}),Qr=L({\u0275inj:L}),gs=L({ngInjectableDef:L}),so=L({ngInjectorDef:L});var _t=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(_t||{});let bt;function cn(i){const s=bt;return bt=i,s}function En(i,s,a){const c=Kn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&_t.Optional?null:void 0!==s?s:void je(J(i))}const tn=globalThis,$e={},Ke="__NG_DI_FLAG__",ft="ngTempTokenPath",U=/\n/gm,W="__source";let De;function tt(i){const s=De;return De=i,s}function Nt(i,s=_t.Default){if(void 0===De)throw new re(-203,!1);return null===De?En(i,void 0,s):De.get(i,s&_t.Optional?null:void 0,s)}function Tt(i,s=_t.Default){return(function xt(){return bt}()||Nt)(Re(i),s)}function Pt(i,s=_t.Default){return Tt(i,Qn(s))}function Qn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Yt(i){const s=[];for(let a=0;a<i.length;a++){const c=Re(i[a]);if(Array.isArray(c)){if(0===c.length)throw new re(900,!1);let d,f=_t.Default;for(let y=0;y<c.length;y++){const w=c[y],D=Us(w);"number"==typeof D?-1===D?d=w.token:f|=D:d=w}s.push(Tt(d,f))}else s.push(Tt(c))}return s}function fr(i,s){return i[Ke]=s,i.prototype[Ke]=s,i}function Us(i){return i[Ke]}function rs(i){return{toString:i}.toString()}var Bs=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Bs||{}),ji=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ji||{});const $i={},Gt=[],js=L({\u0275cmp:L}),qo=L({\u0275dir:L}),ja=L({\u0275pipe:L}),Ld=L({\u0275mod:L}),is=L({\u0275fac:L}),Wo=L({__NG_ELEMENT_ID__:L}),Zo=L({__NG_ENV_ID__:L});function el(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function $a(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=d,y=a[++c];Mi(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function tl(i){return 3===i||4===i||6===i}function Mi(i){return 64===i.charCodeAt(0)}function oo(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Ha(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Ha(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const nl="ng-template";function Jn(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==el(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function Ko(i){return 4===i.type&&i.value!==nl}function dm(i,s,a){return s===(4!==i.type||a?i.value:nl)}function zf(i,s,a){let c=4;const d=i.attrs||[],f=function hm(i){for(let s=0;s<i.length;s++)if(tl(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!dm(i,D,a)||""===D&&1===s.length){if(Jr(c))return!1;y=!0}}else{const T=8&c?D:s[++w];if(8&c&&null!==i.attrs){if(!Jn(i.attrs,T,a)){if(Jr(c))return!1;y=!0}continue}const F=Yo(8&c?"class":D,d,Ko(i),a);if(-1===F){if(Jr(c))return!1;y=!0;continue}if(""!==T){let z;z=F>f?"":d[F+1].toLowerCase();const X=8&c?z:null;if(X&&-1!==el(X,T,0)||2&c&&T!==z){if(Jr(c))return!1;y=!0}}}}else{if(!y&&!Jr(c)&&!Jr(D))return!1;if(y&&Jr(D))continue;y=!1,c=D|1&c}}return Jr(c)||y}function Jr(i){return 0==(1&i)}function Yo(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function ao(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function rl(i,s,a=!1){for(let c=0;c<s.length;c++)if(zf(i,s[c],a))return!0;return!1}function Ga(i,s){return i?":not("+s.trim()+")":s}function Ud(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Jr(y)&&(s+=Ga(f,d),d=""),c=y,f=f||!Jr(c);a++}return""!==d&&(s+=Ga(f,d)),s}function Gu(i){return rs(()=>{const s=ol(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Bs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ji.Emulated,styles:i.styles||Gt,_:null,schemas:i.schemas||null,tView:null,id:""};Wf(a);const c=i.dependencies;return a.directiveDefs=za(c,!1),a.pipeDefs=za(c,!0),a.id=function Ni(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function il(i){return zt(i)||Hn(i)}function zu(i){return null!==i}function Qo(i){return rs(()=>({type:i.type,bootstrap:i.bootstrap||Gt,declarations:i.declarations||Gt,imports:i.imports||Gt,exports:i.exports||Gt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function qu(i,s){if(null==i)return $i;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function Jo(i){return rs(()=>{const s=ol(i);return Wf(s),s})}function sl(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zt(i){return i[js]||null}function Hn(i){return i[qo]||null}function jr(i){return i[ja]||null}function $s(i){const s=zt(i)||Hn(i)||jr(i);return null!==s&&s.standalone}function $r(i,s){const a=i[Ld]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function ol(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||$i,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Gt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qu(i.inputs,s),outputs:qu(i.outputs)}}function Wf(i){i.features?.forEach(s=>s(i))}function za(i,s){if(!i)return null;const a=s?jr:il;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(zu)}const In=0,et=1,wt=2,Dn=3,Hr=4,uo=5,pr=6,qa=7,Sn=8,vs=9,Xo=10,It=11,gr=12,Zf=13,_s=14,Cn=15,al=16,co=17,ir=18,ws=19,Es=20,Hs=21,Ri=22,Wa=23,Gs=24,Lt=25,ea=1,Zu=2,sr=7,or=9,mr=11;function ar(i){return Array.isArray(i)&&"object"==typeof i[ea]}function Rr(i){return Array.isArray(i)&&!0===i[ea]}function Ku(i){return 0!=(4&i.flags)}function ho(i){return i.componentOffset>-1}function vi(i){return 1==(1&i.flags)}function Xr(i){return!!i.template}function ta(i){return 0!=(512&i[wt])}function fo(i,s){return i.hasOwnProperty(is)?i[is]:null}let nr=null,po=!1;function ei(i){const s=nr;return nr=i,s}const go={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ya(i){if(!mo(i)||i.dirty){if(!i.producerMustRecompute(i)&&!pl(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function Qa(i){i.dirty=!0,function qd(i){if(void 0===i.liveConsumerNode)return;const s=po;po=!0;try{for(const a of i.liveConsumerNode)a.dirty||Qa(a)}finally{po=s}}(i),i.consumerMarkedDirty?.(i)}function Wd(i){return i&&(i.nextProducerIndex=0),ei(i)}function ur(i,s){if(ei(s),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(mo(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Ja(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function pl(i){qs(i);for(let s=0;s<i.producerNode.length;s++){const a=i.producerNode[s],c=i.producerLastReadVersion[s];if(c!==a.version||(Ya(a),c!==a.version))return!0}return!1}function gl(i){if(qs(i),mo(i))for(let s=0;s<i.producerNode.length;s++)Ja(i.producerNode[s],i.producerIndexOfThis[s]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Ja(i,s){if(function Xa(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),qs(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)Ja(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[s]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[s]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,s<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[s],d=i.liveConsumerNode[s];qs(d),d.producerIndexOfThis[c]=s}}function mo(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function qs(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Yd=null;function _l(i){const s=ei(null);try{return i()}finally{ei(s)}}const wl=()=>{},ep=(()=>({...go,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:wl}))();class tp{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ec(){return nu}function nu(i){return i.type.prototype.ngOnChanges&&(i.setInput=yo),np}function np(){const i=vo(this),s=i?.current;if(s){const a=i.previous;if(a===$i)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function yo(i,s,a,c){const d=this.declaredInputs[a],f=vo(i)||function Jd(i,s){return i[os]=s}(i,{previous:$i,current:null}),y=f.current||(f.current={}),w=f.previous,D=w[d];y[d]=new tp(D&&D.currentValue,s,w===$i),i[c]=s}ec.ngInherit=!0;const os="__ngSimpleChanges__";function vo(i){return i[os]||null}const Hi=function(i,s,a){};function nn(i){for(;Array.isArray(i);)i=i[In];return i}function wo(i,s){return nn(s[i])}function yr(i,s){return nn(s[i.index])}function Il(i,s){return i.data[s]}function vr(i,s){const a=s[i];return ar(a)?a:a[In]}function ti(i,s){return null==s?null:i[s]}function ap(i){i[co]=0}function Dl(i){1024&i[wt]||(i[wt]|=1024,Em(i,1))}function tc(i){1024&i[wt]&&(i[wt]&=-1025,Em(i,-1))}function Em(i,s){let a=i[Dn];if(null===a)return;a[uo]+=s;let c=a;for(a=a[Dn];null!==a&&(1===s&&1===c[uo]||-1===s&&0===c[uo]);)a[uo]+=s,c=a,a=a[Dn]}const Dt={lFrame:la(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _r(){return Dt.bindingsEnabled}function Ae(){return Dt.lFrame.lView}function jt(){return Dt.lFrame.tView}function Gi(i){return Dt.lFrame.contextLView=i,i[Sn]}function sc(i){return Dt.lFrame.contextLView=null,i}function lr(){let i=oc();for(;null!==i&&64===i.type;)i=i.parent;return i}function oc(){return Dt.lFrame.currentTNode}function Ws(i,s){const a=Dt.lFrame;a.currentTNode=i,a.isParent=s}function Io(){return Dt.lFrame.isParent}function Do(){return Dt.lFrame.bindingIndex++}function ac(i,s){const a=Dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,uc(s)}function uc(i){Dt.lFrame.currentDirectiveIndex=i}function cc(){return Dt.lFrame.currentQueryIndex}function uh(i){Dt.lFrame.currentQueryIndex=i}function ch(i){const s=i[et];return 2===s.type?s.declTNode:1===s.type?i[pr]:null}function cp(i,s,a){if(a&_t.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&_t.Host||(d=ch(f),null===d||(f=f[_s],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Dt.lFrame=ca();return c.currentTNode=s,c.lView=i,!0}function Gr(i){const s=ca(),a=i[et];Dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ca(){const i=Dt.lFrame,s=null===i?null:i.child;return null===s?la(i):s}function la(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function An(){const i=Dt.lFrame;return Dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const mt=An;function zr(){const i=An();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function wr(){return Dt.lFrame.selectedIndex}function Ds(i){Dt.lFrame.selectedIndex=i}function pn(){const i=Dt.lFrame;return Il(i.tView,i.selectedIndex)}let da=!0;function zi(){return da}function qi(i){da=i}function ha(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=f;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),D&&(i.viewHooks??=[]).push(-a,D),T&&((i.viewHooks??=[]).push(a,T),(i.viewCheckHooks??=[]).push(a,T)),null!=x&&(i.destroyHooks??=[]).push(a,x)}}function bo(i,s,a){lp(i,s,3,a)}function dc(i,s,a,c){(3&i[wt])===a&&lp(i,s,a,c)}function fa(i,s){let a=i[wt];(3&a)===s&&(a&=8191,a+=1,i[wt]=a)}function lp(i,s,a,c){const f=c??-1,y=s.length-1;let w=0;for(let D=void 0!==c?65535&i[co]:0;D<y;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=c&&w>=c)break}else s[D]<0&&(i[co]+=65536),(w<f||-1==f)&&(To(i,a,s,D),i[co]=(4294901760&i[co])+D+2),D++}function Ks(i,s){Hi(4,i,s);const a=ei(null);try{s.call(i)}finally{ei(a),Hi(5,i,s)}}function To(i,s,a,c){const d=a[c]<0,f=a[c+1],w=i[d?-a[c]:a[c]];d?i[wt]>>13<i[co]>>16&&(3&i[wt])===s&&(i[wt]+=8192,Ks(w,f)):Ks(w,f)}const Ys=-1;class cs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function pa(i){return i!==Ys}function ii(i){return 32767&i}function wi(i,s){let a=function Er(i){return i>>16}(i),c=s;for(;a>0;)c=c[_s],a--;return c}let ga=!0;function si(i){const s=ga;return ga=i,s}const ou=255,fh=5;let Nl=0;const Ir={};function Pn(i,s){const a=au(i,s);if(-1!==a)return a;const c=s[et];c.firstCreatePass&&(i.injectorIndex=s.length,Wi(c.data,i),Wi(s,null),Wi(c.blueprint,null));const d=Zi(i,s),f=i.injectorIndex;if(pa(d)){const y=ii(d),w=wi(d,s),D=w[et].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|D[y+T]}return s[f+8]=d,f}function Wi(i,s){i.push(0,0,0,0,0,0,0,0,s)}function au(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Zi(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=kl(d),null===c)return Ys;if(a++,d=d[_s],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ys}function Ao(i,s,a){!function So(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Wo)&&(c=a[Wo]),null==c&&(c=a[Wo]=Nl++);const d=c&ou;s.data[i+(d>>fh)]|=1<<d}(i,s,a)}function uu(i,s,a){if(a&_t.Optional||void 0!==i)return i;je()}function Mo(i,s,a,c){if(a&_t.Optional&&void 0===c&&(c=null),!(a&(_t.Self|_t.Host))){const d=i[vs],f=cn(void 0);try{return d?d.get(s,c,a&_t.Optional):En(s,c,a&_t.Optional)}finally{cn(f)}}return uu(c,0,a)}function pc(i,s,a,c=_t.Default,d){if(null!==i){if(2048&s[wt]&&!(c&_t.Self)){const y=function dp(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&2048&y[wt]&&!(512&y[wt]);){const w=ph(f,y,a,c|_t.Self,Ir);if(w!==Ir)return w;let D=f.parent;if(!D){const T=y[Es];if(T){const x=T.get(a,Ir,c);if(x!==Ir)return x}D=kl(y),y=y[_s]}f=D}return d}(i,s,a,c,Ir);if(y!==Ir)return y}const f=ph(i,s,a,c,Ir);if(f!==Ir)return f}return Mo(s,a,c,d)}function ph(i,s,a,c,d){const f=function ma(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Wo)?i[Wo]:void 0;return"number"==typeof s?s>=0?s&ou:Ki:s}(a);if("function"==typeof f){if(!cp(s,i,c))return c&_t.Host?uu(d,0,c):Mo(s,a,c,d);try{let y;if(y=f(c),null!=y||c&_t.Optional)return y;je()}finally{mt()}}else if("number"==typeof f){let y=null,w=au(i,s),D=Ys,T=c&_t.Host?s[Cn][pr]:null;for((-1===w||c&_t.SkipSelf)&&(D=-1===w?Zi(i,s):s[w+8],D!==Ys&&Rl(c,!1)?(y=s[et],w=ii(D),s=wi(D,s)):w=-1);-1!==w;){const x=s[et];if(bs(f,w,x.data)){const F=kt(w,s,a,y,c,T);if(F!==Ir)return F}D=s[w+8],D!==Ys&&Rl(c,s[et].data[w+8]===T)&&bs(f,w,s)?(y=x,w=ii(D),s=wi(D,s)):w=-1}}return d}function kt(i,s,a,c,d,f){const y=s[et],w=y.data[i+8],x=xo(w,y,a,null==c?ho(w)&&ga:c!=y&&0!=(3&w.type),d&_t.Host&&f===w);return null!==x?No(s,y,x,w):Ir}function xo(i,s,a,c,d){const f=i.providerIndexes,y=s.data,w=1048575&f,D=i.directiveStart,x=f>>20,z=d?w+x:i.directiveEnd;for(let X=c?w:w+x;X<z;X++){const we=y[X];if(X<D&&a===we||X>=D&&we.type===a)return X}if(d){const X=y[D];if(X&&Xr(X)&&X.type===a)return D}return null}function No(i,s,a,c){let d=i[a];const f=s.data;if(function Ml(i){return i instanceof cs}(d)){const y=d;y.resolving&&function Pe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}(f[a]));const w=si(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?cn(y.injectImpl):null;cp(i,c,_t.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function On(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=nu(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==T&&cn(T),si(w),y.resolving=!1,mt()}}return d}function bs(i,s,a){return!!(a[s+(i>>fh)]&1<<i)}function Rl(i,s){return!(i&_t.Self||i&_t.Host&&s)}class kn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return pc(this._tNode,this._lView,s,Qn(c),a)}}function Ki(){return new kn(lr(),Ae())}function Qs(i){return rs(()=>{const s=i.prototype.constructor,a=s[is]||Pl(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[is]||Pl(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Pl(i){return We(i)?()=>{const s=Pl(Re(i));return s&&s()}:fo(i)}function kl(i){const s=i[et],a=s.type;return 2===a?s.declTNode:1===a?i[pr]:null}function gc(i){return function fc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(tl(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(lr(),i)}const va="__parameters__";function O(i,s,a){return rs(()=>{const c=function A(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(D,T,x){const F=D.hasOwnProperty(va)?D[va]:Object.defineProperty(D,va,{value:[]})[va];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function _a(i,s){i.forEach(a=>Array.isArray(a)?_a(a,s):s(a))}function bm(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function hp(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Yi(i,s,a){let c=mc(i,s);return c>=0?i[1|c]=a:(c=~c,function Sm(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function pp(i,s){const a=mc(i,s);if(a>=0)return i[1|a]}function mc(i,s){return function gp(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const Fl=fr(O("Optional"),8),Po=fr(O("SkipSelf"),4);function Cc(i){return 128==(128&i.flags)}var bc=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(bc||{});const Ih=new Map;let d_=0;const zl="__ngContext__";function ui(i,s){ar(s)?(i[zl]=s[ws],function Ii(i){Ih.set(i[ws],i)}(s)):i[zl]=s}let B;function Z(i,s){return B(i,s)}function Ue(i){const s=i[Dn];return Rr(s)?s[Dn]:s}function Fn(i){return Ia(i[gr])}function Qi(i){return Ia(i[Hr])}function Ia(i){for(;null!==i&&!Rr(i);)i=i[Hr];return i}function vu(i,s,a,c,d){if(null!=c){let f,y=!1;Rr(c)?f=c:ar(c)&&(y=!0,c=c[In]);const w=nn(c);0===i&&null!==a?null==d?$E(s,a,w):Wl(s,a,w,d||null,!0):1===i&&null!==a?Wl(s,a,w,d||null,!0):2===i?function Bm(i,s,a){const c=Um(i,s);c&&function OT(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function kT(i,s,a,c,d){const f=a[sr];f!==nn(a)&&vu(s,i,c,f,d);for(let w=mr;w<a.length;w++){const D=a[w];Tp(D[et],D,i,s,c,f)}}(s,i,f,a,d)}}function Sc(i,s,a){return i.createElement(s,a)}function Lm(i,s){const a=i[or],c=a.indexOf(s);tc(s),a.splice(c,1)}function Vm(i,s){if(i.length<=mr)return;const a=mr+s,c=i[a];if(c){const d=c[al];null!==d&&d!==i&&Lm(d,c),s>0&&(i[a-1][Hr]=c[Hr]);const f=hp(i,mr+s);!function km(i,s){Tp(i,s,s[It],2,null,null),s[In]=null,s[pr]=null}(c[et],c);const y=f[ir];null!==y&&y.detachView(f[et]),c[Dn]=null,c[Hr]=null,c[wt]&=-129}return c}function g_(i,s){if(!(256&s[wt])){const a=s[It];s[Wa]&&gl(s[Wa]),s[Gs]&&gl(s[Gs]),a.destroyNode&&Tp(i,s,a,3,null,null),function Fm(i){let s=i[gr];if(!s)return BE(i[et],i);for(;s;){let a=null;if(ar(s))a=s[gr];else{const c=s[mr];c&&(a=c)}if(!a){for(;s&&!s[Hr]&&s!==i;)ar(s)&&BE(s[et],s),s=s[Dn];null===s&&(s=i),ar(s)&&BE(s[et],s),a=s&&s[Hr]}s=a}}(s)}}function BE(i,s){if(!(256&s[wt])){s[wt]&=-129,s[wt]|=256,function jE(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof cs)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],D=f[y+1];Hi(4,w,D);try{D.call(w)}finally{Hi(5,w,D)}}else{Hi(4,d,f);try{f.call(d)}finally{Hi(5,d,f)}}}}}(i,s),function RT(i,s){const a=i.cleanup,c=s[qa];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[qa]=null);const d=s[Hs];if(null!==d){s[Hs]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,s),1===s[et].type&&s[It].destroy();const a=s[al];if(null!==a&&Rr(s[Dn])){a!==s[Dn]&&Lm(a,s);const c=s[ir];null!==c&&c.detachView(i)}!function yu(i){Ih.delete(i[ws])}(s)}}function bh(i,s,a){return function ql(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[In];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===ji.None||f===ji.Emulated)return null}return yr(c,a)}}(i,s.parent,a)}function Wl(i,s,a,c,d){i.insertBefore(s,a,c,d)}function $E(i,s,a){i.appendChild(s,a)}function HE(i,s,a,c,d){null!==c?Wl(i,s,a,c,d):$E(i,s,a)}function Um(i,s){return i.parentNode(s)}let y_,KE,$m,m_=function zE(i,s,a){return 40&i.type?yr(i,a):null};function Cp(i,s,a,c){const d=bh(i,c,s),f=s[It],w=function GE(i,s,a){return m_(i,s,a)}(c.parent||s[pr],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)HE(f,d,a[D],w,!1);else HE(f,d,a,w,!1);void 0!==y_&&y_(f,c,s,a,d)}function ba(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return __(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return ba(i,c);{const d=i[s.index];return Rr(d)?__(-1,d):nn(d)}}if(32&a)return Z(s,i)()||nn(i[s.index]);{const c=v_(i,s);return null!==c?Array.isArray(c)?c[0]:ba(Ue(i[Cn]),c):ba(i,s.next)}}return null}function v_(i,s){return null!==s?i[Cn][pr].projection[s.projection]:null}function __(i,s){const a=mr+i+1;if(a<s.length){const c=s[a],d=c[et].firstChild;if(null!==d)return ba(c,d)}return s[sr]}function bp(i,s,a,c,d,f,y){for(;null!=a;){const w=c[a.index],D=a.type;if(y&&0===s&&(w&&ui(nn(w),c),a.flags|=2),32!=(32&a.flags))if(8&D)bp(i,s,a.child,c,d,f,!1),vu(s,i,d,w,f);else if(32&D){const T=Z(a,c);let x;for(;x=T();)vu(s,i,d,x,f);vu(s,i,d,w,f)}else 16&D?E_(i,s,c,a,d,f):vu(s,i,d,w,f);a=y?a.projectionNext:a.next}}function Tp(i,s,a,c,d,f){bp(a,c,i.firstChild,s,d,f,!1)}function E_(i,s,a,c,d,f){const y=a[Cn],D=y[pr].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)vu(s,i,d,D[T],f);else{let T=D;const x=y[Dn];Cc(c)&&(T.flags|=128),bp(i,s,T,x,d,f,!0)}}function WE(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Sp(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&$a(i,s,c),null!==d&&WE(i,s,d),null!==f&&function LT(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function YE(i){KE=i}function XE(i){return function D_(){if(void 0===$m&&($m=null,tn.trustedTypes))try{$m=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return $m}()?.createScriptURL(i)||i}class eI{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function Mc(i){return i instanceof eI?i.changingThisBreaksApplicationSecurity:i}function Ah(i,s){const a=function Hm(i){return i instanceof eI&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${lt})`)}return a===s}const Ap=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var xp=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(xp||{});function qm(i){const s=Np();return s?s.sanitize(xp.URL,i)||"":Ah(i,"URL")?Mc(i):function zm(i){return(i=String(i)).match(Ap)?i:"unsafe:"+i}(ee(i))}function lI(i){const s=Np();if(s)return XE(s.sanitize(xp.RESOURCE_URL,i)||"");if(Ah(i,"ResourceURL"))return XE(Mc(i));throw new re(904,!1)}function JT(i,s,a){return function QT(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?lI:qm}(s,a)(i)}function Np(){const i=Ae();return i&&i[Xo].sanitizer}class gn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Mh=new gn("ENVIRONMENT_INITIALIZER"),hI=new gn("INJECTOR",-1),fI=new gn("INJECTOR_DEF_TYPES");class Wm{get(s,a=$e){if(a===$e){const c=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw c.name="NullInjectorError",c}return a}}function XT(...i){return{\u0275providers:gI(0,i),\u0275fromNgModule:!0}}function gI(i,...s){const a=[],c=new Set;let d;const f=y=>{a.push(y)};return _a(s,y=>{const w=y;Zm(w,f,[],c)&&(d||=[],d.push(w))}),void 0!==d&&mI(d,f),a}function mI(i,s){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];x_(d,f=>{s(f,c)})}}function Zm(i,s,a,c){if(!(i=Re(i)))return!1;let d=null,f=mi(i);const y=!f&&zt(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(f=mi(D),!f)return!1;d=D}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of D)Zm(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(d);try{_a(f.imports,x=>{Zm(x,s,a,c)&&(T||=[],T.push(x))})}finally{}void 0!==T&&mI(T,s)}if(!w){const T=fo(d)||(()=>new d);s({provide:d,useFactory:T,deps:Gt},d),s({provide:fI,useValue:d,multi:!0},d),s({provide:Mh,useValue:()=>Tt(d),multi:!0},d)}const D=f.providers;if(null!=D&&!w){const T=i;x_(D,x=>{s(x,T)})}}}return d!==i&&void 0!==i.providers}function x_(i,s){for(let a of i)Oe(a)&&(a=a.\u0275providers),Array.isArray(a)?x_(a,s):s(a)}const dx=L({provide:String,useValue:L});function yI(i){return null!==i&&"object"==typeof i&&dx in i}function xh(i){return"function"==typeof i}const N_=new gn("Set Injector scope."),Km={},ve={};let R_;function Ym(){return void 0===R_&&(R_=new Wm),R_}class Ln{}class Nh extends Ln{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P_(s,y=>this.processProvider(y)),this.records.set(hI,Eu(void 0,this)),d.has("environment")&&this.records.set(Ln,Eu(void 0,this));const f=this.records.get(N_);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(fI.multi,Gt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=tt(this),c=cn(void 0);try{return s()}finally{tt(a),cn(c)}}get(s,a=$e,c=_t.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Zo))return s[Zo](this);c=Qn(c);const f=tt(this),y=cn(void 0);try{if(!(c&_t.SkipSelf)){let D=this.records.get(s);if(void 0===D){const T=function an(i){return"function"==typeof i||"object"==typeof i&&i instanceof gn}(s)&&Kn(s);D=T&&this.injectableDefInScope(T)?Eu(O_(s),Km):null,this.records.set(s,D)}if(null!=D)return this.hydrate(s,D)}return(c&_t.Self?Ym():this.parent).get(s,a=c&_t.Optional&&a===$e?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[ft]=w[ft]||[]).unshift(J(s)),f)throw w;return function zo(i,s,a,c){const d=i[ft];throw s[W]&&d.unshift(s[W]),i.message=function Xc(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=J(s);if(Array.isArray(s))d=s.map(J).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):J(w)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(U,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[ft]=null,i}(w,s,"R3InjectorError",this.source)}throw w}finally{cn(y),tt(f)}}resolveInjectorInitializers(){const s=tt(this),a=cn(void 0);try{const d=this.get(Mh.multi,Gt,_t.Self);for(const f of d)f()}finally{tt(s),cn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(J(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(s){let a=xh(s=Re(s))?s:Re(s&&s.provide);const c=function fx(i){return yI(i)?Eu(void 0,i.useValue):Eu(vI(i),Km)}(s);if(xh(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Eu(void 0,Km,!0),d.factory=()=>Yt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Km&&(a.value=ve,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xc(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Re(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function O_(i){const s=Kn(i),a=null!==s?s.factory:fo(i);if(null!==a)return a;if(i instanceof gn)throw new re(204,!1);if(i instanceof Function)return function Vo(i){const s=i.length;if(s>0)throw function Ro(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new re(204,!1);const a=function Yr(i){return i&&(i[$n]||i[gs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new re(204,!1)}function vI(i,s,a){let c;if(xh(i)){const d=Re(i);return fo(d)||O_(d)}if(yI(i))c=()=>Re(i.useValue);else if(function nS(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Yt(i.deps||[]));else if(function tS(i){return!(!i||!i.useExisting)}(i))c=()=>Tt(Re(i.useExisting));else{const d=Re(i&&(i.useClass||i.provide));if(!function Qm(i){return!!i.deps}(i))return fo(d)||O_(d);c=()=>new d(...Yt(i.deps))}return c}function Eu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function P_(i,s){for(const a of i)Array.isArray(a)?P_(a,s):a&&Oe(a)?P_(a.\u0275providers,s):s(a)}const Xs=new gn("AppId",{providedIn:"root",factory:()=>nt}),nt="ng",Jm=new gn("Platform Initializer"),Ft=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rS=new gn("CSP nonce",{providedIn:"root",factory:()=>function Zl(){if(void 0!==KE)return KE;if(typeof document<"u")return document;throw new re(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Jl=(i,s,a)=>null;function ny(i,s,a=!1){return Jl(i,s,a)}class Fp{}class bI{}class oS{resolveComponentFactory(s){throw function sS(i){const s=Error(`No component factory found for ${J(i)}.`);return s.ngComponent=i,s}(s)}}let Vp=(()=>{class i{static#e=this.NULL=new oS}return i})();function SI(){return ed(lr(),Ae())}function ed(i,s){return new Nc(yr(i,s))}let Nc=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=SI}return i})();function $_(i){return i instanceof Nc?i.nativeElement:i}class iy{}let H_=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function G_(){const i=Ae(),a=vr(lr().index,i);return(ar(a)?a:i)[It]}()}return i})(),AI=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>null})}return i})();class z_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const MI=new z_("16.2.8"),sy={};function NI(i,s=null,a=null,c){const d=RI(i,s,a,c);return d.resolveInjectorInitializers(),d}function RI(i,s=null,a=null,c,d=new Set){const f=[a||Gt,XT(i)];return c=c||("object"==typeof i?void 0:J(i)),new Nh(f,s||Ym(),c||null,d)}let Uo=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=$e;static#t=this.NULL=new Wm;static create(a,c){if(Array.isArray(a))return NI({name:""},c,a,"");{const d=a.name??"";return NI({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=ut({token:i,providedIn:"any",factory:()=>Tt(hI)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function Y_(i){return i.ngOriginalError}class Rc{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Y_(s);for(;a&&Y_(a);)a=Y_(a);return a||null}}function Q_(i){return s=>{setTimeout(i,void 0,s)}}const Ns=class PI extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),f=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(f=Q_(f),d&&(d=Q_(d)),y&&(y=Q_(y)));const w=super.subscribe({next:d,error:f,complete:y});return s instanceof Y.w0&&s.add(w),w}};function uy(...i){}class ci{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ns(!1),this.onMicrotaskEmpty=new Ns(!1),this.onStable=new Ns(!1),this.onError=new Ns(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function J_(){const i="function"==typeof tn.requestAnimationFrame;let s=tn[i?"requestAnimationFrame":"setTimeout"],a=tn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function FI(i){const s=()=>{!function kI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ph(i),i.isCheckStableRunning=!0,cy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ph(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,w)=>{if(function nd(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(w))return a.invokeTask(d,f,y,w);try{return LI(i),a.invokeTask(d,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),VI(i)}},onInvoke:(a,c,d,f,y,w,D)=>{try{return LI(i),a.invoke(d,f,y,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),VI(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ph(i),cy(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ci.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(ci.isInAngularZone())throw new re(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,jp,uy,uy);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const jp={};function cy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ph(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function LI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function VI(i){i._nesting--,cy(i)}class kh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ns,this.onMicrotaskEmpty=new Ns,this.onStable=new Ns,this.onError=new Ns}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const UI=new gn("",{providedIn:"root",factory:BI});function BI(){const i=Pt(ci);let s=!0;const a=new k.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new k.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{ci.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Q.T)(a,c.pipe((0,pe.B)()))}function Sa(i){return i instanceof Function?i():i}let Gp=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function Fh(i){for(;i;){i[wt]|=64;const s=Ue(i);if(ta(i)&&!s)return i;i=s}return null}const dy=new gn("",{providedIn:"root",factory:()=>!1});let fy=null;function c0(i,s){return i[s]??gy()}function Wp(i,s){const a=gy();a.producerNode?.length&&(i[s]=fy,a.lView=i,fy=Oc())}const Zp={...go,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Fh(i.lView)},lView:null};function Oc(){return Object.create(Zp)}function gy(){return fy??=Oc(),fy}const Ut={};function GI(i){l0(jt(),Ae(),wr()+i,!1)}function l0(i,s,a,c){if(!c)if(3==(3&s[wt])){const f=i.preOrderCheckHooks;null!==f&&bo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&dc(s,f,0,a)}Ds(a)}function rd(i,s=_t.Default){const a=Ae();return null===a?Tt(i,s):pc(lr(),a,Re(i),s)}function zI(){throw new Error("invalid")}function eo(i,s,a,c,d,f,y,w,D,T,x){const F=s.blueprint.slice();return F[In]=d,F[wt]=140|c,(null!==T||i&&2048&i[wt])&&(F[wt]|=2048),ap(F),F[Dn]=F[_s]=i,F[Sn]=a,F[Xo]=y||i&&i[Xo],F[It]=w||i&&i[It],F[vs]=D||i&&i[vs]||null,F[pr]=f,F[ws]=function Gl(){return d_++}(),F[Ri]=x,F[Es]=T,F[Cn]=2==s.type?i[Cn]:F,F}function Du(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Vh(i,s,a,c,d){const f=oc(),y=Io(),D=i.data[s]=function KI(i,s,a,c,d,f){let y=s?s.injectorIndex:-1,w=0;return function as(){return null!==Dt.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==f&&(y?null==f.child&&null!==D.parent&&(f.child=D):null===f.next&&(f.next=D,D.prev=f)),D}(i,s,a,c,d),function sh(){return Dt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function ua(){const i=Dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ws(f,!0),f}function Uh(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Vn(i,s,a,c,d){const f=c0(s,Wa),y=wr(),w=2&c;try{Ds(-1),w&&s.length>Lt&&l0(i,s,Lt,!1),Hi(w?2:0,d);const T=w?f:null,x=Wd(T);try{null!==T&&(T.dirty=!1),a(c,d)}finally{ur(T,x)}}finally{w&&null===s[Wa]&&Wp(s,Wa),Ds(y),Hi(w?3:1,d)}}function Bh(i,s,a){if(Ku(s)){const c=ei(null);try{const f=s.directiveEnd;for(let y=s.directiveStart;y<f;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{ei(c)}}}function sd(i,s,a){_r()&&(function vS(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;ho(a)&&function Jp(i,s,a){const c=yr(s,i),d=qI(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const w=Xp(i,eo(i,d,null,y,c,s,null,i[Xo].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=w}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Pn(a,s),ui(c,s);const y=a.initialInputs;for(let w=d;w<f;w++){const D=i.data[w],T=No(s,i,w,a);ui(T,s),null!==y&&hr(0,w-d,T,D,0,y),Xr(D)&&(vr(a.index,s)[Sn]=No(s,i,w,a))}}(i,s,a,yr(a,s)),64==(64&a.flags)&&XI(i,s,a))}function od(i,s,a=yr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function qI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=my(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function my(i,s,a,c,d,f,y,w,D,T,x){const F=Lt+c,z=F+d,X=function dS(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ut);return a}(F,z),we="function"==typeof T?T():T;return X[et]={type:i,blueprint:X,template:a,queries:null,viewQuery:w,declTNode:s,data:X.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:we,incompleteFirstPass:!1,ssrId:x}}let WI=i=>null;function d0(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?ad(a,s,d,f):c.hasOwnProperty(d)&&ad(a,s,c[d],f)}return a}function ad(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function Yp(i,s,a,c){if(_r()){const d=null===c?null:{"":-1},f=function wS(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(rl(s,y.selectors,!1))if(c||(c=[]),Xr(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),jh(i,s,w.length)}else c.unshift(y),jh(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===f?y=w=null:[y,w]=f,null!==y&&yy(i,s,a,y,d,w),d&&function Qp(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new re(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=oo(a.mergedAttrs,a.attrs)}function yy(i,s,a,c,d,f){for(let T=0;T<c.length;T++)Ao(Pn(a,s),i,c[T].type);!function h0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let y=!1,w=!1,D=Uh(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=oo(a.mergedAttrs,x.hostAttrs),eD(i,a,s,D,x),vy(D,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const F=x.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),D++}!function pS(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,w=[];let D=null,T=null;for(let x=s.directiveStart;x<d;x++){const F=f[x],z=a?a.get(F):null,we=z?z.outputs:null;D=d0(F.inputs,x,D,z?z.inputs:null),T=d0(F.outputs,x,T,we);const Le=null===D||null===y||Ko(s)?null:ES(D,x,y);w.push(Le)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=D,s.outputs=T}(i,a,f)}function XI(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Cm(){return Dt.lFrame.currentDirectiveIndex}();try{Ds(f);for(let w=c;w<d;w++){const D=i.data[w],T=s[w];uc(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&_S(D,T)}}finally{Ds(-1),uc(y)}}function _S(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function jh(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function vy(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Xr(s)&&(a[""]=i)}}function eD(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=fo(d.type)),y=new cs(f,Xr(d),rd);i.blueprint[c]=y,a[c]=y,function QI(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function JI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,f)}}(i,s,c,Uh(i,a,d.hostVars,Ut),d)}function hs(i,s,a,c,d,f){const y=yr(i,s);!function f0(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const w=null==y?ee(f):y(f,c||"",d);i.setAttribute(s,d,w,a)}}(s[It],y,f,i.value,a,c,d)}function hr(i,s,a,c,d,f){const y=f[s];if(null!==y)for(let w=0;w<y.length;)p0(c,a,y[w++],y[w++],y[w++])}function p0(i,s,a,c,d){const f=ei(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{ei(f)}}function ES(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(f,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function tD(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function nD(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];uh(a[c]),y.contentQueries(2,s[f],f)}}}function Xp(i,s){return i[gr]?i[Zf][Hr]=s:i[gr]=s,i[Zf]=s,s}function _y(i,s,a){uh(0);const c=ei(null);try{s(i,a)}finally{ei(c)}}function eg(i){return i[qa]||(i[qa]=[])}function g0(i){return i.cleanup||(i.cleanup=[])}function m0(i,s){const a=i[vs],c=a?a.get(Rc,null):null;c&&c.handleError(s)}function y0(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++];p0(i.data[y],s[y],c,w,d)}}function v0(i,s){const a=vr(s,i),c=a[et];!function tg(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[In];null!==d&&null===a[Ri]&&(a[Ri]=ny(d,a[vs])),wy(c,a,a[Sn])}function wy(i,s,a){Gr(s);try{const c=i.viewQuery;null!==c&&_y(1,c,a);const d=i.template;null!==d&&Vn(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&nD(i,s),i.staticViewQueries&&_y(2,i.viewQuery,a);const f=i.components;null!==f&&function _0(i,s){for(let a=0;a<s.length;a++)v0(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[wt]&=-5,zr()}}let ng=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=function wm(i,s,a){const c=Object.create(ep);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=s;const d=y=>{c.cleanupFn=y};return c.ref={notify:()=>Qa(c),run:()=>{if(c.dirty=!1,c.hasRun&&!pl(c))return;c.hasRun=!0;const y=Wd(c);try{c.cleanupFn(),c.cleanupFn=wl,c.fn(d)}finally{ur(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,T=>{this.all.has(T)&&this.queue.set(T,f)},d);let w;this.all.add(y),y.notify();const D=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function ud(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?d=Ve(d,w):2==f&&(c=Ve(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function rg(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];null!==f&&c.push(nn(f)),Rr(f)&&w0(f,c);const y=a.type;if(8&y)rg(i,s,a.child,c);else if(32&y){const w=Z(a,s);let D;for(;D=w();)c.push(D)}else if(16&y){const w=v_(s,a);if(Array.isArray(w))c.push(...w);else{const D=Ue(s[Cn]);rg(D[et],D,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function w0(i,s){for(let a=mr;a<i.length;a++){const c=i[a],d=c[et].firstChild;null!==d&&rg(c[et],c,d,s)}i[sr]!==i[In]&&s.push(i[sr])}function kc(i,s,a,c=!0){const d=s[Xo],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{Ey(i,s,i.template,a)}catch(D){throw c&&m0(s,D),D}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function Ey(i,s,a,c){const d=s[wt];if(256!=(256&d)){s[Xo].effectManager?.flush(),Gr(s);try{ap(s),function ih(i){return Dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Vn(i,s,a,2,c);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&bo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&dc(s,T,0,null),fa(s,0)}if(function sD(i){for(let s=Fn(i);null!==s;s=Qi(s)){if(!s[Zu])continue;const a=s[or];for(let c=0;c<a.length;c++){Dl(a[c])}}}(s),Iy(s,2),null!==i.contentQueries&&nD(i,s),y){const T=i.contentCheckHooks;null!==T&&bo(s,T)}else{const T=i.contentHooks;null!==T&&dc(s,T,1),fa(s,1)}!function id(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=c0(s,Gs);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Ds(~f);else{const y=f,w=a[++d],D=a[++d];ac(w,y),c.dirty=!1;const T=Wd(c);try{D(2,s[y])}finally{ur(c,T)}}}}finally{null===s[Gs]&&Wp(s,Gs),Ds(-1)}}(i,s);const w=i.components;null!==w&&I0(s,w,0);const D=i.viewQuery;if(null!==D&&_y(2,D,c),y){const T=i.viewCheckHooks;null!==T&&bo(s,T)}else{const T=i.viewHooks;null!==T&&dc(s,T,2),fa(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[wt]&=-73,tc(s)}finally{zr()}}}function Iy(i,s){for(let a=Fn(i);null!==a;a=Qi(a))for(let c=mr;c<a.length;c++)E0(a[c],s)}function Dy(i,s,a){E0(vr(s,i),a)}function E0(i,s){if(!function aa(i){return 128==(128&i[wt])}(i))return;const a=i[et],c=i[wt];if(80&c&&0===s||1024&c||2===s)Ey(a,i,a.template,i[Sn]);else if(i[uo]>0){Iy(i,1);const d=a.components;null!==d&&I0(i,d,1)}}function I0(i,s,a){for(let c=0;c<s.length;c++)Dy(i,s[c],a)}class jo{get rootNodes(){const s=this._lView,a=s[et];return rg(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(s){this._lView[Sn]=s}get destroyed(){return 256==(256&this._lView[wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Dn];if(Rr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Vm(s,c),hp(a,c))}this._attachedToViewContainer=!1}g_(this._lView[et],this._lView)}onDestroy(s){!function yn(i,s){if(256==(256&i[wt]))throw new re(911,!1);null===i[Hs]&&(i[Hs]=[]),i[Hs].push(s)}(this._lView,s)}markForCheck(){Fh(this._cdRefInjectingView||this._lView)}detach(){this._lView[wt]&=-129}reattach(){this._lView[wt]|=128}detectChanges(){kc(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _u(i,s){Tp(i,s,s[It],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=s}}class oD extends jo{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;kc(s[et],s,s[Sn],!1)}checkNoChanges(){}get context(){return null}}class D0 extends Vp{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=zt(s);return new Ci(a,this.ngModule)}}function C0(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Cy{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=Qn(c);const d=this.injector.get(s,sy,c);return d!==sy||a===sy?d:this.parentInjector.get(s,a,c)}}class Ci extends bI{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=C0(s.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return C0(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Bd(i){return i.map(Ud).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Ln?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Cy(s,f):s,w=y.get(iy,null);if(null===w)throw new re(407,!1);const F={rendererFactory:w,sanitizer:y.get(AI,null),effectManager:y.get(ng,null),afterRenderEventManager:y.get(Gp,null)},z=w.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",we=c?function hS(i,s,a,c){const f=c.get(dy,!1)||a===ji.ShadowDom,y=i.selectRootElement(s,f);return function fS(i){WI(i)}(y),y}(z,c,this.componentDef.encapsulation,y):Sc(z,X,function aD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(X)),yt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Me=null;null!==we&&(Me=ny(we,y,!0));const Rt=my(0,null,null,1,0,null,null,null,null,null,null),$t=eo(null,Rt,null,yt,null,null,F,z,y,null,Me);let ln,gi;Gr($t);try{const $u=this.componentDef;let Hu,Lf=null;$u.findHostDirectiveDefs?(Hu=[],Lf=new Map,$u.findHostDirectiveDefs($u,Hu,Lf),Hu.push($u)):Hu=[$u];const rT=function cD(i,s){const a=i[et],c=Lt;return i[c]=s,Du(a,c,2,"#host",null)}($t,we),rm=function $h(i,s,a,c,d,f,y){const w=d[et];!function CS(i,s,a,c){for(const d of i)s.mergedAttrs=oo(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(ud(s,s.mergedAttrs,!0),null!==a&&Sp(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=ny(s,d[vs]));const T=f.rendererFactory.createRenderer(s,a);let x=16;a.signals?x=4096:a.onPush&&(x=64);const F=eo(d,qI(a),null,x,d[i.index],i,f,T,null,null,D);return w.firstCreatePass&&jh(w,i,c.length-1),Xp(d,F),d[i.index]=F}(rT,we,$u,Hu,$t,F,z);gi=Il(Rt,Lt),we&&function b0(i,s,a,c){if(c)$a(i,a,["ng-version",MI.full]);else{const{attrs:d,classes:f}=function xi(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Jr(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&$a(i,a,d),f&&f.length>0&&WE(i,a,f.join(" "))}}(z,$u,we,c),void 0!==a&&function vn(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(gi,this.ngContentSelectors,a),ln=function $o(i,s,a,c,d,f){const y=lr(),w=d[et],D=yr(y,d);yy(w,d,y,a,null,c);for(let x=0;x<a.length;x++)ui(No(d,w,y.directiveStart+x,y),d);XI(w,d,y),D&&ui(D,d);const T=No(d,w,y.directiveStart+y.componentOffset,y);if(i[Sn]=d[Sn]=T,null!==f)for(const x of f)x(T,s);return Bh(w,y,i),T}(rm,$u,Hu,Lf,$t,[bS]),wy(Rt,$t,null)}finally{zr()}return new uD(this.componentType,ln,ed(gi,$t),$t,gi)}}class uD extends Fp{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new oD(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;y0(f[et],f,d,s,a),this.previousInputValues.set(s,a),Fh(vr(this._tNode.index,f))}}get injector(){return new kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function bS(){const i=lr();ha(Ae()[et],i)}function to(i){let s=function by(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(Xr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new re(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Hh(i.inputs),y.inputTransforms=Hh(i.inputTransforms),y.declaredInputs=Hh(i.declaredInputs),y.outputs=Hh(i.outputs);const w=d.hostBindings;w&&dD(i,w);const D=d.viewQuery,T=d.contentQueries;if(D&&Gh(i,D),T&&T0(i,T),j(i.inputs,d.inputs),j(i.declaredInputs,d.declaredInputs),j(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),j(y.inputTransforms,d.inputTransforms)),Xr(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===to&&(a=!1)}}s=Object.getPrototypeOf(s)}!function lD(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=oo(d.hostAttrs,a=oo(a,d.hostAttrs))}}(c)}function Hh(i){return i===$i?{}:i===Gt?[]:i}function Gh(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function T0(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function dD(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function hD(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function qh(i){return!!Ay(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Ay(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Fi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Fc(i,s,a,c){const d=Ae();return Fi(d,Do(),s)&&(jt(),hs(pn(),d,i,s,a,c)),Fc}function Kh(i,s,a,c,d,f,y,w){const D=Ae(),T=jt(),x=i+Lt,F=T.firstCreatePass?function FS(i,s,a,c,d,f,y,w,D){const T=s.consts,x=Du(s,i,4,y||null,ti(T,w));Yp(s,a,x,ti(T,D)),ha(s,x);const F=x.tView=my(2,x,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T,null);return null!==s.queries&&(s.queries.template(s,x),F.queries=s.queries.embeddedTView(x)),x}(x,T,D,s,a,c,d,f,y):T.data[x];Ws(F,!1);const z=bu(T,D,F,i);zi()&&Cp(T,D,z,F),ui(z,D),Xp(D,D[x]=tD(z,D,z,F)),vi(F)&&sd(T,D,F),null!=y&&od(D,F,w)}let bu=function wD(i,s,a,c){return qi(!0),s[It].createComment("")};function N0(i,s,a){const c=Ae();return Fi(c,Do(),s)&&function ds(i,s,a,c,d,f,y,w){const D=yr(s,a);let x,T=s.inputs;!w&&null!=T&&(x=T[c])?(y0(i,a,x,c,d),ho(s)&&function mS(i,s){const a=vr(s,i);16&a[wt]||(a[wt]|=64)}(a,s.index)):3&s.type&&(c=function gS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(D,c,d))}(jt(),pn(),c,i,s,c[It],a,!1),N0}function Ji(i,s,a,c,d){const y=d?"class":"style";y0(i,a,s.inputs[y],y,c)}function jc(i,s,a,c){const d=Ae(),f=jt(),y=Lt+i,w=d[It],D=f.firstCreatePass?function hg(i,s,a,c,d,f){const y=s.consts,D=Du(s,i,2,c,ti(y,d));return Yp(s,a,D,ti(y,f)),null!==D.attrs&&ud(D,D.attrs,!1),null!==D.mergedAttrs&&ud(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,f,d,s,a,c):f.data[y],T=ID(f,d,D,w,s,i);d[y]=T;const x=vi(D);return Ws(D,!0),Sp(w,T,D),32!=(32&D.flags)&&zi()&&Cp(f,d,T,D),0===function nc(){return Dt.lFrame.elementDepthCount}()&&ui(T,d),function cr(){Dt.lFrame.elementDepthCount++}(),x&&(sd(f,d,D),Bh(f,D,d)),null!==c&&od(d,D),jc}function fg(){let i=lr();Io()?function Tl(){Dt.lFrame.isParent=!1}():(i=i.parent,Ws(i,!1));const s=i;(function Cl(i){return Dt.skipHydrationRootTNode===i})(s)&&function bl(){Dt.skipHydrationRootTNode=null}(),function rh(){Dt.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(ha(a,i),Ku(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Cs(i){return 0!=(8&i.flags)}(s)&&Ji(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function dh(i){return 0!=(16&i.flags)}(s)&&Ji(a,s,Ae(),s.stylesWithoutHost,!1),fg}function li(i,s,a,c){return jc(i,s,a,c),fg(),li}let ID=(i,s,a,c,d,f)=>(qi(!0),Sc(c,d,function Al(){return Dt.lFrame.currentNamespace}()));function SD(){return Ae()}function R0(i){return!!i&&"function"==typeof i.then}function AD(i){return!!i&&"function"==typeof i.subscribe}function O0(i,s,a,c){const d=Ae(),f=jt(),y=lr();return function xD(i,s,a,c,d,f,y){const w=vi(c),T=i.firstCreatePass&&g0(i),x=s[Sn],F=eg(s);let z=!0;if(3&c.type||y){const Le=yr(c,s),Je=y?y(Le):Le,yt=F.length,Me=y?$t=>y(nn($t[c.index])):c.index;let Rt=null;if(!y&&w&&(Rt=function BS(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const w=s[qa],D=d[f+2];return w.length>D?w[D]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=f,Rt.__ngLastListenerFn__=f,z=!1;else{f=RD(c,s,x,f,!1);const $t=a.listen(Je,d,f);F.push(f,$t),T&&T.push(d,Me,yt,yt+1)}}else f=RD(c,s,x,f,!1);const X=c.outputs;let we;if(z&&null!==X&&(we=X[d])){const Le=we.length;if(Le)for(let Je=0;Je<Le;Je+=2){const ln=s[we[Je]][we[Je+1]].subscribe(f),gi=F.length;F.push(f,ln),T&&T.push(d,c.index,gi,-(gi+1))}}}(f,d,d[It],y,i,s,c),O0}function ND(i,s,a,c){try{return Hi(6,s,a),!1!==a(c)}catch(d){return m0(i,d),!1}finally{Hi(7,s,a)}}function RD(i,s,a,c,d){return function f(y){if(y===Function)return c;Fh(i.componentOffset>-1?vr(i.index,s):s);let D=ND(s,a,c,y),T=f.__ngNextListenerFn__;for(;T;)D=ND(s,a,T,y)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function OD(i=1){return function lc(i){return(Dt.lFrame.contextLView=function iu(i,s){for(;i>0;)s=s[_s],i--;return s}(i,Dt.lFrame.contextLView))[Sn]}(i)}function Lr(i,s){return i<<17|s<<2}function un(i){return i>>17&32767}function Vi(i){return 2|i}function $c(i){return(131068&i)>>2}function L0(i,s){return-131069&i|s<<2}function V0(i){return 1|i}function gg(i,s,a,c,d){const f=i[a+1],y=null===s;let w=c?un(f):$c(f),D=!1;for(;0!==w&&(!1===D||y);){const x=i[w+1];mg(i[w],s)&&(D=!0,i[w+1]=c?V0(x):Vi(x)),w=c?un(x):$c(x)}D&&(i[a+1]=c?Vi(f):V0(f))}function mg(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&mc(i,s)>=0}function Uy(i,s){return function Go(i,s,a,c){const d=Ae(),f=jt(),y=function Zs(i){const s=Dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function di(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[wr()],y=function j0(i,s){return s>=i.expandoStartIndex}(i,a);(function $y(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!y&&(s=!1),s=function VD(i,s,a,c){const d=function ah(i){const s=Dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Ra(a=By(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=By(d,i,s,a,c),null===f){let D=function Wn(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==$c(c))return i[un(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=By(null,i,s,D[1],c),D=Ra(D,s.attrs,c),function Gc(i,s,a,c){i[un(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else f=function UD(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=Ra(c,i[f].hostAttrs,a);return Ra(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function Su(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,w=un(y),D=$c(y);i[c]=a;let x,T=!1;if(Array.isArray(a)?(x=a[1],(null===x||mc(a,x)>0)&&(T=!0)):x=a,d)if(0!==D){const z=un(i[w+1]);i[c+1]=Lr(z,w),0!==z&&(i[z+1]=L0(i[z+1],c)),i[w+1]=function Qh(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Lr(w,0),0!==w&&(i[w+1]=L0(i[w+1],c)),w=c;else i[c+1]=Lr(D,0),0===w?w=c:i[D+1]=L0(i[D+1],c),D=c;T&&(i[c+1]=Vi(i[c+1])),gg(i,x,c,!0),gg(i,x,c,!1),function ky(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&mc(f,s)>=0&&(a[c+1]=V0(a[c+1]))}(s,x,i,c,f),y=Lr(w,D),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}(f,i,y,c),s!==Ut&&Fi(d,y,s)&&function md(i,s,a,c,d,f,y,w){if(!(3&s.type))return;const D=i.data,T=D[w+1],x=function Zr(i){return 1==(1&i)}(T)?jy(D,s,a,d,$c(T),y):void 0;ef(x)||(ef(f)||function FD(i){return 2==(2&i)}(T)&&(f=jy(D,null,a,d,w,y)),function FT(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:bc.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=bc.Important),i.setStyle(a,c,d,f))}}(c,y,wo(wr(),a),d,f))}(f,f.data[wr()],d,d[It],i,d[y+1]=function BD(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(Mc(i)))),i}(s,a),c,y)}(i,s,null,!0),Uy}function By(i,s,a,c,d){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],c=Ra(c,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function Ra(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Yi(i,y,!!a||s[++f]))}return void 0===i?null:i}function jy(i,s,a,c,d,f){const y=null===s;let w;for(;d>0;){const D=i[d],T=Array.isArray(D),x=T?D[1]:D,F=null===x;let z=a[d+1];z===Ut&&(z=F?Gt:void 0);let X=F?pp(z,c):x===c?z:void 0;if(T&&!ef(X)&&(X=pp(D,c)),ef(X)&&(w=X,y))return w;const we=i[d+1];d=y?un(we):$c(we)}if(null!==s){let D=f?s.residualClasses:s.residualStyles;null!=D&&(w=pp(D,c))}return w}function ef(i){return void 0!==i}function H0(i,s=""){const a=Ae(),c=jt(),d=i+Lt,f=c.firstCreatePass?Du(c,d,1,s,null):c.data[d],y=G0(c,a,f,s,i);a[d]=y,zi()&&Cp(c,a,y,f),Ws(f,!1)}let G0=(i,s,a,c,d)=>(qi(!0),function Tc(i,s){return i.createText(s)}(s[It],c));function z0(i){return Hy("",i,""),z0}function Hy(i,s,a){const c=Ae(),d=function Lc(i,s,a,c){return Fi(i,Do(),a)?s+ee(a)+c:Ut}(c,i,s,a);return d!==Ut&&function Aa(i,s,a){const c=wo(s,i);!function Da(i,s,a){i.setValue(s,a)}(i[It],c,a)}(c,wr(),d),Hy}const Ui=void 0;var Eg=["en",[["a","p"],["AM","PM"],Ui],[["AM","PM"],Ui,Ui],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ui,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ui,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ui,"{1} 'at' {0}",Ui],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XD(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let sf={};function Bt(i){const s=function Qy(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=tw(s);if(a)return a;const c=s.split("-")[0];if(a=tw(c),a)return a;if("en"===c)return Eg;throw new re(701,!1)}function Yy(i){return Bt(i)[vd.PluralCase]}function tw(i){return i in sf||(sf[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),sf[i]}var vd=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(vd||{});const _d="en-US";let wd=_d;function rv(i,s,a,c,d){if(i=Re(i),Array.isArray(i))for(let f=0;f<i.length;f++)rv(i[f],s,a,c,d);else{const f=jt(),y=Ae(),w=lr();let D=xh(i)?i:Re(i.provide);const T=vI(i),x=1048575&w.providerIndexes,F=w.directiveStart,z=w.providerIndexes>>20;if(xh(i)||!i.multi){const X=new cs(T,d,rd),we=df(D,s,d?x:x+z,F);-1===we?(Ao(Pn(w,y),f,D),mw(f,i,s.length),s.push(D),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(X),y.push(X)):(a[we]=X,y[we]=X)}else{const X=df(D,s,x+z,F),we=df(D,s,x,x+z),Je=we>=0&&a[we];if(d&&!Je||!d&&!(X>=0&&a[X])){Ao(Pn(w,y),f,D);const yt=function xg(i,s,a,c,d){const f=new cs(i,a,rd);return f.multi=[],f.index=s,f.componentProviders=0,yw(f,d,c&&!a),f}(d?Td:bd,a.length,d,c,T);!d&&Je&&(a[we].providerFactory=yt),mw(f,i,s.length,0),s.push(D),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(yt),y.push(yt)}else mw(f,i,X>-1?X:we,yw(a[d?we:X],T,!d&&c));!d&&c&&Je&&a[we].componentProviders++}}}function mw(i,s,a,c){const d=xh(s),f=function hx(i){return!!i.useClass}(s);if(d||f){const D=(f?Re(s.useClass):s).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,D]):T[x+1].push(c,D)}else T.push(a,D)}}}function yw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function df(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function bd(i,s,a,c){return Pu(this.multi,[])}function Td(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=No(a,a[et],this.providerFactory.index,c);f=w.slice(0,y),Pu(d,f);for(let D=y;D<w.length;D++)f.push(w[D])}else f=[],Pu(d,f);return f}function Pu(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function vw(i,s=[]){return a=>{a.providersResolver=(c,d)=>function Ou(i,s,a){const c=jt();if(c.firstCreatePass){const d=Xr(i);rv(a,c.data,c.blueprint,d,!0),rv(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class ku{}class iv{}function SC(i,s){return new _w(i,s??null,[])}class _w extends ku{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new D0(this);const d=$r(s);this._bootstrapComponents=Sa(d.bootstrap),this._r3Injector=RI(s,a,[{provide:ku,useValue:this},{provide:Vp,useValue:this.componentFactoryResolver},...c],J(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class sv extends iv{constructor(s){super(),this.moduleType=s}create(s){return new _w(this.moduleType,s,[])}}class Ng extends ku{constructor(s){super(),this.componentFactoryResolver=new D0(this),this.instance=null;const a=new Nh([...s.providers,{provide:ku,useValue:this},{provide:Vp,useValue:this.componentFactoryResolver}],s.parent||Ym(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function hf(i,s,a=null){return new Ng({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let Sd=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=gI(0,a.type),d=c.length>0?hf([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ut({token:i,providedIn:"environment",factory:()=>new i(Tt(Ln))})}return i})();function MC(i){i.getStandaloneInjector=s=>s.get(Sd).getOrCreateStandaloneInjector(i)}function Si(i,s,a,c,d,f){const y=s+a;return Fi(i,y,d)?function Rs(i,s,a){return i[s]=a}(i,y+1,f?c.call(f,d):c(d)):function pf(i,s){const a=i[s];return a===Ut?void 0:a}(i,y+1)}function Fu(i,s){const a=jt();let c;const d=i+Lt;a.firstCreatePass?(c=function gf(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks??=[]).push(d,c.onDestroy)):c=a.data[d];const f=c.factory||(c.factory=fo(c.type)),w=cn(rd);try{const D=si(!1),T=f();return si(D),function x0(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Ae(),d,T),T}finally{cn(w)}}function UC(i,s,a){const c=i+Lt,d=Ae(),f=function Eo(i,s){return i[s]}(d,c);return function Fg(i,s){return i[et].data[s].pure}(d,c)?Si(d,function ni(){const i=Dt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function $C(){return this._results[Symbol.iterator]()}class Tw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ns)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Tw.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=$C)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function ai(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ls(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function dv(i,s,a,c=!0){const d=s[et];if(function p_(i,s,a,c){const d=mr+c,f=a.length;c>0&&(a[d-1][Hr]=s),c<f-mr?(s[Hr]=a[d],bm(a,mr+c,s)):(a.push(s),s[Hr]=null),s[Dn]=a;const y=s[al];null!==y&&a!==y&&function Ip(i,s){const a=i[or];s[Cn]!==s[Dn][Dn][Cn]&&(i[Zu]=!0),null===a?i[or]=[s]:a.push(s)}(y,s);const w=s[ir];null!==w&&w.insertView(i),s[wt]|=128}(d,s,i,a),c){const f=__(a,i),y=s[It],w=Um(y,i[sr]);null!==w&&function Ac(i,s,a,c,d,f){c[In]=d,c[pr]=s,Tp(i,c,a,1,d,f)}(d,i[pr],y,s,w,f)}}let Lg=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=zC}return i})();const GC=Lg,fA=class extends GC{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,c){const d=function HC(i,s,a,c){const d=s.tView,w=eo(i,d,a,4096&i[wt]?4096:16,null,s,null,null,null,c?.injector??null,c?.hydrationInfo??null);w[al]=i[s.index];const T=i[ir];return null!==T&&(w[ir]=T.createEmbeddedView(d)),wy(d,w,a),w}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:c});return new jo(d)}};function zC(){return Va(lr(),Ae())}function Va(i,s){return 4&i.type?new fA(s,i,ed(i,s)):null}let fv=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=gA}return i})();function gA(){return Vg(lr(),Ae())}const mA=fv,pv=class extends mA{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return ed(this._hostTNode,this._hostLView)}get injector(){return new kn(this._hostTNode,this._hostLView)}get parentInjector(){const s=Zi(this._hostTNode,this._hostLView);if(pa(s)){const a=wi(s,this._hostLView),c=ii(s);return new kn(a[et].data[c+8],a)}return new kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=YC(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const w=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(w,d,false),w}createComponent(s,a,c,d,f){const y=s&&!function dr(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const Le=a||{};w=Le.index,c=Le.injector,d=Le.projectableNodes,f=Le.environmentInjector||Le.ngModuleRef}const D=y?s:new Ci(zt(s)),T=c||this.parentInjector;if(!f&&null==D.ngModule){const Je=(y?T:this.parentInjector).get(Ln,null);Je&&(f=Je)}zt(D.componentType??{});const X=D.create(T,d,null,f);return this.insertImpl(X.hostView,w,false),X}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView;if(function op(i){return Rr(i[Dn])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const T=d[Dn],x=new pv(T,T[pr],T[Dn]);x.detach(x.indexOf(s))}}const y=this._adjustIndex(a),w=this._lContainer;return dv(w,d,y,!c),s.attachToViewContainerRef(),bm(_f(w),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=YC(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Vm(this._lContainer,a);c&&(hp(_f(this._lContainer),a),g_(c[et],c))}detach(s){const a=this._adjustIndex(s,-1),c=Vm(this._lContainer,a);return c&&null!=hp(_f(this._lContainer),a)?new jo(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function YC(i){return i[8]}function _f(i){return i[8]||(i[8]=[])}function Vg(i,s){let a;const c=s[i.index];return Rr(c)?a=c:(a=tD(c,s,null,i),s[i.index]=a,Xp(s,a)),Mw(a,s,i,c),new pv(a,i,s)}let Mw=function gv(i,s,a,c){if(i[sr])return;let d;d=8&a.type?nn(c):function yA(i,s){const a=i[It],c=a.createComment(""),d=yr(s,i);return Wl(a,Um(a,d),c,function PT(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[sr]=d};class wf{constructor(s){this.queryList=s,this.matches=null}clone(){return new wf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Bg(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Vw(s,a).matches&&this.queries[a].setDirty()}}class mv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class yv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new yv(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Nw{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Nw(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,QC(a,f)),this.matchTNodeWithReadOption(s,a,xo(a,s,f,!1,!1))}else c===Lg?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,xo(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Nc||d===fv||d===Lg&&4&a.type)this.addMatch(a.index,-2);else{const f=xo(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function QC(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Rw(i,s,a,c){return-1===a?function JC(i,s){return 11&i.type?ed(i,s):4&i.type?Va(i,s):null}(s,i):-2===a?function vA(i,s,a){return a===Nc?ed(s,i):a===Lg?Va(s,i):a===fv?Vg(s,i):void 0}(i,s,c):No(i,i[et],a,s)}function Ow(i,s,a,c){const d=s[ir].queries[c];if(null===d.matches){const f=i.data,y=a.matches,w=[];for(let D=0;D<y.length;D+=2){const T=y[D];w.push(T<0?null:Rw(s,f[T],y[D+1],a.metadata.read))}d.matches=w}return d.matches}function Pw(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Ow(i,s,d,a);for(let w=0;w<f.length;w+=2){const D=f[w];if(D>0)c.push(y[w/2]);else{const T=f[w+1],x=s[-D];for(let F=mr;F<x.length;F++){const z=x[F];z[al]===z[Dn]&&Pw(z[et],z,T,c)}if(null!==x[or]){const F=x[or];for(let z=0;z<F.length;z++){const X=F[z];Pw(X[et],X,T,c)}}}}}return c}function kw(i){const s=Ae(),a=jt(),c=cc();uh(c+1);const d=Vw(a,c);if(i.dirty&&function sp(i){return 4==(4&i[wt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Pw(a,s,c,[]):Ow(a,s,d,c);i.reset(f,$_),i.notifyOnChanges()}return!0}return!1}function Md(i,s,a,c){const d=jt();if(d.firstCreatePass){const f=lr();(function Lw(i,s,a){null===i.queries&&(i.queries=new yv),i.queries.track(new Nw(s,a))})(d,new mv(s,a,c),f.index),function XC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function jg(i,s,a){const c=new Tw(4==(4&a));(function ZI(i,s,a,c){const d=eg(s);d.push(a),i.firstCreatePass&&g0(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[ir]&&(s[ir]=new Bg),s[ir].queries.push(new wf(c))}(d,Ae(),a)}function xd(){return function Fw(i,s){return i[ir].queries[s].queryList}(Ae(),cc())}function Vw(i,s){return i.queries.getByIndex(s)}function Nd(i){return!!$r(i)}const _b=new gn("Application Initializer");let zg=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Pt(_b,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(R0(f))a.push(f);else if(AD(f)){const y=new Promise((w,D)=>{f.subscribe({complete:w,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),wb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const qg=new gn("LocaleId",{providedIn:"root",factory:()=>Pt(qg,_t.Optional|_t.SkipSelf)||function Zw(){return typeof $localize<"u"&&$localize.locale||_d}()}),Kw=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Lu=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Yw{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Tf=(()=>{class i{compileModuleSync(a){return new sv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Sa($r(a).declarations).reduce((y,w)=>{const D=zt(w);return D&&y.push(new Ci(D)),y},[]);return new Yw(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Mb=new gn(""),Mv=new gn("");let iE,xb=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,iE||(function Nb(i){iE=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ci.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Tt(ci),Tt(xv),Tt(Mv))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac})}return i})(),xv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return iE?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Ua=null;const Rb=new gn("AllowMultipleToken"),Kg=new gn("PlatformDestroyListeners"),sE=new gn("appBootstrapListener");class uE{constructor(s,a){this.name=s,this.token=a}}function Ov(i,s,a=[]){const c=`Platform: ${s}`,d=new gn(c);return(f=[])=>{let y=Yg();if(!y||y.injector.get(Rb,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function Mf(i){if(Ua&&!Ua.get(Rb,!1))throw new re(400,!1);(function Nv(){!function Jf(i){Yd=i}(()=>{throw new re(600,!1)})})(),Ua=i;const s=i.get(Pb);(function Rv(i){i.get(Jm,null)?.forEach(a=>a())})(i)}(function Pv(i=[],s){return Uo.create({name:s,providers:[{provide:N_,useValue:"platform"},{provide:Kg,useValue:new Set([()=>Ua=null])},...i]})}(w,c))}return function Vu(i){const s=Yg();if(!s)throw new re(401,!1);return s}()}}function Yg(){return Ua?.get(Pb)??null}let Pb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function cE(i="zone.js",s){return"noop"===i?new kh:"zone.js"===i?new ci(s):i}(c?.ngZone,function kb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function AC(i,s,a){return new _w(i,s,a)}(a.moduleType,this.injector,function Ub(i){return[{provide:ci,useFactory:i},{provide:Mh,multi:!0,useFactory:()=>{const s=Pt(lE,{optional:!0});return()=>s.initialize()}},{provide:Fv,useFactory:Vb},{provide:UI,useFactory:BI}]}(()=>d)),y=f.injector.get(Rc,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:D=>{y.handleError(D)}});f.onDestroy(()=>{Nf(this._modules,f),w.unsubscribe()})}),function Fb(i,s,a){try{const c=a();return R0(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const w=f.injector.get(zg);return w.runInitializers(),w.donePromise.then(()=>(function nw(i){Ze(i,"Expected localeId to be defined"),"string"==typeof i&&(wd=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(qg,_d)||_d),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=kv({},c);return function oE(i,s,a){const c=new sv(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(xf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new re(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Kg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Tt(Uo))};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function kv(i,s){return Array.isArray(s)?s.reduce(kv,i):{...i,...s}}let xf=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pt(Fv),this.zoneIsStable=Pt(UI),this.componentTypes=[],this.components=[],this.isStable=Pt(Lu).hasPendingTasks.pipe((0,xe.w)(a=>a?(0,fe.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,pe.B)()),this._injector=Pt(Ln)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof bI;if(!this._injector.get(zg).done)throw!d&&$s(a),new re(405,!1);let y;y=d?a:this._injector.get(Vp).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function aE(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ku),T=y.create(Uo.NULL,[],c||y.selector,w),x=T.location.nativeElement,F=T.injector.get(Mb,null);return F?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Nf(this.components,T),F?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Nf(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(sE,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Nf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Nf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const Fv=new gn("",{providedIn:"root",factory:()=>Pt(Rc).handleError.bind(void 0)});function Vb(){const i=Pt(ci),s=Pt(Rc);return a=>i.runOutsideAngular(()=>s.handleError(a))}let lE=(()=>{class i{constructor(){this.zone=Pt(ci),this.applicationRef=Pt(xf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function dE(){return!1}let VA=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Qg}return i})();function Qg(i){return function UA(i,s,a){if(ho(i)&&!a){const c=vr(i.index,s);return new jo(c,c)}return 47&i.type?new jo(s[Cn],s):null}(lr(),Ae(),16==(16&i))}class jv{constructor(){}supports(s){return qh(s)}create(s){return new Pf(s)}}const Hb=(i,s)=>s;class Pf{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Hb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<zb(c,d,f)?a:c,w=zb(y,d,f),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const T=w-d,x=D-d;if(T!=x){for(let z=0;z<T;z++){const X=z<f.length?f[z]:f[z]=0,we=X+z;x<=we&&we<T&&(f[z]=X+1)}f[y.previousIndex]=x-T}}w!==D&&s(y,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!qh(s))throw new re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else d=0,function AS(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new gE(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class gE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WA{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Gb{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new WA,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zb(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class mE{constructor(){}supports(s){return s instanceof Map||Ay(s)}create(){return new ZA}}class ZA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ay(s)))throw new re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new qb(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class qb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wb(){return new yE([new jv])}let yE=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:Wb});constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Wb()),deps:[[i,new Po,new Fl]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new re(901,!1)}}return i})();function Zb(){return new $v([new mE])}let $v=(()=>{class i{static#e=this.\u0275prov=ut({token:i,providedIn:"root",factory:Zb});constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Zb()),deps:[[i,new Po,new Fl]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new re(901,!1)}}return i})();const Yb=Ov(null,"core",[]);let Hv=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Tt(xf))};static#t=this.\u0275mod=Qo({type:i});static#n=this.\u0275inj=mn({})}return i})();function JA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function zx(i){const s=zt(i);if(!s)return null;const a=new Ci(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3399:(at,Ce,P)=>{P.d(Ce,{Z:()=>qe});var p=P(9058),Y=P(4537),k=P(7592),Q=P(7879);class ne{constructor(We,Oe){this._delegate=We,this.firebase=Oe,(0,k._addComponent)(We,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(We,Oe=k._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(We);return!lt.isInitialized()&&"EXPLICIT"===(null===(ct=lt.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:Oe})}_removeServiceInstance(We,Oe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Oe)}_addComponent(We){(0,k._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,k._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function ue(){const Re=function xe(Re){const We={},Oe={__esModule:!0,initializeApp:function re(Pe,oe={}){const q=k.initializeApp(Pe,oe);if((0,p.r3)(We,q.name))return We[q.name];const je=new Re(q,Oe);return We[q.name]=je,je},app:lt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function ee(Pe){const oe=Pe.name,q=oe.replace("-compat","");if(k._registerComponent(Pe)&&"PUBLIC"===Pe.type){const je=(ht=lt())=>{if("function"!=typeof ht[q])throw pe.create("invalid-app-argument",{appName:oe});return ht[q]()};void 0!==Pe.serviceProps&&(0,p.ZB)(je,Pe.serviceProps),Oe[q]=je,Re.prototype[q]=function(...ht){return this._getService.bind(this,oe).apply(this,Pe.multipleInstances?ht:[])}}return"PUBLIC"===Pe.type?Oe[q]:null},removeApp:function ct(Pe){delete We[Pe]},useAsService:function Ee(Pe,oe){return"serverAuth"===oe?null:oe},modularAPIs:k}};function lt(Pe){if(!(0,p.r3)(We,Pe=Pe||k._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Pe});return We[Pe]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function _e(){return Object.keys(We).map(Pe=>We[Pe])}}),lt.App=Re,Oe}(ne);return Re.INTERNAL=Object.assign(Object.assign({},Re.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function We(Oe){(0,p.ZB)(Re,Oe)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Re}(),j=new Q.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Re=self.firebase.SDK_VERSION;Re&&Re.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=L;!function Te(Re){(0,k.registerVersion)("@firebase/app-compat","0.2.13",Re)}()},7592:(at,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>Ie,_addOrOverwriteComponent:()=>Se,_apps:()=>he,_clearComponents:()=>gt,_components:()=>me,_getProvider:()=>Ge,_registerComponent:()=>Ze,_removeServiceInstance:()=>Nn,deleteApp:()=>Yr,getApp:()=>rn,getApps:()=>Sr,initializeApp:()=>Kn,onLog:()=>Qr,registerVersion:()=>$n,setLogLevel:()=>gs});var p=P(5861),Y=P(4537),k=P(7879),Q=P(9058),ne=P(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const xe="@firebase/app",L=new k.Yd("@firebase/app"),ie="[DEFAULT]",de={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ie(ye,H){try{ye.container.addComponent(H)}catch(ge){L.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Se(ye,H){ye.container.addOrOverwriteComponent(H)}function Ze(ye){const H=ye.name;if(me.has(H))return L.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ie(ge,ye);return!0}function Ge(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}function Nn(ye,H,ge=ie){Ge(ye,H).clearInstance(ge)}function gt(){me.clear()}const ut=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(H,ge,$e){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=$e,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}const mn="9.23.0";function Kn(ye,H={}){let ge=ye;"object"!=typeof H&&(H={name:H});const $e=Object.assign({name:ie,automaticDataCollectionEnabled:!1},H),Ke=$e.name;if("string"!=typeof Ke||!Ke)throw ut.create("bad-app-name",{appName:String(Ke)});if(ge||(ge=(0,Q.aH)()),!ge)throw ut.create("no-options");const ft=he.get(Ke);if(ft){if((0,Q.vZ)(ge,ft.options)&&(0,Q.vZ)($e,ft.config))return ft;throw ut.create("duplicate-app",{appName:Ke})}const Jt=new Y.H0(Ke);for(const V of me.values())Jt.addComponent(V);const U=new fn(ge,$e,Jt);return he.set(Ke,U),U}function rn(ye=ie){const H=he.get(ye);if(!H&&ye===ie&&(0,Q.aH)())return Kn();if(!H)throw ut.create("no-app",{appName:ye});return H}function Sr(){return Array.from(he.values())}function Yr(ye){return mi.apply(this,arguments)}function mi(){return(mi=(0,p.Z)(function*(ye){const H=ye.name;he.has(H)&&(he.delete(H),yield Promise.all(ye.container.getProviders().map(ge=>ge.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function $n(ye,H,ge){var $e;let Ke=null!==($e=de[ye])&&void 0!==$e?$e:ye;ge&&(Ke+=`-${ge}`);const ft=Ke.match(/\s|\//),Jt=H.match(/\s|\//);if(ft||Jt){const U=[`Unable to register library "${Ke}" with version "${H}":`];return ft&&U.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),ft&&Jt&&U.push("and"),Jt&&U.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void L.warn(U.join(" "))}Ze(new Y.wA(`${Ke}-version`,()=>({library:Ke,version:H}),"VERSION"))}function Qr(ye,H){if(null!==ye&&"function"!=typeof ye)throw ut.create("invalid-log-argument");(0,k.Am)(ye,H)}function gs(ye){(0,k.Ub)(ye)}const so="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let xt=null;function cn(){return xt||(xt=(0,ne.X3)(so,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),xt}function Yn(){return(Yn=(0,p.Z)(function*(ye){try{return yield(yield cn()).transaction(bt).objectStore(bt).get(ms(ye))}catch(H){if(H instanceof Q.ZR)L.warn(H.message);else{const ge=ut.create("idb-get",{originalErrorMessage:H?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,H){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(ye,H){try{const $e=(yield cn()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,ms(ye)),yield $e.done}catch(ge){if(ge instanceof Q.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function ms(ye){return`${ye.name}!${ye.options.appId}`}class Kt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Vs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,p.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=yi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!H._heartbeatsCache.heartbeats.some(ft=>ft.date===Ke))return H._heartbeatsCache.heartbeats.push({date:Ke,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ft=>{const Jt=new Date(ft.date).valueOf();return Date.now()-Jt<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,p.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=yi(),{heartbeatsToSend:$e,unsentEntries:Ke}=function ys(ye,H=1024){const ge=[];let $e=ye.slice();for(const Ke of ye){const ft=ge.find(Jt=>Jt.agent===Ke.agent);if(ft){if(ft.dates.push(Ke.date),Mr(ge)>H){ft.dates.pop();break}}else if(ge.push({agent:Ke.agent,dates:[Ke.date]}),Mr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ft=(0,Q.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Ke.length>0?(H._heartbeatsCache.heartbeats=Ke,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ft})()}}function yi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,p.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function En(ye){return Yn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,p.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,p.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...H.heartbeats]})}})()}}function Mr(ye){return(0,Q.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function ns(ye){Ze(new Y.wA("platform-logger",H=>new fe(H),"PRIVATE")),Ze(new Y.wA("heartbeat",H=>new Kt(H),"PRIVATE")),$n(xe,"0.9.13",ye),$n(xe,"0.9.13","esm2017"),$n("fire-js","")}("")},4097:(at,Ce,P)=>{P.d(Ce,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=P(7592);(0,p.registerVersion)("firebase","9.23.0","app")},120:(at,Ce,P)=>{P.d(Ce,{Z:()=>p.Z});var p=P(3399);p.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(at,Ce,P)=>{P.r(Ce);var p=P(5861),Y=P(3399),k=P(9058),Q=P(7592),ne=P(7582),fe=P(7879),pe=P(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const qe=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Re=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new fe.Yd("@firebase/auth");function re(v,...h){ct.logLevel<=fe.in.ERROR&&ct.error(`Auth (${Q.SDK_VERSION}): ${v}`,...h)}function _e(v,...h){throw oe(v,...h)}function ee(v,...h){return oe(v,...h)}function Ee(v,h,g){const _=Object.assign(Object.assign({},Re()),{[h]:g});return new k.LL("auth","Firebase",_).create(h,{appName:v.name})}function Pe(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&_e(v,"argument-error"),Ee(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oe(v,...h){if("string"!=typeof v){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(g,..._)}return We.create(v,...h)}function q(v,h,...g){if(!v)throw oe(h,...g)}function je(v){const h="INTERNAL ASSERTION FAILED: "+v;throw re(h),new Error(h)}function ht(v,h){v||je(h)}function Qt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function dn(){return"http:"===hn()||"https:"===hn()}function hn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class rr{constructor(h,g){this.shortDelay=h,this.longDelay=g,ht(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function xn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dn()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(v,h){ht(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class de{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const he={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new rr(3e4,6e4);function Ie(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Se(v,h,g,_){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(v,h,g,_,S={}){return Ge(v,S,(0,p.Z)(function*(){let N={},B={};_&&("GET"===h?B=_:N={body:JSON.stringify(_)});const Z=(0,k.xO)(Object.assign({key:v.config.apiKey},B)).slice(1),ke=yield v._getAdditionalHeaders();return ke["Content-Type"]="application/json",v.languageCode&&(ke["X-Firebase-Locale"]=v.languageCode),de.fetch()(ut(v,v.config.apiHost,g,Z),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Ge(v,h,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(v,h,g){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},he),h);try{const S=new fn(v),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const B=yield N.json();if("needConfirmation"in B)throw mn(v,"account-exists-with-different-credential",B);if(N.ok&&!("errorMessage"in B))return B;{const Z=N.ok?B.errorMessage:B.error.message,[ke,Ue]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw mn(v,"credential-already-in-use",B);if("EMAIL_EXISTS"===ke)throw mn(v,"email-already-in-use",B);if("USER_DISABLED"===ke)throw mn(v,"user-disabled",B);const it=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw Ee(v,it,Ue);_e(v,it)}}catch(S){if(S instanceof k.ZR)throw S;_e(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function gt(v,h,g,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,p.Z)(function*(v,h,g,_,S={}){const N=yield Se(v,h,g,_,S);return"mfaPendingCredential"in N&&_e(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ut(v,h,g,_){const S=`${h}${g}?${_}`;return v.config.emulator?ie(v.config,S):`${v.config.apiScheme}://${S}`}class fn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ee(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mn(v,h,g){const _={appName:v.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ee(v,h,_);return S.customData._tokenResponse=g,S}function rn(){return(rn=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Qr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function _t(){return(_t=(0,p.Z)(function*(v,h=!1){const g=(0,k.m9)(v),_=yield g.getIdToken(h),S=xt(_);q(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,B=N?.sign_in_provider;return{claims:S,token:_,authTime:Qr(bt(S.auth_time)),issuedAtTime:Qr(bt(S.iat)),expirationTime:Qr(bt(S.exp)),signInProvider:B||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function bt(v){return 1e3*Number(v)}function xt(v){const[h,g,_]=v.split(".");if(void 0===h||void 0===g||void 0===_)return re("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,k.tV)(g);return S?JSON.parse(S):(re("Failed to decode base64 JWT payload"),null)}catch(S){return re("Caught error parsing JWT payload as JSON",S?.toString()),null}}function En(v,h){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof k.ZR&&function tn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}class Rn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class ms{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qr(this.lastLoginAt),this.creationTime=Qr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wt(v){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,p.Z)(function*(v){var h;const g=v.auth,_=yield v.getIdToken(),S=yield En(v,function mi(v,h){return $n.apply(this,arguments)}(g,{idToken:_}));q(S?.users.length,g,"internal-error");const N=S.users[0];v._notifyReloadListener(N);const B=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function Vs(v){return v.map(h=>{var{providerId:g}=h,_=(0,ne._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(N.providerUserInfo):[],Z=function ys(v,h){return[...v.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}(v.providerData,B),it=!!v.isAnonymous&&!(v.email&&N.passwordHash||Z?.length),st={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Z,metadata:new ms(N.createdAt,N.lastLoginAt),isAnonymous:it};Object.assign(v,st)}),Ar.apply(this,arguments)}function yi(){return(yi=(0,p.Z)(function*(v){const h=(0,k.m9)(v);yield Wt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function ns(){return(ns=(0,p.Z)(function*(v,h){const g=yield Ge(v,{},(0,p.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=v.config,B=ut(v,S,"/v1/token",`key=${N}`),Z=yield v._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(B,{method:"POST",headers:Z,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){q(h.idToken,"internal-error"),q(typeof h.idToken<"u","internal-error"),q(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function cn(v){const h=xt(v);return q(h,"internal-error"),q(typeof h.exp<"u","internal-error"),q(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,p.Z)(function*(){return q(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:B}=yield function Mr(v,h){return ns.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(S,N,Number(B))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:S,expirationTime:N}=g,B=new ye;return _&&(q("string"==typeof _,"internal-error",{appName:h}),B.refreshToken=_),S&&(q("string"==typeof S,"internal-error",{appName:h}),B.accessToken=S),N&&(q("number"==typeof N,"internal-error",{appName:h}),B.expirationTime=N),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ye,this.toJSON())}_performRefresh(){return je("not implemented")}}function H(v,h){q("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class ge{constructor(h){var{uid:g,auth:_,stsTokenManager:S}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ms(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const _=yield En(g,g.stsTokenManager.getToken(g.auth,h));return q(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function so(v){return _t.apply(this,arguments)}(this,h)}reload(){return function Kt(v){return yi.apply(this,arguments)}(this)}_assign(h){this!==h&&(q(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new ge(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,p.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield Wt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield En(h,function Kn(v,h){return rn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,S,N,B,Z,ke,Ue,it;const st=null!==(_=g.displayName)&&void 0!==_?_:void 0,Fn=null!==(S=g.email)&&void 0!==S?S:void 0,Qi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Ia=null!==(B=g.photoURL)&&void 0!==B?B:void 0,vu=null!==(Z=g.tenantId)&&void 0!==Z?Z:void 0,Tc=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Da=null!==(Ue=g.createdAt)&&void 0!==Ue?Ue:void 0,Ca=null!==(it=g.lastLoginAt)&&void 0!==it?it:void 0,{uid:Sc,emailVerified:km,isAnonymous:Ac,providerData:_u,stsTokenManager:Fm}=g;q(Sc&&Fm,h,"internal-error");const p_=ye.fromJSON(this.name,Fm);q("string"==typeof Sc,h,"internal-error"),H(st,h.name),H(Fn,h.name),q("boolean"==typeof km,h,"internal-error"),q("boolean"==typeof Ac,h,"internal-error"),H(Qi,h.name),H(Ia,h.name),H(vu,h.name),H(Tc,h.name),H(Da,h.name),H(Ca,h.name);const Ip=new ge({uid:Sc,auth:h,email:Fn,emailVerified:km,displayName:st,isAnonymous:Ac,photoURL:Ia,phoneNumber:Qi,tenantId:vu,stsTokenManager:p_,createdAt:Da,lastLoginAt:Ca});return _u&&Array.isArray(_u)&&(Ip.providerData=_u.map(Lm=>Object.assign({},Lm))),Tc&&(Ip._redirectEventId=Tc),Ip}static _fromIdTokenResponse(h,g,_=!1){return(0,p.Z)(function*(){const S=new ye;S.updateFromServerResponse(g);const N=new ge({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Wt(N),N})()}}const $e=new Map;function Ke(v){ht(v instanceof Function,"Expected a class definition");let h=$e.get(v);return h?(ht(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,$e.set(v,h),h)}const Jt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,p.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,p.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,p.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return v.type="NONE",v})();function U(v,h,g){return`firebase:${v}:${h}:${g}`}class V{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=U(this.userKey,S.apiKey,N),this.fullPersistenceKey=U("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?ge._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,p.Z)(function*(){if(!g.length)return new V(Ke(Jt),h,_);const S=(yield Promise.all(g.map(function(){var Ue=(0,p.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let N=S[0]||Ke(Jt);const B=U(_,h.config.apiKey,h.name);let Z=null;for(const Ue of g)try{const it=yield Ue._get(B);if(it){const st=ge._fromJSON(h,it);Ue!==N&&(Z=st),N=Ue;break}}catch{}const ke=S.filter(Ue=>Ue._shouldAllowMigration);return N._shouldAllowMigration&&ke.length?(N=ke[0],Z&&(yield N._set(B,Z.toJSON())),yield Promise.all(g.map(function(){var Ue=(0,p.Z)(function*(it){if(it!==N)try{yield it._remove(B)}catch{}});return function(it){return Ue.apply(this,arguments)}}())),new V(N,h,_)):new V(N,h,_)})()}}function W(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Nt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(De(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(xr(h))return"Blackberry";if(Pt(h))return"Webos";if(ae(h))return"Safari";if((h.includes("chrome/")||tt(h))&&!h.includes("edge/"))return"Chrome";if(Tt(h))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function De(v=(0,k.z$)()){return/firefox\//i.test(v)}function ae(v=(0,k.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function tt(v=(0,k.z$)()){return/crios\//i.test(v)}function Nt(v=(0,k.z$)()){return/iemobile/i.test(v)}function Tt(v=(0,k.z$)()){return/android/i.test(v)}function xr(v=(0,k.z$)()){return/blackberry/i.test(v)}function Pt(v=(0,k.z$)()){return/webos/i.test(v)}function Qn(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function zo(v=(0,k.z$)()){return Qn(v)||Tt(v)||Pt(v)||xr(v)||/windows phone/i.test(v)||Nt(v)}function rs(v,h=[]){let g;switch(v){case"Browser":g=W((0,k.z$)());break;case"Worker":g=`${W((0,k.z$)())}-${v}`;break;default:g=v}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${Q.SDK_VERSION}/${_}`}function ji(){return(ji=(0,p.Z)(function*(v){return(yield Se(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $i(v,h){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(v,h){return Se(v,"GET","/v2/recaptchaConfig",Ie(v,h))})).apply(this,arguments)}function js(v){return void 0!==v&&void 0!==v.getResponse}function qo(v){return void 0!==v&&void 0!==v.enterprise}class ja{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function is(v){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=h,_.onerror=S=>{const N=ee("internal-error");N.customData=S,g(N)},_.type="text/javascript",_.charset="UTF-8",function Ld(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(_)})}function Wo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class tl{constructor(h){this.type="recaptcha-enterprise",this.auth=Jn(h)}verify(h="verify",g=!1){var _=this;return(0,p.Z)(function*(){function N(){return N=(0,p.Z)(function*(Z){if(!g){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var ke=(0,p.Z)(function*(Ue,it){$i(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const Fn=new ja(st);return null==Z.tenantId?Z._agentRecaptchaConfig=Fn:Z._tenantRecaptchaConfigs[Z.tenantId]=Fn,Ue(Fn.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{it(st)})});return function(Ue,it){return ke.apply(this,arguments)}}())}),N.apply(this,arguments)}function B(Z,ke,Ue){const it=window.grecaptcha;qo(it)?it.enterprise.ready(()=>{it.enterprise.execute(Z,{action:h}).then(st=>{ke(st)}).catch(()=>{ke("NO_RECAPTCHA")})}):Ue(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,ke)=>{(function S(Z){return N.apply(this,arguments)})(_.auth).then(Ue=>{if(!g&&qo(window.grecaptcha))B(Ue,Z,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));is("https://www.google.com/recaptcha/enterprise.js?render="+Ue).then(()=>{B(Ue,Z,ke)}).catch(it=>{ke(it)})}}).catch(Ue=>{ke(Ue)})})})()}}function Mi(v,h,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,p.Z)(function*(v,h,g,_=!1){const S=new tl(v);let N;try{N=yield S.verify(g)}catch{N=yield S.verify(g,!0)}const B=Object.assign({},h);return Object.assign(B,_?{captchaResp:N}:{captchaResponse:N}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class Ha{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=N=>new Promise((B,Z)=>{try{B(h(N))}catch(ke){Z(ke)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===h)return;const _=[];try{for(const S of g.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const N of _)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class nl{constructor(h,g,_,S){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=_,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ko(this),this.idTokenSubscription=new Ko(this),this.beforeStateQueue=new Ha(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=Ke(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield V.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let N=S,B=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Z=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,ke=N?._redirectEventId,Ue=yield g.tryRedirectSignIn(h);(!Z||Z===ke)&&Ue?.user&&(N=Ue.user,B=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(N)}catch(Z){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Z))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return q(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){try{yield Wt(h)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Tn(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const _=h?(0,k.m9)(h):null;return _&&q(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return h&&q(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(Ke(h))}))}initializeRecaptchaConfig(){var h=this;return(0,p.Z)(function*(){const g=yield $i(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new ja(g);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new tl(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,p.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&Ke(h)||g._popupRedirectResolver;q(_,g,"argument-error"),g.redirectPersistenceManager=yield V.create(g,[Ke(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return q(B,this,"internal-error"),B.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,_,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(_["X-Firebase-Client"]=S);const N=yield h._getAppCheckToken();return N&&(_["X-Firebase-AppCheck"]=N),_})()}_getAppCheckToken(){var h=this;return(0,p.Z)(function*(){var g;const _=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return _?.error&&function lt(v,...h){ct.logLevel<=fe.in.WARN&&ct.warn(`Auth (${Q.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Jn(v){return(0,k.m9)(v)}class Ko{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yo(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Vd(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class ao{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return je("not implemented")}_getIdTokenResponse(h){return je("not implemented")}_linkToIdToken(h,g){return je("not implemented")}_getReauthenticationResolver(h){return je("not implemented")}}function qf(v,h){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:resetPassword",Ie(v,h))})).apply(this,arguments)}function Ud(v,h){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gu(){return(Gu=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",Ie(v,h))})).apply(this,arguments)}function Nr(v,h){return il.apply(this,arguments)}function il(){return(il=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,h))})).apply(this,arguments)}function zu(v,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:sendOobCode",Ie(v,h))})).apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(v,h){return zu(v,h)})).apply(this,arguments)}function Jo(v,h){return sl.apply(this,arguments)}function sl(){return(sl=(0,p.Z)(function*(v,h){return zu(v,h)})).apply(this,arguments)}function zt(v,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(v,h){return zu(v,h)})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(v,h){return zu(v,h)})).apply(this,arguments)}function ol(){return(ol=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}class Wu extends ao{constructor(h,g,_,S=null){super("password",_),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new Wu(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new Wu(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){var _;switch(g.signInMethod){case"password":const S={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const N=yield Mi(h,S,"signInWithPassword");return Nr(h,N)}return Nr(h,S).catch(function(){var N=(0,p.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield Mi(h,S,"signInWithPassword");return Nr(h,Z)}return Promise.reject(B)});return function(B){return N.apply(this,arguments)}}());case"emailLink":return function $r(v,h){return ol.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return Ud(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Wf(v,h){return za.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ni(v,h){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,h))})).apply(this,arguments)}class wt extends ao{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new wt(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):_e("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=g,N=(0,ne._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const B=new wt(_,S);return B.idToken=N.idToken||void 0,B.accessToken=N.accessToken||void 0,B.secret=N.secret,B.nonce=N.nonce,B.pendingToken=N.pendingToken||null,B}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Ni(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ni(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function Hr(){return(Hr=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,h))})).apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h))})).apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(v,h){const g=yield gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h));if(g.temporaryProof)throw mn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const vs={USER_NOT_FOUND:"user-not-found"};function It(){return(It=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),vs)})).apply(this,arguments)}class gr extends ao{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new gr({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new gr({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function uo(v,h){return pr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function qa(v,h){return Sn.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Xo(v,h){return It.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:N}=h;return _||g||S||N?new gr({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class Cn{constructor(h){var g,_,S,N,B,Z;const ke=(0,k.zd)((0,k.pd)(h)),Ue=null!==(g=ke.apiKey)&&void 0!==g?g:null,it=null!==(_=ke.oobCode)&&void 0!==_?_:null,st=function Zf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=ke.mode)&&void 0!==S?S:null);q(Ue&&it&&st,"argument-error"),this.apiKey=Ue,this.operation=st,this.code=it,this.continueUrl=null!==(N=ke.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(B=ke.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Z=ke.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const g=function _s(v){const h=(0,k.zd)((0,k.pd)(v)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||g||h||v}(h);try{return new Cn(g)}catch{return null}}}let co=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,_){return Wu._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=Cn.parseLink(_);return q(S,"argument-error"),Wu._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ir{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ws extends ir{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Es extends ws{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return q("providerId"in g&&"signInMethod"in g,"argument-error"),wt._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return q(h.idToken||h.accessToken,"argument-error"),wt._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Es.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Es.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:B,providerId:Z}=h;if(!_&&!S&&!g&&!N||!Z)return null;try{return new Es(Z)._credential({idToken:g,accessToken:_,nonce:B,pendingToken:N})}catch{return null}}}let Hs=(()=>{class v extends ws{constructor(){super("facebook.com")}static credential(g){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ri=(()=>{class v extends ws{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Wa=(()=>{class v extends ws{constructor(){super("github.com")}static credential(g){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Lt extends ao{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Ni(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ni(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:N}=g;return _&&S&&N&&_===S?new Lt(_,N):null}static _create(h,g){return new Lt(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ea extends ir{constructor(h){q(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ea.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ea.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Lt.fromJSON(h);return q(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return Lt._create(_,g)}catch{return null}}}let Zu=(()=>{class v extends ws{constructor(){super("twitter.com")}static credential(g,_){return wt._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return v.credential(_,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function sr(v,h){return lo.apply(this,arguments)}function lo(){return(lo=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signUp",Ie(v,h))})).apply(this,arguments)}class or{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,S=!1){return(0,p.Z)(function*(){const N=yield ge._fromIdTokenResponse(h,_,S),B=zs(_);return new or({user:N,providerId:B,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=zs(_);return new or({user:h,providerId:S,_tokenResponse:_,operationType:g})})()}}function zs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Kf(){return(Kf=(0,p.Z)(function*(v){var h;const g=Jn(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new or({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield sr(g,{returnSecureToken:!0}),S=yield or._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class ar extends k.ZR{constructor(h,g,_,S){var N;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,ar.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,S){return new ar(h,g,_,S)}}function Rr(v,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?ar._fromErrorAndOperation(v,N,h,_):N})}function Ku(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function vi(){return vi=(0,p.Z)(function*(v,h){const g=(0,k.m9)(v);yield na(!0,g,h);const{providerUserInfo:_}=yield function Sr(v,h){return Yr.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=Ku(_||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),vi.apply(this,arguments)}function Xr(v,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,p.Z)(function*(v,h,g=!1){const _=yield En(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return or._forOperation(v,"link",_)})).apply(this,arguments)}function na(v,h,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,p.Z)(function*(v,h,g){yield Wt(h);const S=!1===v?"provider-already-linked":"no-such-provider";q(Ku(h.providerData).has(g)===v,h.auth,S)})).apply(this,arguments)}function pm(v,h){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,p.Z)(function*(v,h,g=!1){const{auth:_}=v,S="reauthenticate";try{const N=yield En(v,Rr(_,S,h,v),g);q(N.idToken,_,"internal-error");const B=xt(N.idToken);q(B,_,"internal-error");const{sub:Z}=B;return q(v.uid===Z,_,"user-mismatch"),or._forOperation(v,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&_e(_,"user-mismatch"),N}})).apply(this,arguments)}function cl(v,h){return $d.apply(this,arguments)}function $d(){return($d=(0,p.Z)(function*(v,h,g=!1){const _="signIn",S=yield Rr(v,_,h),N=yield or._fromIdTokenResponse(v,_,S);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function ll(v,h){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,p.Z)(function*(v,h){return cl(Jn(v),h)})).apply(this,arguments)}function gm(v,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,p.Z)(function*(v,h){const g=(0,k.m9)(v);return yield na(!1,g,h.providerId),Xr(g,h)})).apply(this,arguments)}function mm(v,h){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,p.Z)(function*(v,h){return pm((0,k.m9)(v),h)})).apply(this,arguments)}function Qf(){return(Qf=(0,p.Z)(function*(v,h){return gt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,h))})).apply(this,arguments)}function Is(){return Is=(0,p.Z)(function*(v,h){const g=Jn(v),_=yield function Jv(v,h){return Qf.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),S=yield or._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S}),Is.apply(this,arguments)}class dl{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ra._fromServerResponse(h,g):"totpInfo"in g?hl._fromServerResponse(h,g):_e(h,"internal-error")}}class ra extends dl{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ra(g)}}class hl extends dl{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new hl(g)}}function Za(v,h,g){var _;q((null===(_=g.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),q(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(q(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(q(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Ka(){return Ka=(0,p.Z)(function*(v,h,g){var _;const S=Jn(v),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield Mi(S,N,"getOobCode",!0);g&&Za(S,B,g),yield Jo(S,B)}else g&&Za(S,N,g),yield Jo(S,N).catch(function(){var B=(0,p.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield Mi(S,N,"getOobCode",!0);g&&Za(S,ke,g),yield Jo(S,ke)}});return function(Z){return B.apply(this,arguments)}}())}),Ka.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(v,h,g){yield qf((0,k.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Oi(){return Oi=(0,p.Z)(function*(v,h){yield function xi(v,h){return Gu.apply(this,arguments)}((0,k.m9)(v),{oobCode:h})}),Oi.apply(this,arguments)}function nr(v,h){return po.apply(this,arguments)}function po(){return(po=(0,p.Z)(function*(v,h){const g=(0,k.m9)(v),_=yield qf(g,{oobCode:h}),S=_.requestType;switch(q(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(_.mfaInfo,g,"internal-error");default:q(_.email,g,"internal-error")}let N=null;return _.mfaInfo&&(N=dl._fromServerResponse(Jn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(v,h){const{data:g}=yield nr((0,k.m9)(v),h);return g.email})).apply(this,arguments)}function Ya(){return Ya=(0,p.Z)(function*(v,h,g){var _;const S=Jn(v),N={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ue=yield Mi(S,N,"signUpPassword");B=sr(S,Ue)}else B=sr(S,N).catch(function(){var Ue=(0,p.Z)(function*(it){if("auth/missing-recaptcha-token"===it.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const st=yield Mi(S,N,"signUpPassword");return sr(S,st)}return Promise.reject(it)});return function(it){return Ue.apply(this,arguments)}}());const Z=yield B.catch(Ue=>Promise.reject(Ue)),ke=yield or._fromIdTokenResponse(S,"signIn",Z);return yield S._updateCurrentUser(ke.user),ke}),Ya.apply(this,arguments)}function Qa(){return Qa=(0,p.Z)(function*(v,h,g){var _;const S=Jn(v),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function B(Z,ke){q(ke.handleCodeInApp,S,"argument-error"),ke&&Za(S,Z,ke)}if(null!==(_=S._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Z=yield Mi(S,N,"getOobCode",!0);B(Z,g),yield zt(S,Z)}else B(N,g),yield zt(S,N).catch(function(){var Z=(0,p.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ue=yield Mi(S,N,"getOobCode",!0);B(Ue,g),yield zt(S,Ue)}});return function(ke){return Z.apply(this,arguments)}}())}),Qa.apply(this,arguments)}function pl(){return(pl=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v),S=co.credentialWithLink(h,g||Qt());return q(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),ll(_,S)})).apply(this,arguments)}function ml(){return(ml=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:createAuthUri",Ie(v,h))})).apply(this,arguments)}function mo(){return mo=(0,p.Z)(function*(v,h){const _={identifier:h,continueUri:dn()?Qt():"http://localhost"},{signinMethods:S}=yield function gl(v,h){return ml.apply(this,arguments)}((0,k.m9)(v),_);return S||[]}),mo.apply(this,arguments)}function Xa(){return Xa=(0,p.Z)(function*(v,h){const g=(0,k.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Za(g.auth,S,h);const{email:N}=yield function jd(v,h){return qu.apply(this,arguments)}(g.auth,S);N!==v.email&&(yield v.reload())}),Xa.apply(this,arguments)}function Qu(){return Qu=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&Za(_.auth,N,g);const{email:B}=yield function jr(v,h){return $s.apply(this,arguments)}(_.auth,N);B!==v.email&&(yield v.reload())}),Qu.apply(this,arguments)}function Kd(){return(Kd=(0,p.Z)(function*(v,h){return Se(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function yl(){return yl=(0,p.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,k.m9)(v),N={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},B=yield En(_,function ym(v,h){return Kd.apply(this,arguments)}(_.auth,N));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const Z=_.providerData.find(({providerId:ke})=>"password"===ke);Z&&(Z.displayName=_.displayName,Z.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)}),yl.apply(this,arguments)}function Jf(v,h,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(v,h,g){const{auth:_}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const B=yield En(v,Ud(_,N));yield v._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class oa{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class eu extends oa{constructor(h,g,_,S){super(h,g,_),this.username=S}}class vl extends oa{constructor(h,g){super(h,"facebook.com",g)}}class Qd extends eu{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Xu extends oa{constructor(h,g){super(h,"google.com",g)}}class tu extends eu{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Xf(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function _m(v){var h,g;if(!v)return null;const{providerId:_}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const B=null===(g=null===(h=xt(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new oa(N,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new vl(N,S);case"github.com":return new Qd(N,S);case"google.com":return new Xu(N,S);case"twitter.com":return new tu(N,S,v.screenName||null);case"custom":case"anonymous":return new oa(N,null);default:return new oa(N,_,S)}}(g)}class os{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new os("enroll",h,g)}static _fromMfaPendingCredential(h){return new os("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return os._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return os._fromIdtoken(h.multiFactorSession.idToken)}return null}}class vo{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=Jn(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(Z=>dl._fromServerResponse(_,Z));q(S.mfaPendingCredential,_,"internal-error");const B=os._fromMfaPendingCredential(S.mfaPendingCredential);return new vo(B,N,function(){var Z=(0,p.Z)(function*(ke){const Ue=yield ke._process(_,B);delete S.mfaInfo,delete S.mfaPendingCredential;const it=Object.assign(Object.assign({},S),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(g.operationType){case"signIn":const st=yield or._fromIdTokenResponse(_,g.operationType,it);return yield _._updateCurrentUser(st.user),st;case"reauthenticate":return q(g.user,_,"internal-error"),or._forOperation(g.user,g.operationType,it);default:_e(_,"internal-error")}});return function(ke){return Z.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}class nn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>dl._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new nn(h)}getSession(){var h=this;return(0,p.Z)(function*(){return os._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,p.Z)(function*(){const S=h,N=yield _.getSession(),B=yield En(_.user,S._process(_.user.auth,N,g));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield g.user.getIdToken();try{const N=yield En(g.user,function eh(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:B})=>B!==_),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const _o=new WeakMap,yr="__sak";class ip{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(yr,"1"),this.storage.removeItem(yr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const aa=(()=>{class v extends ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Il(){const v=(0,k.z$)();return ae(v)||Qn(v)}()&&function Xc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zo(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&g(_,N,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((Z,ke,Ue)=>{this.notifyListeners(Z,Ue)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(S);if(g.newValue!==Z)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const N=()=>{const Z=this.storage.getItem(S);!_&&this.localCache[S]===Z||this.notifyListeners(S,Z)},B=this.storage.getItem(S);!function Us(){return(0,k.w1)()&&10===document.documentMode}()||B===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,N=this;return(0,p.Z)(function*(){yield S().call(N,g,_),N.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,p.Z)(function*(){const N=yield _().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var _=()=>super._remove,S=this;return(0,p.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),ti=(()=>{class v extends ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return v.type="SESSION",v})();let Dl=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(N=>N.isListeningto(g));if(_)return _;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,p.Z)(function*(){const S=g,{eventId:N,eventType:B,data:Z}=S.data,ke=_.handlersMap[B];if(!ke?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:B});const Ue=Array.from(ke).map(function(){var st=(0,p.Z)(function*(Fn){return Fn(S.origin,Z)});return function(Fn){return st.apply(this,arguments)}}()),it=yield function ap(v){return Promise.all(v.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Ue);S.ports[0].postMessage({status:"done",eventId:N,eventType:B,response:it})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function tc(v="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return v+g}class Em{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var S=this;return(0,p.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let B,Z;return new Promise((ke,Ue)=>{const it=tc("",20);N.port1.start();const st=setTimeout(()=>{Ue(new Error("unsupported_event"))},_);Z={messageChannel:N,onMessage(Fn){const Qi=Fn;if(Qi.data.eventId===it)switch(Qi.data.status){case"ack":clearTimeout(st),B=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),ke(Qi.data.response);break;default:clearTimeout(st),clearTimeout(B),Ue(new Error("invalid_response"))}}},S.handlers.add(Z),N.port1.addEventListener("message",Z.onMessage),S.target.postMessage({eventType:h,eventId:it,data:g},[N.port2])}).finally(()=>{Z&&S.removeMessageHandler(Z)})})()}}function yn(){return window}function Dt(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function nh(){return(nh=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rh="firebaseLocalStorageDb",as="firebaseLocalStorage",Cl="fbase_key";class rc{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ic(v,h){return v.transaction([as],h?"readwrite":"readonly").objectStore(as)}function bl(){const v=indexedDB.open(rh,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(as,{keyPath:Cl})}catch(S){g(S)}}),v.addEventListener("success",(0,p.Z)(function*(){const _=v.result;_.objectStoreNames.contains(as)?h(_):(_.close(),yield function Dm(){const v=indexedDB.deleteDatabase(rh);return new rc(v).toPromise()}(),h(yield bl()))}))})}function Ae(v,h,g){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(v,h,g){const _=ic(v,!0).put({[Cl]:h,value:g});return new rc(_).toPromise()})).apply(this,arguments)}function sc(){return(sc=(0,p.Z)(function*(v,h){const g=ic(v,!1).get(h),_=yield new rc(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function lr(v,h){const g=ic(v,!0).delete(h);return new rc(g).toPromise()}const Io=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield bl()),g.db})()}_withRetries(g){var _=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield g(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return Dt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Dl._getInstance(function cr(){return Dt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function th(){return nh.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Em(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);N&&null!==(_=N[0])&&void 0!==_&&_.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function nc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield bl();return yield Ae(g,yr,"1"),yield lr(g,yr),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(N=>Ae(N,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,p.Z)(function*(){const S=yield _._withRetries(N=>function Gi(v,h){return sc.apply(this,arguments)}(N,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(S=>lr(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const _=yield g._withRetries(B=>{const Z=ic(B,!1).getAll();return new rc(Z).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:B,value:Z}of _)N.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(Z)&&(g.notifyListeners(B,Z),S.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!N.has(B)&&(g.notifyListeners(B,null),S.push(B));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),_i=1e12;class ih{constructor(h){this.auth=h,this.counter=_i,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Do(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||_i;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||_i))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var _;return null===(_=g._widgets.get(h||_i))||void 0===_||_.execute(),""})()}}class Do{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;q(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zs(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sh=Wo("rcb"),oh=new rr(3e4,6e4);class Cm{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=yn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return q(function uc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&js(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((_,S)=>{const N=yn().setTimeout(()=>{S(ee(h,"network-request-failed"))},oh.get());yn()[sh]=()=>{yn().clearTimeout(N),delete yn()[sh];const Z=yn().grecaptcha;if(!Z||!js(Z))return void S(ee(h,"internal-error"));const ke=Z.render;Z.render=(Ue,it)=>{const st=ke(Ue,it);return this.counter++,st},this.hostLanguage=g,_(Z)},is(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:sh,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=yn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ah{load(h){return(0,p.Z)(function*(){return new ih(h)})()}clearedOneInstance(){}}const cc="recaptcha",uh={theme:"light",type:"image"};class ch{constructor(h,g=Object.assign({},uh),_){this.parameters=g,this.type=cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jn(_),this.isInvisible="invisible"===this.parameters.size,q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;q(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ah:new Cm,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(N=>{const B=Z=>{Z&&(h.tokenChangeListeners.delete(B),N(Z))};h.tokenChangeListeners.add(B),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=yn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){q(dn()&&!Dt(),h.auth,"internal-error"),yield function cp(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Bs(v){return ji.apply(this,arguments)}(h.auth);q(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=gr._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function la(){return(la=(0,p.Z)(function*(v,h,g){const _=Jn(v),S=yield iu(_,h,(0,k.m9)(g));return new Gr(S,N=>ll(_,N))})).apply(this,arguments)}function mt(){return(mt=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v);yield na(!1,_,"phone");const S=yield iu(_.auth,h,(0,k.m9)(g));return new Gr(S,N=>gm(_,N))})).apply(this,arguments)}function lc(){return(lc=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v),S=yield iu(_.auth,h,(0,k.m9)(g));return new Gr(S,N=>mm(_,N))})).apply(this,arguments)}function iu(v,h,g){return wr.apply(this,arguments)}function wr(){return wr=(0,p.Z)(function*(v,h,g){var _;const S=yield g.verify();try{let N;if(q("string"==typeof S,v,"argument-error"),q(g.type===cc,v,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const B=N.session;if("phoneNumber"in N)return q("enroll"===B.type,v,"internal-error"),(yield function ru(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,h))}(v,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{q("signin"===B.type,v,"internal-error");const Z=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return q(Z,v,"missing-multi-factor-info"),(yield function Tl(v,h){return Se(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,h))}(v,{mfaPendingCredential:B.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function Dn(v,h){return Hr.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:S});return B}}finally{g._reset()}}),wr.apply(this,arguments)}function pn(){return(pn=(0,p.Z)(function*(v,h){yield Xr((0,k.m9)(v),h)})).apply(this,arguments)}let Co=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Jn(g)}verifyPhoneNumber(g,_){return iu(this.auth,g,(0,k.m9)(_))}static credential(g,_){return gr._fromVerification(g,_)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?gr._fromTokenResponse(_,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function us(v,h){return h?Ke(h):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Et extends ao{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ni(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Ni(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Ni(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function lh(v){return cl(v.auth,new Et(v),v.bypassAuthState)}function Al(v){const{auth:h,user:g}=v;return q(g,h,"internal-error"),pm(g,new Et(v),v.bypassAuthState)}function da(v){return zi.apply(this,arguments)}function zi(){return(zi=(0,p.Z)(function*(v){const{auth:h,user:g}=v;return q(g,h,"internal-error"),Xr(g,new Et(v),v.bypassAuthState)})).apply(this,arguments)}class qi{constructor(h,g,_,S,N=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:B,error:Z,type:ke}=h;if(Z)return void g.reject(Z);const Ue={auth:g.auth,requestUri:_,sessionId:S,tenantId:B||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ue))}catch(it){g.reject(it)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return lh;case"linkViaPopup":case"linkViaRedirect":return da;case"reauthViaPopup":case"reauthViaRedirect":return Al;default:_e(this.auth,"internal-error")}}resolve(h){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const On=new rr(2e3,1e4);function bo(){return(bo=(0,p.Z)(function*(v,h,g){const _=Jn(v);Pe(v,h,ir);const S=us(_,g);return new To(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,ir);const S=us(_.auth,g);return new To(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,ir);const S=us(_.auth,g);return new To(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let To=(()=>{class v extends qi{constructor(g,_,S,N,B){super(g,_,N,B),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const _=yield g.execute();return q(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,p.Z)(function*(){ht(1===g.filter.length,"Popup operations only handle one event");const _=tc();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,On.get())};g()}}return v.currentPopupAction=null,v})();const Ys="pendingRedirect",cs=new Map;class Ml extends qi{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let _=cs.get(g.auth._key());if(!_){try{const N=(yield function xl(v,h){return hc.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}cs.set(g.auth._key(),_)}return g.bypassAuthState||cs.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function hc(){return(hc=(0,p.Z)(function*(v,h){const g=pa(h),_=hh(v);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function su(v,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,p.Z)(function*(v,h){return hh(v)._set(pa(h),"true")})).apply(this,arguments)}function ri(v,h){cs.set(v._key(),h)}function hh(v){return Ke(v._redirectPersistence)}function pa(v){return U(Ys,v.config.apiKey,v.name)}function ii(v,h,g){return function Er(v,h,g){return wi.apply(this,arguments)}(v,h,g)}function wi(){return(wi=(0,p.Z)(function*(v,h,g){const _=Jn(v);Pe(v,h,ir),yield _._initializationPromise;const S=us(_,g);return yield su(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function ga(v,h,g){return function si(v,h,g){return Or.apply(this,arguments)}(v,h,g)}function Or(){return(Or=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,ir),yield _.auth._initializationPromise;const S=us(_.auth,g);yield su(S,_.auth);const N=yield au(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function ou(v,h,g){return function fh(v,h,g){return Nl.apply(this,arguments)}(v,h,g)}function Nl(){return(Nl=(0,p.Z)(function*(v,h,g){const _=(0,k.m9)(v);Pe(_.auth,h,ir),yield _.auth._initializationPromise;const S=us(_.auth,g);yield na(!1,_,h.providerId),yield su(S,_.auth);const N=yield au(_);return S._openRedirect(_.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(v,h){return yield Jn(v)._initializationPromise,Pn(v,h,!1)})).apply(this,arguments)}function Pn(v,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(v,h,g=!1){const _=Jn(v),S=us(_,h),B=yield new Ml(_,S,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,h)),B})).apply(this,arguments)}function au(v){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,p.Z)(function*(v){const h=tc(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class fc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function pc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mo(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!Mo(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ee(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uu(h))}saveEventToCache(h){this.cachedEventUids.add(uu(h)),this.lastProcessedEventTime=Date.now()}}function uu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Mo({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function ph(v){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(v,h={}){return Se(v,"GET","/v1/projects",h)})).apply(this,arguments)}const xo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,No=/^https?/;function bs(){return(bs=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield ph(v);for(const g of h)try{if(Rl(g))return}catch{}_e(v,"unauthorized-domain")})).apply(this,arguments)}function Rl(v){const h=Qt(),{protocol:g,hostname:_}=new URL(h);if(v.startsWith("chrome-extension://")){const B=new URL(v);return""===B.hostname&&""===_?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===_}if(!No.test(g))return!1;if(xo.test(v))return _===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const oi=new rr(3e4,6e4);function Ol(){const v=yn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ki=null;const Pl=new rr(5e3,15e3),dp="__/auth/iframe",kl="emulator/auth/iframe",gc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(v){const h=v.config;q(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?ie(h,kl):`https://${v.config.authDomain}/${dp}`,_={apiKey:h.apiKey,appName:v.name,v:Q.SDK_VERSION},S=ya.get(v.config.apiHost);S&&(_.eid=S);const N=v._getFrameworks();return N.length&&(_.fw=N.join(",")),`${g}?${(0,k.xO)(_).slice(1)}`}function C(){return C=(0,p.Z)(function*(v){const h=yield function Qs(v){return Ki=Ki||function kn(v){return new Promise((h,g)=>{var _,S,N;function B(){Ol(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ol(),g(ee(v,"network-request-failed"))},timeout:oi.get()})}if(null!==(S=null===(_=yn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=yn().gapi)||void 0===N||!N.load){const Z=Wo("iframefcb");return yn()[Z]=()=>{gapi.load?B():g(ee(v,"network-request-failed"))},is(`https://apis.google.com/js/api.js?onload=${Z}`).catch(ke=>g(ke))}B()}}).catch(h=>{throw Ki=null,h})}(v),Ki}(v),g=yn().gapi;return q(g,v,"internal-error"),h.open({where:document.body,url:va(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gc,dontclear:!0},_=>new Promise(function(){var S=(0,p.Z)(function*(N,B){yield _.restyle({setHideOnLeave:!1});const Z=ee(v,"network-request-failed"),ke=yn().setTimeout(()=>{B(Z)},Pl.get());function Ue(){yn().clearTimeout(ke),N(_)}_.ping(Ue).then(Ue,()=>{B(Z)})});return function(N,B){return S.apply(this,arguments)}}()))}),C.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ye{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Mt="__/auth/handler",St="emulator/auth/handler",Gn=encodeURIComponent("fac");function Xn(v,h,g,_,S,N){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(v,h,g,_,S,N){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const B={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:_,v:Q.SDK_VERSION,eventId:S};if(h instanceof ir){h.setDefaultLanguage(v.languageCode),B.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[it,st]of Object.entries(N||{}))B[it]=st}if(h instanceof ws){const it=h.getScopes().filter(st=>""!==st);it.length>0&&(B.scopes=it.join(","))}v.tenantId&&(B.tid=v.tenantId);const Z=B;for(const it of Object.keys(Z))void 0===Z[it]&&delete Z[it];const ke=yield v._getAppCheckToken(),Ue=ke?`#${Gn}=${encodeURIComponent(ke)}`:"";return`${function zn({config:v}){return v.emulator?ie(v,St):`https://${v.authDomain}/${Mt}`}(v)}?${(0,k.xO)(Z).slice(1)}${Ue}`})).apply(this,arguments)}const Ss="webStorageSupport",ls=class dr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ti,this._completeRedirectFn=Pn,this._overrideRedirectResult=ri}_openPopup(h,g,_,S){var N=this;return(0,p.Z)(function*(){var B;ht(null===(B=N.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Z=yield Xn(h,g,_,Qt(),S);return function ze(v,h,g,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let Z="";const ke=Object.assign(Object.assign({},A),{width:_.toString(),height:S.toString(),top:N,left:B}),Ue=(0,k.z$)().toLowerCase();g&&(Z=tt(Ue)?"_blank":g),De(Ue)&&(h=h||"http://localhost",ke.scrollbars="yes");const it=Object.entries(ke).reduce((Fn,[Qi,Ia])=>`${Fn}${Qi}=${Ia},`,"");if(function fr(v=(0,k.z$)()){var h;return Qn(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ue)&&"_self"!==Z)return function ot(v,h){const g=document.createElement("a");g.href=v,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",Z),new Ye(null);const st=window.open(h||"",Z,it);q(st,v,"popup-blocked");try{st.focus()}catch{}return new Ye(st)}(h,Z,tc())})()}_openRedirect(h,g,_,S){var N=this;return(0,p.Z)(function*(){return yield N._originValidation(h),function Im(v){yn().location.href=v}(yield Xn(h,g,_,Qt(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(ht(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const _=yield function I(v){return C.apply(this,arguments)}(h),S=new fc(h);return _.register("authEvent",N=>(q(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Ss,{type:Ss},S=>{var N;const B=null===(N=S?.[0])||void 0===N?void 0:N[Ss];void 0!==B&&g(!!B),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ma(v){return bs.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return zo()||ae()||Qn()}};class ai{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return je("unexpected MultiFactorSessionType")}}}class _a extends ai{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new _a(h)}_finalizeEnroll(h,g,_){return function rp(v,h){return Se(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function up(v,h){return Se(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bm=(()=>{class v{constructor(){}static assertion(g){return _a._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Sm="@firebase/auth";class Yi{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}(0,k.Pz)("authIdTokenMaxAge"),function mc(v){(0,Q._registerComponent)(new pe.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:B,authDomain:Z}=_.options;q(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const ke={apiKey:B,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rs(v)},Ue=new nl(_,S,N,ke);return function zf(v,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(Ke);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(_,h?.popupRedirectResolver)}(Ue,g),Ue},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,Q._registerComponent)(new pe.wA("auth-internal",h=>{const g=Jn(h.getProvider("auth").getImmediate());return new Yi(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)(Sm,"0.23.2",function pp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,Q.registerVersion)(Sm,"0.23.2","esm2017")}("Browser");function Oo(){return Oo=(0,p.Z)(function*(v,h,g){var _;const{BuildInfo:S}=wa();ht(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function xm(v){return Ll.apply(this,arguments)}(h.sessionId),B={};return Qn()?B.ibi=S.packageName:Tt()?B.apn=S.packageName:_e(v,"operation-not-supported-in-this-environment"),S.displayName&&(B.appDisplayName=S.displayName),B.sessionId=N,Xn(v,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,B)}),Oo.apply(this,arguments)}function mh(){return(mh=(0,p.Z)(function*(v){const{BuildInfo:h}=wa(),g={};Qn()?g.iosBundleId=h.packageName:Tt()?g.androidPackageName=h.packageName:_e(v,"operation-not-supported-in-this-environment"),yield ph(v,g)})).apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(v,h,g){const{cordova:_}=wa();let S=()=>{};try{yield new Promise((N,B)=>{let Z=null;function ke(){var st;N();const Fn=null===(st=_.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Fn&&Fn(),"function"==typeof g?.close&&g.close()}function Ue(){Z||(Z=window.setTimeout(()=>{B(ee(v,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Ue()}h.addPassiveListener(ke),document.addEventListener("resume",Ue,!1),Tt()&&document.addEventListener("visibilitychange",it,!1),S=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ue,!1),document.removeEventListener("visibilitychange",it,!1),Z&&window.clearTimeout(Z)}})}finally{S()}})).apply(this,arguments)}function Ll(){return(Ll=(0,p.Z)(function*(v){const h=function Vl(v){if(ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let _=0;_<v.length;_++)g[_]=v.charCodeAt(_);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class s_ extends fc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function lu(v){return yh.apply(this,arguments)}function yh(){return(yh=(0,p.Z)(function*(v){const h=yield wc()._get(ko(v));return h&&(yield wc()._remove(ko(v))),h})).apply(this,arguments)}function As(){const v=[];for(let g=0;g<20;g++){const _=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return v.join("")}function wc(){return Ke(aa)}function ko(v){return U("authEvent",v.config.apiKey,v.name)}function du(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,k.zd)(g.join("?"))}const o_=class Nm{constructor(){this._redirectPersistence=ti,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pn,this._overrideRedirectResult=ri}_initialize(h){var g=this;return(0,p.Z)(function*(){const _=h._key();let S=g.eventManagers.get(_);return S||(S=new s_(h),g.eventManagers.set(_,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,S){var N=this;return(0,p.Z)(function*(){!function i_(v){var h,g,_,S,N,B,Z,ke,Ue,it;const st=wa();q("function"==typeof(null===(h=st?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof(null===(g=st?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(N=null===(S=null===(_=st?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(ke=null===(Z=null===(B=st?.cordova)||void 0===B?void 0:B.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===ke?void 0:ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(it=null===(Ue=st?.cordova)||void 0===Ue?void 0:Ue.InAppBrowser)||void 0===it?void 0:it.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield N._initialize(h);yield B.initialized(),B.resetRedirect(),function dh(){cs.clear()}(),yield N._originValidation(h);const Z=function mp(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:As(),postBody:null,tenantId:v.tenantId,error:ee(v,"no-auth-event")}}(h,_,S);yield function _c(v,h){return wc()._set(ko(v),h)}(h,Z);const ke=yield function gh(v,h,g){return Oo.apply(this,arguments)}(h,Z,g),Ue=yield function Fl(v){const{cordova:h}=wa();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(v):S=h.InAppBrowser.open(v,function Yt(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(S)})})}(ke);return function r_(v,h,g){return Po.apply(this,arguments)}(h,B,Ue)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function yc(v){return mh.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=wa(),B=setTimeout((0,p.Z)(function*(){yield lu(h),g.onEvent(yp())}),500),Z=function(){var it=(0,p.Z)(function*(st){clearTimeout(B);const Fn=yield lu(h);let Qi=null;Fn&&st?.url&&(Qi=function vh(v,h){var g,_;const S=function Ec(v){const h=du(v),g=h.link?decodeURIComponent(h.link):void 0,_=du(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return du(S).link||S||_||g||v}(h);if(S.includes("/__/auth/callback")){const N=du(S),B=N.firebaseError?function Ul(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,Z=null===(_=null===(g=B?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],ke=Z?ee(Z):null;return ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(Fn,st.url)),g.onEvent(Qi||yp())});return function(Fn){return it.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Z);const ke=S,Ue=`${N.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var it=(0,p.Z)(function*(st){if(st.toLowerCase().startsWith(Ue)&&Z({url:st}),"function"==typeof ke)try{ke(st)}catch(Fn){console.error(Fn)}});return function(st){return it.apply(this,arguments)}}()}};function yp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function jl(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function u_(v=(0,k.z$)()){return!("file:"!==jl()&&"ionic:"!==jl()&&"capacitor:"!==jl()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function l_(){try{const v=self.localStorage,h=tc();if(v)return v.setItem(h,"1"),v.removeItem(h),!function NT(v=(0,k.z$)()){return function $l(){return(0,k.w1)()&&11===document?.documentMode}()||function Om(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Ic()&&(0,k.hl)()}return!1}function Ic(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _p(){return(function vp(){return"http:"===jl()||"https:"===jl()}()||(0,k.ru)()||u_())&&!function c_(){return(0,k.b$)()||(0,k.UG)()}()&&l_()&&!Ic()}function _h(){return u_()&&typeof document<"u"}function Pi(){return(Pi=(0,p.Z)(function*(){return!!_h()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Ei={LOCAL:"local",NONE:"none",SESSION:"session"},fu=q,pu="persistence";function Hl(v){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,p.Z)(function*(v){yield v._initializationPromise;const h=bc(),g=U(pu,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function bc(){var v;try{return(null===(v=function hu(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const wp=q;class Fo{constructor(){this.browserResolver=Ke(ls),this.cordovaResolver=Ke(o_),this.underlyingResolver=null,this._redirectPersistence=ti,this._completeRedirectFn=Pn,this._overrideRedirectResult=ri}_initialize(h){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,S){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,_,S)})()}_openRedirect(h,g,_,S){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,_,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return _h()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Dc(){return Pi.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function wh(v){return v.unwrap()}function Ih(v){return Gl(v)}function Gl(v){const{_tokenResponse:h}=v instanceof k.ZR?v.customData:v;if(!h)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Co.credentialFromResult(v);const g=h.providerId;if(!g||g===ue.PASSWORD)return null;let _;switch(g){case ue.GOOGLE:_=Ri;break;case ue.FACEBOOK:_=Hs;break;case ue.GITHUB:_=Wa;break;case ue.TWITTER:_=Zu;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:B,pendingToken:Z,nonce:ke}=h;return N||B||S||Z?Z?g.startsWith("saml.")?Lt._create(g,Z):wt._fromParams({providerId:g,signInMethod:g,pendingToken:Z,idToken:S,accessToken:N}):new Es(g).credential({idToken:S,accessToken:N,rawNonce:ke}):null}return v instanceof k.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function Ii(v,h){return h.catch(g=>{throw g instanceof k.ZR&&function d_(v,h){var g;const _=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new h_(v,function Jd(v,h){var g;const _=(0,k.m9)(v),S=h;return q(h.customData.operationType,_,"argument-error"),q(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),vo._fromError(_,S)}(v,h));else if(_){const S=Gl(h),N=h;S&&(N.credential=S,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(v,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Ih(g),additionalUserInfo:Xf(g),user:er.getOrCreate(S)}})}function Dh(v,h){return yu.apply(this,arguments)}function yu(){return(yu=(0,p.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>Ii(v,g.confirm(_))}})).apply(this,arguments)}class h_{constructor(h,g){this.resolver=g,this.auth=function Eh(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ii(wh(this.auth),this.resolver.resolveSignIn(h))}}class er{constructor(h){this._delegate=h,this.multiFactor=function wo(v){const h=(0,k.m9)(v);return _o.has(h)||_o.set(h,nn._fromUser(h)),_o.get(h)}(h)}static getOrCreate(h){return er.USER_MAP.has(h)||er.USER_MAP.set(h,new er(h)),er.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,p.Z)(function*(){return Ii(g.auth,gm(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,p.Z)(function*(){return Dh(_.auth,function An(v,h,g){return mt.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,p.Z)(function*(){return Ii(g.auth,function lp(v,h,g){return Ks.apply(this,arguments)}(g._delegate,h,Fo))})()}linkWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield Hl(Jn(g.auth)),ou(g._delegate,h,Fo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,p.Z)(function*(){return Ii(g.auth,mm(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Dh(this.auth,function zr(v,h,g){return lc.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Ii(this.auth,function dc(v,h,g){return fa.apply(this,arguments)}(this._delegate,h,Fo))}reauthenticateWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield Hl(Jn(g.auth)),ga(g._delegate,h,Fo)})()}sendEmailVerification(h){return function qs(v,h){return Xa.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,p.Z)(function*(){return yield function ho(v,h){return vi.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Yd(v,h){return Jf((0,k.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Ju(v,h){return Jf((0,k.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ds(v,h){return pn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function vm(v,h){return yl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Zd(v,h,g){return Qu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}er.USER_MAP=new WeakMap;const Lo=q;let Ch=(()=>{class v{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Lo(S,"invalid-api-key",{appName:g.name}),Lo(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Fo:void 0;this._delegate=_.initialize({options:{persistence:ui(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?er.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Jr(v,h,g){const _=Jn(v);q(_._canInitEmulator,_,"emulator-config-failed"),q(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Yo(h),{host:B,port:Z}=function rl(v){const h=Yo(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:Vd(_.substr(N.length+1))}}{const[N,B]=_.split(":");return{host:N,port:Vd(B)}}}(h);_.config.emulator={url:`${N}//${B}${null===Z?"":`:${Z}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:Z,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function hm(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,_)}applyActionCode(g){return function zd(v,h){return Oi.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return nr(this._delegate,g)}confirmPasswordReset(g,_){return function fo(v,h,g){return ss.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,p.Z)(function*(){return Ii(S._delegate,function fl(v,h,g){return Ya.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ja(v,h){return mo.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Wd(v,h){const g=Cn.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){Lo(_p(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function Ir(v,h){return So.apply(this,arguments)}(g._delegate,Fo);return _?Ii(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function LE(v,h){Jn(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:N,error:B,complete:Z}=zl(g,_,S);return this._delegate.onAuthStateChanged(N,B,Z)}onIdTokenChanged(g,_,S){const{next:N,error:B,complete:Z}=zl(g,_,S);return this._delegate.onIdTokenChanged(N,B,Z)}sendSignInLinkToEmail(g,_){return function ia(v,h,g){return Qa.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Xv(v,h,g){return Ka.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,p.Z)(function*(){let S;switch(function gu(v,h){fu(Object.values(Ei).includes(h),v,"invalid-persistence-type"),(0,k.b$)()?fu(h!==Ei.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?fu(h===Ei.NONE,v,"unsupported-persistence-type"):Ic()?fu(h===Ei.NONE||h===Ei.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):fu(h===Ei.NONE||l_(),v,"unsupported-persistence-type")}(_._delegate,g),g){case Ei.SESSION:S=ti;break;case Ei.LOCAL:S=(yield Ke(Io)._isAvailable())?Io:aa;break;case Ei.NONE:S=Jt;break;default:return _e("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ii(this._delegate,function mr(v){return Kf.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ii(this._delegate,ll(this._delegate,g))}signInWithCustomToken(g){return Ii(this._delegate,function Gd(v,h){return Is.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return Ii(this._delegate,function qd(v,h,g){return ll((0,k.m9)(v),co.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return Ii(this._delegate,function ur(v,h,g){return pl.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return Dh(this._delegate,function ca(v,h,g){return la.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,p.Z)(function*(){return Lo(_p(),_._delegate,"operation-not-supported-in-this-environment"),Ii(_._delegate,function ha(v,h,g){return bo.apply(this,arguments)}(_._delegate,g,Fo))})()}signInWithRedirect(g){var _=this;return(0,p.Z)(function*(){return Lo(_p(),_._delegate,"operation-not-supported-in-this-environment"),yield Hl(_._delegate),ii(_._delegate,g,Fo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function ei(v,h){return go.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ei,v})();function zl(v,h,g){let _=v;"function"!=typeof v&&({next:_,error:h,complete:g}=v);const S=_;return{next:B=>S(B&&er.getOrCreate(B)),error:h,complete:g}}function ui(v,h){const g=function mu(v,h){const g=bc();if(!g)return[];const _=U(pu,v,h);switch(g.getItem(_)){case Ei.NONE:return[Jt];case Ei.LOCAL:return[Io,ti];case Ei.SESSION:return[ti];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(Io)&&g.push(Io),typeof window<"u")for(const _ of[aa,ti])g.includes(_)||g.push(_);return g.includes(Jt)||g.push(Jt),g}class Ea{constructor(){this.providerId="phone",this._delegate=new Co(wh(Y.Z.auth()))}static credential(h,g){return Co.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ea.PHONE_SIGN_IN_METHOD=Co.PHONE_SIGN_IN_METHOD,Ea.PROVIDER_ID=Co.PROVIDER_ID;const Ep=q;class Pm{constructor(h,g,_=Y.Z.app()){var S;Ep(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ch(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function f_(v){v.INTERNAL.registerComponent(new pe.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Ch(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:co,FacebookAuthProvider:Hs,GithubAuthProvider:Wa,GoogleAuthProvider:Ri,OAuthProvider:Es,SAMLAuthProvider:ea,PhoneAuthProvider:Ea,PhoneMultiFactorGenerator:bm,RecaptchaVerifier:Pm,TwitterAuthProvider:Zu,Auth:Ch,AuthCredential:ao,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},4303:(at,Ce,P)=>{P.d(Ce,{Jn:()=>mn,KN:()=>$n,Xd:()=>Ze,qX:()=>Ge});var p=P(5861),Y=P(4537),k=P(7879),Q=P(9058),ne=P(1878);class fe{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function pe(ye){const H=ye.getComponent();return"VERSION"===H?.type}(ge)){const $e=ge.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(ge=>ge).join(" ")}}const xe="@firebase/app",L=new k.Yd("@firebase/app"),de={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},he=new Map,me=new Map;function Ie(ye,H){try{ye.container.addComponent(H)}catch(ge){L.debug(`Component ${H.name} failed to register with FirebaseApp ${ye.name}`,ge)}}function Ze(ye){const H=ye.name;if(me.has(H))return L.debug(`There were multiple attempts to register component ${H}.`),!1;me.set(H,ye);for(const ge of he.values())Ie(ge,ye);return!0}function Ge(ye,H){const ge=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),ye.container.getProvider(H)}const ut=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),mn="10.4.0";function $n(ye,H,ge){var $e;let Ke=null!==($e=de[ye])&&void 0!==$e?$e:ye;ge&&(Ke+=`-${ge}`);const ft=Ke.match(/\s|\//),Jt=H.match(/\s|\//);if(ft||Jt){const U=[`Unable to register library "${Ke}" with version "${H}":`];return ft&&U.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),ft&&Jt&&U.push("and"),Jt&&U.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void L.warn(U.join(" "))}Ze(new Y.wA(`${Ke}-version`,()=>({library:Ke,version:H}),"VERSION"))}const so="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let xt=null;function cn(){return xt||(xt=(0,ne.X3)(so,_t,{upgrade:(ye,H)=>{0===H&&ye.createObjectStore(bt)}}).catch(ye=>{throw ut.create("idb-open",{originalErrorMessage:ye.message})})),xt}function Yn(){return(Yn=(0,p.Z)(function*(ye){try{return yield(yield cn()).transaction(bt).objectStore(bt).get(ms(ye))}catch(H){if(H instanceof Q.ZR)L.warn(H.message);else{const ge=ut.create("idb-get",{originalErrorMessage:H?.message});L.warn(ge.message)}}})).apply(this,arguments)}function tn(ye,H){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(ye,H){try{const $e=(yield cn()).transaction(bt,"readwrite");yield $e.objectStore(bt).put(H,ms(ye)),yield $e.done}catch(ge){if(ge instanceof Q.ZR)L.warn(ge.message);else{const $e=ut.create("idb-set",{originalErrorMessage:ge?.message});L.warn($e.message)}}})).apply(this,arguments)}function ms(ye){return`${ye.name}!${ye.options.appId}`}class Kt{constructor(H){this.container=H,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new Vs(ge),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var H=this;return(0,p.Z)(function*(){const $e=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=yi();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!H._heartbeatsCache.heartbeats.some(ft=>ft.date===Ke))return H._heartbeatsCache.heartbeats.push({date:Ke,agent:$e}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(ft=>{const Jt=new Date(ft.date).valueOf();return Date.now()-Jt<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,p.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const ge=yi(),{heartbeatsToSend:$e,unsentEntries:Ke}=function ys(ye,H=1024){const ge=[];let $e=ye.slice();for(const Ke of ye){const ft=ge.find(Jt=>Jt.agent===Ke.agent);if(ft){if(ft.dates.push(Ke.date),Mr(ge)>H){ft.dates.pop();break}}else if(ge.push({agent:Ke.agent,dates:[Ke.date]}),Mr(ge)>H){ge.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:ge,unsentEntries:$e}}(H._heartbeatsCache.heartbeats),ft=(0,Q.L)(JSON.stringify({version:2,heartbeats:$e}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,Ke.length>0?(H._heartbeatsCache.heartbeats=Ke,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ft})()}}function yi(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,p.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function En(ye){return Yn.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var ge=this;return(0,p.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ge=this;return(0,p.Z)(function*(){var $e;if(yield ge._canUseIndexedDBPromise){const ft=yield ge.read();return tn(ge.app,{lastSentHeartbeatDate:null!==($e=H.lastSentHeartbeatDate)&&void 0!==$e?$e:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...H.heartbeats]})}})()}}function Mr(ye){return(0,Q.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function ns(ye){Ze(new Y.wA("platform-logger",H=>new fe(H),"PRIVATE")),Ze(new Y.wA("heartbeat",H=>new Kt(H),"PRIVATE")),$n(xe,"0.9.19",ye),$n(xe,"0.9.19","esm2017"),$n("fire-js","")}("")},4537:(at,Ce,P)=>{P.d(Ce,{H0:()=>xe,wA:()=>k});var p=P(5861),Y=P(9058);class k{constructor(L,j,J){this.name=L,this.instanceFactory=j,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const Q="[DEFAULT]";class ne{constructor(L,j){this.name=L,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const j=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(j)){const J=new Y.BH;if(this.instancesDeferred.set(j,J),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&J.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(L){var j;const J=this.normalizeInstanceIdentifier(L?.identifier),Ve=null!==(j=L?.optional)&&void 0!==j&&j;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Te){if(Ve)return null;throw Te}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function pe(ue){return"EAGER"===ue.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[j,J]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:Ve});J.resolve(Te)}catch{}}}}clearInstance(L=Q){this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}delete(){var L=this;return(0,p.Z)(function*(){const j=Array.from(L.instances.values());yield Promise.all([...j.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...j.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(L=Q){return this.instances.has(L)}getOptions(L=Q){return this.instancesOptions.get(L)||{}}initialize(L={}){const{options:j={}}=L,J=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:J,options:j});for(const[Te,qe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Te)&&qe.resolve(Ve);return Ve}onInit(L,j){var J;const Ve=this.normalizeInstanceIdentifier(j),Te=null!==(J=this.onInitCallbacks.get(Ve))&&void 0!==J?J:new Set;Te.add(L),this.onInitCallbacks.set(Ve,Te);const qe=this.instances.get(Ve);return qe&&L(qe,Ve),()=>{Te.delete(L)}}invokeOnInitCallbacks(L,j){const J=this.onInitCallbacks.get(j);if(J)for(const Ve of J)try{Ve(L,j)}catch{}}getOrInitializeService({instanceIdentifier:L,options:j={}}){let J=this.instances.get(L);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=L,ue===Q?void 0:ue),options:j}),this.instances.set(L,J),this.instancesOptions.set(L,j),this.invokeOnInitCallbacks(J,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,J)}catch{}var ue;return J||null}normalizeInstanceIdentifier(L=Q){return this.component?this.component.multipleInstances?L:Q:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xe{constructor(L){this.name=L,this.providers=new Map}addComponent(L){const j=this.getProvider(L.name);if(j.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);j.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const j=new ne(L,this);return this.providers.set(L,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(at,Ce,P)=>{P.d(Ce,{Am:()=>ue,Ub:()=>xe,Yd:()=>pe,in:()=>Y});const p=[];var Y=function(L){return L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",L}(Y||{});const k={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Q=Y.INFO,ne={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=(L,j,...J)=>{if(j<L.logLevel)return;const Ve=(new Date).toISOString(),Te=ne[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${Ve}]  ${L.name}:`,...J)};class pe{constructor(j){this.name=j,this._logLevel=Q,this._logHandler=fe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Y))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...j),this._logHandler(this,Y.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...j),this._logHandler(this,Y.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...j),this._logHandler(this,Y.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...j),this._logHandler(this,Y.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...j),this._logHandler(this,Y.ERROR,...j)}}function xe(L){p.forEach(j=>{j.setLogLevel(L)})}function ue(L,j){for(const J of p){let Ve=null;j&&j.level&&(Ve=k[j.level]),J.userLogHandler=null===L?null:(Te,qe,...Re)=>{const We=Re.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");qe>=(Ve??Te.logLevel)&&L({level:Y[qe].toLowerCase(),message:We,args:Re,type:Te.name})}}}},1878:(at,Ce,P)=>{P.d(Ce,{X3:()=>lt});var p=P(5861);const Y=(oe,q)=>q.some(je=>oe instanceof je);let k,Q;const pe=new WeakMap,xe=new WeakMap,ue=new WeakMap,L=new WeakMap,j=new WeakMap;let Te={get(oe,q,je){if(oe instanceof IDBTransaction){if("done"===q)return xe.get(oe);if("objectStoreNames"===q)return oe.objectStoreNames||ue.get(oe);if("store"===q)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Oe(oe[q])},set:(oe,q,je)=>(oe[q]=je,!0),has:(oe,q)=>oe instanceof IDBTransaction&&("done"===q||"store"===q)||q in oe};function We(oe){return"function"==typeof oe?function Re(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...q){return oe.apply(ct(this),q),Oe(pe.get(this))}:function(...q){return Oe(oe.apply(ct(this),q))}:function(q,...je){const ht=oe.call(ct(this),q,...je);return ue.set(ht,q.sort?q.sort():[q]),Oe(ht)}}(oe):(oe instanceof IDBTransaction&&function Ve(oe){if(xe.has(oe))return;const q=new Promise((je,ht)=>{const Qt=()=>{oe.removeEventListener("complete",dn),oe.removeEventListener("error",hn),oe.removeEventListener("abort",hn)},dn=()=>{je(),Qt()},hn=()=>{ht(oe.error||new DOMException("AbortError","AbortError")),Qt()};oe.addEventListener("complete",dn),oe.addEventListener("error",hn),oe.addEventListener("abort",hn)});xe.set(oe,q)}(oe),Y(oe,function ne(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Te):oe)}function Oe(oe){if(oe instanceof IDBRequest)return function J(oe){const q=new Promise((je,ht)=>{const Qt=()=>{oe.removeEventListener("success",dn),oe.removeEventListener("error",hn)},dn=()=>{je(Oe(oe.result)),Qt()},hn=()=>{ht(oe.error),Qt()};oe.addEventListener("success",dn),oe.addEventListener("error",hn)});return q.then(je=>{je instanceof IDBCursor&&pe.set(je,oe)}).catch(()=>{}),j.set(q,oe),q}(oe);if(L.has(oe))return L.get(oe);const q=We(oe);return q!==oe&&(L.set(oe,q),j.set(q,oe)),q}const ct=oe=>j.get(oe);function lt(oe,q,{blocked:je,upgrade:ht,blocking:Qt,terminated:dn}={}){const hn=indexedDB.open(oe,q),xn=Oe(hn);return ht&&hn.addEventListener("upgradeneeded",Tn=>{ht(Oe(hn.result),Tn.oldVersion,Tn.newVersion,Oe(hn.transaction),Tn)}),je&&hn.addEventListener("blocked",Tn=>je(Tn.oldVersion,Tn.newVersion,Tn)),xn.then(Tn=>{dn&&Tn.addEventListener("close",()=>dn()),Qt&&Tn.addEventListener("versionchange",rr=>Qt(rr.oldVersion,rr.newVersion,rr))}).catch(()=>{}),xn}const _e=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],Ee=new Map;function Pe(oe,q){if(!(oe instanceof IDBDatabase)||q in oe||"string"!=typeof q)return;if(Ee.get(q))return Ee.get(q);const je=q.replace(/FromIndex$/,""),ht=q!==je,Qt=ee.includes(je);if(!(je in(ht?IDBIndex:IDBObjectStore).prototype)||!Qt&&!_e.includes(je))return;const dn=function(){var hn=(0,p.Z)(function*(xn,...Tn){const rr=this.transaction(xn,Qt?"readwrite":"readonly");let ie=rr.store;return ht&&(ie=ie.index(Tn.shift())),(yield Promise.all([ie[je](...Tn),Qt&&rr.done]))[0]});return function(Tn){return hn.apply(this,arguments)}}();return Ee.set(q,dn),dn}!function qe(oe){Te=oe(Te)}(oe=>({...oe,get:(q,je,ht)=>Pe(q,je)||oe.get(q,je,ht),has:(q,je)=>!!Pe(q,je)||oe.has(q,je)}))},5861:(at,Ce,P)=>{function p(k,Q,ne,fe,pe,xe,ue){try{var L=k[xe](ue),j=L.value}catch(J){return void ne(J)}L.done?Q(j):Promise.resolve(j).then(fe,pe)}function Y(k){return function(){var Q=this,ne=arguments;return new Promise(function(fe,pe){var xe=k.apply(Q,ne);function ue(j){p(xe,fe,pe,ue,L,"next",j)}function L(j){p(xe,fe,pe,ue,L,"throw",j)}ue(void 0)})}}P.d(Ce,{Z:()=>Y})},7582:(at,Ce,P)=>{function Q(ie,de){var he={};for(var me in ie)Object.prototype.hasOwnProperty.call(ie,me)&&de.indexOf(me)<0&&(he[me]=ie[me]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(me=Object.getOwnPropertySymbols(ie);Ie<me.length;Ie++)de.indexOf(me[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ie,me[Ie])&&(he[me[Ie]]=ie[me[Ie]])}return he}function J(ie,de,he,me){return new(he||(he=Promise))(function(Se,Ze){function Ge(qt){try{gt(me.next(qt))}catch(ut){Ze(ut)}}function Nn(qt){try{gt(me.throw(qt))}catch(ut){Ze(ut)}}function gt(qt){qt.done?Se(qt.value):function Ie(Se){return Se instanceof he?Se:new he(function(Ze){Ze(Se)})}(qt.value).then(Ge,Nn)}gt((me=me.apply(ie,de||[])).next())})}function re(ie){return this instanceof re?(this.v=ie,this):new re(ie)}function _e(ie,de,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=he.apply(ie,de||[]),Se=[];return Ie={},Ze("next"),Ze("throw"),Ze("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Ze(fn){me[fn]&&(Ie[fn]=function(mn){return new Promise(function(Kn,rn){Se.push([fn,mn,Kn,rn])>1||Ge(fn,mn)})})}function Ge(fn,mn){try{!function Nn(fn){fn.value instanceof re?Promise.resolve(fn.value.v).then(gt,qt):ut(Se[0][2],fn)}(me[fn](mn))}catch(Kn){ut(Se[0][3],Kn)}}function gt(fn){Ge("next",fn)}function qt(fn){Ge("throw",fn)}function ut(fn,mn){fn(mn),Se.shift(),Se.length&&Ge(Se[0][0],Se[0][1])}}function Ee(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,de=ie[Symbol.asyncIterator];return de?de.call(ie):(ie=function Re(ie){var de="function"==typeof Symbol&&Symbol.iterator,he=de&&ie[de],me=0;if(he)return he.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&me>=ie.length&&(ie=void 0),{value:ie&&ie[me++],done:!ie}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),he={},me("next"),me("throw"),me("return"),he[Symbol.asyncIterator]=function(){return this},he);function me(Se){he[Se]=ie[Se]&&function(Ze){return new Promise(function(Ge,Nn){!function Ie(Se,Ze,Ge,Nn){Promise.resolve(Nn).then(function(gt){Se({value:gt,done:Ge})},Ze)}(Ge,Nn,(Ze=ie[Se](Ze)).done,Ze.value)})}}}P.d(Ce,{FC:()=>_e,KL:()=>Ee,_T:()=>Q,mG:()=>J,qq:()=>re}),"function"==typeof SuppressedError&&SuppressedError}},at=>{at(at.s=1194)}]);